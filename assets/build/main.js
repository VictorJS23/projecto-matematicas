(()=>{var jk=Object.create;var Yc=Object.defineProperty,Yk=Object.defineProperties,Jk=Object.getOwnPropertyDescriptor,Qk=Object.getOwnPropertyDescriptors,Xk=Object.getOwnPropertyNames,vh=Object.getOwnPropertySymbols,Zk=Object.getPrototypeOf,Eh=Object.prototype.hasOwnProperty,eE=Object.prototype.propertyIsEnumerable;var kh=(e,t,r)=>t in e?Yc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,be=(e,t)=>{for(var r in t||(t={}))Eh.call(t,r)&&kh(e,r,t[r]);if(vh)for(var r of vh(t))eE.call(t,r)&&kh(e,r,t[r]);return e},ar=(e,t)=>Yk(e,Qk(t));var Ch=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(t,r)=>(typeof require!="undefined"?require:t)[r]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var De=(e,t)=>()=>(e&&(t=e(e=0)),t);var Ga=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),tE=(e,t)=>{for(var r in t)Yc(e,r,{get:t[r],enumerable:!0})},rE=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of Xk(t))!Eh.call(e,a)&&a!==r&&Yc(e,a,{get:()=>t[a],enumerable:!(n=Jk(t,a))||n.enumerable});return e};var he=(e,t,r)=>(r=e!=null?jk(Zk(e)):{},rE(t||!e||!e.__esModule?Yc(r,"default",{value:e,enumerable:!0}):r,e));var Dh=Ga(bs=>{var ie=bs&&bs.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(n[c]=a[c])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Jc=bs&&bs.__assign||function(){return Jc=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Jc.apply(this,arguments)};(function(){var e=-1,t=1,r=Math.min,n=Math.max;function a(){}function c(u,s){if(!s)throw new Error("prayer failed: "+u)}function l(u){c("a direction was passed",u===e||u===t)}function p(u){var s=document.implementation.createHTMLDocument("");if(s.body.innerHTML=u,s.body.children.length===1)return s.body.children[0];for(var i=document.createDocumentFragment();s.body.firstChild;)i.appendChild(s.body.firstChild);return i}var g=function(s,i,o){var d;switch(s){case"svg":case"path":d=document.createElementNS("http://www.w3.org/2000/svg",s);break;default:d=document.createElement(s)}for(var h in i){var b=i[h];b!==void 0&&d.setAttribute(h,typeof b=="string"?b:String(b))}if(o)for(var v=0;v<o.length;v++)d.appendChild(o[v]);return d};g.text=function(u){return document.createTextNode(u)},g.block=function(u,s,i){var o=g(u,s,[i.html()]);return i.setDOM(o),Ht.linkElementByBlockNode(o,i),o},g.entityText=function(u){var s=p(u);return c("entity parses to a single text node",s instanceof DocumentFragment&&s.childNodes.length===1&&s.childNodes[0]instanceof Text),s.childNodes[0]};function f(u,s){var i,o,d;if(typeof((i=u)===null||i===void 0?void 0:i.closest)=="function")return u.closest(s);if(!(u instanceof HTMLElement))return null;var h=Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,b=u;do{if(h.call(b,s))return b;b=(d=(o=b==null?void 0:b.parentElement)!==null&&o!==void 0?o:b==null?void 0:b.parentNode)!==null&&d!==void 0?d:null}while(b!==null&&b.nodeType===1);return null}var w="\xA0",M="\u200B",G="\u02D9",R="\u2211",se="\u220F",ce="\u2210",Se="\u222B";function ze(u){return u.getClientRects().length?u.getBoundingClientRect():{top:0,left:0,height:0,width:0,x:0,y:0,bottom:0,right:0}}function Ge(){return window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft}function Re(){return window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}var Je=function(){var u,s;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(u=requestAnimationFrame,s=cancelAnimationFrame):(u=function(i){return setTimeout(i,13)},s=clearTimeout),function(i,o){var d=Date.now(),h,b=0;function v(){var K=(Date.now()-d)/i;K<=b?L():b=K,o(b,L,E)}function E(){h!==void 0&&s(h),h=void 0}function L(){E(),h=u(v)}o(i<=0?1:0,L,E)}}(),Nt=function(){function u(s){this.span=g("span",{class:"dcg-mq-aria-alert","aria-live":"assertive","aria-atomic":"true"}),this.msg="",this.items=[],this.controller=s}return u.prototype.attach=function(){var s=this.controller.container;this.span.parentNode!==s&&ge(s).prepend(ge(this.span))},u.prototype.queue=function(s,i){i===void 0&&(i=!1);var o="";if(s instanceof fr){var d=s.mathspeak({ignoreShorthand:!0});i&&(s.parent&&s.parent.ariaLabel&&s.ariaLabel==="block"?o=s.parent.ariaLabel+" "+d:s.ariaLabel&&(o=s.ariaLabel+" "+d)),o===""&&(o=d)}else o=s||"";return this.items.push(o),this},u.prototype.queueDirOf=function(s){return l(s),this.queue(s===e?"before":"after")},u.prototype.queueDirEndOf=function(s){return l(s),this.queue(s===e?"beginning of":"end of")},u.prototype.alert=function(s){return this.attach(),s&&this.queue(s),this.items.length&&(this.msg=this.items.join(" ").replace(/ +(?= )/g,"").trim(),this.controller.containerHasFocus()&&(this.controller.options.logAriaAlerts&&this.msg&&console.log(this.msg),this.span.textContent=this.msg)),this.clear()},u.prototype.clear=function(){return this.items.length=0,this},u}(),ot=function(){function u(s,i){var o;arguments.length===1&&(i=s),!(!s||!i)&&(this.ends=(o={},o[e]=s,o[t]=i,o))}return u.create=function(s,i){arguments.length===1&&(i=s),c("No half-empty DOMFragments",!!s==!!i);var o=new u(s,i);return c("last is a forward sibling of first",o.isValid()),o},u.prototype.isEmpty=function(){return this.ends===void 0},u.prototype.isOneNode=function(){return!!(this.ends&&this.ends[e]===this.ends[t])},u.prototype.isValid=function(){if(!this.ends||this.ends[e]===this.ends[t])return!0;var s;return this.eachNode(function(i){return s=i}),s===this.ends[t]},u.prototype.firstNode=function(){return c("Fragment is not empty",this.ends),this.ends[e]},u.prototype.lastNode=function(){return c("Fragment is not empty",this.ends),this.ends[t]},u.prototype.children=function(){var s=this.oneNode(),i=s.firstChild,o=s.lastChild;return i&&o?new u(i,o):new u},u.prototype.join=function(s){if(!this.ends)return s;if(!s.ends)return this;for(var i=!1,o=this.ends[t].nextSibling;o;){if(o===s.ends[e]){i=!0;break}o=o.nextSibling}return c("sibling must be a forward DOM sibling of this fragment",i),new u(this.ends[e],s.ends[t])},u.prototype.oneNode=function(){return c("Fragment has a single node",this.ends&&this.ends[e]===this.ends[t]),this.ends[e]},u.prototype.oneElement=function(){var s=this.oneNode();return c("Node is an Element",s.nodeType===Node.ELEMENT_NODE),s},u.prototype.oneText=function(){var s=this.oneNode();return c("Node is Text",s.nodeType===Node.TEXT_NODE),s},u.prototype.eachNode=function(s){if(!this.ends)return this;for(var i=this.ends[t],o=this.ends[e],d=void 0;o&&(d=o.nextSibling,s(o),o!==i);o=d);return this},u.prototype.eachElement=function(s){return this.eachNode(function(i){i.nodeType===Node.ELEMENT_NODE&&s(i)}),this},u.prototype.text=function(){var s="";return this.eachNode(function(i){s+=i.textContent||""}),s},u.prototype.toNodeArray=function(){var s=[];return this.eachNode(function(i){return s.push(i)}),s},u.prototype.toElementArray=function(){var s=[];return this.eachElement(function(i){return s.push(i)}),s},u.prototype.toDocumentFragment=function(){var s=document.createDocumentFragment();return this.eachNode(function(i){return s.appendChild(i)}),s},u.prototype.insertBefore=function(s){return this.insDirOf(e,s)},u.prototype.insertAfter=function(s){return this.insDirOf(t,s)},u.prototype.append=function(s){return s.appendTo(this.oneElement()),this},u.prototype.prepend=function(s){return s.prependTo(this.oneElement()),this},u.prototype.appendTo=function(s){return this.insAtDirEnd(t,s)},u.prototype.prependTo=function(s){return this.insAtDirEnd(e,s)},u.prototype.parent=function(){if(!this.ends)return this;var s=this.ends[e].parentNode;return s?new u(s):new u},u.prototype.wrapAll=function(s){if(s.textContent="",!this.ends)return this;var i=this.ends[e].parentNode,o=this.ends[t].nextSibling;return this.appendTo(s),i&&i.insertBefore(s,o),this},u.prototype.replaceWith=function(s){var i,o=(i=this.ends)===null||i===void 0?void 0:i[t],d=o==null?void 0:o.parentNode,h=o==null?void 0:o.nextSibling;this.detach();var b=s.toDocumentFragment();return!o||!d?this:(d.insertBefore(b,h||null),this)},u.prototype.nthElement=function(s){if(this.ends&&!(s<0||s!==Math.floor(s)))for(var i=this.ends[e];i;){if(i.nodeType===Node.ELEMENT_NODE){if(s<=0)return i;s-=1}if(i===this.ends[t])return;i=i.nextSibling}},u.prototype.firstElement=function(){return this.nthElement(0)},u.prototype.lastElement=function(){if(this.ends)for(var s=this.ends[t];s;){if(s.nodeType===Node.ELEMENT_NODE)return s;if(s===this.ends[e])return;s=s.previousSibling}},u.prototype.first=function(){return new u(this.firstElement())},u.prototype.last=function(){return new u(this.lastElement())},u.prototype.eq=function(s){return new u(this.nthElement(s))},u.prototype.slice=function(s){if(!this.ends)return this;var i=this.nthElement(s);return i?new u(i,this.ends[t]):new u},u.prototype.next=function(){for(var s=this.oneNode();s;)if(s=s.nextSibling,s&&s.nodeType===Node.ELEMENT_NODE)return new u(s);return new u},u.prototype.prev=function(){for(var s=this.oneNode();s;)if(s=s.previousSibling,s&&s.nodeType===Node.ELEMENT_NODE)return new u(s);return new u},u.prototype.empty=function(){return this.eachElement(function(s){s.textContent=""}),this},u.prototype.remove=function(){return this.toDocumentFragment(),this},u.prototype.detach=function(){return this.remove()},u.prototype.insDirOf=function(s,i){var o;if(!this.ends)return this;var d=(o=i.ends)===null||o===void 0?void 0:o[s];return!d||!d.parentNode?this.detach():(ra(s,d.parentNode,this.toDocumentFragment(),d),this)},u.prototype.insAtDirEnd=function(s,i){return this.ends?(Q(s,this.toDocumentFragment(),i),this):this},u.prototype.hasClass=function(s){var i=!1;return this.eachElement(function(o){o.classList.contains(s)&&(i=!0)}),i},u.prototype.addClass=function(s){for(var i=function(v){if(!v)return"continue";o.eachElement(function(E){E.classList.add(v)})},o=this,d=0,h=s.split(/\s+/);d<h.length;d++){var b=h[d];i(b)}return this},u.prototype.removeClass=function(s){for(var i=function(v){if(!v)return"continue";o.eachElement(function(E){E.classList.remove(v)})},o=this,d=0,h=s.split(/\s+/);d<h.length;d++){var b=h[d];i(b)}return this},u.prototype.toggleClass=function(s,i){if(i===!0)return this.addClass(s);if(i===!1)return this.removeClass(s);for(var o=function(E){if(!E)return"continue";d.eachElement(function(L){L.classList.toggle(E)})},d=this,h=0,b=s.split(/\s+/);h<b.length;h++){var v=b[h];o(v)}return this},u}(),ge=ot.create;function ra(u,s,i,o){s.insertBefore(i,u===e?o:o.nextSibling)}function Q(u,s,i){u===e?i.insertBefore(s,i.firstChild):i.appendChild(s)}var de=function(){function u(s,i,o){this.init(s,i,o)}return u.prototype.init=function(s,i,o){this.parent=s,this[e]=i,this[t]=o},u.copy=function(s){return new u(s.parent,s[e],s[t])},u}();function Ze(u,s){var i=u[e];if(i){var o=u[t];if(o)for(o=o[t];i!==o;i=i[t]){var d=s(i);if(d===!1)break}}}function nn(u,s,i){var o=u[e];if(!o)return s;var d=u[t];if(!d)return s;for(d=d[t];o!==d;o=o[t])s=i(s,o);return s}var Ht=function(){function u(){var o;this[s]=0,this[i]=0,this.parent=0,this.ends=(o={},o[e]=0,o[t]=0,o),this.id=u.uniqueNodeId()}u.uniqueNodeId=function(){return u.idCounter+=1},u.getNodeOfElement=function(o){if(o){if(!o.nodeType)throw new Error("must pass an Element to NodeBase.getNodeOfElement");var d=o;return d.mqBlockNode||d.mqCmdNode}},u.linkElementByBlockNode=function(o,d){o.mqBlockNode=d},u.linkElementByCmdNode=function(o,d){o.mqCmdNode=d},u.prototype.setEnds=function(o){this.ends=o,c("No half-empty node ends",!!this.ends[e]==!!this.ends[t])},u.prototype.getEnd=function(o){return this.ends[o]},u.prototype.toString=function(){return"{{ MathQuill Node #"+this.id+" }}"},u.prototype.setDOM=function(o){return o&&c("DOM is an element or a text node",o.nodeType===Node.ELEMENT_NODE||o.nodeType===Node.TEXT_NODE),this._el=o,this},u.prototype.domFrag=function(){return ge(this._el)},u.prototype.createDir=function(o,d){l(o);var h=this;return h.html(),h.domFrag().insDirOf(o,d.domFrag()),d[o]=h.adopt(d.parent,d[e],d[t]),h},u.prototype.createLeftOf=function(o){this.createDir(e,o)},u.prototype.selectChildren=function(o,d){return new Sc(o,d)},u.prototype.bubble=function(o){for(var d=this.getSelfNode(),h=d;h;h=h.parent){var b=o(h);if(b===!1)break}return this},u.prototype.postOrder=function(o){var d=this.getSelfNode();return function h(b){return b?(b.eachChild(h),o(b),!0):!1}(d),d},u.prototype.isEmpty=function(){return this.ends[e]===0&&this.ends[t]===0},u.prototype.isQuietEmptyDelimiter=function(o){if(!this.isEmpty()||!o||!this.parent||this.parent.ctrlSeq===void 0)return!1;var d=this.parent.ctrlSeq.replace(/^\\(left|right)?/,"");return o.hasOwnProperty(d)},u.prototype.isStyleBlock=function(){return!1},u.prototype.isTextBlock=function(){return!1},u.prototype.children=function(){return new jt(this.getEnd(e),this.getEnd(t))},u.prototype.eachChild=function(o){return Ze(this.ends,o),this},u.prototype.foldChildren=function(o,d){return nn(this.ends,o,d)},u.prototype.withDirAdopt=function(o,d,h,b){var v=this.getSelfNode();return new jt(v,v).withDirAdopt(o,d,h,b),this},u.prototype.adopt=function(o,d,h){var b=this.getSelfNode();return new jt(b,b).adopt(o,d,h),this.getSelfNode()},u.prototype.disown=function(){var o=this.getSelfNode();return new jt(o,o).disown(),this},u.prototype.remove=function(){return this.domFrag().remove(),this.disown()},u.prototype.shouldIgnoreSubstitutionInSimpleSubscript=function(o){return!(!o.disableAutoSubstitutionInSubscripts||!this.parent||!(this.parent.parent instanceof Br)||!this.parent.domFrag().hasClass("dcg-mq-sub"))},u.prototype.getSelfNode=function(){return this},u.prototype.parser=function(){c("Abstract parser() method is never called",!1)},u.prototype.html=function(){throw new Error("html() unimplemented in NodeBase")},u.prototype.text=function(){return""},u.prototype.latex=function(){var o={latex:"",startIndex:-1,endIndex:-1};return this.latexRecursive(o),o.latex},u.prototype.latexRecursive=function(o){},u.prototype.checkCursorContextOpen=function(o){o.startSelectionBefore===this&&(o.startIndex=o.latex.length),o.endSelectionBefore===this&&(o.endIndex=o.latex.length)},u.prototype.checkCursorContextClose=function(o){o.startSelectionAfter===this&&(o.startIndex=o.latex.length),o.endSelectionAfter===this&&(o.endIndex=o.latex.length)},u.prototype.finalizeTree=function(o,d){},u.prototype.contactWeld=function(o,d){},u.prototype.blur=function(o){},u.prototype.focus=function(){},u.prototype.intentionalBlur=function(){},u.prototype.reflow=function(){},u.prototype.registerInnerField=function(o,d){},u.prototype.chToCmd=function(o,d){c("Abstract chToCmd() method is never called",!1)},u.prototype.mathspeak=function(o){return""},u.prototype.seek=function(o,d){},u.prototype.siblingDeleted=function(o,d){},u.prototype.siblingCreated=function(o,d){},u.prototype.finalizeInsert=function(o,d){},u.prototype.fixDigitGrouping=function(o){},u.prototype.writeLatex=function(o,d){},u.prototype.write=function(o,d){};var s,i;return s=e,i=t,u.idCounter=0,u}();function hr(u,s,i){c("a parent is always present",u),c("leftward is properly set up",function(){return s?s[t]===i&&s.parent===u:u.getEnd(e)===i}()),c("rightward is properly set up",function(){return i?i[e]===s&&i.parent===u:u.getEnd(t)===s}())}var jt=function(){function u(s,i,o){var d,h;if(this.disowned=!1,o===void 0&&(o=e),l(o),c("no half-empty fragments",!s==!i),!s||!i){this.setEnds((d={},d[e]=0,d[t]=0,d));return}c("withDir is passed to Fragment",s instanceof fr),c("oppDir is passed to Fragment",i instanceof fr),c("withDir and oppDir have the same parent",s.parent===i.parent);var b=(h={},h[o]=s,h[-o]=i,h);this.setEnds(b);var v=0;this.each(function(E){v=E}),c("following direction siblings from start reaches end",v===b[t])}return u.prototype.getDOMFragFromEnds=function(){var s=this.ends[e],i=this.ends[t];return s===0||i===0?ge():s===i?s.domFrag():s.domFrag().join(i.domFrag())},u.prototype.setEnds=function(s){this.ends=s},u.prototype.getEnd=function(s){return this.ends?this.ends[s]:0},u.prototype.domFrag=function(){return this.getDOMFragFromEnds()},u.prototype.withDirAdopt=function(s,i,o,d){return s===e?this.adopt(i,o,d):this.adopt(i,d,o)},u.prototype.adopt=function(s,i,o){var d;hr(s,i,o);var h=this;this.disowned=!1;var b=h.ends[e];if(!b)return this;var v=h.ends[t];if(!v)return this;var E=(d={},d[e]=s.getEnd(e),d[t]=s.getEnd(t),d);return i||(E[e]=b),o?o[e]=v:E[t]=v,s.setEnds(E),v[t]=o,h.each(function(L){return L[e]=i,L.parent=s,i&&(i[t]=L),i=L,!0}),h},u.prototype.disown=function(){var s,i=this,o=i.ends[e];if(!o||i.disowned)return i;this.disowned=!0;var d=i.ends[t];if(!d)return i;var h=o.parent;hr(h,o[e],o),hr(h,d,d[t]);var b=(s={},s[e]=h.getEnd(e),s[t]=h.getEnd(t),s);if(o[e]){var v=o[e];v[t]=d[t]}else b[e]=d[t];if(d[t]){var E=d[t];E[e]=o[e]}else b[t]=o[e];return b[e]&&b[t]?h.setEnds(b):h.ends=b,i},u.prototype.remove=function(){return this.domFrag().remove(),this.disown()},u.prototype.each=function(s){return Ze(this.ends,s),this},u.prototype.fold=function(s,i){return nn(this.ends,s,i)},u}(),C={},an={};function Tu(u){return u&&u.prototype instanceof fr}var Su=function(u){ie(s,u);function s(i,o,d){var h=u.call(this,i,o,d)||this;return h.ancestors={},h}return s.fromCursor=function(i){return new s(i.parent,i[e],i[t])},s}(de),Tc=function(u){ie(s,u);function s(i,o,d){var h=u.call(this,i,0,0)||this;return h.upDownCache={},h.cursorElement=g("span",{class:"dcg-mq-cursor"},[g.text(M)]),h._domFrag=ge(),h.controller=d,h.options=o,h.setDOMFrag(ge(h.cursorElement)),h.blink=function(){ge(h.cursorElement).toggleClass("dcg-mq-blink")},h}return s.prototype.setDOMFrag=function(i){return this._domFrag=i,this},s.prototype.domFrag=function(){return this._domFrag},s.prototype.show=function(){if(ge(this.cursorElement).removeClass("dcg-mq-blink"),this.setDOMFrag(ge(this.cursorElement)),this.intervalId)clearInterval(this.intervalId);else{var i=this[t];if(i){var o=this.selection;o&&o.getEnd(e)[e]===this[e]?this.domFrag().insertBefore(o.domFrag()):this.domFrag().insertBefore(i.domFrag())}else this.domFrag().appendTo(this.parent.domFrag().oneElement());this.parent.focus()}return this.intervalId=setInterval(this.blink,500),this},s.prototype.hide=function(){return this.intervalId&&clearInterval(this.intervalId),this.intervalId=0,this.domFrag().detach(),this.setDOMFrag(ge()),this},s.prototype.withDirInsertAt=function(i,o,d,h){var b=this.parent;this.parent=o,this[i]=d,this[-i]=h,b!==o&&b.blur&&b.blur(this)},s.prototype.insDirOf=function(i,o){return l(i),this.domFrag().insDirOf(i,o.domFrag()),this.withDirInsertAt(i,o.parent,o[i],o),this.parent.domFrag().addClass("dcg-mq-hasCursor"),this},s.prototype.insLeftOf=function(i){return this.insDirOf(e,i)},s.prototype.insRightOf=function(i){return this.insDirOf(t,i)},s.prototype.insAtDirEnd=function(i,o){return l(i),this.domFrag().insAtDirEnd(i,o.domFrag().oneElement()),this.withDirInsertAt(i,o,0,o.getEnd(i)),o.focus(),this},s.prototype.insAtLeftEnd=function(i){return this.insAtDirEnd(e,i)},s.prototype.insAtRightEnd=function(i){return this.insAtDirEnd(t,i)},s.prototype.jumpUpDown=function(i,o){var d=this;d.upDownCache[i.id]=de.copy(d);var h=d.upDownCache[o.id];if(h){var b=h[t];b?d.insLeftOf(b):d.insAtRightEnd(h.parent)}else{var v=d.getBoundingClientRectWithoutMargin().left;o.seek(v,d)}d.controller.aria.queue(o,!0)},s.prototype.getBoundingClientRectWithoutMargin=function(){var i=this.domFrag();i.removeClass("dcg-mq-cursor");var o=ze(i.oneElement()),d=o.left,h=o.right;return i.addClass("dcg-mq-cursor"),{left:d,right:h}},s.prototype.unwrapGramp=function(){var i=this.parent.parent,o=i.parent,d=i[t],h=this,b=i[e];if(i.disown().eachChild(function(_){return _.isEmpty()||(_.children().adopt(o,b,d).each(function(H){return H.domFrag().insertBefore(i.domFrag()),!0}),b=_.getEnd(t)),!0}),!this[t]){var v=this[e];if(v)this[t]=v[t];else for(;!this[t];){var E=this.parent[t];if(E)this.parent=E,this[t]=E.getEnd(e);else{this[t]=i[t],this.parent=o;break}}}var L=this[t];L?this.insLeftOf(L):this.insAtRightEnd(o),i.domFrag().remove();var K=i[e],B=i[t];K&&K.siblingDeleted(h.options,t),B&&B.siblingDeleted(h.options,e)},s.prototype.startSelection=function(){for(var i=this.anticursor=Su.fromCursor(this),o=i.ancestors,d=i;d.parent;d=d.parent)o[d.parent.id]=d},s.prototype.endSelection=function(){delete this.anticursor},s.prototype.select=function(){var i,o=this.anticursor;if(this[e]===o[e]&&this.parent===o.parent)return!1;for(var d=this;d.parent;d=d.parent)if(d.parent.id in o.ancestors){i=d.parent;break}c("cursor and anticursor in the same tree",i);var h=i,b=o.ancestors[h.id],v,E,L=t;if(d[e]!==b){for(var K=d;K;K=K[t])if(K[t]===b[t]){L=e,v=d,E=b;break}}L===t&&(v=b,E=d),v instanceof de&&(v=v[t]),E instanceof de&&(E=E[e]),this.hide().selection=h.selectChildren(v,E);var B=this.selection.getEnd(L);return this.insDirOf(L,B),this.selectionChanged(),!0},s.prototype.resetToEnd=function(i){this.clearSelection();var o=i.root;this[t]=0,this[e]=o.getEnd(t),this.parent=o},s.prototype.clearSelection=function(){return this.selection&&(this.selection.clear(),delete this.selection,this.selectionChanged()),this},s.prototype.deleteSelection=function(){var i=this.selection;i&&(this[e]=i.getEnd(e)[e],this[t]=i.getEnd(t)[t],i.remove(),this.selectionChanged(),delete this.selection)},s.prototype.replaceSelection=function(){var i=this.selection;return i&&(this[e]=i.getEnd(e)[e],this[t]=i.getEnd(t)[t],delete this.selection),i},s.prototype.depth=function(){for(var i=this,o=0;i=i.parent;)o+=i instanceof Tr?1:0;return o},s.prototype.isTooDeep=function(i){return this.options.maxDepth!==void 0?this.depth()+(i||0)>this.options.maxDepth:!1},s.prototype.selectionChanged=function(){},s}(de),Sc=function(u){ie(s,u);function s(i,o,d){var h=u.call(this,i,o,d)||this;return h._el=g("span",{class:"dcg-mq-selection"}),h.getDOMFragFromEnds().wrapAll(h._el),h}return s.prototype.isCleared=function(){return this._el===void 0},s.prototype.domFrag=function(){return this.isCleared()?this.getDOMFragFromEnds():ge(this._el)},s.prototype.setEnds=function(i){c("Selection ends are never empty",i[e]&&i[t]),this.ends=i},s.prototype.getEnd=function(i){return this.ends[i]},s.prototype.adopt=function(i,o,d){return this.clear(),u.prototype.adopt.call(this,i,o,d)},s.prototype.clear=function(){var i=this.getDOMFragFromEnds();return this.domFrag().replaceWith(i),this._el=void 0,this},s.prototype.join=function(i,o){return o===void 0&&(o=""),this.fold("",function(d,h){return d+o+h[i]()})},s}(jt),xn=function(){function u(s,i,o){this.textareaEventListeners={},this.id=s.id,this.data={},this.root=s,this.container=i,this.options=o,this.aria=new Nt(this.getControllerSelf()),this.ariaLabel="Math Input",this.ariaPostLabel="",s.controller=this.getControllerSelf(),this.cursor=s.cursor=new Tc(s,o,this.getControllerSelf())}return u.prototype.getControllerSelf=function(){return this},u.prototype.handle=function(s,i){var o,d=this.options.handlers,h=(o=this.options.handlers)===null||o===void 0?void 0:o.fns[s];if(h){var b=d==null?void 0:d.APIClasses[this.KIND_OF_MQ];c("APIClass is defined",b);var v=new b(this);i===e||i===t?h(i,v):h(v)}},u.onNotify=function(s){u.notifyees.push(s)},u.prototype.notify=function(s){for(var i=0;i<u.notifyees.length;i+=1)u.notifyees[i](this.cursor,s);return this},u.prototype.setAriaLabel=function(s){var i=this.getAriaLabel();return s&&typeof s=="string"&&s!==""?this.ariaLabel=s:this.editable?this.ariaLabel="Math Input":this.ariaLabel="",this.ariaLabel!==i&&!this.containerHasFocus()&&this.updateMathspeak(),this},u.prototype.getAriaLabel=function(){return this.ariaLabel!=="Math Input"?this.ariaLabel:this.editable?"Math Input":""},u.prototype.setAriaPostLabel=function(s,i){var o=this;return s&&typeof s=="string"&&s!==""?(s!==this.ariaPostLabel&&typeof i=="number"&&(this._ariaAlertTimeout&&clearTimeout(this._ariaAlertTimeout),this._ariaAlertTimeout=setTimeout(function(){o.containerHasFocus()?o.aria.alert(o.root.mathspeak().trim()+" "+s.trim()):o.updateMathspeak()},i)),this.ariaPostLabel=s):(this._ariaAlertTimeout&&clearTimeout(this._ariaAlertTimeout),this.ariaPostLabel=""),this},u.prototype.getAriaPostLabel=function(){return this.ariaPostLabel||""},u.prototype.containerHasFocus=function(){return document.activeElement&&this.container.contains(document.activeElement)},u.prototype.getTextareaOrThrow=function(){var s=this.textarea;if(!s)throw new Error("expected a textarea");return s},u.prototype.getTextareaSpanOrThrow=function(){var s=this.textareaSpan;if(!s)throw new Error("expected a textareaSpan");return s},u.prototype.addTextareaEventListeners=function(s){if(this.textarea)for(var i in s){var o=i;this.removeTextareaEventListener(o),this.textarea.addEventListener(o,s[o])}},u.prototype.removeTextareaEventListener=function(s){if(this.textarea){var i=this.textareaEventListeners[s];i&&this.textarea.removeEventListener(s,i)}},u.prototype.exportMathSpeak=function(){return this.root.mathspeak()},u.prototype.updateMathspeak=function(){},u.prototype.scrollHoriz=function(){},u.prototype.selectionChanged=function(){},u.prototype.setOverflowClasses=function(){},u.notifyees=[],u}(),mr={},zi={},Du={handlers:!0,autoCommands:!0,quietEmptyDelimiters:!0,autoParenthesizedFunctions:!0,autoOperatorNames:!0,leftRightIntoCmdGoes:!0,maxDepth:!0,interpretTildeAsSim:!0},wn={},tr=function(){function u(s){this.version=s}return u.prototype.assertJquery=function(){return c("Interface versions > 2 do not depend on JQuery",this.version<=2),c("JQuery is set for interface v < 3",this.jQuery),this.jQuery},u}(),Ki=function(){function u(){}return u}(),Wi=function(){window.console&&console.warn(`You are using the MathQuill API without specifying an interface version, which will fail in v1.0.0. Easiest fix is to do the following before doing anything else:

    MathQuill = MathQuill.getInterface(1);
    // now MathQuill.MathField() works like it used to

See also the "\`dev\` branch (2014\u20132015) \u2192 v0.10.0 Migration Guide" at
  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide`)},Da;function rr(u){return Wi(),Da||(Da=Za(1)),Da(u)}rr.prototype=Ki.prototype,rr.VERSION="v0.10.1",rr.interfaceVersion=function(u){if(u!==1)throw"Only interface version 1 supported. You specified: "+u;return Wi=function(){window.console&&console.warn(`You called MathQuill.interfaceVersion(1); to specify the interface version, which will fail in v1.0.0. You can fix this easily by doing this before doing anything else:

    MathQuill = MathQuill.getInterface(1);
    // now MathQuill.MathField() works like it used to

See also the "\`dev\` branch (2014\u20132015) \u2192 v0.10.0 Migration Guide" at
  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide`)},Wi(),rr},rr.getInterface=Za;var Mu=Za.MIN=1,Au=Za.MAX=3;function Za(u){if(u!==1&&u!==2&&u!==3)throw"Only interface versions between "+Mu+" and "+Au+" supported. You specified: "+u;var s=u;if(s<3){var i=window.jQuery;if(!i)throw"MathQuill interface version ".concat(s," requires jQuery 1.5.2+ to be loaded first");tr.prototype.jQuery=i}var o=Jc(Jc({},wn),{handlers:function(B){return{fns:B||{},APIClasses:E}}});function d(B,_){for(var H in _)if(_.hasOwnProperty(H)){if(H==="substituteKeyboardEvents"&&s>=3)throw new Error(["As of interface version 3, the 'substituteKeyboardEvents'","option is no longer supported. Use 'overrideTypedText' and","'overrideKeystroke' instead."].join(" "));var X=_[H],re=o[H];B[H]=re?re(X):X}}var h=s<3?tr:function(B){ie(_,B);function _(){return B!==null&&B.apply(this,arguments)||this}return _}(tr),b=function(B){ie(_,B);function _(H){var X=B.call(this)||this;return X.__controller=H,X.__options=H.options,X.id=H.id,X.data=H.data,X}return _.prototype.mathquillify=function(H){var X=this.__controller,re=X.root,ne=X.container;X.createTextarea();var ue=ge(ne).addClass(H).children().detach();re.setDOM(ge(g("span",{class:"dcg-mq-root-block","aria-hidden":!0})).appendTo(ne).oneElement()),Ht.linkElementByBlockNode(re.domFrag().oneElement(),re),this.latex(ue.text()),this.revert=function(){return X.removeMouseEventListener(),ge(ne).removeClass("dcg-mq-editable-field dcg-mq-math-mode dcg-mq-text-mode").empty().append(ue),s<3?this.__options.assertJquery()(ne):ne}},_.prototype.setAriaLabel=function(H){return this.__controller.setAriaLabel(H),this},_.prototype.getAriaLabel=function(){return this.__controller.getAriaLabel()},_.prototype.config=function(H){return d(this.__options,H),this},_.prototype.el=function(){return this.__controller.container},_.prototype.text=function(){return this.__controller.exportText()},_.prototype.mathspeak=function(){return this.__controller.exportMathSpeak()},_.prototype.latex=function(H){if(arguments.length>0){this.__controller.renderLatexMath(H);var X=this.__controller.cursor;return this.__controller.blurred&&X.hide().parent.blur(X),this}return this.__controller.exportLatex()},_.prototype.selection=function(){return this.__controller.exportLatexSelection()},_.prototype.html=function(){return this.__controller.root.domFrag().oneElement().innerHTML.replace(/ jQuery\d+="(?:\d+|null)"/g,"").replace(/ mathquill-(?:command|block)-id="?\d+"?/g,"").replace(/<span class="?dcg-mq-cursor( dcg-mq-blink)?"?>.?<\/span>/i,"").replace(/ dcg-mq-hasCursor|dcg-mq-hasCursor ?/,"").replace(/ class=(""|(?= |>))/g,"")},_.prototype.reflow=function(){return this.__controller.root.postOrder(function(H){H.reflow()}),this},_}(Ki),v=function(B){ie(_,B);function _(){return B!==null&&B.apply(this,arguments)||this}return _.prototype.mathquillify=function(H){return B.prototype.mathquillify.call(this,H),this.__controller.editable=!0,this.__controller.addMouseEventListener(),this.__controller.editablesTextareaEvents(),this},_.prototype.focus=function(){return this.__controller.getTextareaOrThrow().focus(),this.__controller.scrollHoriz(),this},_.prototype.blur=function(){return this.__controller.getTextareaOrThrow().blur(),this},_.prototype.write=function(H){this.__controller.writeLatex(H),this.__controller.scrollHoriz();var X=this.__controller.cursor;return this.__controller.blurred&&X.hide().parent.blur(X),this},_.prototype.empty=function(){var H,X=this.__controller.root,re=this.__controller.cursor;return X.setEnds((H={},H[e]=0,H[t]=0,H)),X.domFrag().empty(),delete re.selection,re.insAtRightEnd(X),this},_.prototype.cmd=function(H){var X=this.__controller.notify(void 0),re=X.cursor;if(/^\\[a-z]+$/i.test(H)&&!re.isTooDeep()){H=H.slice(1);var ne=C[H],ue;ne&&(ne.constructor?ue=new ne(H):ue=ne(H),re.selection&&ue.replaces(re.replaceSelection()),ue.createLeftOf(re.show()))}else re.parent.write(re,H);return X.scrollHoriz(),X.blurred&&re.hide().parent.blur(re),this},_.prototype.select=function(){return this.__controller.selectAll(),this},_.prototype.clearSelection=function(){return this.__controller.cursor.clearSelection(),this},_.prototype.moveToDirEnd=function(H){return this.__controller.notify("move").cursor.insAtDirEnd(H,this.__controller.root),this},_.prototype.moveToLeftEnd=function(){return this.moveToDirEnd(e)},_.prototype.moveToRightEnd=function(){return this.moveToDirEnd(t)},_.prototype.keystroke=function(H,X){for(var re=H.replace(/^\s+|\s+$/g,"").split(/\s+/),ne=0;ne<re.length;ne+=1)this.__controller.keystroke(re[ne],X);return this},_.prototype.typedText=function(H){for(var X=0;X<H.length;X+=1)this.__controller.typedText(H.charAt(X));return this},_.prototype.dropEmbedded=function(H,X,re){var ne=H-Ge(),ue=X-Re(),Pe=document.elementFromPoint(ne,ue);this.__controller.seek(Pe,ne,ue);var lt=new hs().setOptions(re);lt.createLeftOf(this.__controller.cursor)},_.prototype.setAriaPostLabel=function(H,X){return this.__controller.setAriaPostLabel(H,X),this},_.prototype.getAriaPostLabel=function(){return this.__controller.getAriaPostLabel()},_.prototype.clickAt=function(H,X,re){re=re||document.elementFromPoint(H,X);var ne=this.__controller,ue=ne.root,Pe=ue.domFrag().oneElement();return Pe.contains(re)||(re=Pe),ne.seek(re,H,X),ne.blurred&&this.focus(),this},_.prototype.ignoreNextMousedown=function(H){return this.__controller.cursor.options.ignoreNextMousedown=H,this},_}(b),E={AbstractMathQuill:b,EditableField:v};c("API.StaticMath defined",mr.StaticMath),E.StaticMath=mr.StaticMath(E),c("API.MathField defined",mr.MathField),E.MathField=mr.MathField(E),c("API.InnerMathField defined",mr.InnerMathField),E.InnerMathField=mr.InnerMathField(E),mr.TextField&&(E.TextField=mr.TextField(E));var L=function(B){if(!B||!B.nodeType)return null;for(var _,H=ge(B).children().toElementArray(),X=0,re=H;X<re.length;X++){var ne=re[X];if(ne.classList.contains("dcg-mq-root-block")){_=ne;break}}var ue=Ht.getNodeOfElement(_),Pe=ue&&ue.controller,lt=Pe&&E[Pe.KIND_OF_MQ];return Pe&&lt?new lt(Pe):null};L.L=e,L.R=t,L.config=function(B){return d(h.prototype,B),this},L.registerEmbed=function(B,_){if(!/^[a-z][a-z0-9]*$/i.test(B))throw"Embed name must start with letter and be only letters and digits";zi[B]=_},L.StaticMath=K("StaticMath",E.StaticMath),L.MathField=K("MathField",E.MathField),L.InnerMathField=K("InnerMathField",E.InnerMathField),E.TextField&&(L.TextField=K("TextField",E.TextField)),L.prototype=b.prototype,L.EditableField=function(){throw"wtf don't call me, I'm 'abstract'"},L.EditableField.prototype=v.prototype,s<3&&(L.saneKeyboardEvents=Vc);function K(B,_){c(B+" is defined",_);function H(X,re){if(!X||!X.nodeType)return null;var ne=L(X);if(ne instanceof _)return ne;var ue=new is(new _.RootBlock,X,new h(s));return ue.KIND_OF_MQ=B,new _(ue).__mathquillify(re||{},s)}return H.prototype=_.prototype,H}return L}rr.noConflict=function(){return window.MathQuill=Dc,rr};var Dc=window.MathQuill;window.MathQuill=rr;function Hi(u){u.moveOutOf=function(s){c("controller is defined",this.controller),this.controller.handle("moveOutOf",s)},u.deleteOutOf=function(s){c("controller is defined",this.controller),this.controller.handle("deleteOutOf",s)},u.selectOutOf=function(s){c("controller is defined",this.controller),this.controller.handle("selectOutOf",s)},u.upOutOf=function(){c("controller is defined",this.controller),this.controller.handle("upOutOf")},u.downOutOf=function(){c("controller is defined",this.controller),this.controller.handle("downOutOf")},u.reflow=function(){c("controller is defined",this.controller),this.controller.handle("reflow"),this.controller.handle("edited"),this.controller.handle("edit")}}function rs(u,s){throw u?u="'"+u+"'":u="EOF","Parse Error: "+s+" at "+u}var Ee=function(){function u(s){this._=s}return u.prototype.parse=function(s){return this.skip(u.eof)._(""+s,i,rs);function i(o,d){return d}},u.prototype.or=function(s){c("or is passed a parser",s instanceof u);var i=this;return new u(function(o,d,h){return i._(o,d,b);function b(v){return s._(o,d,h)}})},u.prototype.then=function(s){var i=this;return new u(function(o,d,h){return i._(o,b,h);function b(v,E){var L=s instanceof u?s:s(E);return c("a parser is returned",L instanceof u),L._(v,d,h)}})},u.prototype.many=function(){var s=this;return new u(function(i,o,d){for(var h=[];s._(i,b,v););return o(i,h);function b(E,L){return i=E,h.push(L),!0}function v(){return!1}})},u.prototype.times=function(s,i){arguments.length<2&&(i=s);var o=this;return new u(function(d,h,b){for(var v=[],E=!0,L,K=0;K<s;K+=1)if(E=!!o._(d,B,_),!E)return b(d,L);for(;K<i&&E;K+=1)o._(d,B,H);return h(d,v);function B(X,re){return v.push(re),d=X,!0}function _(X,re){return L=re,d=X,!1}function H(X,re){return!1}})},u.prototype.result=function(s){return this.then(u.succeed(s))},u.prototype.atMost=function(s){return this.times(0,s)},u.prototype.atLeast=function(s){var i=this;return i.times(s).then(function(o){return i.many().map(function(d){return o.concat(d)})})},u.prototype.map=function(s){return this.then(function(i){return u.succeed(s(i))})},u.prototype.skip=function(s){return this.then(function(i){return s.result(i)})},u.string=function(s){var i=s.length,o="expected '"+s+"'";return new u(function(d,h,b){var v=d.slice(0,i);return v===s?h(d.slice(i),v):b(d,o)})},u.regex=function(s){c("regexp parser is anchored",s.toString().charAt(1)==="^");var i="expected "+s;return new u(function(o,d,h){var b=s.exec(o);if(b){var v=b[0];return d(o.slice(v.length),v)}else return h(o,i)})},u.succeed=function(s){return new u(function(i,o){return o(i,s)})},u.fail=function(s){return new u(function(i,o,d){return d(i,s)})},u.letter=u.regex(/^[a-z]/i),u.letters=u.regex(/^[a-z]*/i),u.digit=u.regex(/^[0-9]/),u.digits=u.regex(/^[0-9]*/),u.whitespace=u.regex(/^\s+/),u.optWhitespace=u.regex(/^\s*/),u.any=new u(function(s,i,o){return s?i(s.slice(1),s.charAt(0)):o(s,"expected any character")}),u.all=new u(function(s,i,o){return i("",s)}),u.eof=new u(function(s,i,o){return s?o(s,"expected EOF"):i(s,s)}),u}(),Mc=function(){function u(){this.fn=a}return u.prototype.listen=function(s){this.fn=s,clearTimeout(this.timeoutId),this.timeoutId=setTimeout(this.fn)},u.prototype.listenOnce=function(s){var i=this;this.listen(function(){for(var o=[],d=0;d<arguments.length;d++)o[d]=arguments[d];i.clearListener(),s.apply(void 0,o)})},u.prototype.clearListener=function(){this.fn=a,clearTimeout(this.timeoutId)},u.prototype.trigger=function(){for(var s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];this.fn.apply(this,s)},u}(),Ac=function(){var u={8:"Backspace",9:"Tab",10:"Enter",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Esc",32:"Spacebar",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Del",144:"NumLock"},s={ArrowRight:"Right",ArrowLeft:"Left",ArrowDown:"Down",ArrowUp:"Up",Delete:"Del",Escape:"Esc"," ":"Spacebar"};function i(b){switch(d(b)){case"Right":case"Left":case"Down":case"Up":return!0}return!1}function o(b){return b.length===1&&b>="a"&&b<="z"}function d(b){var v;if(b.key===void 0){var E=b.which||b.keyCode;return u[E]||String.fromCharCode(E)}return o(b.key)?b.key.toUpperCase():(v=s[b.key])!==null&&v!==void 0?v:b.key}function h(b){var v=d(b),E=[];return b.ctrlKey&&E.push("Ctrl"),b.metaKey&&E.push("Meta"),b.altKey&&E.push("Alt"),b.shiftKey&&E.push("Shift"),E.length?(v!=="Alt"&&v!=="Control"&&v!=="Meta"&&v!=="Shift"&&E.push(v),E.join("-")):v}return function(v,E){var L=null,K=null,B=new Mc;function _(){try{v instanceof HTMLTextAreaElement&&v.select()}catch(Fe){}}function H(Fe){B.trigger(),B.clearListener(),v instanceof HTMLTextAreaElement&&(v.value=Fe),Fe&&_(),X=!!Fe}var X=!1;function re(){return!("selectionStart"in v)||!(v instanceof HTMLTextAreaElement)?!1:v.selectionStart!==v.selectionEnd}function ne(){E.options&&E.options.overrideKeystroke?E.options.overrideKeystroke(h(L),L):E.keystroke(h(L),L)}function ue(Fe){B.trigger(Fe),Fe.target===v&&(L=Fe,K=null,X&&B.listenOnce(function(Fn){Fn&&Fn.type==="focusout"||_()}),ne())}function Pe(Fe){B.trigger(Fe),Fe.target===v&&(L&&K&&ne(),K=Fe,i(Fe)?B.listenOnce(dt):B.listen(Oe))}function lt(Fe){B.trigger(Fe),Fe.target===v&&L&&!K&&(i(Fe)?B.listenOnce(dt):B.listen(Oe))}function Oe(){if(!re()&&v instanceof HTMLTextAreaElement){var Fe=v.value;L&&!L.altKey&&L.ctrlKey&&!L.metaKey&&L.shiftKey&&(L.key==="U"||L.key==="Unidentified"||L.key==="Process")||(Fe.length===1?(v.value="",E.options&&E.options.overrideTypedText?E.options.overrideTypedText(Fe):E.typedText(Fe)):dt())}}function dt(){v instanceof HTMLTextAreaElement&&v.value.length>1&&_()}function Dr(){L=null,K=null,B.clearListener(),v instanceof HTMLTextAreaElement&&(v.value="")}function wr(Fe){B.trigger(),Fe.target===v&&(document.activeElement!==v&&v.focus(),B.listen(function(){if(v instanceof HTMLTextAreaElement){var cn=v.value;v.value="",cn&&E.paste(cn)}}))}function kn(Fe){B.trigger(Fe)}return E.options&&E.options.disableCopyPaste?E.addTextareaEventListeners({keydown:ue,keypress:Pe,keyup:lt,focusout:Dr,copy:function(Fe){Fe.preventDefault()},cut:function(Fe){Fe.preventDefault()},paste:function(Fe){B.trigger(),Fe.preventDefault()},input:kn}):E.addTextareaEventListeners({keydown:ue,keypress:Pe,keyup:lt,focusout:Dr,cut:function(){B.listenOnce(function(){E.cut()})},copy:function(){B.listenOnce(function(){E.copy()})},paste:wr,input:kn}),{select:H}}}(),Lu=function(u){ie(s,u);function s(){return u!==null&&u.apply(this,arguments)||this}return s.prototype.exportText=function(){return this.root.foldChildren("",function(i,o){return i+o.text()})},s}(xn);xn.onNotify(function(u,s){if(s==="edit"||s==="replace"||s===void 0){var i=u.controller;if(!i||!i.options.enableDigitGrouping||i.blurred!==!1)return;i.disableGroupingForSeconds(1)}});var Gu=function(u){ie(s,u);function s(){var i=u!==null&&u.apply(this,arguments)||this;return i.handleTextareaFocusEditable=function(){var o=i.cursor;i.updateMathspeak(),i.blurred=!1,clearTimeout(i.blurTimeout),ge(i.container).addClass("dcg-mq-focused"),o.parent||o.insAtRightEnd(i.root),o.selection?(o.selection.domFrag().removeClass("dcg-mq-blur"),i.selectionChanged()):o.show(),i.setOverflowClasses()},i.handleTextareaBlurEditable=function(){i.textareaSelectionTimeout&&(clearTimeout(i.textareaSelectionTimeout),i.textareaSelectionTimeout=0),i.disableGroupingForSeconds(0),i.blurred=!0,i.blurTimeout=setTimeout(function(){i.root.postOrder(function(o){o.intentionalBlur()}),i.cursor.clearSelection().endSelection(),i.blur(),i.updateMathspeak(),i.scrollHoriz()}),window.addEventListener("blur",i.handleWindowBlur)},i.handleTextareaFocusStatic=function(){i.blurred=!1},i.handleTextareaBlurStatic=function(){i.cursor.selection&&i.cursor.selection.clear(),setTimeout(function(){ge(i.getTextareaSpanOrThrow()).detach(),i.blurred=!0})},i.handleWindowBlur=function(){clearTimeout(i.blurTimeout),i.cursor.selection&&i.cursor.selection.domFrag().addClass("dcg-mq-blur"),i.blur(),i.updateMathspeak()},i}return s.prototype.disableGroupingForSeconds=function(i){var o=this;clearTimeout(this.__disableGroupingTimeout),i===0?this.root.domFrag().removeClass("dcg-mq-suppress-grouping"):(this.root.domFrag().addClass("dcg-mq-suppress-grouping"),this.__disableGroupingTimeout=setTimeout(function(){o.root.domFrag().removeClass("dcg-mq-suppress-grouping")},i*1e3))},s.prototype.blur=function(){this.cursor.hide().parent.blur(this.cursor),ge(this.container).removeClass("dcg-mq-focused"),window.removeEventListener("blur",this.handleWindowBlur),this.options&&this.options.resetCursorOnBlur&&this.cursor.resetToEnd(this)},s.prototype.addEditableFocusBlurListeners=function(){var i=this,o=i.cursor;this.addTextareaEventListeners({focus:this.handleTextareaFocusEditable,blur:this.handleTextareaBlurEditable}),i.blurred=!0,o.hide().parent.blur(o)},s.prototype.addStaticFocusBlurListeners=function(){this.addTextareaEventListeners({focus:this.handleTextareaFocusStatic,blur:this.handleTextareaBlurStatic})},s}(Lu),Pn=!1,fr=function(u){ie(s,u);function s(){return u!==null&&u.apply(this,arguments)||this}return s.prototype.keystroke=function(i,o,d){var h=d.cursor;switch(i){case"Ctrl-Shift-Backspace":case"Ctrl-Backspace":d.ctrlDeleteDir(e);break;case"Shift-Backspace":case"Backspace":d.backspace();break;case"Esc":case"Tab":d.escapeDir(t,i,o);return;case"Shift-Tab":case"Shift-Esc":d.escapeDir(e,i,o);return;case"End":d.notify("move").cursor.insAtRightEnd(h.parent),d.aria.queue("end of").queue(h.parent,!0);break;case"Ctrl-End":d.notify("move").cursor.insAtRightEnd(d.root),d.aria.queue("end of").queue(d.ariaLabel).queue(d.root).queue(d.ariaPostLabel);break;case"Shift-End":d.selectToBlockEndInDir(t);break;case"Ctrl-Shift-End":d.selectToRootEndInDir(t);break;case"Home":d.notify("move").cursor.insAtLeftEnd(h.parent),d.aria.queue("beginning of").queue(h.parent,!0);break;case"Ctrl-Home":d.notify("move").cursor.insAtLeftEnd(d.root),d.aria.queue("beginning of").queue(d.ariaLabel).queue(d.root).queue(d.ariaPostLabel);break;case"Shift-Home":d.selectToBlockEndInDir(e);break;case"Ctrl-Shift-Home":d.selectToRootEndInDir(e);break;case"Left":d.moveLeft();break;case"Shift-Left":d.selectLeft();break;case"Ctrl-Left":break;case"Right":d.moveRight();break;case"Shift-Right":d.selectRight();break;case"Ctrl-Right":break;case"Up":d.moveUp();break;case"Down":d.moveDown();break;case"Shift-Up":d.withIncrementalSelection(function(b){if(h[e])for(;h[e];)b(e);else b(e)});break;case"Shift-Down":d.withIncrementalSelection(function(b){if(h[t])for(;h[t];)b(t);else b(t)});break;case"Ctrl-Up":break;case"Ctrl-Down":break;case"Ctrl-Shift-Del":case"Ctrl-Del":d.ctrlDeleteDir(t);break;case"Shift-Del":case"Del":d.deleteForward();break;case"Meta-A":case"Ctrl-A":d.selectAll();break;case"Ctrl-Alt-Up":h.parent.parent&&h.parent.parent instanceof s?d.aria.queue(h.parent.parent):d.aria.queue("nothing above");break;case"Ctrl-Alt-Down":h.parent&&h.parent instanceof s?d.aria.queue(h.parent):d.aria.queue("block is empty");break;case"Ctrl-Alt-Left":h.parent.parent&&h.parent.parent.getEnd(e)?d.aria.queue(h.parent.parent.getEnd(e)):d.aria.queue("nothing to the left");break;case"Ctrl-Alt-Right":h.parent.parent&&h.parent.parent.getEnd(t)?d.aria.queue(h.parent.parent.getEnd(t)):d.aria.queue("nothing to the right");break;case"Ctrl-Alt-Shift-Down":h.selection?d.aria.queue(h.selection.join("mathspeak"," ").trim()+" selected"):d.aria.queue("nothing selected");break;case"Ctrl-Alt-=":case"Ctrl-Alt-Shift-Right":d.ariaPostLabel.length?d.aria.queue(d.ariaPostLabel):d.aria.queue("no answer");break;default:return}d.aria.alert(),o==null||o.preventDefault(),d.scrollHoriz()},s.prototype.moveOutOf=function(i,o,d){c("overridden or never called on this node",!1)},s.prototype.moveTowards=function(i,o,d){c("overridden or never called on this node",!1)},s.prototype.deleteOutOf=function(i,o){c("overridden or never called on this node",!1)},s.prototype.deleteTowards=function(i,o){c("overridden or never called on this node",!1)},s.prototype.unselectInto=function(i,o){c("overridden or never called on this node",!1)},s.prototype.selectOutOf=function(i,o){c("overridden or never called on this node",!1)},s.prototype.selectTowards=function(i,o){c("overridden or never called on this node",!1)},s}(Ht);xn.onNotify(function(u,s){(s==="move"||s==="upDown")&&u.show().clearSelection()}),wn.leftRightIntoCmdGoes=function(u){if(u&&u!=="up"&&u!=="down")throw'"up" or "down" required for leftRightIntoCmdGoes option, got "'+u+'"';return u},xn.onNotify(function(u,s){s!=="upDown"&&(u.upDownCache={})}),xn.onNotify(function(u,s){s==="edit"&&u.show().deleteSelection()}),xn.onNotify(function(u,s){s!=="select"&&u.endSelection()});var ns=function(u){ie(s,u);function s(){return u!==null&&u.apply(this,arguments)||this}return s.prototype.keystroke=function(i,o){this.cursor.parent.keystroke(i,o,this.getControllerSelf())},s.prototype.escapeDir=function(i,o,d){l(i);var h=this.cursor;if(h.parent!==this.root&&(d==null||d.preventDefault()),h.parent!==this.root)return h.clearSelection(),h.parent.moveOutOf(i,h),h.controller.aria.alert(),this.notify("move")},s.prototype.moveDir=function(i){l(i);var o=this.cursor,d=o.options.leftRightIntoCmdGoes,h=o[i];return o.selection?o.insDirOf(i,o.selection.getEnd(i)):h?h.moveTowards(i,o,d):o.parent.moveOutOf(i,o,d),this.notify("move")},s.prototype.moveLeft=function(){return this.moveDir(e)},s.prototype.moveRight=function(){return this.moveDir(t)},s.prototype.moveUp=function(){return this.moveUpDown("up")},s.prototype.moveDown=function(){return this.moveUpDown("down")},s.prototype.moveUpDown=function(i){var o=this,d=o.notify("upDown").cursor,h,b;i==="up"?(h="upInto",b="upOutOf"):(h="downInto",b="downOutOf");var v=d[e],E=d[t],L=E&&E[h],K=v&&v[h];return L?d.insAtLeftEnd(L):K?d.insAtRightEnd(K):d.parent.bubble(function(B){var _=B[b];if(_&&(typeof _=="function"&&(_=_.call(B,d)),_ instanceof fr&&d.jumpUpDown(B,_),_!==!0))return!1}),o},s.prototype.deleteDir=function(i){l(i);var o=this.cursor,d=o[i],h=o.parent.parent,b=o.controller;if(d&&d instanceof fr)d.sides?b.aria.queue(d.parent.chToCmd(d.sides[-i].ch).mathspeak({createdLeftOf:o})):!d.blocks&&d.parent.ctrlSeq!=="\\text"&&b.aria.queue(d);else if(h&&h instanceof fr)if(h.sides)b.aria.queue(h.parent.chToCmd(h.sides[i].ch).mathspeak({createdLeftOf:o}));else if(h.blocks&&h.mathspeakTemplate)if(h.upInto&&h.downInto)b.aria.queue(h.mathspeakTemplate[1]);else{var v=h.mathspeakTemplate,E=i===e?v[0]:v[v.length-1];b.aria.queue(E)}else b.aria.queue(h);var L=o.selection;if(this.notify("edit"),!L){var K=o[i];K?K.deleteTowards(i,o):o.parent.deleteOutOf(i,o)}var B=o[e],_=o[t];return B.siblingDeleted&&B.siblingDeleted(o.options,t),_.siblingDeleted&&_.siblingDeleted(o.options,e),o.parent.bubble(function(H){H.reflow()}),this},s.prototype.ctrlDeleteDir=function(i){l(i);var o=this.cursor;if(!o[i]||o.selection)return this.deleteDir(i);this.notify("edit");var d;i===e?d=new jt(o.parent.getEnd(e),o[e]):d=new jt(o[t],o.parent.getEnd(t)),o.controller.aria.queue(d),d.remove(),o.insAtDirEnd(i,o.parent);var h=o[e],b=o[t];return h&&h.siblingDeleted(o.options,t),b&&b.siblingDeleted(o.options,e),o.parent.bubble(function(v){v.reflow()}),this},s.prototype.backspace=function(){return this.deleteDir(e)},s.prototype.deleteForward=function(){return this.deleteDir(t)},s.prototype.startIncrementalSelection=function(){c("Multiple selections can't be simultaneously open",!Pn),Pn=!0,this.notify("select");var i=this.cursor;i.anticursor||i.startSelection()},s.prototype.selectDirIncremental=function(i){c("A selection is open",Pn),Pn=!0;var o=this.cursor,d=o.selection;l(i);var h=o[i];h?d&&d.getEnd(i)===h&&o.anticursor[-i]!==h?h.unselectInto(i,o):h.selectTowards(i,o):o.parent.selectOutOf(i,o)},s.prototype.finishIncrementalSelection=function(){c("A selection is open",Pn);var i=this.cursor;i.clearSelection(),i.select()||i.show();var o=i.selection;o&&i.controller.aria.clear().queue(o.join("mathspeak"," ").trim()+" selected"),Pn=!1},s.prototype.withIncrementalSelection=function(i){var o=this;try{this.startIncrementalSelection();try{i(function(d){return o.selectDirIncremental(d)})}finally{this.finishIncrementalSelection()}}finally{Pn=!1}},s.prototype.selectDir=function(i){this.withIncrementalSelection(function(o){return o(i)})},s.prototype.selectLeft=function(){return this.selectDir(e)},s.prototype.selectRight=function(){return this.selectDir(t)},s.prototype.selectAll=function(){this.notify("move");var i=this.cursor;i.insAtRightEnd(this.root),this.withIncrementalSelection(function(o){for(;i[e];)o(e)})},s.prototype.selectToBlockEndInDir=function(i){var o=this.cursor;this.withIncrementalSelection(function(d){for(;o[i];)d(i)})},s.prototype.selectToRootEndInDir=function(i){var o=this,d=this.cursor;this.withIncrementalSelection(function(h){for(;d[i]||d.parent!==o.root;)h(i)})},s}(Gu),as=function(u){ie(s,u);function s(i){return u.call(this)||this}return s}(fr),yr=function(){function u(Oe){var dt=new Tr;return Oe.adopt(dt,0,0),dt}function s(Oe){for(var dt=Oe[0]||new Tr,Dr=1;Dr<Oe.length;Dr+=1)Oe[Dr].children().adopt(dt,dt.getEnd(t),0);return dt}var i=Ee.string,o=Ee.regex,d=Ee.letter,h=Ee.digit,b=Ee.any,v=Ee.optWhitespace,E=Ee.succeed,L=Ee.fail,K=d.map(function(Oe){return new na(Oe)}),B=h.map(function(Oe){return new Yi(Oe)}),_=o(/^[^${}\\_^]/).map(function(Oe){return new ei(Oe)}),H=o(/^[^\\a-eg-zA-Z]/).or(i("\\").then(o(/^[a-z]+/i).or(o(/^\s+/).result(" ")).or(b))).then(function(Oe){var dt=C[Oe];if(dt)if(dt.constructor){var Dr=dt;return new Dr(Oe).parser()}else{var wr=dt;return wr(Oe).parser()}else return L("unknown command: \\"+Oe)}),X=H.or(K).or(B).or(_),re=i("{").then(function(){return ue}).skip(i("}")),ne=v.then(re.or(X.map(u))),ue=ne.many().map(s).skip(v),Pe=i("[").then(ne.then(function(Oe){return Oe.join("latex")!=="]"?E(Oe):L("")}).many().map(s).skip(v)).skip(i("]")),lt=ue;return lt.block=ne,lt.optBlock=Pe,lt}();wn.maxDepth=function(u){return typeof u=="number"?u:void 0};var Lc=function(u){ie(s,u);function s(){return u!==null&&u.apply(this,arguments)||this}return s.prototype.cleanLatex=function(i){return i.replace(/(\\[a-z]+) (?![a-z])/gi,"$1")},s.prototype.exportLatex=function(){return this.cleanLatex(this.root.latex())},s.prototype.writeLatex=function(i){var o=this.notify("edit").cursor;return o.parent.writeLatex(o,i),this},s.prototype.exportLatexSelection=function(){var i={latex:"",startIndex:-1,endIndex:-1},o=this.cursor.selection;if(o)i.startSelectionBefore=o.getEnd(e),i.endSelectionAfter=o.getEnd(t);else{var d=this.cursor[e];d?i.startSelectionAfter=d:i.startSelectionBefore=this.cursor.parent;var h=this.cursor[t];h?i.endSelectionBefore=h:i.endSelectionAfter=this.cursor.parent}this.root.latexRecursive(i);for(var b=i.latex,v=this.cleanLatex(b),E=i.startIndex,L=i.endIndex,K=0,B=0;B<i.endIndex;B++)b[B]!==v[K]?(B<i.startIndex&&(E-=1),L-=1):K+=1;return{latex:v,startIndex:E,endIndex:L}},s.prototype.classifyLatexForEfficientUpdate=function(i){if(typeof i=="string"){var o=i.match(/-?[0-9.]+$/g);if(o&&o.length===1)return{latex:i,prefix:i.substr(0,i.length-o[0].length),digits:o[0]}}},s.prototype.updateLatexMathEfficiently=function(i,o){var d,h,b,v,E=this.root,L,K=this.classifyLatexForEfficientUpdate(i);if(K){if(L=this.classifyLatexForEfficientUpdate(o),!L||L.prefix!==K.prefix)return!1}else return!1;var B=L.digits,_=K.digits,H=!1,X=!1;B[0]==="-"&&(H=!0,B=B.substr(1)),_[0]==="-"&&(X=!0,_=_.substr(1));for(var re=this.root.getEnd(t),ne=[],ue=B.length-1;ue>=0;ue--){if(!re||re.ctrlSeq!==B[ue]||re.parent!==E)return!1;ne.unshift(re),re=re[e]}if(H&&!X){var Pe=re;if(!Pe||Pe.ctrlSeq!=="-"||Pe[t]!==ne[0]||Pe.parent!==E)return!1;var lt=Pe[e];if(lt&&lt.parent!==E)return!1;ne[0][e]=Pe[e],E.getEnd(e)===Pe&&E.setEnds((d={},d[e]=ne[0],d[t]=E.getEnd(t),d)),lt&&(lt[t]=ne[0]),Pe.domFrag().remove()}if(!H&&X){var Oe=new ri("-"),dt=document.createElement("span");dt.textContent="-",Oe.setDOM(dt);var Dr=ne[0][e];Dr&&(Dr[t]=Oe),E.getEnd(e)===ne[0]&&E.setEnds((h={},h[e]=Oe,h[t]=E.getEnd(t),h)),Oe.parent=E,Oe[e]=ne[0][e],Oe[t]=ne[0],ne[0][e]=Oe,Oe.contactWeld(this.cursor),Oe.domFrag().insertBefore(ne[0].domFrag())}var wr=Math.min(B.length,_.length);for(ue=0;ue<wr;ue++){var kn=_[ue];re=ne[ue],re.ctrlSeq!==kn&&(re.ctrlSeq=kn,re.domFrag().oneElement().textContent=kn,re.mathspeakName=kn)}if(B.length>_.length)for(re=ne[_.length-1],E.setEnds((b={},b[e]=E.getEnd(e),b[t]=re,b)),re[t]=0,ue=B.length-1;ue>=wr;ue--)ne[ue].domFrag().remove();if(_.length>B.length){var Fe=document.createDocumentFragment();for(ue=wr;ue<_.length;ue++){var Fn=document.createElement("span");Fn.className="dcg-mq-digit",Fn.textContent=_[ue];var cn=new Yi(_[ue]);cn.parent=E,cn.setDOM(Fn),Fe.appendChild(Fn),cn[e]=E.getEnd(t),cn[t]=0;var ms=cn[e];ms[t]=cn,E.setEnds((v={},v[e]=E.getEnd(e),v[t]=cn,v))}E.domFrag().oneElement().appendChild(Fe)}var to=this.exportLatex();if(to!==i)return console.warn("tried updating latex efficiently but did not work. Attempted: "+i+" but wrote: "+to),!1;var fs=E.getEnd(t);return fs&&fs.fixDigitGrouping(this.cursor.options),!0},s.prototype.renderLatexMathFromScratch=function(i){var o,d=this.root,h=this.cursor,b=Ee.all,v=Ee.eof,E=yr.skip(v).or(b.result(!1)).parse(i);if(d.setEnds((o={},o[e]=0,o[t]=0,o)),E&&E.children().adopt(d,0,0),E){var L=d.domFrag();L.children().remove(),L.oneElement().appendChild(E.html()),d.finalizeInsert(h.options,h)}else d.domFrag().empty()},s.prototype.renderLatexMath=function(i){var o=this.cursor,d=this.root;this.notify("replace"),o.clearSelection();var h=this.exportLatex();(!d.getEnd(e)||!d.getEnd(t)||h!==i)&&(this.updateLatexMathEfficiently(i,h)||this.renderLatexMathFromScratch(i),this.updateMathspeak()),o.insAtRightEnd(d)},s.prototype.renderLatexText=function(i){var o,d=this.root,h=this.cursor;d.domFrag().children().slice(1).remove(),d.setEnds((o={},o[e]=0,o[t]=0,o)),delete h.selection,h.show().insAtRightEnd(d);var b=Ee.regex,v=Ee.string,E=Ee.eof,L=Ee.all,K=v("$").then(yr).skip(v("$").or(E)).map(function(ne){var ue=new RootMathCommand(h);ue.createBlocks();var Pe=ue.getEnd(e);return ne.children().adopt(Pe,0,0),ue}),B=v("\\$").result("$"),_=B.or(b(/^[^$]/)).map(function(ne){return new ei(ne)}),H=K.or(_).many(),X=H.skip(E).or(L.result(!1)).parse(i);if(X){for(var re=0;re<X.length;re+=1)X[re].adopt(d,d.getEnd(t),0);ge(d.html()).appendTo(d.domFrag().oneElement()),d.finalizeInsert(h.options,h)}},s}(ns),Gc=function(u){return!1};tr.prototype.ignoreNextMousedown=Gc;var Ma;(function(){xn.onNotify(function(u,s){(s==="edit"||s==="replace")&&Ma&&Ma.cursor===u&&Ma.cb()})})();var Vu=function(u){ie(s,u);function s(){var i=u!==null&&u.apply(this,arguments)||this;return i.handleMouseDown=function(o){var d=f(o.target,".dcg-mq-root-block"),h=d&&Ht.getNodeOfElement(d)||Ht.getNodeOfElement(i.root.domFrag().oneElement()),b=h.domFrag().firstNode().ownerDocument,v=h.controller,E=v.cursor,L=E.blink,K=v.getTextareaSpanOrThrow(),B=v.getTextareaOrThrow();if(o.preventDefault(),o.target.unselectable=!0,E.options.ignoreNextMousedown(o)||(E.options.ignoreNextMousedown=Gc,f(o.target,".dcg-mq-ignore-mousedown")))return;var _=null;function H(lt){_=lt.target}function X(lt){E.anticursor||E.startSelection(),v.seek(_,lt.clientX,lt.clientY).cursor.select(),E.selection&&E.controller.aria.clear().queue(E.selection.join("mathspeak")+" selected").alert(),_=null}function re(){d==null||d.removeEventListener("mousemove",H),b==null||b.removeEventListener("mousemove",X),b==null||b.removeEventListener("mouseup",ue),Ma=void 0}function ne(){v.editable?(E.show(),E.controller.aria.queue(E.parent).alert()):ge(K).detach()}function ue(){E.blink=L,E.selection||ne(),re()}var Pe;Ma={cursor:E,cb:function(){Pe=!0,E.blink=L,E.clearSelection(),ne(),re()}},!(v.blurred&&(d&&!v.editable&&ge(d).prepend(ge(K)),B.focus(),Pe))&&(E.blink=a,v.seek(o.target,o.clientX,o.clientY).cursor.startSelection(),d==null||d.addEventListener("mousemove",H),b==null||b.addEventListener("mousemove",X),b==null||b.addEventListener("mouseup",ue))},i}return s.prototype.addMouseEventListener=function(){this.container.addEventListener("mousedown",this.handleMouseDown)},s.prototype.removeMouseEventListener=function(){this.container.removeEventListener("mousedown",this.handleMouseDown)},s.prototype.seek=function(i,o,d){for(var h=this.notify("select").cursor,b;i&&(b=Ht.getNodeOfElement(i),!b);)i=i.parentElement;return b||(b=this.root),h.clearSelection().show(),b.seek(o,h),this.scrollHoriz(),this},s}(Lc),Iu=function(u){ie(s,u);function s(){return u!==null&&u.apply(this,arguments)||this}return s.prototype.setOverflowClasses=function(){var i=this.root.domFrag().oneElement(),o=!1,d=!1;if(!this.blurred){var h=ze(i).width,b=i.scrollWidth,v=i.scrollLeft;o=b>h+v,d=v>0}i.classList.contains("dcg-mq-editing-overflow-right")!==o&&i.classList.toggle("dcg-mq-editing-overflow-right"),i.classList.contains("dcg-mq-editing-overflow-left")!==d&&i.classList.toggle("dcg-mq-editing-overflow-left")},s.prototype.scrollHoriz=function(){var i=this,o=this.cursor,d=o.selection,h=ze(this.root.domFrag().oneElement());if(o.domFrag().isEmpty()&&!d){this.cancelScrollHoriz&&(this.cancelScrollHoriz(),this.cancelScrollHoriz=void 0);var b=this.root.domFrag().oneElement(),v=b.scrollLeft;Je(this.getScrollAnimationDuration(),function(ne,ue,Pe){ne>=1?(i.cancelScrollHoriz=void 0,b.scrollLeft=0,i.setOverflowClasses()):(i.cancelScrollHoriz=Pe,ue(),b.scrollLeft=Math.round((1-ne)*v))});return}else if(d){var K=ze(d.domFrag().oneElement()),B=K.left-(h.left+20),_=K.right-(h.right-20);if(d.getEnd(e)===o[t])if(B<0)var L=B;else if(_>0)if(K.left-_<h.left+20)var L=B;else var L=_;else return;else if(_>0)var L=_;else if(B<0)if(K.right-B>h.right-20)var L=_;else var L=B;else return}else{var E=ze(o.domFrag().oneElement()).left;if(E>h.right-20)var L=E-(h.right-20);else if(E<h.left+20)var L=E-(h.left+20);else return}var H=this.root.domFrag().oneElement();if(!(L<0&&H.scrollLeft===0)&&!(L>0&&H.scrollWidth<=H.scrollLeft+h.width)){this.cancelScrollHoriz&&(this.cancelScrollHoriz(),this.cancelScrollHoriz=void 0);var X=this.root.domFrag().oneElement(),re=X.scrollLeft;Je(this.getScrollAnimationDuration(),function(ne,ue,Pe){ne>=1?(i.cancelScrollHoriz=void 0,X.scrollLeft=Math.round(re+L),i.setOverflowClasses()):(i.cancelScrollHoriz=Pe,ue(),X.scrollLeft=Math.round(re+ne*L))})}},s.prototype.getScrollAnimationDuration=function(){var i;return(i=this.options.scrollAnimationDuration)!==null&&i!==void 0?i:100},s}(Vu);tr.prototype.substituteTextarea=function(){return g("textarea",{autocapitalize:"off",autocomplete:"off",autocorrect:"off",spellcheck:!1,"x-palm-disable-ste-all":!0})};function Vc(u,s){return Ac(u[0],s)}tr.prototype.substituteKeyboardEvents=Vc;var is=function(u){ie(s,u);function s(){var i=u!==null&&u.apply(this,arguments)||this;return i.selectFn=a,i}return s.prototype.createTextarea=function(){this.textareaSpan=g("span",{class:"dcg-mq-textarea"});var i=this.options.substituteTextarea();if(!i.nodeType)throw"substituteTextarea() must return a DOM element, got "+i;this.textarea=ge(i).appendTo(this.textareaSpan).oneElement();var o=this;o.cursor.selectionChanged=function(){o.selectionChanged()}},s.prototype.selectionChanged=function(){var i=this;i.textareaSelectionTimeout||(i.textareaSelectionTimeout=setTimeout(function(){i.setTextareaSelection()}))},s.prototype.setTextareaSelection=function(){this.textareaSelectionTimeout=0;var i="";this.cursor.selection&&(i=this.cleanLatex(this.cursor.selection.join("latex")),this.options.statelessClipboard&&(i="$"+i+"$")),this.selectFn(i)},s.prototype.staticMathTextareaEvents=function(){var i=this;this.removeTextareaEventListener("cut"),this.removeTextareaEventListener("paste"),i.options.disableCopyPaste?this.removeTextareaEventListener("copy"):this.addTextareaEventListeners({copy:function(){i.setTextareaSelection()}}),this.addStaticFocusBlurListeners(),i.selectFn=function(o){var d=i.getTextareaOrThrow();d instanceof HTMLTextAreaElement&&(d.value=o,o&&d.select())}},s.prototype.editablesTextareaEvents=function(){var i=this,o=i.getTextareaOrThrow(),d=i.getTextareaSpanOrThrow();if(this.options.version<3){var h=this.options.assertJquery(),b=this.options.substituteKeyboardEvents(h(o),this);this.selectFn=function(E){b.select(E)}}else{var v=Ac(o,this).select;this.selectFn=v}ge(this.container).prepend(ge(d)),this.addEditableFocusBlurListeners(),this.updateMathspeak()},s.prototype.unbindEditablesEvents=function(){var i=this,o=i.getTextareaOrThrow(),d=i.getTextareaSpanOrThrow();this.selectFn=function(h){o instanceof HTMLTextAreaElement&&(o.value=h,h&&o.select())},ge(d).remove(),this.removeTextareaEventListener("focus"),this.removeTextareaEventListener("blur"),i.blurred=!0,this.removeTextareaEventListener("cut"),this.removeTextareaEventListener("paste")},s.prototype.typedText=function(i){if(i===`
`)return this.handle("enter");var o=this.notify(void 0).cursor;o.parent.write(o,i),this.scrollHoriz()},s.prototype.cut=function(){var i=this,o=i.cursor;o.selection&&setTimeout(function(){i.notify("edit"),o.parent.bubble(function(d){d.reflow()}),i.options&&i.options.onCut&&i.options.onCut()})},s.prototype.copy=function(){this.setTextareaSelection()},s.prototype.paste=function(i){this.options.statelessClipboard&&(i.slice(0,1)==="$"&&i.slice(-1)==="$"?i=i.slice(1,-1):i="\\text{"+i+"}"),this.writeLatex(i).cursor.show(),this.scrollHoriz(),this.options&&this.options.onPaste&&this.options.onPaste()},s.prototype.setupStaticField=function(){this.mathspeakSpan=g("span",{class:"dcg-mq-mathspeak"}),ge(this.container).prepend(ge(this.mathspeakSpan)),this.updateMathspeak(),this.blurred=!0,this.cursor.hide().parent.blur(this.cursor)},s.prototype.updateMathspeak=function(){var i=this,o=i.getAriaLabel(),d=/[A-Za-z0-9]$/.test(o)?o+":":o,h=i.root.mathspeak().trim();this.aria.clear();var b=i.getTextareaOrThrow();i.mathspeakSpan?(b.setAttribute("aria-label",""),i.mathspeakSpan.textContent=(d+" "+h).trim()):b.setAttribute("aria-label",(d+" "+h+" "+i.ariaPostLabel).trim())},s}(Iu),on=function(u){ie(s,u);function s(){return u!==null&&u.apply(this,arguments)||this}return s.prototype.finalizeInsert=function(i,o){var d=this;d.postOrder(function(v){v.finalizeTree(i)}),d.postOrder(function(v){v.contactWeld(o)}),d.postOrder(function(v){v.blur(o)}),d.postOrder(function(v){v.reflow()});var h=d[t],b=d[e];h&&h.siblingCreated(i,e),b&&b.siblingCreated(i,t),d.bubble(function(v){v.reflow()})},s.prototype.prepareInsertionAt=function(i){var o=i.options.maxDepth;if(o!==void 0){var d=i.depth();if(d>o)return!1;this.removeNodesDeeperThan(o-d)}return!0},s.prototype.removeNodesDeeperThan=function(i){for(var o=0,d=[[this,o]],h;h=d.shift();){var b=h;b[0].children().each(function(v){var E=v instanceof Tr?1:0;o=b[1]+E,o<=i?d.push([v,o]):(E?v.children():v).remove()})}},s}(fr),St=function(){function u(s,i){this.childCount=s,this.render=i}return u}(),Pt=function(u){ie(s,u);function s(i,o,d){var h=u.call(this)||this;return h.textTemplate=[""],h.mathspeakTemplate=[""],h.setCtrlSeqHtmlAndText(i,o,d),h}return s.prototype.setEnds=function(i){c("MathCommand ends are never empty",i[e]&&i[t]),this.ends=i},s.prototype.getEnd=function(i){return this.ends[i]},s.prototype.setCtrlSeqHtmlAndText=function(i,o,d){this.ctrlSeq||(this.ctrlSeq=i),o&&(this.domView=o),d&&(this.textTemplate=d)},s.prototype.replaces=function(i){i.disown(),this.replacedFragment=i},s.prototype.isEmpty=function(){return this.foldChildren(!0,function(i,o){return i&&o.isEmpty()})},s.prototype.parser=function(){var i=this,o=yr.block;return o.times(this.numBlocks()).map(function(d){i.blocks=d;for(var h=0;h<d.length;h+=1)d[h].adopt(i,i.getEnd(t),0);return i})},s.prototype.createLeftOf=function(i){var o=this,d=o.replacedFragment;if(o.createBlocks(),u.prototype.createLeftOf.call(this,i),d){var h=o.getEnd(e);d.adopt(h,0,0),d.domFrag().appendTo(h.domFrag().oneElement()),o.placeCursor(i),o.prepareInsertionAt(i)}o.finalizeInsert(i.options,i),o.placeCursor(i)},s.prototype.createBlocks=function(){for(var i=this,o=i.numBlocks(),d=i.blocks=Array(o),h=0;h<o;h+=1){var b=d[h]=new Tr;b.adopt(i,i.getEnd(t),0)}},s.prototype.placeCursor=function(i){i.insAtRightEnd(this.foldChildren(this.getEnd(e),function(o,d){return o.isEmpty()?o:d}))},s.prototype.moveTowards=function(i,o,d){var h;d==="up"?h=this.upInto:d==="down"&&(h=this.downInto);var b=h||this.getEnd(-i);o.insAtDirEnd(-i,b),o.controller.aria.queueDirEndOf(-i).queue(o.parent,!0)},s.prototype.deleteTowards=function(i,o){this.isEmpty()?o[i]=this.remove()[i]:this.moveTowards(i,o)},s.prototype.selectTowards=function(i,o){o[-i]=this,o[i]=this[i]},s.prototype.selectChildren=function(){return new Sc(this,this)},s.prototype.unselectInto=function(i,o){var d=o.anticursor,h=d.ancestors[this.id];o.insAtDirEnd(-i,h)},s.prototype.seek=function(i,o){function d(E){var L,K=E.domFrag().oneElement(),B=ze(K).left,_=B+K.offsetWidth;return L={},L[e]=B,L[t]=_,L}var h=this,b=d(h);if(i<b[e])return o.insLeftOf(h);if(i>b[t])return o.insRightOf(h);var v=b[e];h.eachChild(function(E){var L=d(E);if(i<L[e])return i-v<L[e]-i?E[e]?o.insAtRightEnd(E[e]):o.insLeftOf(h):o.insAtLeftEnd(E),!1;if(i>L[t]){E[t]?v=L[t]:b[t]-i<i-L[t]?o.insRightOf(h):o.insAtRightEnd(E);return}else return E.seek(i,o),!1})},s.prototype.numBlocks=function(){return this.domView.childCount},s.prototype.html=function(){var i=this.blocks;c("domView is defined",this.domView);var o=this.domView,d=o.render(i||[]);return this.setDOM(d),Ht.linkElementByCmdNode(d,this),d},s.prototype.latexRecursive=function(i){this.checkCursorContextOpen(i),i.latex+=this.ctrlSeq||"",this.eachChild(function(o){i.latex+="{";var d=i.latex.length;o.latexRecursive(i);var h=i.latex.length;d===h&&(i.latex+=" "),i.latex+="}"}),this.checkCursorContextClose(i)},s.prototype.text=function(){var i=this,o=0;return i.foldChildren(i.textTemplate[o],function(d,h){o+=1;var b=h.text();return d&&i.textTemplate[o]==="("&&b[0]==="("&&b.slice(-1)===")"?d+b.slice(1,-1)+i.textTemplate[o]:d+b+(i.textTemplate[o]||"")})},s.prototype.mathspeak=function(){var i=this,o=0;return i.foldChildren(i.mathspeakTemplate[o]||"Start"+i.ctrlSeq+" ",function(d,h){return o+=1,d+" "+h.mathspeak()+" "+(i.mathspeakTemplate[o]+" "||"End"+i.ctrlSeq+" ")})},s}(on),br=function(u){ie(s,u);function s(i,o,d,h){var b=u.call(this)||this;return b.setCtrlSeqHtmlTextAndMathspeak(i,o?new St(0,function(){return o.cloneNode(!0)}):void 0,d,h),b}return s.prototype.setCtrlSeqHtmlTextAndMathspeak=function(i,o,d,h){!d&&i&&(d=i.replace(/^\\/,"")),this.mathspeakName=h||d,u.prototype.setCtrlSeqHtmlAndText.call(this,i,o,[d||""])},s.prototype.parser=function(){return Ee.succeed(this)},s.prototype.numBlocks=function(){return 0},s.prototype.replaces=function(i){i.remove()},s.prototype.createBlocks=function(){},s.prototype.moveTowards=function(i,o){o.domFrag().insDirOf(i,this.domFrag()),o[-i]=this,o[i]=this[i],o.controller.aria.queue(this)},s.prototype.deleteTowards=function(i,o){o[i]=this.remove()[i]},s.prototype.seek=function(i,o){var d=this.domFrag().oneElement(),h=ze(d).left;return i-h<d.offsetWidth/2?o.insLeftOf(this):o.insRightOf(this),o},s.prototype.latexRecursive=function(i){this.checkCursorContextOpen(i),i.latex+=this.ctrlSeq||"",this.checkCursorContextClose(i)},s.prototype.text=function(){return this.textTemplate.join("")},s.prototype.mathspeak=function(i){return this.mathspeakName||""},s.prototype.placeCursor=function(){},s.prototype.isEmpty=function(){return!0},s}(Pt),ei=function(u){ie(s,u);function s(i,o,d){return u.call(this,i,g("span",{},[o||g.text(i)]),void 0,d)||this}return s}(br);function Rr(u,s,i){return function(){return new ei(u,s?g.entityText(s):void 0,i)}}var Cr=function(u){ie(s,u);function s(i,o,d,h,b){var v=this;return b?v=u.call(this,i,g("span",{},[o||g.text(i||"")]),void 0,h)||this:v=u.call(this,i,g("span",{class:"dcg-mq-binary-operator"},o?[o]:[]),d,h)||this,v}return s}(br);function ji(u,s,i,o){return function(){return new Cr(u,s?g.entityText(s):void 0,i,o)}}var Tr=function(u){ie(s,u);function s(){var i=u!==null&&u.apply(this,arguments)||this;return i.ariaLabel="block",i}return s.prototype.join=function(i){return this.foldChildren("",function(o,d){return o+d[i]()})},s.prototype.html=function(){var i=document.createDocumentFragment();return this.eachChild(function(o){var d=o.html();i.appendChild(d)}),i},s.prototype.latexRecursive=function(i){this.checkCursorContextOpen(i),this.eachChild(function(o){return o.latexRecursive(i)}),this.checkCursorContextClose(i)},s.prototype.text=function(){var i=this.getEnd(e),o=this.getEnd(t);return i===o&&i!==0?i.text():this.join("text")},s.prototype.mathspeak=function(){var i="",o={};return this.controller&&(o=this.controller.options.autoOperatorNames),this.foldChildren([],function(d,h){if(h.isPartOfOperator)i+=h.mathspeak();else{if(i!==""){if(o._maxLength>0){var b=o[i.toLowerCase()];typeof b=="string"&&(i=b)}d.push(i+" "),i=""}var v=h.mathspeak(),E=h.ctrlSeq;isNaN(E)&&E!=="."&&(!h.parent||!h.parent.parent||!h.parent.parent.isTextBlock())&&(v=" "+v+" "),d.push(v)}return d}).join("").replace(/ +(?= )/g,"").replace(/(\.)([0-9]+)/g,function(d,h,b){return h+b.split("").join(" ").trim()})},s.prototype.keystroke=function(i,o,d){if(d.options.spaceBehavesLikeTab&&(i==="Spacebar"||i==="Shift-Spacebar")){o==null||o.preventDefault(),d.escapeDir(i==="Shift-Spacebar"?e:t,i,o);return}return u.prototype.keystroke.call(this,i,o,d)},s.prototype.moveOutOf=function(i,o,d){var h;if(d==="up"?h=this.parent.upInto:d==="down"&&(h=this.parent.downInto),!h&&this[i]){var b=-i;o.insAtDirEnd(b,this[i]),o.controller.aria.queueDirEndOf(b).queue(o.parent,!0)}else o.insDirOf(i,this.parent),o.controller.aria.queueDirOf(i).queue(this.parent)},s.prototype.selectOutOf=function(i,o){o.insDirOf(i,this.parent)},s.prototype.deleteOutOf=function(i,o){o.unwrapGramp()},s.prototype.seek=function(i,o){var d=this.getEnd(t);if(!d)return o.insAtRightEnd(this);var h=d.domFrag().oneElement(),b=ze(h).left;if(b+h.offsetWidth<i)return o.insAtRightEnd(this);var v=this.getEnd(e);if(i<ze(v.domFrag().oneElement()).left)return o.insAtLeftEnd(this);for(;i<ze(d.domFrag().oneElement()).left;)d=d[e];return d.seek(i,o)},s.prototype.chToCmd=function(i,o){var d;return i.match(/^[a-eg-zA-Z]$/)?new na(i):/^\d$/.test(i)?new Yi(i):o&&o.typingSlashWritesDivisionSymbol&&i==="/"?C["\xF7"](i):o&&o.typingAsteriskWritesTimesSymbol&&i==="*"?C["\xD7"](i):o&&o.typingPercentWritesPercentOf&&i==="%"?C.percentof(i):(d=an[i]||C[i])?d.constructor?new d(i):d(i):new ei(i)},s.prototype.write=function(i,o){var d=this.chToCmd(o,i.options);i.selection&&d.replaces(i.replaceSelection()),i.isTooDeep()||(d.createLeftOf(i.show()),o==="/"?i.controller.aria.alert("over"):i.controller.aria.alert(d.mathspeak({createdLeftOf:i})))},s.prototype.writeLatex=function(i,o){var d=Ee.all,h=Ee.eof,b=yr.skip(h).or(d.result(!1)).parse(o);if(b&&!b.isEmpty()&&b.prepareInsertionAt(i)){b.children().adopt(i.parent,i[e],i[t]),ge(b.html()).insertBefore(i.domFrag()),i[e]=b.getEnd(t),b.finalizeInsert(i.options,i);var v=b.getEnd(t),E=b.getEnd(e),L=v[t],K=E[e];L&&L.siblingCreated(i.options,e),K&&K.siblingCreated(i.options,t),i.parent.bubble(function(B){B.reflow()})}},s.prototype.focus=function(){return this.domFrag().addClass("dcg-mq-hasCursor"),this.domFrag().removeClass("dcg-mq-empty"),this},s.prototype.blur=function(i){return this.domFrag().removeClass("dcg-mq-hasCursor"),this.isEmpty()&&(this.domFrag().addClass("dcg-mq-empty"),i&&this.isQuietEmptyDelimiter(i.options.quietEmptyDelimiters)&&this.domFrag().addClass("dcg-mq-quiet-delimiter")),this},s}(on);tr.prototype.mouseEvents=!0,mr.StaticMath=function(u){var s;return s=function(i){ie(o,i);function o(d){var h=i.call(this,d)||this,b=h.innerFields=[];return h.__controller.root.postOrder(function(v){v.registerInnerField(b,u.InnerMathField)}),h}return o.prototype.__mathquillify=function(d,h){return this.config(d),i.prototype.mathquillify.call(this,"dcg-mq-math-mode"),this.__controller.setupStaticField(),this.__options.mouseEvents&&(this.__controller.addMouseEventListener(),this.__controller.staticMathTextareaEvents()),this},o.prototype.latex=function(d){var h=i.prototype.latex.apply(this,arguments);if(arguments.length>0){var b=this.innerFields=[];this.__controller.root.postOrder(function(v){v.registerInnerField(b,u.InnerMathField)}),this.__controller.updateMathspeak()}return h},o.prototype.setAriaLabel=function(d){return this.__controller.setAriaLabel(d),this},o.prototype.getAriaLabel=function(){return this.__controller.getAriaLabel()},o}(u.AbstractMathQuill),s.RootBlock=Tr,s};var Ic=function(u){ie(s,u);function s(){return u!==null&&u.apply(this,arguments)||this}return s}(Tr);Hi(Ic.prototype),mr.MathField=function(u){var s;return s=function(i){ie(o,i);function o(){return i!==null&&i.apply(this,arguments)||this}return o.prototype.__mathquillify=function(d,h){return this.config(d),h>1&&(this.__controller.root.reflow=a),i.prototype.mathquillify.call(this,"dcg-mq-editable-field dcg-mq-math-mode"),delete this.__controller.root.reflow,this},o}(u.EditableField),s.RootBlock=Ic,s},mr.InnerMathField=function(u){return c("MathField class is defined",u.MathField),function(s){ie(i,s);function i(){return s!==null&&s.apply(this,arguments)||this}return i.prototype.makeStatic=function(){this.__controller.editable=!1,this.__controller.root.blur(),this.__controller.unbindEditablesEvents(),ge(this.__controller.container).removeClass("dcg-mq-editable-field")},i.prototype.makeEditable=function(){this.__controller.editable=!0,this.__controller.editablesTextareaEvents(),this.__controller.cursor.insAtRightEnd(this.__controller.root),ge(this.__controller.container).addClass("dcg-mq-editable-field")},i}(u.MathField)};var os=function(u){ie(s,u);function s(){return u!==null&&u.apply(this,arguments)||this}return s.prototype.finalizeTree=function(i,o){this.sharedSiblingMethod(i,o)},s.prototype.siblingDeleted=function(i,o){this.sharedSiblingMethod(i,o)},s.prototype.siblingCreated=function(i,o){this.sharedSiblingMethod(i,o)},s.prototype.sharedSiblingMethod=function(i,o){o!==e&&this[t]instanceof s||this.fixDigitGrouping(i)},s.prototype.fixDigitGrouping=function(i){if(i.enableDigitGrouping){var o=this,d=this,h=0,b=[],v="\\ ",E=".",L=o;do if(/^[0-9]$/.test(L.ctrlSeq))o=L;else if(L.ctrlSeq===v)o=L,h+=1;else if(L.ctrlSeq===E)o=L,b.push(L);else break;while(L=o[e]);for(;L=d[t];)if(/^[0-9]$/.test(L.ctrlSeq))d=L;else if(L.ctrlSeq===v)d=L,h+=1;else if(L.ctrlSeq===E)d=L,b.push(L);else break;for(;d!==o&&o&&o.ctrlSeq===v;)o=o[t],h-=1;for(;d!==o&&d&&d.ctrlSeq===v;)d=d[e],h-=1;if(!(o===d&&o&&o.ctrlSeq===v)){var K=h>0||b.length>1;K?this.removeGroupingBetween(o,d):b[0]?(b[0]!==o&&this.addGroupingBetween(b[0][e],o),b[0]!==d&&this.removeGroupingBetween(b[0][t],d)):this.addGroupingBetween(d,o)}}},s.prototype.removeGroupingBetween=function(i,o){var d=i;do if(d instanceof s&&d.setGroupingClass(void 0),!d||d===o)break;while(d=d[t])},s.prototype.addGroupingBetween=function(i,o){for(var v=i,d=0,h=0,v=i;v&&(h+=1,v!==o);)v=v[e];var b=h%3;b===0&&(b=3);for(var v=i;v;){d+=1;var E=void 0;if(h>=4&&(d===h?E="dcg-mq-group-leading-"+b:d%3===0&&d!==h&&(E="dcg-mq-group-start"),E||(E="dcg-mq-group-other")),v instanceof s&&v.setGroupingClass(E),v===o)break;v=v[e]}},s.prototype.setGroupingClass=function(i){this._groupingClass!==i&&(this._groupingClass&&this.domFrag().removeClass(this._groupingClass),i&&this.domFrag().addClass(i),this._groupingClass=i)},s}(br),Yi=function(u){ie(s,u);function s(i,o){return u.call(this,i,g("span",{class:"dcg-mq-digit"},[g.text(i)]),void 0,o)||this}return s.prototype.createLeftOf=function(i){var o=i[e],d=o&&o[e],h=i.parent.parent instanceof Br?i.parent.parent.sub:void 0;i.options.autoSubscriptNumerals&&i.parent!==h&&(o instanceof On&&o.isItalic!==!1||o instanceof Br&&d instanceof On&&d.isItalic!==!1)?(new qc().createLeftOf(i),u.prototype.createLeftOf.call(this,i),i.insRightOf(i.parent.parent)):u.prototype.createLeftOf.call(this,i)},s.prototype.mathspeak=function(i){if(i&&i.createdLeftOf){var o=i.createdLeftOf,d=o[e],h=d&&d[e],b=o.parent.parent instanceof Br?o.parent.parent.sub:void 0;if(o.options.autoSubscriptNumerals&&o.parent!==b&&(d instanceof On&&d.isItalic!==!1||o[e]instanceof Br&&h instanceof On&&h.isItalic!==!1))return"Subscript "+u.prototype.mathspeak.call(this)+" Baseline"}return u.prototype.mathspeak.call(this)},s}(os),On=function(u){ie(s,u);function s(i,o){return u.call(this,i,g("var",{},[o||g.text(i)]))||this}return s.prototype.text=function(){var i=this.ctrlSeq||"";return this.isPartOfOperator?i[0]=="\\"?i=i.slice(1,i.length):i[i.length-1]==" "&&(i=i.slice(0,-1)):(this[e]&&!(this[e]instanceof s)&&!(this[e]instanceof Cr)&&this[e].ctrlSeq!=="\\ "&&(i="*"+i),this[t]&&!(this[t]instanceof Cr)&&!(this[t]instanceof Br)&&(i+="*")),i},s.prototype.mathspeak=function(){var i=this.ctrlSeq||"";return this.isPartOfOperator||i.length>1||this.parent&&this.parent.parent&&this.parent.parent.isTextBlock()?u.prototype.mathspeak.call(this):'"'+i+'"'},s}(br);function Sr(u,s,i){return function(){return new On(u,g.entityText(s))}}tr.prototype.autoCommands={_maxLength:0},wn.autoCommands=function(u){if(typeof u!="string"||!/^[a-z]+(?: [a-z]+)*$/i.test(u))throw'"'+u+'" not a space-delimited list of only letters';for(var s=u.split(" "),i={},o=0,d=0;d<s.length;d+=1){var h=s[d];if(h.length<2)throw'autocommand "'+h+'" not minimum length of 2';if(C[h]===Nc)throw'"'+h+'" is a built-in operator name';i[h]=1,o=n(o,h.length)}return i._maxLength=o,i},tr.prototype.quietEmptyDelimiters={},wn.quietEmptyDelimiters=function(u){u===void 0&&(u="");for(var s=u.split(" "),i={},o=0;o<s.length;o+=1){var d=s[o];i[d]=1}return i},tr.prototype.autoParenthesizedFunctions={_maxLength:0},wn.autoParenthesizedFunctions=function(u){if(typeof u!="string"||!/^[a-z]+(?: [a-z]+)*$/i.test(u))throw'"'+u+'" not a space-delimited list of only letters';for(var s=u.split(" "),i={},o=0,d=0;d<s.length;d+=1){var h=s[d];if(h.length<2)throw'autocommand "'+h+'" not minimum length of 2';i[h]=1,o=n(o,h.length)}return i._maxLength=o,i};var na=function(u){ie(s,u);function s(i){var o=u.call(this,i)||this;return o.letter=i,o}return s.prototype.checkAutoCmds=function(i){if(!this.shouldIgnoreSubstitutionInSimpleSubscript(i.options)){var o=i.options.autoCommands,d=o._maxLength||0;if(d>0){for(var h="",b=this,v=0;b instanceof s&&b.ctrlSeq===b.letter&&v<d;)h=b.letter+h,b=b[e],v+=1;for(;h.length;){if(o.hasOwnProperty(h)){for(b=this,v=1;b&&v<h.length;v+=1,b=b[e]);new jt(b,this).remove(),i[e]=b[e];var E=C[h],L;return Tu(E)?L=new E(h):L=E(h),L.createLeftOf(i)}h=h.slice(1)}}}},s.prototype.autoParenthesize=function(i){var o=i.parent.getEnd(t);if(!(o&&o instanceof Ur&&o.ctrlSeq==="\\left(")&&!this.shouldIgnoreSubstitutionInSimpleSubscript(i.options)){for(var d="",h=this,b=0,v=i.options.autoParenthesizedFunctions,E=v._maxLength||0,L=i.options.autoOperatorNames;h instanceof s&&b<E;)d=h.letter+d,h=h[e],b+=1;for(;d.length;){if(v.hasOwnProperty(d)&&L.hasOwnProperty(d))return i.parent.write(i,"(");d=d.slice(1)}}},s.prototype.createLeftOf=function(i){u.prototype.createLeftOf.call(this,i),this.checkAutoCmds(i),this.autoParenthesize(i)},s.prototype.italicize=function(i){return this.isItalic=i,this.isPartOfOperator=!i,this.domFrag().toggleClass("dcg-mq-operator-name",!i),this},s.prototype.finalizeTree=function(i,o){this.sharedSiblingMethod(i,o)},s.prototype.siblingDeleted=function(i,o){this.sharedSiblingMethod(i,o)},s.prototype.siblingCreated=function(i,o){this.sharedSiblingMethod(i,o)},s.prototype.sharedSiblingMethod=function(i,o){o!==e&&this[t]instanceof s||this.autoUnItalicize(i)},s.prototype.autoUnItalicize=function(i){var o=i.autoOperatorNames;if(o._maxLength!==0&&!this.shouldIgnoreSubstitutionInSimpleSubscript(i)){for(var d=this.letter,h=this[e];h instanceof s;h=h[e])d=h.letter+d;for(var b=this[t];b instanceof s;b=b[t])d+=b.letter;var v=h&&h[t],E=b&&b[e];new jt(v||this.parent.getEnd(e),E||this.parent.getEnd(t)).each(function(wr){wr instanceof s&&(wr.italicize(!0).domFrag().removeClass("dcg-mq-first dcg-mq-last dcg-mq-followed-by-supsub"),wr.ctrlSeq=wr.letter)});var L=o._maxLength||0;e:for(var K=0,B=h[t]||this.parent.getEnd(e);B&&K<d.length;K+=1,B=B[t])for(var _=r(L,d.length-K);_>0;_-=1){var H=d.slice(K,K+_),X=void 0;if(o.hasOwnProperty(H)){for(var re=0,ne=B;re<_;re+=1,ne=ne[t])ne instanceof s&&(ne.italicize(!1),X=ne);var ue=ss.hasOwnProperty(H);if(B.ctrlSeq=(ue?"\\":"\\operatorname{")+B.ctrlSeq,X.ctrlSeq+=ue?" ":"}",Nu.hasOwnProperty(H)){var Pe=X[e],lt=Pe&&Pe[e],Oe=lt&&lt[e];Oe.domFrag().addClass("dcg-mq-last")}if(this.shouldOmitPadding(B[e])||B.domFrag().addClass("dcg-mq-first"),!this.shouldOmitPadding(X[t]))if(X[t]instanceof Br){var dt=X[t],Dr=dt.siblingCreated=dt.siblingDeleted=function(){dt.domFrag().toggleClass("dcg-mq-after-operator-name",!(dt[t]instanceof Ur))};Dr()}else X.domFrag().toggleClass("dcg-mq-last",!(X[t]instanceof Ur));K+=_-1,B=X;continue e}}}},s.prototype.shouldOmitPadding=function(i){return!i||i.ctrlSeq==="."||i instanceof Cr||i instanceof vn},s}(On),ss={};tr.prototype.autoOperatorNames=Ji();var Nu={limsup:1,liminf:1,projlim:1,injlim:1};function Ji(){for(var u={_maxLength:9},s="arg deg det dim exp gcd hom inf ker lg lim ln log max min sup limsup liminf injlim projlim Pr".split(" "),i=0;i<s.length;i+=1)ss[s[i]]=u[s[i]]=1;for(var o="sin cos tan arcsin arccos arctan sinh cosh tanh sec csc cot coth".split(" "),i=0;i<o.length;i+=1)ss[o[i]]=1;for(var d="sin cos tan sec cosec csc cotan cot ctg".split(" "),i=0;i<d.length;i+=1)u[d[i]]=u["arc"+d[i]]=u[d[i]+"h"]=u["ar"+d[i]+"h"]=u["arc"+d[i]+"h"]=1;for(var h="gcf hcf lcm proj span".split(" "),i=0;i<h.length;i+=1)u[h[i]]=1;return u}wn.autoOperatorNames=function(u){if(typeof u!="string")throw'"'+u+'" not a space-delimited list';if(!/^[a-z\|\-]+(?: [a-z\|\-]+)*$/i.test(u))throw'"'+u+'" not a space-delimited list of letters or "|"';for(var s=u.split(" "),i={},o=0,d=0;d<s.length;d+=1){var h=s[d];if(h.length<2)throw'"'+h+'" not minimum length of 2';if(h.indexOf("|")<0)i[h]=h,o=n(o,h.length);else{var b=h.split("|");if(b.length>2)throw'"'+h+'" has more than 1 mathspeak delimiter';if(b[0].length<2)throw'"'+h[0]+'" not minimum length of 2';i[b[0]]=b[1].replace(/-/g," "),o=n(o,b[0].length)}}return i._maxLength=o,i};var Nc=function(u){ie(s,u);function s(i){return u.call(this,i||"")||this}return s.prototype.createLeftOf=function(i){for(var o=this.ctrlSeq,d=0;d<o.length;d+=1)new na(o.charAt(d)).createLeftOf(i)},s.prototype.parser=function(){for(var i=this.ctrlSeq,o=new Tr,d=0;d<i.length;d+=1)new na(i.charAt(d)).adopt(o,o.getEnd(t),0);return Ee.succeed(o.children())},s}(br);for(var cs in tr.prototype.autoOperatorNames)tr.prototype.autoOperatorNames.hasOwnProperty(cs)&&(C[cs]=Nc);C.operatorname=function(u){ie(s,u);function s(){return u!==null&&u.apply(this,arguments)||this}return s.prototype.createLeftOf=function(){},s.prototype.numBlocks=function(){return 1},s.prototype.parser=function(){return yr.block.map(function(i){var o=!0,d="",h=i.children();return h.each(function(b){b instanceof na?d+=b.letter:o=!1}),o&&d==="ans"?Bc():h})},s}(Pt),C.f=function(u){ie(s,u);function s(){var i=this,o="f";return i=u.call(this,o)||this,i.letter=o,i.domView=new St(0,function(){return g("var",{class:"dcg-mq-f"},[g.text("f")])}),i}return s.prototype.italicize=function(i){return this.domFrag().eachElement(function(o){return o.textContent="f"}),this.domFrag().toggleClass("dcg-mq-f",i),u.prototype.italicize.call(this,i)},s}(na),C[" "]=C.space=function(){return new os("\\ ",g("span",{},[g.text(w)])," ")},C["."]=function(){return new os(".",g("span",{class:"dcg-mq-digit"},[g.text(".")]),".")},C["'"]=C.prime=Rr("'","&prime;","prime"),C["\u2033"]=C.dprime=Rr("\u2033","&Prime;","double prime"),C.backslash=Rr("\\backslash ","\\","backslash"),an["\\"]||(an["\\"]=C.backslash),C.$=Rr("\\$","$","dollar"),C.square=Rr("\\square ","\u25A1","square"),C.mid=Rr("\\mid ","\u2223","mid");var ti=function(u){ie(s,u);function s(i,o,d){return u.call(this,i,g("span",{class:"dcg-mq-nonSymbola"},[o||g.text(i)]))||this}return s}(br);C["@"]=function(){return new ti("@")},C["&"]=function(){return new ti("\\&",g.entityText("&amp;"),"and")},C["%"]=function(u){ie(s,u);function s(){return u.call(this,"\\%",g.text("%"),"percent")||this}return s.prototype.parser=function(){var i=Ee.optWhitespace,o=Ee.string;return i.then(o("\\operatorname{of}").map(function(){return Uc()})).or(u.prototype.parser.call(this))},s}(ti),C["\u2225"]=C.parallel=Rr("\\parallel ","&#x2225;","parallel"),C["\u2226"]=C.nparallel=Rr("\\nparallel ","&#x2226;","not parallel"),C["\u27C2"]=C.perp=Rr("\\perp ","&#x27C2;","perpendicular"),C.alpha=C.beta=C.gamma=C.delta=C.zeta=C.eta=C.theta=C.iota=C.kappa=C.mu=C.nu=C.xi=C.rho=C.sigma=C.tau=C.chi=C.psi=C.omega=function(u){return new On("\\"+u+" ",g.entityText("&"+u+";"))},C.phi=Sr("\\phi ","&#981;","phi"),C.phiv=C.varphi=Sr("\\varphi ","&phi;","phi"),C.epsilon=Sr("\\epsilon ","&#1013;","epsilon"),C.epsiv=C.varepsilon=Sr("\\varepsilon ","&epsilon;","epsilon"),C.piv=C.varpi=Sr("\\varpi ","&piv;","piv"),C.sigmaf=C.sigmav=C.varsigma=Sr("\\varsigma ","&sigmaf;","sigma"),C.thetav=C.vartheta=C.thetasym=Sr("\\vartheta ","&thetasym;","theta"),C.upsilon=C.upsi=Sr("\\upsilon ","&upsilon;","upsilon"),C.gammad=C.Gammad=C.digamma=Sr("\\digamma ","&#989;","gamma"),C.kappav=C.varkappa=Sr("\\varkappa ","&#1008;","kappa"),C.rhov=C.varrho=Sr("\\varrho ","&#1009;","rho"),C.pi=C.\u03C0=function(){return new ti("\\pi ",g.entityText("&pi;"),"pi")},C.lambda=function(){return new ti("\\lambda ",g.entityText("&lambda;"),"lambda")},C.Upsilon=C.Upsi=C.upsih=C.Upsih=function(){return new br("\\Upsilon ",g("var",{style:"font-family: serif"},[g.entityText("&upsih;")]),"capital upsilon")},C.Gamma=C.Delta=C.Theta=C.Lambda=C.Xi=C.Pi=C.Sigma=C.Phi=C.Psi=C.Omega=C.forall=function(u){return new ei("\\"+u+" ",g.entityText("&"+u+";"))};var xr=function(u){ie(s,u);function s(i){var o=u.call(this)||this;return o.latexStr=i,o}return s.prototype.createLeftOf=function(i){var o=yr.parse(this.latexStr);o.children().adopt(i.parent,i[e],i[t]),i[e]=o.getEnd(t),ge(o.html()).insertBefore(i.domFrag()),o.finalizeInsert(i.options,i);var d=o.getEnd(t),h=d&&d[t];h&&h.siblingCreated(i.options,e);var b=o.getEnd(e),v=b&&b[e];v&&v.siblingCreated(i.options,t),i.parent.bubble(function(E){E.reflow()})},s.prototype.mathspeak=function(){return yr.parse(this.latexStr).mathspeak()},s.prototype.parser=function(){var i=yr.parse(this.latexStr).children();return Ee.succeed(i)},s}(Pt);C["\u2070"]=function(){return new xr("^0")},C["\xB9"]=function(){return new xr("^1")},C["\xB2"]=function(){return new xr("^2")},C["\xB3"]=function(){return new xr("^3")},C["\u2074"]=function(){return new xr("^4")},C["\u2075"]=function(){return new xr("^5")},C["\u2076"]=function(){return new xr("^6")},C["\u2077"]=function(){return new xr("^7")},C["\u2078"]=function(){return new xr("^8")},C["\u2079"]=function(){return new xr("^9")},C["\xBC"]=function(){return new xr("\\frac14")},C["\xBD"]=function(){return new xr("\\frac12")},C["\xBE"]=function(){return new xr("\\frac34")},C["\u221A"]=function(){return new xr("\\sqrt{}")};function Qi(u){if(!u)return!1;var s=u[e];if(s){if(s instanceof Cr||/^(\\ )|[,;:\(\[]$/.test(s.ctrlSeq))return!1}else return u.parent&&u.parent.parent&&u.parent.parent.isStyleBlock()?Qi(u.parent.parent):!1;return!0}var ri=function(u){ie(s,u);function s(i,o,d){return u.call(this,i,o,void 0,d,!0)||this}return s.prototype.contactWeld=function(i,o){this.sharedSiblingMethod(i.options,o)},s.prototype.siblingCreated=function(i,o){this.sharedSiblingMethod(i,o)},s.prototype.siblingDeleted=function(i,o){this.sharedSiblingMethod(i,o)},s.prototype.sharedSiblingMethod=function(i,o){if(o!==t)return this.domFrag().oneElement().className=Qi(this)?"dcg-mq-binary-operator":"",this},s}(Cr);C["+"]=function(u){ie(s,u);function s(){return u.call(this,"+",g.text("+"))||this}return s.prototype.mathspeak=function(){return Qi(this)?"plus":"positive"},s}(ri);var Pc=function(u){ie(s,u);function s(){return u.call(this,"-",g.entityText("&minus;"))||this}return s.prototype.mathspeak=function(){return Qi(this)?"minus":"negative"},s}(ri);C["\u2212"]=C["\u2014"]=C["\u2013"]=C["-"]=Pc,C["\xB1"]=C.pm=C.plusmn=C.plusminus=function(){return new ri("\\pm ",g.entityText("&plusmn;"),"plus-or-minus")},C.mp=C.mnplus=C.minusplus=function(){return new ri("\\mp ",g.entityText("&#8723;"),"minus-or-plus")},an["*"]=C.sdot=C.cdot=ji("\\cdot ","&middot;","*","times");var Oc=function(u){ie(s,u);function s(){return u.call(this,"\\to ",g.entityText("&rarr;"),"to")||this}return s.prototype.deleteTowards=function(i,o){if(i===e){var d=o[e];new jt(d,this).remove(),o[e]=d[e],new Pc().createLeftOf(o),o[e].bubble(function(h){h.reflow()});return}u.prototype.deleteTowards.call(this,i,o)},s}(Cr);C["\u2192"]=C.to=Oc;var sn=function(u){ie(s,u);function s(i,o){var d=this,h=o?"Strict":"";return d=u.call(this,i["ctrlSeq".concat(h)],g.entityText(i["htmlEntity".concat(h)]),i["text".concat(h)],i["mathspeak".concat(h)])||this,d.data=i,d.strict=o,d}return s.prototype.swap=function(i){this.strict=i;var o=i?"Strict":"";this.ctrlSeq=this.data["ctrlSeq".concat(o)],this.domFrag().children().replaceWith(ge(g.entityText(this.data["htmlEntity".concat(o)]))),this.textTemplate=[this.data["text".concat(o)]],this.mathspeakName=this.data["mathspeak".concat(o)]},s.prototype.deleteTowards=function(i,o){if(i===e&&!this.strict){this.swap(!0),this.bubble(function(d){d.reflow()});return}u.prototype.deleteTowards.call(this,i,o)},s}(Cr),ls={ctrlSeq:"\\le ",htmlEntity:"&le;",text:"\u2264",mathspeak:"less than or equal to",ctrlSeqStrict:"<",htmlEntityStrict:"&lt;",textStrict:"<",mathspeakStrict:"less than"},Fc={ctrlSeq:"\\ge ",htmlEntity:"&ge;",text:"\u2265",mathspeak:"greater than or equal to",ctrlSeqStrict:">",htmlEntityStrict:"&gt;",textStrict:">",mathspeakStrict:"greater than"},ds=function(u){ie(s,u);function s(){return u.call(this,Fc,!0)||this}return s.prototype.createLeftOf=function(i){var o=i[e];if(o instanceof Cr&&o.ctrlSeq==="-"){var d=o;i[e]=d[e],d.remove(),new Oc().createLeftOf(i),i[e].bubble(function(h){h.reflow()});return}u.prototype.createLeftOf.call(this,i)},s}(sn);C["<"]=C.lt=function(){return new sn(ls,!0)},C[">"]=C.gt=ds,C["\u2264"]=C.le=C.leq=function(){return new sn(ls,!1)},C["\u2265"]=C.ge=C.geq=function(){return new sn(Fc,!1)},C.infty=C.infin=C.infinity=Rr("\\infty ","&infin;","infinity"),C["\u2260"]=C.ne=C.neq=ji("\\ne ","&ne;","not equal");var _c=function(u){ie(s,u);function s(){return u.call(this,"=",g.text("="),"=","equals")||this}return s.prototype.createLeftOf=function(i){var o=i[e];if(o instanceof sn&&o.strict){o.swap(!1),o.bubble(function(d){d.reflow()});return}u.prototype.createLeftOf.call(this,i)},s}(Cr);C["="]=_c,C["\xD7"]=C.times=C.cross=ji("\\times ","&times;","[x]","times"),C["\xF7"]=C.div=C.divide=C.divides=ji("\\div ","&divide;","[/]","over");var us=function(u){ie(s,u);function s(){return u.call(this,"\\sim ",g.text("~"),"~","tilde")||this}return s.prototype.createLeftOf=function(i){if(i[e]instanceof s){var o=i[e];i[e]=o[e],o.remove(),new Rc().createLeftOf(i),i[e].bubble(function(d){d.reflow()});return}u.prototype.createLeftOf.call(this,i)},s}(Cr),Rc=function(u){ie(s,u);function s(){return u.call(this,"\\approx ",g.entityText("&approx;"),"\u2248","approximately equal")||this}return s.prototype.deleteTowards=function(i,o){if(i===e){var d=o[e];new jt(d,this).remove(),o[e]=d[e],new us().createLeftOf(o),o[e].bubble(function(h){h.reflow()});return}u.prototype.deleteTowards.call(this,i,o)},s}(Cr);C.tildeNbsp=Rr("~",w," "),C.sim=us,C["\u2248"]=C.approx=Rc,an["~"]=C.sim,C["~"]=C.tildeNbsp,wn.interpretTildeAsSim=function(u){var s=!!u;return s?C["~"]=C.sim:C["~"]=C.tildeNbsp,s};var Aa={sqrt:{width:"",html:function(){return g("svg",{preserveAspectRatio:"none",viewBox:"0 0 32 54"},[g("path",{d:"M0 33 L7 27 L12.5 47 L13 47 L30 0 L32 0 L13 54 L11 54 L4.5 31 L0 33"})])}},"|":{width:".4em",html:function(){return g("svg",{preserveAspectRatio:"none",viewBox:"0 0 10 54"},[g("path",{d:"M4.4 0 L4.4 54 L5.6 54 L5.6 0"})])}},"[":{width:".55em",html:function(){return g("svg",{preserveAspectRatio:"none",viewBox:"0 0 11 24"},[g("path",{d:"M8 0 L3 0 L3 24 L8 24 L8 23 L4 23 L4 1 L8 1"})])}},"]":{width:".55em",html:function(){return g("svg",{preserveAspectRatio:"none",viewBox:"0 0 11 24"},[g("path",{d:"M3 0 L8 0 L8 24 L3 24 L3 23 L7 23 L7 1 L3 1"})])}},"(":{width:".55em",html:function(){return g("svg",{preserveAspectRatio:"none",viewBox:"3 0 106 186"},[g("path",{d:"M85 0 A61 101 0 0 0 85 186 L75 186 A75 101 0 0 1 75 0"})])}},")":{width:".55em",html:function(){return g("svg",{preserveAspectRatio:"none",viewBox:"3 0 106 186"},[g("path",{d:"M24 0 A61 101 0 0 1 24 186 L34 186 A75 101 0 0 0 34 0"})])}},"{":{width:".7em",html:function(){return g("svg",{preserveAspectRatio:"none",viewBox:"10 0 210 350"},[g("path",{d:"M170 0 L170 6 A47 52 0 0 0 123 60 L123 127 A35 48 0 0 1 88 175 A35 48 0 0 1 123 223 L123 290 A47 52 0 0 0 170 344 L170 350 L160 350 A58 49 0 0 1 102 301 L103 220 A45 40 0 0 0 58 180 L58 170 A45 40 0 0 0 103 130 L103 49 A58 49 0 0 1 161 0"})])}},"}":{width:".7em",html:function(){return g("svg",{preserveAspectRatio:"none",viewBox:"10 0 210 350"},[g("path",{d:"M60 0 L60 6 A47 52 0 0 1 107 60 L107 127 A35 48 0 0 0 142 175 A35 48 0 0 0 107 223 L107 290 A47 52 0 0 1 60 344 L60 350 L70 350 A58 49 0 0 0 128 301 L127 220 A45 40 0 0 1 172 180 L172 170 A45 40 0 0 1 127 130 L127 49 A58 49 0 0 0 70 0"})])}},"&#8741;":{width:".7em",html:function(){return g("svg",{preserveAspectRatio:"none",viewBox:"0 0 10 54"},[g("path",{d:"M3.2 0 L3.2 54 L4 54 L4 0 M6.8 0 L6.8 54 L6 54 L6 0"})])}},"&lang;":{width:".55em",html:function(){return g("svg",{preserveAspectRatio:"none",viewBox:"0 0 10 54"},[g("path",{d:"M6.8 0 L3.2 27 L6.8 54 L7.8 54 L4.2 27 L7.8 0"})])}},"&rang;":{width:".55em",html:function(){return g("svg",{preserveAspectRatio:"none",viewBox:"0 0 10 54"},[g("path",{d:"M3.2 0 L6.8 27 L3.2 54 L2.2 54 L5.8 27 L2.2 0"})])}}},qr=function(u){ie(s,u);function s(i,o,d,h,b){var v=u.call(this,i,new St(1,function(E){return g.block(o,d,E[0])}))||this;return v.ariaLabel=h||i.replace(/^\\/,""),v.mathspeakTemplate=["Start"+v.ariaLabel+",","End"+v.ariaLabel],v.shouldNotSpeakDelimiters=b&&b.shouldNotSpeakDelimiters,v}return s.prototype.mathspeak=function(i){return!this.shouldNotSpeakDelimiters||i&&i.ignoreShorthand?u.prototype.mathspeak.call(this):this.foldChildren("",function(o,d){return o+" "+d.mathspeak(i)}).trim()},s}(Pt);C.mathrm=function(u){ie(s,u);function s(){return u.call(this,"\\mathrm","span",{class:"dcg-mq-roman dcg-mq-font"},"Roman Font",{shouldNotSpeakDelimiters:!0})||this}return s.prototype.isTextBlock=function(){return!0},s}(qr),C.mathit=function(){return new qr("\\mathit","i",{class:"dcg-mq-font"},"Italic Font")},C.mathbf=function(){return new qr("\\mathbf","b",{class:"dcg-mq-font"},"Bold Font")},C.mathsf=function(){return new qr("\\mathsf","span",{class:"dcg-mq-sans-serif dcg-mq-font"},"Serif Font")},C.mathtt=function(){return new qr("\\mathtt","span",{class:"dcg-mq-monospace dcg-mq-font"},"Math Text")},C.underline=function(){return new qr("\\underline","span",{class:"dcg-mq-non-leaf dcg-mq-underline"},"Underline")},C.overline=C.bar=function(){return new qr("\\overline","span",{class:"dcg-mq-non-leaf dcg-mq-overline"},"Overline")},C.overrightarrow=function(){return new qr("\\overrightarrow","span",{class:"dcg-mq-non-leaf dcg-mq-overarrow dcg-mq-arrow-right"},"Over Right Arrow")},C.overleftarrow=function(){return new qr("\\overleftarrow","span",{class:"dcg-mq-non-leaf dcg-mq-overarrow dcg-mq-arrow-left"},"Over Left Arrow")},C.overleftrightarrow=function(){return new qr("\\overleftrightarrow ","span",{class:"dcg-mq-non-leaf dcg-mq-overarrow dcg-mq-arrow-leftright"},"Over Left and Right Arrow")},C.overarc=function(){return new qr("\\overarc","span",{class:"dcg-mq-non-leaf dcg-mq-overarc"},"Over Arc")},C.dot=function(){return new Pt("\\dot",new St(1,function(u){return g("span",{class:"dcg-mq-non-leaf"},[g("span",{class:"dcg-mq-dot-recurring-inner"},[g("span",{class:"dcg-mq-dot-recurring"},[g.text(G)]),g.block("span",{class:"dcg-mq-empty-box"},u[0])])])}))},C.textcolor=function(u){ie(s,u);function s(){return u!==null&&u.apply(this,arguments)||this}return s.prototype.setColor=function(i){this.color=i,this.domView=new St(1,function(o){return g.block("span",{class:"dcg-mq-textcolor",style:"color:"+i},o[0])}),this.ariaLabel=i.replace(/^\\/,""),this.mathspeakTemplate=["Start "+this.ariaLabel+",","End "+this.ariaLabel]},s.prototype.latexRecursive=function(i){this.checkCursorContextOpen(i);var o=this.blocks[0];i.latex+="\\textcolor{"+this.color+"}{",o.latexRecursive(i),i.latex+="}",this.checkCursorContextClose(i)},s.prototype.parser=function(){var i=this,o=Ee.optWhitespace,d=Ee.string,h=Ee.regex;return o.then(d("{")).then(h(/^[#\w\s.,()%-]*/)).skip(d("}")).then(function(b){return i.setColor(b),u.prototype.parser.call(i)})},s.prototype.isStyleBlock=function(){return!0},s}(Pt);var wh=C.class=function(u){ie(s,u);function s(){return u!==null&&u.apply(this,arguments)||this}return s.prototype.parser=function(){var i=this,o=Ee.string,d=Ee.regex;return Ee.optWhitespace.then(o("{")).then(d(/^[-\w\s\\\xA0-\xFF]*/)).skip(o("}")).then(function(h){return i.cls=h||"",i.domView=new St(1,function(b){return g.block("span",{class:"dcg-mq-class ".concat(h)},b[0])}),i.ariaLabel=h+" class",i.mathspeakTemplate=["Start "+i.ariaLabel+",","End "+i.ariaLabel],u.prototype.parser.call(i)})},s.prototype.latexRecursive=function(i){this.checkCursorContextOpen(i);var o=this.blocks[0];i.latex+="\\class{"+this.cls+"}{",o.latexRecursive(i),i.latex+="}",this.checkCursorContextClose(i)},s.prototype.isStyleBlock=function(){return!0},s}(Pt),aa=/^[\+\-]?[\d]+$/;function ps(u){if(!u)return"";var s="";return u.eachChild(function(i){i.ctrlSeq!==void 0&&(s+=i.ctrlSeq)}),s}tr.prototype.charsThatBreakOutOfSupSub="";var Br=function(u){ie(s,u);function s(){var i=u!==null&&u.apply(this,arguments)||this;return i.ctrlSeq="_{...}^{...}",i}return s.prototype.setEnds=function(i){c("SupSub ends must be MathBlocks",i[e]instanceof Tr&&i[t]instanceof Tr),this.ends=i},s.prototype.getEnd=function(i){return this.ends[i]},s.prototype.createLeftOf=function(i){if(!(!this.replacedFragment&&!i[e]&&i.options.supSubsRequireOperand))return u.prototype.createLeftOf.call(this,i)},s.prototype.contactWeld=function(i){for(var o=e;o;o=o===e?t:!1){var d=this[o],h=void 0;if(d instanceof s){for(var b="sub";b;b=b==="sub"?"sup":!1){var v=this[b],E=d[b];if(v){if(!E)d.addBlock(v.disown());else if(v.isEmpty())h=new de(E,0,E.getEnd(e));else{v.domFrag().children().insAtDirEnd(-o,E.domFrag().oneElement());var L=v.children().disown();h=new de(E,L.getEnd(t),E.getEnd(e)),o===e?L.adopt(E,E.getEnd(t),0):L.adopt(E,0,E.getEnd(e))}this.placeCursor=function(K,B){return function(_){_.insAtDirEnd(-o,K||B)}}(E,v)}}this.remove(),i&&i[e]===this&&(o===t&&h?h[e]?i.insRightOf(h[e]):i.insAtLeftEnd(h.parent):i.insRightOf(d));break}}},s.prototype.finalizeTree=function(){var i=this.getEnd(e);i.write=function(o,d){if(o.options.autoSubscriptNumerals&&this===this.parent.sub&&"0123456789".indexOf(d)>=0){var h=this.chToCmd(d,o.options);h instanceof br?o.deleteSelection():o.clearSelection().insRightOf(this.parent),h.createLeftOf(o.show()),o.controller.aria.queue("Baseline").alert(h.mathspeak({createdLeftOf:o}));return}o[e]&&!o[t]&&!o.selection&&o.options.charsThatBreakOutOfSupSub.indexOf(d)>-1&&(o.insRightOf(this.parent),o.controller.aria.queue("Baseline")),Tr.prototype.write.call(this,o,d)}},s.prototype.moveTowards=function(i,o,d){o.options.autoSubscriptNumerals&&!this.sup?o.insDirOf(i,this):u.prototype.moveTowards.call(this,i,o,d)},s.prototype.deleteTowards=function(i,o){if(o.options.autoSubscriptNumerals&&this.sub){var d=this.sub.getEnd(-i);d instanceof br?d.remove():d&&d.deleteTowards(i,o.insAtDirEnd(-i,this.sub)),this.sub.isEmpty()&&(this.sub.deleteOutOf(e,o.insAtLeftEnd(this.sub)),this.sup&&o.insDirOf(-i,this))}else u.prototype.deleteTowards.call(this,i,o)},s.prototype.latexRecursive=function(i){if(this.checkCursorContextOpen(i),this.sub){i.latex+="_{";var o=i.latex.length;this.sub.latexRecursive(i);var d=i.latex.length;o===d&&(i.latex+=" "),i.latex+="}"}if(this.sup){i.latex+="^{";var o=i.latex.length;this.sup.latexRecursive(i);var d=i.latex.length;o===d&&(i.latex+=" "),i.latex+="}"}this.checkCursorContextClose(i)},s.prototype.text=function(){function i(o,d){var h=d&&d.text()||"";return d?o+(h.length===1?h:"("+(h||" ")+")"):""}return i("_",this.sub)+i("^",this.sup)},s.prototype.addBlock=function(i){this.supsub==="sub"?(this.sup=this.upInto=this.sub.upOutOf=i,i.adopt(this,this.sub,0).downOutOf=this.sub,i.setDOM(ge(g("span",{class:"dcg-mq-sup"})).append(i.domFrag().children()).prependTo(this.domFrag().oneElement()).oneElement()),Ht.linkElementByBlockNode(i.domFrag().oneElement(),i)):(this.sub=this.downInto=this.sup.downOutOf=i,i.adopt(this,0,this.sup).upOutOf=this.sup,this.domFrag().removeClass("dcg-mq-sup-only"),i.setDOM(ge(g("span",{class:"dcg-mq-sub"})).append(i.domFrag().children()).appendTo(this.domFrag().oneElement()).oneElement()),Ht.linkElementByBlockNode(i.domFrag().oneElement(),i),this.domFrag().append(ge(g("span",{style:"display:inline-block;width:0"},[g.text(M)]))));for(var o=0;o<2;o+=1)(function(d,h,b,v){var E=d[h];E.deleteOutOf=function(L,K){if(K.insDirOf(this[L]?-L:L,this.parent),!this.isEmpty()){var B=this.getEnd(L);this.children().disown().withDirAdopt(L,K.parent,K[L],K[-L]).domFrag().insDirOf(-L,K.domFrag()),K[-L]=B}d.supsub=b,delete d[h],delete d["".concat(v,"Into")];var _=d[b];_["".concat(v,"OutOf")]=ni,delete _.deleteOutOf,h==="sub"&&d.domFrag().addClass("dcg-mq-sup-only").children().last().remove(),this.remove()}})(this,"sub sup".split(" ")[o],"sup sub".split(" ")[o],"down up".split(" ")[o])},s}(Pt);function ni(u){var s=this.parent,i=u;do{if(i[t])return u.insLeftOf(s);i=i.parent.parent}while(i!==s);u.insRightOf(s)}var qc=function(u){ie(s,u);function s(){var i=u!==null&&u.apply(this,arguments)||this;return i.supsub="sub",i.domView=new St(1,function(o){return g("span",{class:"dcg-mq-supsub dcg-mq-non-leaf"},[g.block("span",{class:"dcg-mq-sub"},o[0]),g("span",{style:"display:inline-block;width:0"},[g.text(M)])])}),i.textTemplate=["_"],i.mathspeakTemplate=["Subscript,",", Baseline"],i.ariaLabel="subscript",i}return s.prototype.finalizeTree=function(){this.downInto=this.sub=this.getEnd(e),this.sub.upOutOf=ni,u.prototype.finalizeTree.call(this)},s}(Br);C.subscript=C._=qc,C.superscript=C.supscript=C["^"]=function(u){ie(s,u);function s(){var i=u!==null&&u.apply(this,arguments)||this;return i.supsub="sup",i.domView=new St(1,function(o){return g("span",{class:"dcg-mq-supsub dcg-mq-non-leaf dcg-mq-sup-only"},[g.block("span",{class:"dcg-mq-sup"},o[0])])}),i.textTemplate=["^(",")"],i.ariaLabel="superscript",i.mathspeakTemplate=["Superscript,",", Baseline"],i}return s.prototype.mathspeak=function(i){var o=this.upInto;if(o!==void 0){var d=ps(o);if((!i||!i.ignoreShorthand)&&aa.test(d)){if(d==="0")return"to the 0 power";if(d==="2")return"squared";if(d==="3")return"cubed";var h="";/^[+-]?\d{1,3}$/.test(d)&&(/(11|12|13|4|5|6|7|8|9|0)$/.test(d)?h="th":/1$/.test(d)?h="st":/2$/.test(d)?h="nd":/3$/.test(d)&&(h="rd"));var b=typeof o=="object"?o.mathspeak():d;return"to the "+b+h+" power"}}return u.prototype.mathspeak.call(this)},s.prototype.finalizeTree=function(){this.upInto=this.sup=this.getEnd(t),this.sup.downOutOf=ni,u.prototype.finalizeTree.call(this)},s}(Br);var vn=function(u){ie(s,u);function s(i,o,d){var h=u.call(this)||this;h.ariaLabel=d||i.replace(/^\\/,"");var b=new St(2,function(v){return g("span",{class:"dcg-mq-large-operator dcg-mq-non-leaf"},[g("span",{class:"dcg-mq-to"},[g.block("span",{},v[1])]),g("big",{},[g.text(o)]),g("span",{class:"dcg-mq-from"},[g.block("span",{},v[0])])])});return br.prototype.setCtrlSeqHtmlTextAndMathspeak.call(h,i,b),h}return s.prototype.createLeftOf=function(i){u.prototype.createLeftOf.call(this,i),i.options.sumStartsWithNEquals&&(new na("n").createLeftOf(i),new _c().createLeftOf(i))},s.prototype.latexRecursive=function(i){this.checkCursorContextOpen(i),i.latex+=this.ctrlSeq+"_{";var o=i.latex.length;this.getEnd(e).latexRecursive(i);var d=i.latex.length;d===o&&(i.latex+=" "),i.latex+="}^{",o=i.latex.length,this.getEnd(t).latexRecursive(i),d=i.latex.length,o===d&&(i.latex+=" "),i.latex+="}",this.checkCursorContextClose(i)},s.prototype.mathspeak=function(){return"Start "+this.ariaLabel+" from "+this.getEnd(e).mathspeak()+" to "+this.getEnd(t).mathspeak()+", end "+this.ariaLabel+", "},s.prototype.parser=function(){for(var i=Ee.string,o=Ee.optWhitespace,d=Ee.succeed,h=yr.block,b=this,v=b.blocks=[new Tr,new Tr],E=0;E<v.length;E+=1)v[E].adopt(b,b.getEnd(t),0);return o.then(i("_").or(i("^"))).then(function(L){var K=v[L==="_"?0:1];return h.then(function(B){return B.children().adopt(K,K.getEnd(t),0),d(b)})}).many().result(b)},s.prototype.finalizeTree=function(){var i=this.getEnd(e),o=this.getEnd(t);i.ariaLabel="lower bound",o.ariaLabel="upper bound",this.downInto=i,this.upInto=o,i.upOutOf=o,o.downOutOf=i},s}(Pt);C["\u2211"]=C.sum=C.summation=function(){return new vn("\\sum ",R,"sum")},C["\u220F"]=C.prod=C.product=function(){return new vn("\\prod ",se,"product")},C.coprod=C.coproduct=function(){return new vn("\\coprod ",ce,"co product")},C["\u222B"]=C.int=C.integral=function(u){ie(s,u);function s(){var i=u.call(this,"\\int ","","integral")||this;return i.ariaLabel="integral",i.domView=new St(2,function(o){return g("span",{class:"dcg-mq-int dcg-mq-non-leaf"},[g("big",{},[g.text(Se)]),g("span",{class:"dcg-mq-supsub dcg-mq-non-leaf"},[g("span",{class:"dcg-mq-sup"},[g.block("span",{class:"dcg-mq-sup-inner"},o[1])]),g.block("span",{class:"dcg-mq-sub"},o[0]),g("span",{style:"display:inline-block;width:0"},[g.text(M)])])])}),i}return s.prototype.createLeftOf=function(i){Pt.prototype.createLeftOf.call(this,i)},s}(vn);var Pu=C.frac=C.dfrac=C.cfrac=C.fraction=function(u){ie(s,u);function s(){var i=u!==null&&u.apply(this,arguments)||this;return i.ctrlSeq="\\frac",i.domView=new St(2,function(o){return g("span",{class:"dcg-mq-fraction dcg-mq-non-leaf"},[g.block("span",{class:"dcg-mq-numerator"},o[0]),g.block("span",{class:"dcg-mq-denominator"},o[1]),g("span",{style:"display:inline-block;width:0"},[g.text(M)])])}),i.textTemplate=["(",")/(",")"],i}return s.prototype.finalizeTree=function(){var i=this.getEnd(e),o=this.getEnd(t);this.upInto=o.upOutOf=i,this.downInto=i.downOutOf=o,i.ariaLabel="numerator",o.ariaLabel="denominator",this.getFracDepth()>1?this.mathspeakTemplate=["StartNestedFraction,","NestedOver",", EndNestedFraction"]:this.mathspeakTemplate=["StartFraction,","Over",", EndFraction"]},s.prototype.mathspeak=function(i){if(i&&i.createdLeftOf){var o=i.createdLeftOf;return o.parent.mathspeak()}var d=ps(this.getEnd(e)),h=ps(this.getEnd(t));if((!i||!i.ignoreShorthand)&&aa.test(d)&&aa.test(h)){var b=d==="1"||d==="-1",v="";if(h==="2"?v=b?"half":"halves":h==="3"?v=b?"third":"thirds":h==="4"?v=b?"quarter":"quarters":h==="5"?v=b?"fifth":"fifths":h==="6"?v=b?"sixth":"sixths":h==="7"?v=b?"seventh":"sevenths":h==="8"?v=b?"eighth":"eighths":h==="9"&&(v=b?"ninth":"ninths"),v!==""){for(var E="",L=!1,K=this[e];K&&K[e]!==void 0;K=K[e])if(K.ctrlSeq!=="\\ ")if(aa.test(K.ctrlSeq||""))L=!0;else{L=!1;break}return L&&(E+="and "),E+=this.getEnd(e).mathspeak()+" "+v,E}}return u.prototype.mathspeak.call(this)},s.prototype.getFracDepth=function(){var i=0,o=function(d,h){return d instanceof fr&&d.ctrlSeq&&d.ctrlSeq.toLowerCase().search("frac")>=0&&(h+=1),d&&d.parent?o(d.parent,h):h};return o(this,i)},s}(Pt),Ou=C.over=an["/"]=function(u){ie(s,u);function s(){return u!==null&&u.apply(this,arguments)||this}return s.prototype.createLeftOf=function(i){if(!this.replacedFragment){var o=i[e];if(!i.options.typingSlashCreatesNewFraction)for(;o&&!(o instanceof Cr||o instanceof(C.text||a)||o instanceof vn||o.ctrlSeq==="\\ "||/^[,;:]$/.test(o.ctrlSeq));)o=o[e];if(o instanceof vn&&o[t]instanceof Br){o=o[t];var d=o[t];d instanceof Br&&d.ctrlSeq!=o.ctrlSeq&&(o=o[t])}if(o!==i[e]&&!i.isTooDeep(1)){var d=o[t],h=i[e];this.replaces(new jt(d||i.parent.getEnd(e),h)),i[e]=o}}u.prototype.createLeftOf.call(this,i)},s}(Pu),Bc=function(){return new br("\\operatorname{ans}",g("span",{class:"dcg-mq-ans"},[g.text("ans")]),"ans")};C.ans=Bc;var Uc=function(){return new br("\\%\\operatorname{of}",g("span",{class:"dcg-mq-nonSymbola dcg-mq-operator-name"},[g.text("% of ")]),"percent of")};C.percent=C.percentof=Uc;var Xi=function(u){ie(s,u);function s(){var i=u!==null&&u.apply(this,arguments)||this;return i.tokenId="",i.ctrlSeq="\\token",i.textTemplate=["token(",")"],i.mathspeakTemplate=["StartToken,",", EndToken"],i.ariaLabel="token",i}return s.prototype.html=function(){var i=g("span",{class:"dcg-mq-token dcg-mq-ignore-mousedown","data-dcg-mq-token":this.tokenId});return this.setDOM(i),Ht.linkElementByCmdNode(i,this),i},s.prototype.latexRecursive=function(i){this.checkCursorContextOpen(i),i.latex+="\\token{"+this.tokenId+"}",this.checkCursorContextClose(i)},s.prototype.mathspeak=function(){var i=[];return this.domFrag().children().eachElement(function(o){var d=o.getAttribute("aria-label");typeof d=="string"&&d!==""&&i.push(d)}),i.length>0?i.join(" ").trim():"token "+this.tokenId},s.prototype.parser=function(){var i=this;return yr.block.map(function(o){var d=o.getEnd(e);if(d)for(i.tokenId+=d.ctrlSeq;d=d[t];)i.tokenId+=d.ctrlSeq;return i})},s}(br);C.token=Xi;var $c=function(u){ie(s,u);function s(){var i=u!==null&&u.apply(this,arguments)||this;return i.ctrlSeq="\\sqrt",i.domView=new St(1,function(o){return g("span",{class:"dcg-mq-non-leaf dcg-mq-sqrt-container"},[g("span",{class:"dcg-mq-scaled dcg-mq-sqrt-prefix"},[Aa.sqrt.html()]),g.block("span",{class:"dcg-mq-non-leaf dcg-mq-sqrt-stem"},o[0])])}),i.textTemplate=["sqrt(",")"],i.mathspeakTemplate=["StartRoot,",", EndRoot"],i.ariaLabel="root",i}return s.prototype.parser=function(){return yr.optBlock.then(function(i){return yr.block.map(function(o){var d=new ai;return d.blocks=[i,o],i.adopt(d,0,0),o.adopt(d,i,0),d})}).or(u.prototype.parser.call(this))},s}(Pt);C.sqrt=$c,C.hat=function(u){ie(s,u);function s(){var i=u!==null&&u.apply(this,arguments)||this;return i.ctrlSeq="\\hat",i.domView=new St(1,function(o){return g("span",{class:"dcg-mq-non-leaf"},[g("span",{class:"dcg-mq-hat-prefix"},[g.text("^")]),g.block("span",{class:"dcg-mq-hat-stem"},o[0])])}),i.textTemplate=["hat(",")"],i}return s}(Pt);var ai=function(u){ie(s,u);function s(){var i=u!==null&&u.apply(this,arguments)||this;return i.domView=new St(2,function(o){return g("span",{class:"dcg-mq-nthroot-container dcg-mq-non-leaf"},[g.block("sup",{class:"dcg-mq-nthroot dcg-mq-non-leaf"},o[0]),g("span",{class:"dcg-mq-scaled dcg-mq-sqrt-container"},[g("span",{class:"dcg-mq-sqrt-prefix dcg-mq-scaled"},[Aa.sqrt.html()]),g.block("span",{class:"dcg-mq-sqrt-stem dcg-mq-non-leaf"},o[1])])])}),i.textTemplate=["sqrt[","](",")"],i}return s.prototype.latexRecursive=function(i){this.checkCursorContextOpen(i),i.latex+="\\sqrt[",this.getEnd(e).latexRecursive(i),i.latex+="]{",this.getEnd(t).latexRecursive(i),i.latex+="}",this.checkCursorContextClose(i)},s.prototype.mathspeak=function(){var i=this.getEnd(e).mathspeak(),o=this.getEnd(t).mathspeak();return this.getEnd(e).ariaLabel="Index",this.getEnd(t).ariaLabel="Radicand",i==="3"?"Start Cube Root, "+o+", End Cube Root":"Root Index "+i+", Start Root, "+o+", End Root"},s}($c);C.nthroot=ai,C.cbrt=function(u){ie(s,u);function s(){return u!==null&&u.apply(this,arguments)||this}return s.prototype.createLeftOf=function(i){u.prototype.createLeftOf.call(this,i),new Yi("3").createLeftOf(i),i.controller.moveRight()},s}(ai);var zc=function(u){ie(s,u);function s(i,o,d){var h=this,b=new St(1,function(v){return g("span",{class:"dcg-mq-non-leaf"},[g("span",{class:"dcg-mq-diacritic-above"},[o]),g.block("span",{class:"dcg-mq-diacritic-stem"},v[0])])});return h=u.call(this,i,b,d)||this,h}return s}(Pt);C.vec=function(){return new zc("\\vec",g.entityText("&rarr;"),["vec(",")"])},C.tilde=function(){return new zc("\\tilde",g.text("~"),["tilde(",")"])};var Kc=function(u){ie(s,u);function s(){return u!==null&&u.apply(this,arguments)||this}return s.prototype.setDOM=function(i){var o;u.prototype.setDOM.call(this,i);var d=this.domFrag().children();return d.isEmpty()||(this.delimFrags=(o={},o[e]=d.first(),o[t]=d.last(),o)),this},s}(Pt),Ur=function(u){ie(s,u);function s(i,o,d,h,b){var v,E=u.call(this,"\\left"+h,void 0,[o,d])||this;return E.side=i,E.sides=(v={},v[e]={ch:o,ctrlSeq:h},v[t]={ch:d,ctrlSeq:b},v),E}return s.prototype.numBlocks=function(){return 1},s.prototype.html=function(){var i=this,o=this.getSymbol(e),d=this.getSymbol(t);return this.domView=new St(1,function(h){return g("span",{class:"dcg-mq-non-leaf dcg-mq-bracket-container"},[g("span",{style:"width:"+o.width,class:"dcg-mq-scaled dcg-mq-bracket-l dcg-mq-paren"+(i.side===t?" dcg-mq-ghost":"")},[o.html()]),g.block("span",{style:"margin-left:"+o.width+";margin-right:"+d.width,class:"dcg-mq-bracket-middle dcg-mq-non-leaf"},h[0]),g("span",{style:"width:"+d.width,class:"dcg-mq-scaled dcg-mq-bracket-r dcg-mq-paren"+(i.side===e?" dcg-mq-ghost":"")},[d.html()])])}),u.prototype.html.call(this)},s.prototype.getSymbol=function(i){var o=this.sides[i||t].ch;return Aa[o]||{width:"0",html:""}},s.prototype.latexRecursive=function(i){this.checkCursorContextOpen(i),i.latex+="\\left"+this.sides[e].ctrlSeq,this.getEnd(e).latexRecursive(i),i.latex+="\\right"+this.sides[t].ctrlSeq,this.checkCursorContextClose(i)},s.prototype.mathspeak=function(i){var o=this.sides[e].ch,d=this.sides[t].ch;if(o==="|"&&d==="|")this.mathspeakTemplate=["StartAbsoluteValue,",", EndAbsoluteValue"],this.ariaLabel="absolute value";else if(i&&i.createdLeftOf&&this.side){var h="";return this.side===e?h=this.textTemplate[0]:this.side===t&&(h=this.textTemplate[1]),(this.side===e?"left ":"right ")+La[h]}else this.mathspeakTemplate=["left "+La[o]+",",", right "+La[d]],this.ariaLabel=La[o]+" block";return u.prototype.mathspeak.call(this)},s.prototype.matchBrack=function(i,o,d){return d instanceof s&&d.side&&d.side!==-o&&(!i.restrictMismatchedBrackets||ia[this.sides[this.side].ch]===d.sides[d.side].ch||{"(":"]","[":")"}[this.sides[e].ch]===d.sides[t].ch)&&d},s.prototype.closeOpposing=function(i){i.side=0,i.sides[this.side]=this.sides[this.side];var o=i.delimFrags[this.side===e?e:t].removeClass("dcg-mq-ghost");this.replaceBracket(o,this.side)},s.prototype.createLeftOf=function(i){var o;if(!this.replacedFragment){var d=i.options;this.sides[e].ch==="|"?o=this.matchBrack(d,t,i[t])||this.matchBrack(d,e,i[e])||this.matchBrack(d,0,i.parent.parent):o=this.matchBrack(d,-this.side,i[-this.side])||this.matchBrack(d,-this.side,i.parent.parent)}if(o){var h=this.side=-o.side;this.closeOpposing(o),o===i.parent.parent&&i[h]&&new jt(i[h],i.parent.getEnd(h),-h).disown().withDirAdopt(-h,o.parent,o,o[h]).domFrag().insDirOf(h,o.domFrag()),o.bubble(function(b){b.reflow()})}else o=this,h=o.side,o.replacedFragment?o.side=0:i[-h]&&(o.replaces(new jt(i[-h],i.parent.getEnd(-h),h)),i[-h]=0),u.prototype.createLeftOf.call(this,i);h===e?i.insAtLeftEnd(o.getEnd(e)):i.insRightOf(o)},s.prototype.placeCursor=function(){},s.prototype.unwrap=function(){this.getEnd(e).children().disown().adopt(this.parent,this,this[t]).domFrag().insertAfter(this.domFrag()),this.remove()},s.prototype.deleteSide=function(i,o,d){var h=this.parent,b=this[i],v=h.getEnd(i);if(i===this.side){this.unwrap(),b?d.insDirOf(-i,b):d.insAtDirEnd(i,h);return}var E=d.options,L=!this.side;if(this.side=-i,this.matchBrack(E,i,this.getEnd(e).getEnd(this.side))){this.closeOpposing(this.getEnd(e).getEnd(this.side));var K=this.getEnd(e).getEnd(i);this.unwrap(),K&&K.siblingCreated(d.options,i),b?d.insDirOf(-i,b):d.insAtDirEnd(i,h)}else{if(this.matchBrack(E,i,this.parent.parent))this.parent.parent.closeOpposing(this),this.parent.parent.unwrap();else if(o&&L){this.unwrap(),b?d.insDirOf(-i,b):d.insAtDirEnd(i,h);return}else{this.sides[i]=Fu(this),this.delimFrags[e].removeClass("dcg-mq-ghost"),this.delimFrags[t].removeClass("dcg-mq-ghost");var B=this.delimFrags[i].addClass("dcg-mq-ghost");this.replaceBracket(B,i)}if(b){var _=this.getEnd(e),K=_.getEnd(i);_.domFrag().removeClass("dcg-mq-empty"),new jt(b,v,-i).disown().withDirAdopt(-i,_,K,0).domFrag().insAtDirEnd(i,_.domFrag().oneElement()),K&&K.siblingCreated(d.options,i),d.insDirOf(-i,b)}else o?d.insDirOf(i,this):d.insAtDirEnd(i,this.getEnd(e))}},s.prototype.replaceBracket=function(i,o){var d=this.getSymbol(o);if(i.children().replaceWith(ge(d.html())),i.oneElement().style.width=d.width,o===e){var h=i.next();h.isEmpty()||(h.oneElement().style.marginLeft=d.width)}else{var b=i.prev();b.isEmpty()||(b.oneElement().style.marginRight=d.width)}},s.prototype.deleteTowards=function(i,o){this.deleteSide(-i,!1,o)},s.prototype.finalizeTree=function(){this.getEnd(e).deleteOutOf=function(i,o){this.parent.deleteSide(i,!0,o)},this.finalizeTree=this.intentionalBlur=function(){this.delimFrags[this.side===e?t:e].removeClass("dcg-mq-ghost"),this.side=0}},s.prototype.siblingCreated=function(i,o){o===-this.side&&this.finalizeTree()},s}(Kc);function Fu(u){var s=u.side,i=u.sides[s];return{ch:ia[i.ch],ctrlSeq:ia[i.ctrlSeq]}}var ia={"(":")",")":"(","[":"]","]":"[","{":"}","}":"{","\\{":"\\}","\\}":"\\{","&lang;":"&rang;","&rang;":"&lang;","\\langle ":"\\rangle ","\\rangle ":"\\langle ","|":"|","\\lVert ":"\\rVert ","\\rVert ":"\\lVert "},La={"&lang;":"angle-bracket","&rang;":"angle-bracket","|":"pipe"};function Zi(u,o,i){var o=o||u,d=ia[u],h=ia[o];an[u]=function(){return new Ur(e,u,d,o,h)},an[d]=function(){return new Ur(t,u,d,o,h)},La[u]=La[d]=i}Zi("(","","parenthesis"),Zi("[","","bracket"),Zi("{","\\{","brace"),C.langle=function(){return new Ur(e,"&lang;","&rang;","\\langle ","\\rangle ")},C.rangle=function(){return new Ur(t,"&lang;","&rang;","\\langle ","\\rangle ")},an["|"]=function(){return new Ur(e,"|","|","|","|")},C.lVert=function(){return new Ur(e,"&#8741;","&#8741;","\\lVert ","\\rVert ")},C.rVert=function(){return new Ur(t,"&#8741;","&#8741;","\\lVert ","\\rVert ")},C.left=function(u){ie(s,u);function s(){return u!==null&&u.apply(this,arguments)||this}return s.prototype.parser=function(){var i=Ee.regex,o=Ee.string,d=Ee.optWhitespace;return d.then(i(/^(?:[([|]|\\\{|\\langle(?![a-zA-Z])|\\lVert(?![a-zA-Z]))/)).then(function(h){var b=h.replace(/^\\/,"");return h=="\\langle"&&(b="&lang;",h=h+" "),h=="\\lVert"&&(b="&#8741;",h=h+" "),yr.then(function(v){return o("\\right").skip(d).then(i(/^(?:[\])|]|\\\}|\\rangle(?![a-zA-Z])|\\rVert(?![a-zA-Z]))/)).map(function(E){var L=E.replace(/^\\/,"");E=="\\rangle"&&(L="&rang;",E=E+" "),E=="\\rVert"&&(L="&#8741;",E=E+" ");var K=new Ur(0,b,L,h,E);return K.blocks=[v],v.adopt(K,0,0),K})})})},s}(Pt),C.right=function(u){ie(s,u);function s(){return u!==null&&u.apply(this,arguments)||this}return s.prototype.parser=function(){return Ee.fail("unmatched \\right")},s}(Pt);var eo=Aa["("],gs=Aa[")"],Wc=function(u){ie(s,u);function s(){var i=u!==null&&u.apply(this,arguments)||this;return i.ctrlSeq="\\binom",i.domView=new St(2,function(o){return g("span",{class:"dcg-mq-non-leaf dcg-mq-bracket-container"},[g("span",{style:"width:"+eo.width,class:"dcg-mq-paren dcg-mq-bracket-l dcg-mq-scaled"},[eo.html()]),g("span",{style:"margin-left:"+eo.width+"; margin-right:"+gs.width,class:"dcg-mq-non-leaf dcg-mq-bracket-middle"},[g("span",{class:"dcg-mq-array dcg-mq-non-leaf"},[g.block("span",{},o[0]),g.block("span",{},o[1])])]),g("span",{style:"width:"+gs.width,class:"dcg-mq-paren dcg-mq-bracket-r dcg-mq-scaled"},[gs.html()])])}),i.textTemplate=["choose(",",",")"],i.mathspeakTemplate=["StartBinomial,","Choose",", EndBinomial"],i.ariaLabel="binomial",i}return s}(Kc);C.binom=C.binomial=Wc,C.choose=function(u){ie(s,u);function s(){return u!==null&&u.apply(this,arguments)||this}return s.prototype.createLeftOf=function(i){Ou.prototype.createLeftOf(i)},s}(Wc);var _u=function(u){ie(s,u);function s(){var i=u!==null&&u.apply(this,arguments)||this;return i.ctrlSeq="\\MathQuillMathField",i.domView=new St(1,function(o){return g("span",{class:"dcg-mq-editable-field"},[g.block("span",{class:"dcg-mq-root-block","aria-hidden":"true"},o[0])])}),i}return s.prototype.parser=function(){var i=this,o=Ee.string,d=Ee.regex,h=Ee.succeed;return o("[").then(d(/^[a-z][a-z0-9]*/i)).skip(o("]")).map(function(b){i.name=b}).or(h(void 0)).then(u.prototype.parser.call(this))},s.prototype.finalizeTree=function(i){var o=new is(this.getEnd(e),this.domFrag().oneElement(),i);o.KIND_OF_MQ="MathField",o.editable=!0,o.createTextarea(),o.editablesTextareaEvents(),o.cursor.insAtRightEnd(o.root),Hi(o.root);function d(h){if(h.parentNode&&!ge(h).hasClass("dcg-mq-root-block")&&d(h.parentNode),h.nodeType===Node.ELEMENT_NODE){var b=h;b.getAttribute("aria-hidden")==="true"&&(b.removeAttribute("aria-hidden"),ge(h).children().eachElement(function(v){v.setAttribute("aria-hidden","true")}))}}d(this.domFrag().parent().oneElement()),this.domFrag().oneElement().removeAttribute("aria-hidden")},s.prototype.registerInnerField=function(i,o){var d=this.getEnd(e).controller,h=new o(d);i[this.name]=h,i.push(h)},s.prototype.latexRecursive=function(i){this.checkCursorContextOpen(i),this.getEnd(e).latexRecursive(i),this.checkCursorContextClose(i)},s.prototype.text=function(){return this.getEnd(e).text()},s}(Pt);C.editable=C.MathQuillMathField=_u;var hs=function(u){ie(s,u);function s(){return u!==null&&u.apply(this,arguments)||this}return s.prototype.setOptions=function(i){function o(){return""}return this.text=i.text||o,this.domView=new St(0,function(){return g("span",{},[p(i.htmlString||"")])}),this.latex=i.latex||o,this},s.prototype.latexRecursive=function(i){this.checkCursorContextOpen(i),i.latex+=this.latex(),this.checkCursorContextClose(i)},s.prototype.parser=function(){var i=this,o=Ee.string,d=Ee.regex,h=Ee.succeed;return o("{").then(d(/^[a-z][a-z0-9]*/i)).skip(o("}")).then(function(b){return o("[").then(d(/^[-\w\s]*/)).skip(o("]")).or(h(void 0)).map(function(v){return i.setOptions(zi[b](v))})})},s}(br);if(C.embed=hs,window.jQuery){Da=Za(1);for(var Hc in Da)(function(u,s){typeof s=="function"?(rr[u]=function(){return Wi(),s.apply(this,arguments)},rr[u].prototype=s.prototype):rr[u]=s})(Hc,Da[Hc])}})()});function il(e){return e==null?e+"":typeof e=="object"||typeof e=="function"?al[Kh.call(e)]||"object":typeof e}function qu(e){var t=!!e&&"length"in e&&e.length,r=il(e);return la(e)||so(e)?!1:r==="array"||t===0||typeof t=="number"&&t>0&&t-1 in e}function no(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}function gE(e,t){return t.toUpperCase()}function oa(e){return e.replace(uE,"ms-").replace(pE,gE)}function vs(){this.expando=A.expando+vs.uid++}function fE(e){return e==="true"?!0:e==="false"?!1:e==="null"?null:e===+e+""?+e:hE.test(e)?JSON.parse(e):e}function Nh(e,t,r){var n;if(r===void 0&&e.nodeType===1)if(n="data-"+t.replace(mE,"-$&").toLowerCase(),r=e.getAttribute(n),typeof r=="string"){try{r=fE(r)}catch(a){}sa.set(e,t,r)}else r=void 0;return r}function bE(e,t,r,n){var a,c,l=20,p=n?function(){return n.cur()}:function(){return A.css(e,t,"")},g=p(),f=r&&r[3]||(A.cssNumber[t]?"":"px"),w=e.nodeType&&(A.cssNumber[t]||f!=="px"&&+g)&&ol.exec(A.css(e,t));if(w&&w[3]!==f){for(g=g/2,f=f||w[3],w=+g||1;l--;)A.style(e,t,w+f),(1-c)*(1-(c=p()/g||.5))<=0&&(l=0),w=w/c;w=w*2,A.style(e,t,w+f),r=r||[]}return r&&(w=+w||+g||0,a=r[1]?w+(r[1]+1)*r[2]:+r[2],n&&(n.unit=f,n.start=w,n.end=a)),a}function io(){return!0}function oo(){return!1}function xE(e,t){return e===wE()==(t==="focus")}function wE(){try{return Yt.activeElement}catch(e){}}function $u(e,t,r,n,a,c){var l,p;if(typeof t=="object"){typeof r!="string"&&(n=n||r,r=void 0);for(p in t)$u(e,p,r,n,t[p],c);return e}if(n==null&&a==null?(a=r,n=r=void 0):a==null&&(typeof r=="string"?(a=n,n=void 0):(a=n,n=r,r=void 0)),a===!1)a=oo;else if(!a)return e;return c===1&&(l=a,a=function(g){return A().off(g),l.apply(this,arguments)},a.guid=l.guid||(l.guid=A.guid++)),e.each(function(){A.event.add(this,t,a,n,r)})}function nl(e,t,r){if(!r){ut.get(e,t)===void 0&&A.event.add(e,t,io);return}ut.set(e,t,!1),A.event.add(e,t,{namespace:!1,handler:function(n){var a,c,l=ut.get(this,t);if(n.isTrigger&1&&this[t]){if(l.length)(A.event.special[t]||{}).delegateType&&n.stopPropagation();else if(l=el.call(arguments),ut.set(this,t,l),a=r(this,t),this[t](),c=ut.get(this,t),l!==c||a?ut.set(this,t,!1):c={},l!==c)return n.stopImmediatePropagation(),n.preventDefault(),c&&c.value}else l.length&&(ut.set(this,t,{value:A.event.trigger(A.extend(l[0],A.Event.prototype),l.slice(1),this)}),n.stopImmediatePropagation())}})}function xs(e,t,r){var n,a,c,l,p=e.style;return r=r||sl(e),r&&(l=r.getPropertyValue(t)||r[t],l===""&&!Jh(e)&&(l=A.style(e,t)),!Jt.pixelBoxStyles()&&Wu.test(l)&&vE.test(t)&&(n=p.width,a=p.minWidth,c=p.maxWidth,p.minWidth=p.maxWidth=p.width=l,l=r.width,p.width=n,p.minWidth=a,p.maxWidth=c)),l!==void 0?l+"":l}function Xh(e,t){return{get:function(){if(e()){delete this.get;return}return(this.get=t).apply(this,arguments)}}}function kE(e){for(var t=e[0].toUpperCase()+e.slice(1),r=Oh.length;r--;)if(e=Oh[r]+t,e in Zh)return e}function _h(e){var t=A.cssProps[e]||Fh[e];return t||(e in Zh?e:Fh[e]=kE(e)||e)}function em(e,t,r){var n=ol.exec(t);return n?Math.max(0,n[2]-(r||0))+(n[3]||"px"):t}function zu(e,t,r,n,a,c){var l=t==="width"?1:0,p=0,g=0;if(r===(n?"border":"content"))return 0;for(;l<4;l+=2)r==="margin"&&(g+=A.css(e,r+Ia[l],!0,a)),n?(r==="content"&&(g-=A.css(e,"padding"+Ia[l],!0,a)),r!=="margin"&&(g-=A.css(e,"border"+Ia[l]+"Width",!0,a))):(g+=A.css(e,"padding"+Ia[l],!0,a),r!=="padding"?g+=A.css(e,"border"+Ia[l]+"Width",!0,a):p+=A.css(e,"border"+Ia[l]+"Width",!0,a));return!n&&c>=0&&(g+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-c-g-p-.5))||0),g}function Bh(e,t,r){var n=sl(e),a=!Jt.boxSizingReliable()||r,c=a&&A.css(e,"boxSizing",!1,n)==="border-box",l=c,p=xs(e,t,n),g="offset"+t[0].toUpperCase()+t.slice(1);if(Wu.test(p)){if(!r)return p;p="auto"}return(!Jt.boxSizingReliable()&&c||!Jt.reliableTrDimensions()&&no(e,"tr")||p==="auto"||!parseFloat(p)&&A.css(e,"display",!1,n)==="inline")&&e.getClientRects().length&&(c=A.css(e,"boxSizing",!1,n)==="border-box",l=g in e,l&&(p=e[g])),p=parseFloat(p)||0,p+zu(e,t,r||(c?"border":"content"),l,n,p)+"px"}function Ku(e,t,r,n){var a;if(Array.isArray(t))A.each(t,function(c,l){r||TE.test(e)?n(e,l):Ku(e+"["+(typeof l=="object"&&l!=null?c:"")+"]",l,r,n)});else if(!r&&il(t)==="object")for(a in t)Ku(e+"["+a+"]",t[a],r,n);else n(e,t)}var ca,iE,el,oE,zh,sE,al,Kh,tl,Wh,cE,Jt,la,so,Yt,Hh,A,lE,jh,dE,Uu,ws,uE,pE,rl,ut,sa,hE,mE,Yh,ol,Ia,ao,Jh,yE,Bu,Ph,Wu,sl,Qh,vE,Oh,Zh,Fh,EE,Rh,CE,qh,Uh,$h,TE,SE,DE,ME,ee,dr=De(()=>{"use strict";ca=[],iE=Object.getPrototypeOf,el=ca.slice,oE=ca.flat?function(e){return ca.flat.call(e)}:function(e){return ca.concat.apply([],e)},zh=ca.push,sE=ca.indexOf,al={},Kh=al.toString,tl=al.hasOwnProperty,Wh=tl.toString,cE=Wh.call(Object),Jt={},la=function(t){return typeof t=="function"&&typeof t.nodeType!="number"&&typeof t.item!="function"},so=function(t){return t!=null&&t===t.window},Yt=window.document;Hh="3.6.0",A=function(e,t){return new A.fn.init(e,t)};A.fn=A.prototype={jquery:Hh,constructor:A,length:0,toArray:function(){return el.call(this)},get:function(e){return e==null?el.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=A.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return A.each(this,e)},map:function(e){return this.pushStack(A.map(this,function(t,r){return e.call(t,r,t)}))},slice:function(){return this.pushStack(el.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(A.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(A.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,r=+e+(e<0?t:0);return this.pushStack(r>=0&&r<t?[this[r]]:[])},end:function(){return this.prevObject||this.constructor()},push:zh,sort:ca.sort,splice:ca.splice};A.extend=A.fn.extend=function(){var e,t,r,n,a,c,l=arguments[0]||{},p=1,g=arguments.length,f=!1;for(typeof l=="boolean"&&(f=l,l=arguments[p]||{},p++),typeof l!="object"&&!la(l)&&(l={}),p===g&&(l=this,p--);p<g;p++)if((e=arguments[p])!=null)for(t in e)n=e[t],!(t==="__proto__"||l===n)&&(f&&n&&(A.isPlainObject(n)||(a=Array.isArray(n)))?(r=l[t],a&&!Array.isArray(r)?c=[]:!a&&!A.isPlainObject(r)?c={}:c=r,a=!1,l[t]=A.extend(f,c,n)):n!==void 0&&(l[t]=n));return l};A.extend({expando:"jQuery"+(Hh+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,r;return!e||Kh.call(e)!=="[object Object]"?!1:(t=iE(e),t?(r=tl.call(t,"constructor")&&t.constructor,typeof r=="function"&&Wh.call(r)===cE):!0)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},each:function(e,t){var r,n=0;if(qu(e))for(r=e.length;n<r&&t.call(e[n],n,e[n])!==!1;n++);else for(n in e)if(t.call(e[n],n,e[n])===!1)break;return e},makeArray:function(e,t){var r=t||[];return e!=null&&(qu(Object(e))?A.merge(r,typeof e=="string"?[e]:e):zh.call(r,e)),r},inArray:function(e,t,r){return t==null?-1:sE.call(t,e,r)},merge:function(e,t){for(var r=+t.length,n=0,a=e.length;n<r;n++)e[a++]=t[n];return e.length=a,e},grep:function(e,t,r){for(var n,a=[],c=0,l=e.length,p=!r;c<l;c++)n=!t(e[c],c),n!==p&&a.push(e[c]);return a},map:function(e,t,r){var n,a,c=0,l=[];if(qu(e))for(n=e.length;c<n;c++)a=t(e[c],c,r),a!=null&&l.push(a);else for(c in e)a=t(e[c],c,r),a!=null&&l.push(a);return oE(l)},guid:1,support:Jt});typeof Symbol=="function"&&(A.fn[Symbol.iterator]=ca[Symbol.iterator]);A.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){al["[object "+t+"]"]=t.toLowerCase()});lE=function(e){var t,r,n,a,c,l,p,g=e.document,f=[],w=f.push,M=f.push,G=f.slice,R=/HTML$/i,se=/^[^{]+\{\s*\[native \w/,ce=function(){n()};try{M.apply(f=G.call(g.childNodes),g.childNodes),f[g.childNodes.length].nodeType}catch(Ge){M={apply:f.length?function(Re,Je){w.apply(Re,G.call(Je))}:function(Re,Je){for(var Nt=Re.length,ot=0;Re[Nt++]=Je[ot++];);Re.length=Nt-1}}}function Se(){}function ze(Ge){var Re=a.createElement("fieldset");try{return!!Ge(Re)}catch(Je){return!1}finally{Re.parentNode&&Re.parentNode.removeChild(Re),Re=null}}return t=Se.support={},r=Se.isXML=function(Ge){var Re=Ge&&Ge.namespaceURI,Je=Ge&&(Ge.ownerDocument||Ge).documentElement;return!R.test(Re||Je&&Je.nodeName||"HTML")},n=Se.setDocument=function(Ge){var Re,Je,Nt=Ge?Ge.ownerDocument||Ge:g;return Nt==a||Nt.nodeType!==9||!Nt.documentElement||(a=Nt,c=a.documentElement,l=!r(a),g!=a&&(Je=a.defaultView)&&Je.top!==Je&&(Je.addEventListener?Je.addEventListener("unload",ce,!1):Je.attachEvent&&Je.attachEvent("onunload",ce)),t.attributes=ze(function(ot){return ot.className="i",!ot.getAttribute("className")}),t.getElementsByTagName=ze(function(ot){return ot.appendChild(a.createComment("")),!ot.getElementsByTagName("*").length}),Re=se.test(c.compareDocumentPosition),p=Re||se.test(c.contains)?function(ot,ge){var ra=ot.nodeType===9?ot.documentElement:ot,Q=ge&&ge.parentNode;return ot===Q||!!(Q&&Q.nodeType===1&&(ra.contains?ra.contains(Q):ot.compareDocumentPosition&&ot.compareDocumentPosition(Q)&16))}:function(ot,ge){if(ge){for(;ge=ge.parentNode;)if(ge===ot)return!0}return!1}),a},Se.contains=function(Ge,Re){return(Ge.ownerDocument||Ge)!=a&&n(Ge),p(Ge,Re)},n(),t.sortDetached=ze(function(Ge){return Ge.compareDocumentPosition(a.createElement("fieldset"))&1}),Se}(window);A.contains=lE.contains;dE=A.fn.init=function(e,t,r){if(!e)return this;if(r=r||jh,typeof e=="string")throw new Error("$(string) implementation has been removed");if(e.nodeType)return this[0]=e,this.length=1,this;if(la(e))throw new Error("$(function) implementation has been removed");return A.makeArray(e,this)};dE.prototype=A.fn;jh=A(Yt);Uu=/[^\x20\t\r\n\f]+/g,ws=function(e,t,r,n,a,c,l){var p=0,g=e.length,f=r==null;if(il(r)==="object"){a=!0;for(p in r)ws(e,t,p,r[p],!0,c,l)}else if(n!==void 0&&(a=!0,la(n)||(l=!0),f&&(l?(t.call(e,n),t=null):(f=t,t=function(w,M,G){return f.call(A(w),G)})),t))for(;p<g;p++)t(e[p],r,l?n:n.call(e[p],p,t(e[p],r)));return a?e:f?t.call(e):g?t(e[0],r):c},uE=/^-ms-/,pE=/-([a-z])/g;rl=function(e){return e.nodeType===1||e.nodeType===9||!+e.nodeType};vs.uid=1;vs.prototype={cache:function(e){var t=e[this.expando];return t||(t={},rl(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,r){var n,a=this.cache(e);if(typeof t=="string")a[oa(t)]=r;else for(n in t)a[oa(n)]=t[n];return a},get:function(e,t){return t===void 0?this.cache(e):e[this.expando]&&e[this.expando][oa(t)]},access:function(e,t,r){return t===void 0||t&&typeof t=="string"&&r===void 0?this.get(e,t):(this.set(e,t,r),r!==void 0?r:t)},remove:function(e,t){var r,n=e[this.expando];if(n!==void 0){if(t!==void 0)for(Array.isArray(t)?t=t.map(oa):(t=oa(t),t=t in n?[t]:t.match(Uu)||[]),r=t.length;r--;)delete n[t[r]];(t===void 0||A.isEmptyObject(n))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return t!==void 0&&!A.isEmptyObject(t)}};ut=new vs,sa=new vs,hE=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,mE=/[A-Z]/g;A.extend({hasData:function(e){return sa.hasData(e)||ut.hasData(e)},data:function(e,t,r){return sa.access(e,t,r)},removeData:function(e,t){sa.remove(e,t)},_data:function(e,t,r){return ut.access(e,t,r)},_removeData:function(e,t){ut.remove(e,t)}});A.fn.extend({data:function(e,t){var r,n,a,c=this[0],l=c&&c.attributes;if(e===void 0){if(this.length&&(a=sa.get(c),c.nodeType===1&&!ut.get(c,"hasDataAttrs"))){for(r=l.length;r--;)l[r]&&(n=l[r].name,n.indexOf("data-")===0&&(n=oa(n.slice(5)),Nh(c,n,a[n])));ut.set(c,"hasDataAttrs",!0)}return a}return typeof e=="object"?this.each(function(){sa.set(this,e)}):ws(this,function(p){var g;if(c&&p===void 0)return g=sa.get(c,e),g!==void 0||(g=Nh(c,e),g!==void 0)?g:void 0;this.each(function(){sa.set(this,e,p)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){sa.remove(this,e)})}});Yh=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ol=new RegExp("^(?:([+-])=|)("+Yh+")([a-z%]*)$","i"),Ia=["Top","Right","Bottom","Left"],ao=Yt.documentElement,Jh=function(e){return A.contains(e.ownerDocument,e)},yE={composed:!0};ao.getRootNode&&(Jh=function(e){return A.contains(e.ownerDocument,e)||e.getRootNode(yE)===e.ownerDocument});Bu=/^(?:checkbox|radio)$/i;(function(){var e=Yt.createDocumentFragment(),t=e.appendChild(Yt.createElement("div")),r=Yt.createElement("input");r.setAttribute("type","radio"),r.setAttribute("checked","checked"),r.setAttribute("name","t"),t.appendChild(r),Jt.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",Jt.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,t.innerHTML="<option></option>",Jt.option=!!t.lastChild})();Ph=/^([^.]*)(?:\.(.+)|)/;A.event={global:{},add:function(e,t,r,n,a){var c,l,p,g,f,w,M,G,R,se,ce,Se=ut.get(e);if(rl(e)){if(r.handler&&(c=r,r=c.handler,a=c.selector),a)throw new Error("Support for event delegation has been removed");for(r.guid||(r.guid=A.guid++),(g=Se.events)||(g=Se.events=Object.create(null)),(l=Se.handle)||(l=Se.handle=function(ze){return typeof A!="undefined"&&A.event.triggered!==ze.type?A.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(Uu)||[""],f=t.length;f--;)if(p=Ph.exec(t[f])||[],R=ce=p[1],se=(p[2]||"").split(".").sort(),!!R){if(M=A.event.special[R]||{},R=(a?M.delegateType:M.bindType)||R,M=A.event.special[R]||{},w=A.extend({type:R,origType:ce,data:n,handler:r,guid:r.guid,selector:a,namespace:se.join(".")},c),(G=g[R])||(G=g[R]=[],G.delegateCount=0,(!M.setup||M.setup.call(e,n,se,l)===!1)&&e.addEventListener&&e.addEventListener(R,l)),M.add&&(M.add.call(e,w),w.handler.guid||(w.handler.guid=r.guid)),a)throw new Error("Support for event delegation has been removed");G.push(w),A.event.global[R]=!0}}},remove:function(e,t,r,n,a){var c,l,p,g,f,w,M,G,R,se,ce,Se=ut.hasData(e)&&ut.get(e);if(!(!Se||!(g=Se.events))){for(t=(t||"").match(Uu)||[""],f=t.length;f--;){if(p=Ph.exec(t[f])||[],R=ce=p[1],se=(p[2]||"").split(".").sort(),!R){for(R in g)A.event.remove(e,R+t[f],r,n,!0);continue}for(M=A.event.special[R]||{},R=(n?M.delegateType:M.bindType)||R,G=g[R]||[],p=p[2]&&new RegExp("(^|\\.)"+se.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=c=G.length;c--;)w=G[c],(a||ce===w.origType)&&(!r||r.guid===w.guid)&&(!p||p.test(w.namespace))&&(!n||n===w.selector||n==="**"&&w.selector)&&(G.splice(c,1),w.selector&&G.delegateCount--,M.remove&&M.remove.call(e,w));l&&!G.length&&((!M.teardown||M.teardown.call(e,se,Se.handle)===!1)&&A.removeEvent(e,R,Se.handle),delete g[R])}A.isEmptyObject(g)&&ut.remove(e,"handle events")}},dispatch:function(e){var t,r,n,a,c,l,p=new Array(arguments.length),g=A.event.fix(e),f=(ut.get(this,"events")||Object.create(null))[g.type]||[],w=A.event.special[g.type]||{};for(p[0]=g,t=1;t<arguments.length;t++)p[t]=arguments[t];if(g.delegateTarget=this,!(w.preDispatch&&w.preDispatch.call(this,g)===!1)){for(l=A.event.handlers.call(this,g,f),t=0;(a=l[t++])&&!g.isPropagationStopped();)for(g.currentTarget=a.elem,r=0;(c=a.handlers[r++])&&!g.isImmediatePropagationStopped();)(!g.rnamespace||c.namespace===!1||g.rnamespace.test(c.namespace))&&(g.handleObj=c,g.data=c.data,n=((A.event.special[c.origType]||{}).handle||c.handler).apply(a.elem,p),n!==void 0&&(g.result=n)===!1&&(g.preventDefault(),g.stopPropagation()));return w.postDispatch&&w.postDispatch.call(this,g),g.result}},handlers:function(e,t){var r=[],n=t.delegateCount,a=e.target;if(n)throw new Error("Support for event delegtaion has been removed");return a=this,n<t.length&&r.push({elem:a,handlers:t.slice(n)}),r},addProp:function(e,t){Object.defineProperty(A.Event.prototype,e,{enumerable:!0,configurable:!0,get:la(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(r){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:r})}})},fix:function(e){return e[A.expando]?e:new A.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return Bu.test(t.type)&&t.click&&no(t,"input")&&nl(t,"click",io),!1},trigger:function(e){var t=this||e;return Bu.test(t.type)&&t.click&&no(t,"input")&&nl(t,"click"),!0},_default:function(e){var t=e.target;return Bu.test(t.type)&&t.click&&no(t,"input")&&ut.get(t,"click")||no(t,"a")}},beforeunload:{postDispatch:function(e){e.result!==void 0&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}};A.removeEvent=function(e,t,r){e.removeEventListener&&e.removeEventListener(t,r)};A.Event=function(e,t){if(!(this instanceof A.Event))return new A.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.defaultPrevented===void 0&&e.returnValue===!1?io:oo,this.target=e.target&&e.target.nodeType===3?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&A.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[A.expando]=!0};A.Event.prototype={constructor:A.Event,isDefaultPrevented:oo,isPropagationStopped:oo,isImmediatePropagationStopped:oo,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=io,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=io,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=io,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}};A.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},A.event.addProp);A.each({focus:"focusin",blur:"focusout"},function(e,t){A.event.special[e]={setup:function(){return nl(this,e,xE),!1},trigger:function(){return nl(this,e),!0},_default:function(){return!0},delegateType:t}});A.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){A.event.special[e]={delegateType:t,bindType:t,handle:function(r){var n,a=this,c=r.relatedTarget,l=r.handleObj;return(!c||c!==a&&!A.contains(a,c))&&(r.type=l.origType,n=l.handler.apply(this,arguments),r.type=t),n}}});A.fn.extend({on:function(e,t,r,n){return $u(this,e,t,r,n)},one:function(e,t,r,n){return $u(this,e,t,r,n,1)},off:function(e,t,r){var n,a;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,A(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if(typeof e=="object"){for(a in e)this.off(a,t,e[a]);return this}return(t===!1||typeof t=="function")&&(r=t,t=void 0),r===!1&&(r=oo),this.each(function(){A.event.remove(this,e,r,t)})}});Wu=new RegExp("^("+Yh+")(?!px)[a-z%]+$","i"),sl=function(e){var t=e.ownerDocument.defaultView;return(!t||!t.opener)&&(t=window),t.getComputedStyle(e)},Qh=function(e,t,r){var n,a,c={};for(a in t)c[a]=e.style[a],e.style[a]=t[a];n=r.call(e);for(a in t)e.style[a]=c[a];return n},vE=new RegExp(Ia.join("|"),"i");(function(){function e(){if(f){g.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",f.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ao.appendChild(g).appendChild(f);var w=window.getComputedStyle(f);r=w.top!=="1%",p=t(w.marginLeft)===12,f.style.right="60%",c=t(w.right)===36,n=t(w.width)===36,f.style.position="absolute",a=t(f.offsetWidth/3)===12,ao.removeChild(g),f=null}}function t(w){return Math.round(parseFloat(w))}var r,n,a,c,l,p,g=Yt.createElement("div"),f=Yt.createElement("div");f.style&&(f.style.backgroundClip="content-box",f.cloneNode(!0).style.backgroundClip="",Jt.clearCloneStyle=f.style.backgroundClip==="content-box",A.extend(Jt,{boxSizingReliable:function(){return e(),n},pixelBoxStyles:function(){return e(),c},pixelPosition:function(){return e(),r},reliableMarginLeft:function(){return e(),p},scrollboxSize:function(){return e(),a},reliableTrDimensions:function(){var w,M,G,R;return l==null&&(w=Yt.createElement("table"),M=Yt.createElement("tr"),G=Yt.createElement("div"),w.style.cssText="position:absolute;left:-11111px;border-collapse:separate",M.style.cssText="border:1px solid",M.style.height="1px",G.style.height="9px",G.style.display="block",ao.appendChild(w).appendChild(M).appendChild(G),R=window.getComputedStyle(M),l=parseInt(R.height,10)+parseInt(R.borderTopWidth,10)+parseInt(R.borderBottomWidth,10)===M.offsetHeight,ao.removeChild(w)),l}}))})();Oh=["Webkit","Moz","ms"],Zh=Yt.createElement("div").style,Fh={};EE=/^(none|table(?!-c[ea]).+)/,Rh=/^--/,CE={position:"absolute",visibility:"hidden",display:"block"},qh={letterSpacing:"0",fontWeight:"400"};A.extend({cssHooks:{opacity:{get:function(e,t){if(t){var r=xs(e,"opacity");return r===""?"1":r}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,r,n){if(!(!e||e.nodeType===3||e.nodeType===8||!e.style)){var a,c,l,p=oa(t),g=Rh.test(t),f=e.style;if(g||(t=_h(p)),l=A.cssHooks[t]||A.cssHooks[p],r!==void 0){if(c=typeof r,c==="string"&&(a=ol.exec(r))&&a[1]&&(r=bE(e,t,a),c="number"),r==null||r!==r)return;c==="number"&&!g&&(r+=a&&a[3]||(A.cssNumber[p]?"":"px")),!Jt.clearCloneStyle&&r===""&&t.indexOf("background")===0&&(f[t]="inherit"),(!l||!("set"in l)||(r=l.set(e,r,n))!==void 0)&&(g?f.setProperty(t,r):f[t]=r)}else return l&&"get"in l&&(a=l.get(e,!1,n))!==void 0?a:f[t]}},css:function(e,t,r,n){var a,c,l,p=oa(t),g=Rh.test(t);return g||(t=_h(p)),l=A.cssHooks[t]||A.cssHooks[p],l&&"get"in l&&(a=l.get(e,!0,r)),a===void 0&&(a=xs(e,t,n)),a==="normal"&&t in qh&&(a=qh[t]),r===""||r?(c=parseFloat(a),r===!0||isFinite(c)?c||0:a):a}});A.each(["height","width"],function(e,t){A.cssHooks[t]={get:function(r,n,a){if(n)return EE.test(A.css(r,"display"))&&(!r.getClientRects().length||!r.getBoundingClientRect().width)?Qh(r,CE,function(){return Bh(r,t,a)}):Bh(r,t,a)},set:function(r,n,a){var c,l=sl(r),p=!Jt.scrollboxSize()&&l.position==="absolute",g=p||a,f=g&&A.css(r,"boxSizing",!1,l)==="border-box",w=a?zu(r,t,a,f,l):0;return f&&p&&(w-=Math.ceil(r["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(l[t])-zu(r,t,"border",!1,l)-.5)),w&&(c=ol.exec(n))&&(c[3]||"px")!=="px"&&(r.style[t]=n,n=A.css(r,t)),em(r,n,w)}}});A.cssHooks.marginLeft=Xh(Jt.reliableMarginLeft,function(e,t){if(t)return(parseFloat(xs(e,"marginLeft"))||e.getBoundingClientRect().left-Qh(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"});A.each({margin:"",padding:"",border:"Width"},function(e,t){A.cssHooks[e+t]={expand:function(r){for(var n=0,a={},c=typeof r=="string"?r.split(" "):[r];n<4;n++)a[e+Ia[n]+t]=c[n]||c[n-2]||c[0];return a}},e!=="margin"&&(A.cssHooks[e+t].set=em)});A.fn.extend({css:function(e,t){return ws(this,function(r,n,a){var c,l,p={},g=0;if(Array.isArray(n)){for(c=sl(r),l=n.length;g<l;g++)p[n[g]]=A.css(r,n[g],!1,c);return p}return a!==void 0?A.style(r,n,a):A.css(r,n)},e,t,arguments.length>1)}});(function(){var e=Yt.createElement("input"),t=Yt.createElement("select"),r=t.appendChild(Yt.createElement("option"));e.type="checkbox",Jt.checkOn=e.value!=="",Jt.optSelected=r.selected,e=Yt.createElement("input"),e.value="t",e.type="radio",Jt.radioValue=e.value==="t"})();Jt.focusin="onfocusin"in window;Uh=/^(?:focusinfocus|focusoutblur)$/,$h=function(e){e.stopPropagation()};A.extend(A.event,{trigger:function(e,t,r,n){var a,c,l,p,g,f,w,M,G=[r||Yt],R=tl.call(e,"type")?e.type:e,se=tl.call(e,"namespace")?e.namespace.split("."):[];if(c=M=l=r=r||Yt,!(r.nodeType===3||r.nodeType===8)&&!Uh.test(R+A.event.triggered)&&(R.indexOf(".")>-1&&(se=R.split("."),R=se.shift(),se.sort()),g=R.indexOf(":")<0&&"on"+R,e=e[A.expando]?e:new A.Event(R,typeof e=="object"&&e),e.isTrigger=n?2:3,e.namespace=se.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+se.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=t==null?[e]:A.makeArray(t,[e]),w=A.event.special[R]||{},!(!n&&w.trigger&&w.trigger.apply(r,t)===!1))){if(!n&&!w.noBubble&&!so(r)){for(p=w.delegateType||R,Uh.test(p+R)||(c=c.parentNode);c;c=c.parentNode)G.push(c),l=c;l===(r.ownerDocument||Yt)&&G.push(l.defaultView||l.parentWindow||window)}for(a=0;(c=G[a++])&&!e.isPropagationStopped();)M=c,e.type=a>1?p:w.bindType||R,f=(ut.get(c,"events")||Object.create(null))[e.type]&&ut.get(c,"handle"),f&&f.apply(c,t),f=g&&c[g],f&&f.apply&&rl(c)&&(e.result=f.apply(c,t),e.result===!1&&e.preventDefault());return e.type=R,!n&&!e.isDefaultPrevented()&&(!w._default||w._default.apply(G.pop(),t)===!1)&&rl(r)&&g&&la(r[R])&&!so(r)&&(l=r[g],l&&(r[g]=null),A.event.triggered=R,e.isPropagationStopped()&&M.addEventListener(R,$h),r[R](),e.isPropagationStopped()&&M.removeEventListener(R,$h),A.event.triggered=void 0,l&&(r[g]=l)),e.result}},simulate:function(e,t,r){var n=A.extend(new A.Event,r,{type:e,isSimulated:!0});A.event.trigger(n,null,t)}});A.fn.extend({trigger:function(e,t){return this.each(function(){A.event.trigger(e,t,this)})},triggerHandler:function(e,t){var r=this[0];if(r)return A.event.trigger(e,t,r,!0)}});Jt.focusin||A.each({focus:"focusin",blur:"focusout"},function(e,t){var r=function(n){A.event.simulate(t,n.target,A.event.fix(n))};A.event.special[t]={setup:function(){var n=this.ownerDocument||this.document||this,a=ut.access(n,t);a||n.addEventListener(e,r,!0),ut.access(n,t,(a||0)+1)},teardown:function(){var n=this.ownerDocument||this.document||this,a=ut.access(n,t)-1;a?ut.access(n,t,a):(n.removeEventListener(e,r,!0),ut.remove(n,t))}}});TE=/\[\]$/;A.param=function(e,t){var r,n=[],a=function(c,l){var p=la(l)?l():l;n[n.length]=encodeURIComponent(c)+"="+encodeURIComponent(p==null?"":p)};if(e==null)return"";if(Array.isArray(e)||e.jquery&&!A.isPlainObject(e))A.each(e,function(){a(this.name,this.value)});else for(r in e)Ku(r,e[r],t,a);return n.join("&")};A.offset={setOffset:function(e,t,r){var n,a,c,l,p,g,f,w=A.css(e,"position"),M=A(e),G={};w==="static"&&(e.style.position="relative"),p=M.offset(),c=A.css(e,"top"),g=A.css(e,"left"),f=(w==="absolute"||w==="fixed")&&(c+g).indexOf("auto")>-1,f?(n=M.position(),l=n.top,a=n.left):(l=parseFloat(c)||0,a=parseFloat(g)||0),la(t)&&(t=t.call(e,r,A.extend({},p))),t.top!=null&&(G.top=t.top-p.top+l),t.left!=null&&(G.left=t.left-p.left+a),"using"in t?t.using.call(e,G):M.css(G)}};A.fn.extend({offset:function(e){if(arguments.length)return e===void 0?this:this.each(function(a){A.offset.setOffset(this,e,a)});var t,r,n=this[0];if(n)return n.getClientRects().length?(t=n.getBoundingClientRect(),r=n.ownerDocument.defaultView,{top:t.top+r.pageYOffset,left:t.left+r.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var e,t,r,n=this[0],a={top:0,left:0};if(A.css(n,"position")==="fixed")t=n.getBoundingClientRect();else{for(t=this.offset(),r=n.ownerDocument,e=n.offsetParent||r.documentElement;e&&(e===r.body||e===r.documentElement)&&A.css(e,"position")==="static";)e=e.parentNode;e&&e!==n&&e.nodeType===1&&(a=A(e).offset(),a.top+=A.css(e,"borderTopWidth",!0),a.left+=A.css(e,"borderLeftWidth",!0))}return{top:t.top-a.top-A.css(n,"marginTop",!0),left:t.left-a.left-A.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&A.css(e,"position")==="static";)e=e.offsetParent;return e||ao})}});A.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var r=t==="pageYOffset";A.fn[e]=function(n){return ws(this,function(a,c,l){var p;if(so(a)?p=a:a.nodeType===9&&(p=a.defaultView),l===void 0)return p?p[t]:a[c];p?p.scrollTo(r?p.pageXOffset:l,r?l:p.pageYOffset):a[c]=l},e,n,arguments.length)}});A.each(["top","left"],function(e,t){A.cssHooks[t]=Xh(Jt.pixelPosition,function(r,n){if(n)return n=xs(r,t),Wu.test(n)?A(r).position()[t]+"px":n})});A.each({Height:"height",Width:"width"},function(e,t){A.each({padding:"inner"+e,content:t,"":"outer"+e},function(r,n){A.fn[n]=function(a,c){var l=arguments.length&&(r||typeof a!="boolean"),p=r||(a===!0||c===!0?"margin":"border");return ws(this,function(g,f,w){var M;return so(g)?n.indexOf("outer")===0?g["inner"+e]:g.document.documentElement["client"+e]:g.nodeType===9?(M=g.documentElement,Math.max(g.body["scroll"+e],M["scroll"+e],g.body["offset"+e],M["offset"+e],M["client"+e])):w===void 0?A.css(g,f,p):A.style(g,f,w,p)},t,l?a:void 0,l)}})});A.fn.extend({bind:function(e,t,r){return this.on(e,null,t,r)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,r,n){return this.on(t,e,r,n)},undelegate:function(e,t,r){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",r)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}});A.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){A.fn[t]=function(r,n){return arguments.length>0?this.on(t,null,r,n):this.trigger(t)}});SE=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;A.isArray=Array.isArray;A.parseJSON=JSON.parse;A.nodeName=no;A.isFunction=la;A.isWindow=so;A.camelCase=oa;A.type=il;A.now=Date.now;A.isNumeric=function(e){var t=A.type(e);return(t==="number"||t==="string")&&!isNaN(e-parseFloat(e))};A.trim=function(e){return e==null?"":(e+"").replace(SE,"")};DE=window.jQuery,ME=window.$;A.noConflict=function(e){return window.$===A&&(window.$=ME),e&&window.jQuery===A&&(window.jQuery=DE),A};typeof noGlobal=="undefined"&&(window.jQuery=window.$=A);ee=A});var co,dl=De(()=>{co=()=>{let e="";try{e=location.search,e[0]=="?"&&(e=e.slice(1))}catch(n){}let t=e.split("&"),r={};for(let n of t){let a=n.split("=");a.length==2?r[a[0]]=decodeURIComponent(a[1]):r[a[0]]=!0}return r}});function IE(e,t){if(t!=null){if(typeof e!="string")throw new Error("Must pass a string for an EventHandler name");if(typeof t!="function")throw new Error("Must pass a function for an EventHandler callback");return{bindings:{onMount:function(r){r[e.toLowerCase()]=function(n){n&&t.apply(this,arguments)}}}}}}var um,pm=De(()=>{um=IE});function NE(e){var t=function(){return e};return t.isDCGViewConst=!0,t}function PE(e){return!!(typeof e=="function"&&e.isDCGViewConst)}var Dt,Sn=De(()=>{Dt={isConst:PE,makeConst:NE}});function OE(e,t,r){r===void 0?e.removeAttribute(t):e.setAttribute(t,r+"")}var pl,ju=De(()=>{pl={update:OE}});function FE(e,t){var r=t(),n;return Dt.isConst(t)||(n={onUpdate:function(a){var c=t();c!==r&&(r=c,pl.update(a,e,c))}}),{value:r,bindings:n}}var gm,hm=De(()=>{Sn();ju();gm=FE});function _E(e){return e[0]==="o"&&e[1]==="n"&&e[2].toUpperCase()===e[2]}var mm,fm=De(()=>{mm=_E});function RE(e,t){Yu[e]=t}function qE(e){return Yu.hasOwnProperty(e)}function BE(e,t){var r=Yu[e];return r(t)}var Yu,ks,Ju=De(()=>{Yu={};ks={isCustomAttribute:qE,add:RE,parse:BE}});function UE(e,t,r){var n=e._bindings[t];n?n.push(r):e._bindings[t]=[r]}function $E(e,t){var r=e._bindings[t];if(r)for(var n=r.length,a=0;a<n;a++)r[a]()}var Mr,Es=De(()=>{Mr={add:UE,invoke:$E}});function zE(e){lo.push(e)}function KE(e){var t=lo;lo=[];for(var r=0;r<t.length;r++){var n=t[r];n!==e&&lo.push(n)}}function WE(e,t){try{if(t&&t._isDCGView){e+=" ["+t._viewName+"]";var r=t.traceViewHierarchy();r.ancestors.length>0&&(e+=`
View Hierarchy:
`+r.formatted)}throw new Error(e)}catch(a){console.warn(a);for(var n=0;n<lo.length;n++)lo[n](a)}}var lo,Rn,Cs=De(()=>{lo=[];Rn={warn:WE,addWarningHandler:zE,removeWarningHandler:KE}});function YE(e,t,r){var n=!1;return function(){if(n){Rn.warn(e+" is a one-time binding but was called multiple times",r);return}n=!0,t.apply(this,arguments)}}function JE(e,t,r){var n=r.bindings;if(n)for(var a in n){var c=n[a];a in HE&&(c=c.bind(null,t)),a in jE&&(c=YE(a,c,e)),Mr.add(e,a,c)}}function QE(e,t){if(typeof t!="function")throw new Error('The "'+e+'" attr must be a function. It is: '+JSON.stringify(t));return ks.isCustomAttribute(e)?ks.parse(e,t):mm(e)?um(e,t):gm(e,t)}function XE(e,t,r){if(t)for(var n in t){var a=QE(n,t[n]);if(a){var c=a.value;c!==void 0&&r.setAttribute(n,c),a.bindings&&JE(e,r,a)}}}var HE,jE,ym,bm=De(()=>{pm();hm();fm();Ju();Es();Cs();HE={onMount:!0,didMount:!0,willUnmount:!0,willUpdate:!0,onUpdate:!0,didUpdate:!0},jE={willMount:!0,onMount:!0,didMount:!0,willUnmount:!0,onUnmount:!0,didUnmount:!0};ym=XE});function ZE(){xm=!0}function eC(e,t,r){if(typeof r!="function")throw new Error("bindText expects a function");var n=r();n==null&&(n="");var a=document.createTextNode(n);if(xm){var c=document.createElement("span");c.appendChild(a),t.appendChild(c)}else t.appendChild(a);Mr.add(e,"onUpdate",function(){var l=r();l==null&&(l=""),n!==l&&(a.nodeValue=l,n=l)})}var xm,gl,Qu=De(()=>{Es();xm=!1;gl={bindText:eC,enableSpanWrapping:ZE}});function wm(e,t){var r=document.createTextNode(t);e.appendChild(r)}function Xu(e,t,r){if(this.tagName=e,this.attrs=t,this.children=r,Array.isArray(this.children))for(var n=0;n<this.children.length;n++){var a=typeof this.children[n];a!=="object"&&a!=="function"||(this.children[n]._parentElement=this)}}var tC,vm,km=De(()=>{bm();Qu();Sn();Cs();tC=gl.bindText;Xu.prototype._isDCGElement=!0;Xu.prototype.renderToDocFrag=function(e,t){if(this._domNode)throw new Error("Cannot remount a DCGElement");var r=this.children,n=document.createElement(this.tagName);this._domNode=n,ym(t,this.attrs,n),e.appendChild(n);for(var a=r.length,c=0;c<a;c++){var l=r[c];l._isDCGElement?l.renderToDocFrag(n,t):Dt.isConst(l)?wm(n,l()):typeof l=="function"?tC(t,n,l):(Rn.warn("Text should be a const or a getter: "+JSON.stringify(l),t),wm(n,l))}};vm=Xu});function Em(e,t){if(e!=null)if(Array.isArray(e))for(var r=0;r<e.length;r++)Em(e[r],t);else t.push(e)}function rC(e,t){for(var r=[],n=arguments.length-1,a=2;a<=n;a++)Em(arguments[a],r);if(typeof e=="string")return new vm(e,t,r);if(e&&e._isDCGViewClass)return new e(t,r);throw new Error("createElement expects a String or DCGViewClass")}var qn,uo=De(()=>{km();qn=rC});function nC(){for(var e=this._element;e._isDCGView;)e=e._element;return e._domNode}function aC(e,t){if(t&&t._childViews.push(this),this.__generatedHTMLBefore)throw new Error("Cannot remount a DCGView");if(this.__generatedHTMLBefore=!0,this._element.renderToDocFrag(e,this),Array.isArray(this._siblingElements))for(var r=0;r<this._siblingElements.length;r++)this._siblingElements[r].renderToDocFrag(e,this)}function iC(e,t,r){if(!e||!e._isDCGViewClass)throw new Error("Must pass a DCGView class to be mounted");if(!t||t.nodeType!==1)throw new Error("Must pass an HTMLElement for the node");if(t._mountedDCGView)throw new Error("This node is already mounted by a view");var n=new e(r),a=document.createDocumentFragment();return n.renderToDocFrag(a),t.innerHTML="",Zu(n),t._mountedDCGView=n,t.appendChild(a),ep(n),tp(n),n}function oC(e){var t=e._mountedDCGView;if(!t)throw new Error("This node is not mounted by a DCGView");rp(t),e.innerHTML="",delete e._mountedDCGView,np(t),ap(t)}function Zu(e){e.willMount&&e.willMount(),Mr.invoke(e,"willMount"),e._childViews.forEach(Zu)}function ep(e){e._isMounted=!0,e.onMount&&e.onMount(),Mr.invoke(e,"onMount"),e._childViews.forEach(ep)}function tp(e){e.didMount&&e.didMount(),Mr.invoke(e,"didMount"),e._childViews.forEach(tp)}function rp(e){e.willUnmount&&e.willUnmount(),Mr.invoke(e,"willUnmount"),e._childViews.forEach(rp)}function np(e){e._isMounted=!1,e._childViews.forEach(np),Mr.invoke(e,"onUnmount"),e.onUnmount&&e.onUnmount()}function ap(e){e._childViews.forEach(ap),Mr.invoke(e,"didUnmount"),e.didUnmount&&e.didUnmount()}function sC(e,t){var r=document.createDocumentFragment();return e.renderToDocFrag(r,t),r.firstChild}var we,Pa=De(()=>{Es();we={renderToDocFrag:aC,findRootNode:nC,createNodeForView:sC,willMount:Zu,onMount:ep,didMount:tp,willUnmount:rp,onUnmount:np,didUnmount:ap,mountToNode:iC,unmountFromNode:oC}});function cC(){if(!this._isMounted)return Rn.warn("Trying to update view that is not mounted. Ignoring update.",this);if(!(this.shouldUpdate&&!this.shouldUpdate())){if(this.willUpdate&&this.willUpdate(),Mr.invoke(this,"willUpdate"),Mr.invoke(this,"onUpdate"),this.onUpdate&&this.onUpdate(),this.overrideChildUpdates)this.overrideChildUpdates();else for(var e=this._childViews,t=e.length,r=0;r<t;r++)e[r].update();Mr.invoke(this,"didUpdate"),this.didUpdate&&this.didUpdate()}}var Cm,Tm=De(()=>{Es();Cs();Cm={update:cC}});function lC(e){var t=arguments.length;if(t<2)return e;for(var r=1;r<t;r++)for(var n=arguments[r],a=Object.keys(n),c=a.length,l=0;l<c;l++){var p=a[l];e[p]=n[p]}return e}var Bn,po=De(()=>{Bn=lC});function dC(e){if(!e)throw new Error("must pass a spec to DCGView.createClass");if(typeof e.template!="function")throw new Error("must pass a template function to DCGView.createClass");var t=function(n,a){this._viewName=e.viewName||(this.constructor?this.constructor.name:"Anonymous DCGView"),this._setupProps(n,a),this.init&&this.init(),this._callTemplate()};t.prototype._setupProps=function(n,a){if(n){for(var c in n){var l=n[c];if(typeof l!="function"&&l!==void 0)throw new Error('The "'+c+'" prop must be a function. It is: '+JSON.stringify(l))}this.props=n}else this.props={};this.children=a,this._childViews=[],this._bindings={}},t.prototype._callTemplate=function(){if(this._element=this.template(),!this._element||!this._element._isDCGElement)throw new Error("template() must return a DCGElement");this._element._parentElement=this},t.prototype.bindFn=function(n){return n.bind(this)},t.prototype.findRootNode=we.findRootNode,t.prototype.renderToDocFrag=we.renderToDocFrag,t.prototype.const=Dt.makeConst,t.prototype.spread=Bn,t.prototype.createElement=qn,t.prototype.update=Cm.update,t.prototype.traceViewHierarchy=function(){for(var n=[],a=this._parentElement;a;a=a._parentElement)n.unshift(a);var c=n.concat([this]).filter(function(l){return!(!l._isDCGView||l._isDCGSwitch&&l._parentElement&&l._parentElement._isDCGIf||l._isDCGIfDefinedWrapper||l._isDCGSwitchWrapper||l._isDCGSwitchUnionWrapper)}).map(function(l,p){for(var g="";p-- >0;)g+="  ";return g+"<"+l._viewName+">"}).join(`
`);return{ancestors:n,formatted:c}};for(var r in e)if(e.hasOwnProperty(r))if(!t.prototype.hasOwnProperty(r))t.prototype[r]=e[r];else throw new Error("Cannot override the "+r+"() method");return t._isDCGViewClass=!0,t.prototype._isDCGView=!0,t.prototype._isDCGElement=!0,t}var nt,dn=De(()=>{uo();Pa();Tm();Sn();po();nt=dC});function Sm(e){var t=e(),r=typeof t;if(r==="string")return t;if(!r||r!=="object")throw new Error("Unsupported type returned from style getter: "+r);var n="";for(var a in t){var c=t[a];t.hasOwnProperty(a)&&c!=null&&(n?n+=";"+a+":"+c:n=a+":"+c)}return n}function uC(e){var t,r=Sm(e);return Dt.isConst(e)||(t={onUpdate:function(n){var a=Sm(e);r!==a&&(pl.update(n,"style",a),r=a)}}),{value:r,bindings:t}}var Dm,Mm=De(()=>{Sn();ju();Dm=uC});function Am(e){var t=e(),r=typeof t;if(r==="string")return t;if(!r||r!=="object")throw new Error("Unsupported type returned from class getter: "+r);var n="";for(var a in t)if(t.hasOwnProperty(a)){var c=t[a];c&&(n?n+=" "+a:n=a)}return n}function pC(e,t,r){for(var n=[],a=e.className.replace(Lm,"").split(Gm),c=t.replace(Lm,"").split(Gm),l={},p=c.length-1;p>=0;p--)l[c[p]]=!0;var g=a.length;for(p=0;p<g;p++){var f=a[p];l.hasOwnProperty(f)||n.push(f)}return r?n.length?r+" "+n.join(" "):r:n.join(" ")}function gC(e){var t,r=Am(e);return Dt.isConst(e)||(t={onUpdate:function(n){var a=Am(e);r!==a&&(n.className===r?(n.className=a,r=a):(n.className=pC(n,r,a),r=a))}}),{value:r,bindings:t}}var Lm,Gm,Vm,Im=De(()=>{Sn();Lm=/^\s+|\s+$/g,Gm=/\s+/;Vm=gC});function hC(e){return function(t){if(typeof t!="function")throw new Error("The "+e+" attribute expects a function for the value");if(Dt.isConst(t))throw new Error("The "+e+" attribute does not expect a const for the value");var r={bindings:{}};return r.bindings[e]=t,r}}var Un,Nm=De(()=>{Sn();Un=hC});function Pm(e){var t=e.length,r=new Array(t),n=new Array(t+1),a=0,c,l;for(l=0;l<t;l++){if(e[n[a]]<e[l])c=a+1;else{for(var p=1,g=a-1;p<=g;){var f=Math.ceil((p+g)/2);e[n[f]]<e[l]?p=f+1:g=f-1}c=p}r[l]=n[c-1],n[c]=l,c>a&&(a=c)}var w=new Array(a),M=n[a];for(l=a-1;l>=0;l--)w[l]=e[M],M=r[M];return w}var Om=De(()=>{});function mC(e,t){var r={},n,a,c=[],l=[];for(n=0;n<t.length;n++)a=t[n],r[a]=n;for(n=0;n<e.length;n++)a=e[n],r[a]===void 0&&c.push(a);var p=[];for(n=0;n<e.length;n++){a=e[n];var g=r[a];g!==void 0&&p.push(g)}var f=Pm(p),w={};for(n=0;n<f.length;n++)a=t[f[n]],w[a]=!0;for(n=t.length-1;n>=0;n--)a=t[n],!w[a]&&l.push({key:a,beforeKey:t[n+1]});return{removes:c,inserts:l}}var hl,ip=De(()=>{Om();hl=mC});function xC(e,t){return qn(bC,{items:e,keyFunction:t.key,viewFunction:t.item})}var fC,yC,bC,Fm,_m=De(()=>{dn();ip();uo();Pa();fC=nt({viewName:"EachPlaceholder",_isDCGEachPlaceholder:!0,template:function(){return this.createElement("div",{style:this.const("display: none")})}}),yC=nt({viewName:"EachWrapper",_isDCGEachWrapper:!0,template:function(){return this.children[0]}}),bC=nt({viewName:"Each",_isDCGEach:!0,getKeys:function(){this._keyToItem={};var e=this.props.items(),t=this.props.keyFunction?e.map(this.props.keyFunction):e.slice(0);if(!this._chosenKeyType&&t.length&&(this._chosenKeyType=typeof t[0],this._chosenKeyType!=="string"&&this._chosenKeyType!=="number"))throw new Error("The key: "+JSON.stringify(t[0])+" is not a string or number");for(var r=0;r<t.length;r++){var n=t[r];if(typeof n!==this._chosenKeyType)throw new Error("Keys must be the same type. "+JSON.stringify(n)+" is not a "+this._chosenKeyType);if(n in this._keyToItem)throw new Error("The key: "+JSON.stringify(n)+" is not unique");this._keyToItem[n]=e[r]}return t},createViewForKey:function(e){var t=this._keyToItem[e],r=this.props.viewFunction.call(this,t,e),n=r;return n._isDCGView||(n=this.createElement(yC,null,r)),this._keyToView[e]=n,n},template:function(){this._keyToView={},this._keys=this.getKeys(),this._element=this.createElement(fC,null),this._siblingElements=[];for(var e=0;e<this._keys.length;e++){var t=this._keys[e],r=this.createViewForKey(t);r._parentElement=this._element._parentElement,this._siblingElements.push(r)}return this._element},detachAllRemovedViews:function(){for(var e=this._childViews,t=0,r=e.length,n,a=0;a<r;a++)n=e[a],n._will_be_unmounted_?t++:e[a-t]=n;e.splice(r-t,t)},overrideChildUpdates:function(){var e=this._keys,t=this.getKeys();this._keys=t;var r=this._element.findRootNode().parentNode,n,a,c,l,p,g,f=hl(e,t),w=[];for(n=f.removes.length-1;n>=0;n--)g=f.removes[n],w.push(this._keyToView[g]);for(w.forEach(we.willUnmount),n=0;n<f.removes.length;n++)g=f.removes[n],a=this._keyToView[g],delete this._keyToView[g],a._will_be_unmounted_=!0,r.removeChild(a.findRootNode());w.length>0&&this.detachAllRemovedViews(),w.forEach(we.onUnmount),w.forEach(we.didUnmount);var M=[];for(n=f.inserts.length-1;n>=0;n--)g=f.inserts[n].key,g in this._keyToView||(a=this.createViewForKey(g),M.push(a),we.createNodeForView(a,this));for(M.forEach(we.willMount),n=0;n<f.inserts.length;n++)p=f.inserts[n],c=this._keyToView[p.key].findRootNode(),p.beforeKey!==void 0?l=this._keyToView[p.beforeKey].findRootNode():l=null,r.insertBefore(c,l);M.forEach(we.onMount),M.forEach(we.didMount);var G=this._childViews,R=G.length-M.length;for(n=0;n<R;n++)G[n].update()}});Fm=xC});var wC,vC,Rm,qm=De(()=>{dn();ip();Sn();Pa();wC=nt({viewName:"ForWrapper",template:function(){return this.children[0]}}),vC=nt({viewName:"For",_isDCGFor:!0,getKeys:function(){this._keyToItem={};var e=this.props.each();if(!Array.isArray(e))throw new Error("<For each={}> must return an array");var t=this.props.key?e.map(this.props.key):e.slice(0);if(!this._chosenKeyType&&t.length&&(this._chosenKeyType=typeof t[0],this._chosenKeyType!=="string"&&this._chosenKeyType!=="number"))throw new Error("The key: "+JSON.stringify(t[0])+" is not a string or number");for(var r=0;r<t.length;r++){var n=t[r];if(typeof n!==this._chosenKeyType)throw new Error("Keys must be the same type. "+JSON.stringify(n)+" is not a "+this._chosenKeyType);if(n in this._keyToItem)throw new Error("The key: "+JSON.stringify(n)+" is not unique");this._keyToItem[n]=e[r]}return t},createViewForKey:function(e){var t=this._keyToItem[e],r=this._viewFunction.call(this,t,e),n=r;return n._isDCGView||(n=this.createElement(wC,null,r)),this._keyToView[e]=n,n},template:function(){if(this._keyToView={},typeof this.props.each!="function")throw new Error("<For each={}> must be a function");if(this.children.length!==1)throw new Error("<For> expects a single child. You passed "+this.children.length);var e=this.children[0];if(!e||!e._isDCGElement)throw new Error("<For> expects the root node to be a DCGElement. You passed "+JSON.stringify(e));if(e._isDCGView)throw new Error("<For> expects the root node to not be a DCGView. Pass in something like <div> or <span>");if(e.children.length!==1)throw new Error("<For> expects a root node with a single child. You passed "+e.children.length);if(this._viewFunction=e.children[0],this._viewFunction&&this._viewFunction._isDCGElement)throw new Error("<For> expects a function that constructs a DCGElement. You passed a DCGElement directly");if(typeof this._viewFunction!="function"){var t=JSON.stringify(this._viewFunction);throw new Error("<For> expects a function that constructs a DCGElement. You passed "+t)}if(Dt.isConst(this._viewFunction))throw new Error("<For> expects a function that constructs a DCGElement. You passed a constant");this._keys=this.getKeys();for(var r=[],n=0;n<this._keys.length;n++){var a=this._keys[n],c=this.createViewForKey(a);c._parentElement=this,r.push(c)}return e.children=r,e},detachAllRemovedViews:function(){for(var e=this._childViews,t=0,r=e.length,n,a=0;a<r;a++)n=e[a],n._will_be_unmounted_?t++:e[a-t]=n;e.splice(r-t,t)},overrideChildUpdates:function(){var e=this._keys,t=this.getKeys();this._keys=t;var r=this.findRootNode(),n,a,c,l,p,g,f=hl(e,t),w=[];for(n=f.removes.length-1;n>=0;n--)g=f.removes[n],w.push(this._keyToView[g]);for(w.forEach(we.willUnmount),n=0;n<f.removes.length;n++)g=f.removes[n],a=this._keyToView[g],delete this._keyToView[g],a._will_be_unmounted_=!0,r.removeChild(a.findRootNode());w.length>0&&this.detachAllRemovedViews(),w.forEach(we.onUnmount),w.forEach(we.didUnmount);var M=[];for(n=f.inserts.length-1;n>=0;n--)g=f.inserts[n].key,g in this._keyToView||(a=this.createViewForKey(g),M.push(a),we.createNodeForView(a,this));for(M.forEach(we.willMount),n=0;n<f.inserts.length;n++)p=f.inserts[n],c=this._keyToView[p.key].findRootNode(),p.beforeKey!==void 0?l=this._keyToView[p.beforeKey].findRootNode():l=null,r.insertBefore(c,l);M.forEach(we.onMount),M.forEach(we.didMount);var G=this._childViews,R=G.length-M.length;for(n=0;n<R;n++)G[n].update()}}),Rm=vC});var kC,EC,ml,op=De(()=>{dn();Sn();Pa();kC=nt({viewName:"SwitchWrapper",_isDCGSwitchWrapper:!0,template:function(){return this.children[0]}}),EC=nt({viewName:"Switch",_isDCGSwitch:!0,updateKey:function(){this._key=this.props.key()},createView:function(){var e=this._viewFunction(this._key);e==null&&(e=this.createElement("div",{style:this.const("display: none")}));var t=this.createElement(kC,null,e);return t._parentElement=this,t},template:function(){if(this._key=void 0,typeof this.props.key!="function")throw new Error("<Switch key={}> must be a function");if(this.children.length!==1)throw new Error("<Switch> expects a single child. You passed "+this.children.length);if(this._viewFunction=this.children[0],this._viewFunction&&this._viewFunction._isDCGElement)throw new Error("<Switch> expects a function that constructs a DCGElement. You passed a DCGElement directly");if(typeof this._viewFunction!="function"){var e=JSON.stringify(this._viewFunction);throw new Error("<Switch> expects a function that constructs a DCGElement. You passed "+e)}if(Dt.isConst(this._viewFunction))throw new Error("<Switch> expects a function that constructs a DCGElement. You passed a constant");return this.updateKey(),this.createView()},overrideChildUpdates:function(){var e=this._key;this.updateKey();var t=this._key;if(e===t)this._element.update();else{var r=this.findRootNode(),n=document.createTextNode("");r.parentNode.insertBefore(n,r),we.willUnmount(this._element),this._childViews=[],r.parentNode.removeChild(r),we.onUnmount(this._element),we.didUnmount(this._element),this._element=this.createView();var a=we.createNodeForView(this._element,this);we.willMount(this._element),n.parentNode.insertBefore(a,n),n.parentNode.removeChild(n),we.onMount(this._element),we.didMount(this._element)}}}),ml=EC});function Bm(e,t,r){return qn(TC,{getCase:function(){var n=t();return e?n&&n[e]:n},buildChildView:function(n){var a=r[n];if(a)return a(t)}})}function SC(e,t){return typeof e=="string"?Bm.bind(this,e,t):Bm(void 0,e,t)}var CC,TC,fl,sp=De(()=>{dn();Pa();uo();CC=nt({viewName:"SwitchUnionWrapper",_isDCGSwitchUnionWrapper:!0,template:function(){return this.children[0]}}),TC=nt({viewName:"SwitchUnion",_isDCGSwitchUnion:!0,updateCase:function(){this._case=this.props.getCase()},createView:function(){var e=this.props.buildChildView(this._case);e==null&&(e=this.createElement("div",{style:this.const("display: none")}));var t=this.createElement(CC,null,e);return t._parentElement=this,t},template:function(){return this._case=void 0,this.updateCase(),this.createView()},overrideChildUpdates:function(){var e=this._case;this.updateCase();var t=this._case;if(e===t)this._element.update();else{var r=this.findRootNode(),n=document.createTextNode("");r.parentNode.insertBefore(n,r),we.willUnmount(this._element),this._childViews=[],r.parentNode.removeChild(r),we.onUnmount(this._element),we.didUnmount(this._element),this._element=this.createView();var a=we.createNodeForView(this._element,this);we.willMount(this._element),n.parentNode.insertBefore(a,n),n.parentNode.removeChild(n),we.onMount(this._element),we.didMount(this._element)}}});fl=SC});var DC,Um,$m=De(()=>{dn();Sn();op();DC=nt({viewName:"If",_isDCGIf:!0,template:function(){if(typeof this.props.predicate!="function")throw new Error("<If predicate={}> must be a function");if(this.children.length!==1)throw new Error("<If> expects a single child. You passed "+this.children.length);if(this._viewFunction=this.children[0],this._viewFunction&&this._viewFunction._isDCGElement)throw new Error("<If> expects a function that constructs a DCGElement. You passed a DCGElement directly");if(typeof this._viewFunction!="function"){var e=JSON.stringify(this._viewFunction);throw new Error("<If> expects a function that constructs a DCGElement. You passed "+e)}if(Dt.isConst(this._viewFunction))throw new Error("<If> expects a function that constructs a DCGElement. You passed a constant");var t=(function(){return!!this.props.predicate()}).bind(this),r=(function(n){if(n)return this._viewFunction()}).bind(this);return this.createElement(ml,{key:t},r)}}),Um=DC});function LC(e,t){return qn(AC,{isDefined:function(){var r=e();return r!=null},buildChildView:function(){return t(e)}})}var MC,AC,zm,Km=De(()=>{dn();Pa();uo();MC=nt({viewName:"IfDefinedWrapper",_isDCGIfDefinedWrapper:!0,template:function(){return this.children[0]}}),AC=nt({viewName:"IfDefined",_isDCGIfDefined:!0,updateIsDefined:function(){this._isDefined=this.props.isDefined()},createView:function(){var e;this._isDefined&&(e=this.props.buildChildView()),e==null&&(e=this.createElement("div",{style:this.const("display: none")}));var t=this.createElement(MC,null,e);return t._parentElement=this,t},template:function(){return this._isDefined=void 0,this.updateIsDefined(),this.createView()},overrideChildUpdates:function(){var e=this._isDefined;this.updateIsDefined();var t=this._isDefined;if(e===t)this._element.update();else{var r=this.findRootNode(),n=document.createTextNode("");r.parentNode.insertBefore(n,r),we.willUnmount(this._element),this._childViews=[],r.parentNode.removeChild(r),we.onUnmount(this._element),we.didUnmount(this._element),this._element=this.createView();var a=we.createNodeForView(this._element,this);we.willMount(this._element),n.parentNode.insertBefore(a,n),n.parentNode.removeChild(n),we.onMount(this._element),we.didMount(this._element)}}});zm=LC});function GC(e,t){var r=fl(function(){return e()?"true":"false"},t);return r._viewName="IfElse",r}var Wm,Hm=De(()=>{sp();Wm=GC});var jm,Ym=De(()=>{dn();po();jm=nt({viewName:"Textarea",computeValue:function(){var e=this.props.value();return e==null?"":e+""},template:function(){if(!this.props.value)throw new Error('<Textarea> expects a "value={}" prop');if(!this.props.onInput)throw new Error('<Textarea> expects an "onInput={}" prop');var e=Bn({},this.props,{onInput:(function(t){this.props.onInput(t.target.value),this._isMounted&&this.update()}).bind(this)});return this.props.disabled&&(e.disabled=(function(){if(this.props.disabled())return!0}).bind(this)),delete e.value,this.createElement("textarea",e,this.const(this.computeValue()))},didUpdate:function(){this.rootDOM||(this.rootDOM=this.findRootNode());var e=this.computeValue();this.rootDOM.value!==e&&(this.rootDOM.value=e)}})});var Jm,Qm=De(()=>{dn();po();Jm=nt({viewName:"Input",computeValue:function(){var e=this.props.value();return e==null?"":e+""},template:function(){if(!this.props.value)throw new Error('<Input> expects a "value={}" prop');if(!this.props.onInput)throw new Error('<Input> expects an "onInput={}" prop');var e=Bn({},this.props,{value:this.const(this.computeValue()),onInput:(function(t){this.props.onInput(t.target.value),this._isMounted&&this.update()}).bind(this)});return this.props.onEnterPressed&&(e.onKeypress=(function(t){t.which===13&&this.props.onEnterPressed()}).bind(this)),this.props.disabled&&(e.disabled=(function(){if(this.props.disabled())return!0}).bind(this)),e.hasOwnProperty("tabindex")||(e.tabindex=(function(){return this.props.disabled&&this.props.disabled()?"-1":"0"}).bind(this)),this.createElement("input",e)},didUpdate:function(){this.rootDOM||(this.rootDOM=this.findRootNode());var e=this.computeValue();this.rootDOM.value!==e&&(this.rootDOM.value=e)}})});var Xm,Zm=De(()=>{dn();po();Xm=nt({viewName:"Checkbox",computeChecked:function(){return!!this.props.checked()},template:function(){if(!this.props.checked)throw new Error('<Checkbox> expects a "checked={}" prop');if(!this.props.onChange)throw new Error('<Checkbox> expects an "onChange={}" prop');var e=Bn({},this.props,{type:this.const("checkbox"),checked:this.const(this.computeChecked()?"checked":void 0),onChange:(function(t){this.props.onChange(t.target.checked),this._isMounted&&this.update()}).bind(this)});return this.createElement("input",e)},didUpdate:function(){this.rootDOM||(this.rootDOM=this.findRootNode());var e=this.computeChecked();this.rootDOM.checked!==e&&(this.rootDOM.checked=e)}})});var ef,tf=De(()=>{_m();qm();op();sp();$m();Km();Hm();Ym();Qm();Zm();ef={Each:Fm,For:Rm,Switch:ml,SwitchUnion:fl,If:Um,IfDefined:zm,IfElse:Wm,Textarea:jm,Input:Jm,Checkbox:Xm}});var rf,nf=De(()=>{dn();rf=nt({template:function(){}})});var VC,un,Dn,af=De(()=>{uo();dn();Pa();po();Sn();Ju();Mm();Im();Nm();tf();Cs();Qu();nf();VC=gl.enableSpanWrapping,un={createElement:qn,createClass:nt,mountToNode:we.mountToNode,unmountFromNode:we.unmountFromNode,spread:Bn,const:Dt.makeConst,isConst:Dt.isConst,addCustomAttribute:ks.add,Components:ef,addWarningHandler:Rn.addWarningHandler,removeWarningHandler:Rn.removeWarningHandler,_warn:Rn.warn,enableSpanWrapping:VC,Class:rf};un.addCustomAttribute("style",Dm);un.addCustomAttribute("class",Vm);un.addCustomAttribute("willMount",Un("willMount"));un.addCustomAttribute("onMount",Un("onMount"));un.addCustomAttribute("didMount",Un("didMount"));un.addCustomAttribute("willUnmount",Un("willUnmount"));un.addCustomAttribute("onUnmount",Un("onUnmount"));un.addCustomAttribute("didUnmount",Un("didUnmount"));un.addCustomAttribute("willUpdate",Un("willUpdate"));un.addCustomAttribute("onUpdate",Un("onUpdate"));un.addCustomAttribute("didUpdate",Un("didUpdate"));Dn=un});function IC(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}function NC(){var e=window.Desmos&&window.Desmos.commit;return e}function PC(){var e="production";if(location&&location.hostname){var t=location.hostname,r=t.split("."),n=r.slice(0,r.length-2).join("."),a=r.slice(r.length-2).join(".");a==="desmos.com"&&(!n||n==="www"?e="production":e=n)}return e}function cf(e){if(!go){var t=0,r=IC();go=e({apiKey:"7f7807097671acbc4557e64bbf5eb529",maxBreadcrumbs:40,appVersion:NC(),releaseStage:PC(),consoleBreadcrumbsEnabled:!1,beforeSend:function(n){if(n.errorClass){for(let a of sf)if(n.errorClass.indexOf(a)!==-1){n.ignore();return}}if(n.errorMessage){for(let a of sf)if(n.errorMessage.indexOf(a)!==-1){n.ignore();return}}cp&&cp(n),of&&of(n),n.isIgnored()||(t+=1,n.metaData.errorNumber=t,n.metaData.pageLoadId=r)}})}}function lf(e,t){go&&go.notify(e,t)}function yl(e,t,r,n){if(t){t=be({},t);for(var a in t)try{t[a]=JSON.stringify(t[a],null,2)}catch(c){t[a]="[[could not stringify]]"}}go&&go.leaveBreadcrumb(e,t,r,n)}function df(e){cp=e}var go,cp,of,sf,ho=De(()=>{sf=["UnhandledRejection","lnrAppboy","socratic","MyAppGet","SymBrowser_","mobincube_","_avast_submit","Cannot redefine property: googletag","jcarousel","SyntaxError: Unexpected identifier 'script'","__gCrWeb.autofill.extractForms","BrowseITEXT","Can't find variable: removeAllHighlights","aAttribruteValue.parentNode.getAttribute","vid_mate_check","GetImageTagSrcFromPoint","Can't find variable: didEnterViewPort","tinyMCE is not defined"]});function uf(e,t){let n=new RegExp("[?|&]"+t+"=([^&;]+?)(&|#|;|$)").exec(e);return n?decodeURIComponent(n[1].replace(/\+/g,"%20")):null}function OC(e,t){return new RegExp("[?|&]"+t+"(=|&|;|$)").test(e)}function FC(e,t,r){if(t!==encodeURIComponent(t))throw new Error("Programming error: parameter name should be URL-safe without encoding.");let n=encodeURIComponent(r);if(e.length){let a=e.split("#"),c=/\?/.test(e)?`${a[0]}&${t}=${n}`:`${a[0]}?${t}=${n}`;return a[1]!==void 0?`${c}#${a[1]}`:c}else return`?${t}=${n}`}function _C(e,t,r){let a=new RegExp("([?|&])"+t+"=([^&;]+?)(&|#|;|$)").exec(e);if(!a)return e;let c=a[1],l=a[2],p=`${c}${t}=${l}`,g=encodeURIComponent(r),f=`${c}${t}=${g}`;return e.replace(p,f)}function bl(e,t,r){return OC(e,t)?_C(e,t,r):FC(e,t,r)}var xl=De(()=>{});function zC(e){let t=UC.exec(e);if(t){let r=t[1];return!$C.test(r)}return!1}function wl(e,t){let r=co(),n="";return t!==void 0?n=t:n=r.lang?""+r.lang:"",e===""||n===""||qC.test(e)||BC.test(e)||zC(e)?e:bl(e,"lang",n)}var qC,BC,UC,$C,pf=De(()=>{dl();xl();qC=/lang=[A-Za-z]+/,BC=/(cl|learn|help).desmos.com/,UC=/^(?:https?:)?(?:\/\/)?([^\s\/\?]+)/i,$C=/(^desmos\.com$)|(\.desmos.com$)/});var gf=De(()=>{});var me=Ga((IL,hf)=>{af();dr();ho();pf();gf();Dn.addWarningHandler(e=>lf(e));Dn.addCustomAttribute("href",function(e){let t=wl(e()),r={value:`${wl(e())}`,bindings:{onMount(n){if(!n.matches("a")&&!n.matches("use"))throw new Error("Cannot have an href on a non-link element.")}}};return r.bindings.onUpdate=function(n){let a=wl(e());t!==a&&(t=a,n.setAttribute("href",a))},r});Dn.addCustomAttribute("onTap",e=>({value:"",bindings:{onMount(t){ee(t).on("dcg-tap",e)}}}));Dn.addCustomAttribute("ignoreRealClick",e=>({bindings:{onMount(t){ee(t).on("click",function(r){e()&&r.preventDefault()})}}}));Dn.addCustomAttribute("onTapStart",e=>({bindings:{onMount(t){ee(t).on("dcg-tapstart",e)}}}));Dn.addCustomAttribute("onTapMove",e=>({bindings:{onMount(t){ee(t).on("dcg-tapmove",e)}}}));Dn.addCustomAttribute("onTapEnd",e=>({bindings:{onMount(t){ee(t).on("dcg-tapend",e)}}}));Dn.addCustomAttribute("onLongHold",e=>({bindings:{onMount(t){ee(t).on("dcg-longhold",e)}}}));Dn.addCustomAttribute("manageFocus",function(e){return e()===void 0?{}:{bindings:{onMount(t){e().shouldBeFocused()&&t.focus(),t.onfocus=function(r){e().shouldBeFocused()||e().onFocusedChanged(!0,r)},t.onblur=function(r){e().shouldBeFocused()&&e().onFocusedChanged(!1,r)}},onUpdate(t){let r=e().shouldBeFocused(),n=document.activeElement===t;r&&!n?t.focus():n&&!r&&t.blur()},willUnmount(t){t.onfocus=null,t.onblur=null}}}});hf.exports=Dn});var Ov=Ga((Pv,Jg)=>{(function(e){if(typeof Pv=="object"&&typeof Jg!="undefined")Jg.exports=e();else{var t;typeof window!="undefined"?t=window:typeof global!="undefined"?t=global:typeof self!="undefined"?t=self:t=this,t.bugsnag=e()}})(function(){var e,t,r,n=function(m,y,x){for(var k=x,S=0,N=m.length;S<N;S++)k=y(k,m[S],S,m);return k},a=function(m,y){return n(m,function(x,k,S,N){return y(k,S,N)?x.concat(k):x},[])},c=function(m,y){return n(m,function(x,k,S,N){return x.concat(y(k,S,N))},[])},l=function(m,y){return n(m,function(x,k,S,N){return x===!0||k===y},!1)},p=!{toString:null}.propertyIsEnumerable("toString"),g=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],f=function(m){var y=[],x;for(x in m)Object.prototype.hasOwnProperty.call(m,x)&&y.push(x);if(!p)return y;for(var k=0,S=g.length;k<S;k++)Object.prototype.hasOwnProperty.call(m,g[k])&&y.push(g[k]);return y},w=function(m){return Object.prototype.toString.call(m)==="[object Array]"},M=function(m){return m<10?"0"+m:m},G=function(){var m=new Date;return m.getUTCFullYear()+"-"+M(m.getUTCMonth()+1)+"-"+M(m.getUTCDate())+"T"+M(m.getUTCHours())+":"+M(m.getUTCMinutes())+":"+M(m.getUTCSeconds())+"."+(m.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"},R={map:c,reduce:n,filter:a,includes:l,keys:f,isArray:w,isoDate:G},se={};se.intRange=function(m,y){return m===void 0&&(m=1),y===void 0&&(y=1/0),function(x){return typeof x=="number"&&parseInt(""+x,10)===x&&x>=m&&x<=y}},se.stringWithLength=function(m){return typeof m=="string"&&!!m.length};var ce={},Se=R.filter,ze=R.reduce,Ge=R.keys,Re=R.isArray,Je=R.includes,Nt=se.intRange,ot=se.stringWithLength;ce.schema={apiKey:{defaultValue:function(){return null},message:"is required",validate:ot},appVersion:{defaultValue:function(){return null},message:"should be a string",validate:function(m){return m===null||ot(m)}},appType:{defaultValue:function(){return null},message:"should be a string",validate:function(m){return m===null||ot(m)}},autoNotify:{defaultValue:function(){return!0},message:"should be true|false",validate:function(m){return m===!0||m===!1}},beforeSend:{defaultValue:function(){return[]},message:"should be a function or array of functions",validate:function(m){return typeof m=="function"||Re(m)&&Se(m,function(y){return typeof y=="function"}).length===m.length}},endpoints:{defaultValue:function(){return{notify:"https://notify.bugsnag.com",sessions:"https://sessions.bugsnag.com"}},message:"should be an object containing endpoint URLs { notify, sessions }. sessions is optional if autoCaptureSessions=false",validate:function(m,y){return m&&typeof m=="object"&&ot(m.notify)&&(y.autoCaptureSessions===!1||ot(m.sessions))&&Se(Ge(m),function(x){return!Je(["notify","sessions"],x)}).length===0}},autoCaptureSessions:{defaultValue:function(m,y){return y.endpoints===void 0||!!y.endpoints&&!!y.endpoints.sessions},message:"should be true|false",validate:function(m){return m===!0||m===!1}},notifyReleaseStages:{defaultValue:function(){return null},message:"should be an array of strings",validate:function(m){return m===null||Re(m)&&Se(m,function(y){return typeof y=="string"}).length===m.length}},releaseStage:{defaultValue:function(){return"production"},message:"should be a string",validate:function(m){return typeof m=="string"&&m.length}},maxBreadcrumbs:{defaultValue:function(){return 20},message:"should be a number \u226440",validate:function(m){return Nt(0,40)(m)}},autoBreadcrumbs:{defaultValue:function(){return!0},message:"should be true|false",validate:function(m){return typeof m=="boolean"}},user:{defaultValue:function(){return null},message:"(object) user should be an object",validate:function(m){return typeof m=="object"}},metaData:{defaultValue:function(){return null},message:"should be an object",validate:function(m){return typeof m=="object"}},logger:{defaultValue:function(){},message:"should be null or an object with methods { debug, info, warn, error }",validate:function(m){return!m||m&&ze(["debug","info","warn","error"],function(y,x){return y&&typeof m[x]=="function"},!0)}},filters:{defaultValue:function(){return["password"]},message:"should be an array of strings|regexes",validate:function(m){return Re(m)&&m.length===Se(m,function(y){return typeof y=="string"||y&&typeof y.test=="function"}).length}}},ce.mergeDefaults=function(m,y){if(!m||!y)throw new Error("opts and schema objects are required");return ze(Ge(y),function(x,k){return x[k]=m[k]!==void 0?m[k]:y[k].defaultValue(m[k],m),x},{})},ce.validate=function(m,y){if(!m||!y)throw new Error("opts and schema objects are required");var x=ze(Ge(y),function(k,S){return y[S].validate(m[S],m)?k:k.concat({key:S,message:y[S].message,value:m[S]})},[]);return{valid:!x.length,errors:x}};function ge(){return ge=Object.assign||function(m){for(var y=1;y<arguments.length;y++){var x=arguments[y];for(var k in x)Object.prototype.hasOwnProperty.call(x,k)&&(m[k]=x[k])}return m},ge.apply(this,arguments)}var ra=ce.schema,Q=R.map,de=se.stringWithLength,Ze={releaseStage:{defaultValue:function(){return/^localhost(:\d+)?$/.test(window.location.host)?"development":"production"},message:"should be set",validate:de},logger:ge({},ra.logger,{defaultValue:function(){return typeof console!="undefined"&&typeof console.debug=="function"?nn():void 0}})},nn=function(){var m={},y=console.log;return Q(["debug","info","warn","error"],function(x){var k=console[x];m[x]=typeof k=="function"?k.bind(console,"[bugsnag]"):y.bind(console,"[bugsnag]")}),m},Ht=R.isoDate,hr=function(){function m(x,k,S,N){x===void 0&&(x="[anonymous]"),k===void 0&&(k={}),S===void 0&&(S="manual"),N===void 0&&(N=Ht()),this.type=S,this.name=x,this.metaData=k,this.timestamp=N}var y=m.prototype;return y.toJSON=function(){return{type:this.type,name:this.name,timestamp:this.timestamp,metaData:this.metaData}},m}(),jt=hr,C=function(m,y,x){var k=m.length,S=0,N=function(){if(S>=k)return x(null,!1);y(m[S],function(I,te){if(I)return x(I,!1);if(te===!0)return x(null,!0);S++,N()})};N()},an=function(m){return m.app&&typeof m.app.releaseStage=="string"?m.app.releaseStage:m.config.releaseStage},Tu=Su;function Su(m){switch(Object.prototype.toString.call(m)){case"[object Error]":return!0;case"[object Exception]":return!0;case"[object DOMException]":return!0;default:return m instanceof Error}}var Tc=Tu,Sc=function(m,y){return function(x,k){if(typeof x!="function")return k(null,!1);try{if(x.length!==2){var S=x(m);return S&&typeof S.then=="function"?S.then(function(N){return setTimeout(function(){return k(null,xn(m,N))},0)},function(N){setTimeout(function(){return y(N),k(null,!1)})}):k(null,xn(m,S))}x(m,function(N,I){if(N)return y(N),k(null,!1);k(null,xn(m,I))})}catch(N){y(N),k(null,!1)}}},xn=function(m,y){return m.isIgnored()||y===!1},mr={};(function(m,y){"use strict";typeof e=="function"&&e.amd?e("stackframe",[],y):typeof mr=="object"?mr=y():m.StackFrame=y()})(this,function(){"use strict";function m(Y){return!isNaN(parseFloat(Y))&&isFinite(Y)}function y(Y){return Y.charAt(0).toUpperCase()+Y.substring(1)}function x(Y){return function(){return this[Y]}}var k=["isConstructor","isEval","isNative","isToplevel"],S=["columnNumber","lineNumber"],N=["fileName","functionName","source"],I=["args"],te=k.concat(S,N,I);function Z(Y){if(Y instanceof Object)for(var je=0;je<te.length;je++)Y.hasOwnProperty(te[je])&&Y[te[je]]!==void 0&&this["set"+y(te[je])](Y[te[je]])}Z.prototype={getArgs:function(){return this.args},setArgs:function(Y){if(Object.prototype.toString.call(Y)!=="[object Array]")throw new TypeError("Args must be an Array");this.args=Y},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(Y){if(Y instanceof Z)this.evalOrigin=Y;else if(Y instanceof Object)this.evalOrigin=new Z(Y);else throw new TypeError("Eval Origin must be an Object or StackFrame")},toString:function(){var Y=this.getFunctionName()||"{anonymous}",je="("+(this.getArgs()||[]).join(",")+")",_n=this.getFileName()?"@"+this.getFileName():"",En=m(this.getLineNumber())?":"+this.getLineNumber():"",nr=m(this.getColumnNumber())?":"+this.getColumnNumber():"";return Y+je+_n+En+nr}};for(var ke=0;ke<k.length;ke++)Z.prototype["get"+y(k[ke])]=x(k[ke]),Z.prototype["set"+y(k[ke])]=function(Y){return function(je){this[Y]=!!je}}(k[ke]);for(var le=0;le<S.length;le++)Z.prototype["get"+y(S[le])]=x(S[le]),Z.prototype["set"+y(S[le])]=function(Y){return function(je){if(!m(je))throw new TypeError(Y+" must be a Number");this[Y]=Number(je)}}(S[le]);for(var et=0;et<N.length;et++)Z.prototype["get"+y(N[et])]=x(N[et]),Z.prototype["set"+y(N[et])]=function(Y){return function(je){this[Y]=String(je)}}(N[et]);return Z});var zi={};(function(m,y){"use strict";typeof e=="function"&&e.amd?e("error-stack-parser",["stackframe"],y):typeof zi=="object"?zi=y(mr):m.ErrorStackParser=y(m.StackFrame)})(this,function(y){"use strict";var x=/(^|@)\S+\:\d+/,k=/^\s*at .*(\S+\:\d+|\(native\))/m,S=/^(eval@)?(\[native code\])?$/;return{parse:function(I){if(typeof I.stacktrace!="undefined"||typeof I["opera#sourceloc"]!="undefined")return this.parseOpera(I);if(I.stack&&I.stack.match(k))return this.parseV8OrIE(I);if(I.stack)return this.parseFFOrSafari(I);throw new Error("Cannot parse given Error object")},extractLocation:function(I){if(I.indexOf(":")===-1)return[I];var te=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/,Z=te.exec(I.replace(/[\(\)]/g,""));return[Z[1],Z[2]||void 0,Z[3]||void 0]},parseV8OrIE:function(I){var te=I.stack.split(`
`).filter(function(Z){return!!Z.match(k)},this);return te.map(function(Z){Z.indexOf("(eval ")>-1&&(Z=Z.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var ke=Z.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),le=this.extractLocation(ke.pop()),et=ke.join(" ")||void 0,Y=["eval","<anonymous>"].indexOf(le[0])>-1?void 0:le[0];return new y({functionName:et,fileName:Y,lineNumber:le[1],columnNumber:le[2],source:Z})},this)},parseFFOrSafari:function(I){var te=I.stack.split(`
`).filter(function(Z){return!Z.match(S)},this);return te.map(function(Z){if(Z.indexOf(" > eval")>-1&&(Z=Z.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),Z.indexOf("@")===-1&&Z.indexOf(":")===-1)return new y({functionName:Z});var ke=/((.*".+"[^@]*)?[^@]*)(?:@)/,le=Z.match(ke),et=le&&le[1]?le[1]:void 0,Y=this.extractLocation(Z.replace(ke,""));return new y({functionName:et,fileName:Y[0],lineNumber:Y[1],columnNumber:Y[2],source:Z})},this)},parseOpera:function(I){return!I.stacktrace||I.message.indexOf(`
`)>-1&&I.message.split(`
`).length>I.stacktrace.split(`
`).length?this.parseOpera9(I):I.stack?this.parseOpera11(I):this.parseOpera10(I)},parseOpera9:function(I){for(var te=/Line (\d+).*script (?:in )?(\S+)/i,Z=I.message.split(`
`),ke=[],le=2,et=Z.length;le<et;le+=2){var Y=te.exec(Z[le]);Y&&ke.push(new y({fileName:Y[2],lineNumber:Y[1],source:Z[le]}))}return ke},parseOpera10:function(I){for(var te=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,Z=I.stacktrace.split(`
`),ke=[],le=0,et=Z.length;le<et;le+=2){var Y=te.exec(Z[le]);Y&&ke.push(new y({functionName:Y[3]||void 0,fileName:Y[2],lineNumber:Y[1],source:Z[le]}))}return ke},parseOpera11:function(I){var te=I.stack.split(`
`).filter(function(Z){return!!Z.match(x)&&!Z.match(/^Error created at/)},this);return te.map(function(Z){var ke=Z.split("@"),le=this.extractLocation(ke.pop()),et=ke.shift()||"",Y=et.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0,je;et.match(/\(([^\)]*)\)/)&&(je=et.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var _n=je===void 0||je==="[arguments not available]"?void 0:je.split(",");return new y({functionName:Y,args:_n,fileName:le[0],lineNumber:le[1],columnNumber:le[2],source:Z})},this)}}});var Du=zi,wn=function(m){return!!m&&(!!m.stack||!!m.stacktrace||!!m["opera#sourceloc"])&&typeof(m.stack||m.stacktrace||m["opera#sourceloc"])=="string"&&m.stack!==m.name+": "+m.message},tr={};(function(m,y){"use strict";typeof e=="function"&&e.amd?e("stack-generator",["stackframe"],y):typeof tr=="object"?tr=y(mr):m.StackGenerator=y(m.StackFrame)})(this,function(m){return{backtrace:function(x){var k=[],S=10;typeof x=="object"&&typeof x.maxStackSize=="number"&&(S=x.maxStackSize);for(var N=arguments.callee;N&&k.length<S&&N.arguments;){for(var I=new Array(N.arguments.length),te=0;te<I.length;++te)I[te]=N.arguments[te];/function(?:\s+([\w$]+))+\s*\(/.test(N.toString())?k.push(new m({functionName:RegExp.$1||void 0,args:I})):k.push(new m({args:I}));try{N=N.caller}catch(Z){break}}return k}}});function Ki(){return Ki=Object.assign||function(m){for(var y=1;y<arguments.length;y++){var x=arguments[y];for(var k in x)Object.prototype.hasOwnProperty.call(x,k)&&(m[k]=x[k])}return m},Ki.apply(this,arguments)}var Wi=R.reduce,Da=R.filter,rr=function(){function m(x,k,S,N,I){S===void 0&&(S=[]),N===void 0&&(N=Za()),this.__isBugsnagReport=!0,this._ignored=!1,this._handledState=N,this.app=void 0,this.apiKey=void 0,this.breadcrumbs=[],this.context=void 0,this.device=void 0,this.errorClass=Dc(x,"[no error class]"),this.errorMessage=Dc(k,"[no error message]"),this.groupingHash=void 0,this.metaData={},this.request=void 0,this.severity=this._handledState.severity,this.stacktrace=Wi(S,function(te,Z){var ke=Mu(Z);try{return JSON.stringify(ke)==="{}"?te:te.concat(ke)}catch(le){return te}},[]),this.user=void 0,this.session=void 0,this.originalError=I}var y=m.prototype;return y.ignore=function(){this._ignored=!0},y.isIgnored=function(){return this._ignored},y.updateMetaData=function(k){var S;if(!k)return this;var N;return(arguments.length<=1?void 0:arguments[1])===null?this.removeMetaData(k):(arguments.length<=2?void 0:arguments[2])===null?this.removeMetaData(k,arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]):(typeof(arguments.length<=1?void 0:arguments[1])=="object"&&(N=arguments.length<=1?void 0:arguments[1]),typeof(arguments.length<=1?void 0:arguments[1])=="string"&&(N=(S={},S[arguments.length<=1?void 0:arguments[1]]=arguments.length<=2?void 0:arguments[2],S)),N?(this.metaData[k]||(this.metaData[k]={}),this.metaData[k]=Ki({},this.metaData[k],N),this):this)},y.removeMetaData=function(k,S){return typeof k!="string"?this:S?this.metaData[k]?(delete this.metaData[k][S],this):this:(delete this.metaData[k],this)},y.toJSON=function(){return{payloadVersion:"4",exceptions:[{errorClass:this.errorClass,message:this.errorMessage,stacktrace:this.stacktrace,type:"browserjs"}],severity:this.severity,unhandled:this._handledState.unhandled,severityReason:this._handledState.severityReason,app:this.app,device:this.device,breadcrumbs:this.breadcrumbs,context:this.context,user:this.user,metaData:this.metaData,groupingHash:this.groupingHash,request:this.request,session:this.session}},m}(),Mu=function(m){var y={file:m.fileName,method:Au(m.functionName),lineNumber:m.lineNumber,columnNumber:m.columnNumber,code:void 0,inProject:void 0};return y.lineNumber>-1&&!y.file&&!y.method&&(y.file="global code"),y},Au=function(m){return/^global code$/i.test(m)?"global code":m},Za=function(){return{unhandled:!1,severity:"warning",severityReason:{type:"handledException"}}},Dc=function(m,y){return typeof m=="string"&&m?m:y};rr.getStacktrace=function(m,y,x){return y===void 0&&(y=0),x===void 0&&(x=0),wn(m)?Du.parse(m).slice(y):Da(tr.backtrace(),function(k){return(k.functionName||"").indexOf("StackGenerator$$")===-1}).slice(1+x)},rr.ensureReport=function(m,y,x){if(y===void 0&&(y=0),x===void 0&&(x=0),m.__isBugsnagReport)return m;try{var k=rr.getStacktrace(m,y,1+x);return new rr(m.name,m.message,k,void 0,m)}catch(S){return new rr(m.name,m.message,[],void 0,m)}};var Hi=rr,rs=function(y,x){var k="000000000"+y;return k.substr(k.length-x)},Ee=typeof window=="object"?window:self,Mc=0;for(var Ac in Ee)Object.hasOwnProperty.call(Ee,Ac)&&Mc++;var Lu=navigator.mimeTypes?navigator.mimeTypes.length:0,Gu=rs((Lu+navigator.userAgent.length).toString(36)+Mc.toString(36),4),Pn=function(){return Gu},fr=0,ns=4,as=36,yr=Math.pow(as,ns);function Lc(){return rs((Math.random()*yr<<0).toString(as),ns)}function Gc(){return fr=fr<yr?fr:0,fr++,fr-1}function Ma(){var m="c",y=new Date().getTime().toString(as),x=rs(Gc().toString(as),ns),k=Pn(),S=Lc()+Lc();return m+y+x+k+S}Ma.fingerprint=Pn;var Vu=Ma,Iu=R.isoDate,Vc=function(){function m(){this.id=Vu(),this.startedAt=Iu(),this._handled=0,this._unhandled=0}var y=m.prototype;return y.toJSON=function(){return{id:this.id,startedAt:this.startedAt,events:{handled:this._handled,unhandled:this._unhandled}}},y.trackError=function(k){this[k._handledState.unhandled?"_unhandled":"_handled"]+=1},m}(),is=Vc;function on(){return on=Object.assign||function(m){for(var y=1;y<arguments.length;y++){var x=arguments[y];for(var k in x)Object.prototype.hasOwnProperty.call(x,k)&&(m[k]=x[k])}return m},on.apply(this,arguments)}var St=R.map,Pt=R.includes,br=R.isArray,ei="Usage error.",Rr="Bugsnag usage error.",Cr=function(){function m(x){if(!x||!x.name||!x.version||!x.url)throw new Error("`notifier` argument is required");this.notifier=x,this._configured=!1,this._opts={},this.config={},this._delivery={sendSession:function(){},sendReport:function(){}},this._logger={debug:function(){},info:function(){},warn:function(){},error:function(){}},this._plugins={},this._session=null,this.breadcrumbs=[],this.app={},this.context=void 0,this.device=void 0,this.metaData=void 0,this.request=void 0,this.user={},this.BugsnagClient=m,this.BugsnagReport=Hi,this.BugsnagBreadcrumb=jt,this.BugsnagSession=is;var k=this,S=this.notify;this.notify=function(){return S.apply(k,arguments)}}var y=m.prototype;return y.setOptions=function(k){this._opts=on({},this._opts,k)},y.configure=function(k){k===void 0&&(k=ce.schema);var S=ce.mergeDefaults(this._opts,k),N=ce.validate(S,k);if(!N.valid)throw new Error(Ic(N.errors));return typeof S.beforeSend=="function"&&(S.beforeSend=[S.beforeSend]),S.appVersion&&(this.app.version=S.appVersion),S.appType&&(this.app.type=S.appType),S.metaData&&(this.metaData=S.metaData),S.user&&(this.user=S.user),S.logger&&this.logger(S.logger),this.config=on({},this.config,S),this._configured=!0,this},y.use=function(k){if(!this._configured)throw new Error("client not configured");k.configSchema&&this.configure(k.configSchema);for(var S=arguments.length,N=new Array(S>1?S-1:0),I=1;I<S;I++)N[I-1]=arguments[I];var te=k.init.apply(k,[this].concat(N));return k.name&&(this._plugins["~"+k.name+"~"]=te),this},y.getPlugin=function(k){return this._plugins["~"+k+"~"]},y.delivery=function(k){return this._delivery=k,this},y.logger=function(k,S){return this._logger=k,this},y.sessionDelegate=function(k){return this._sessionDelegate=k,this},y.startSession=function(){return this._sessionDelegate?this._sessionDelegate.startSession(this):(this._logger.warn("No session implementation is installed"),this)},y.leaveBreadcrumb=function(k,S,N,I){if(!this._configured)throw new Error("client not configured");if(k=k||void 0,N=typeof N=="string"?N:void 0,I=typeof I=="string"?I:void 0,S=typeof S=="object"&&S!==null?S:void 0,!(typeof k!="string"&&!S)){var te=new jt(k,S,N,I);return this.breadcrumbs.push(te),this.breadcrumbs.length>this.config.maxBreadcrumbs&&(this.breadcrumbs=this.breadcrumbs.slice(this.breadcrumbs.length-this.config.maxBreadcrumbs)),this}},y.notify=function(k,S,N){var I=this;if(S===void 0&&(S={}),N===void 0&&(N=function(){}),!this._configured)throw new Error("client not configured");var te=an(this),Z=ji(k,S,this._logger),ke=Z.err,le=Z.errorFramesToSkip,et=Z._opts;et&&(S=et),(typeof S!="object"||S===null)&&(S={});var Y=Hi.ensureReport(ke,le,2);if(Y.app=on({},{releaseStage:te},Y.app,this.app),Y.context=Y.context||S.context||this.context||void 0,Y.device=on({},Y.device,this.device,S.device),Y.request=on({},Y.request,this.request,S.request),Y.user=on({},Y.user,this.user,S.user),Y.metaData=on({},Y.metaData,this.metaData,S.metaData),Y.breadcrumbs=this.breadcrumbs.slice(0),this._session&&(this._session.trackError(Y),Y.session=this._session),S.severity!==void 0&&(Y.severity=S.severity,Y._handledState.severityReason={type:"userSpecifiedSeverity"}),br(this.config.notifyReleaseStages)&&!Pt(this.config.notifyReleaseStages,te))return this._logger.warn("Report not sent due to releaseStage/notifyReleaseStages configuration"),N(null,Y);var je=Y.severity,_n=[].concat(S.beforeSend).concat(this.config.beforeSend),En=function(nr){I._logger.error("Error occurred in beforeSend callback, continuing anyway\u2026"),I._logger.error(nr)};C(_n,Sc(Y,En),function(nr,ro){if(nr&&En(nr),ro)return I._logger.debug("Report not sent due to beforeSend callback"),N(null,Y);I.config.autoBreadcrumbs&&I.leaveBreadcrumb(Y.errorClass,{errorClass:Y.errorClass,errorMessage:Y.errorMessage,severity:Y.severity},"error"),je!==Y.severity&&(Y._handledState.severityReason={type:"userCallbackSetSeverity"}),I._delivery.sendReport(I._logger,I.config,{apiKey:Y.apiKey||I.config.apiKey,notifier:I.notifier,events:[Y]},function(jc){return N(jc,Y)})})},m}(),ji=function(m,y,x){var k=3,S=function(Z){var ke=os(Z);return x.warn(ei+" "+ke),new Error(Rr+" "+ke)},N,I=0,te;switch(typeof m){case"string":typeof y=="string"?(N=S("string/string"),te={metaData:{notifier:{notifyArgs:[m,y]}}}):(N=new Error(String(m)),I=k);break;case"number":case"boolean":N=new Error(String(m));break;case"function":N=S("function");break;case"object":m!==null&&(Tc(m)||m.__isBugsnagReport)?N=m:m!==null&&Tr(m)?(N=new Error(m.message||m.errorMessage),N.name=m.name||m.errorClass,I=k):N=S(m===null?"null":"unsupported object");break;default:N=S("nothing")}return{err:N,errorFramesToSkip:I,_opts:te}},Tr=function(m){return(typeof m.name=="string"||typeof m.errorClass=="string")&&(typeof m.message=="string"||typeof m.errorMessage=="string")},Ic=function(m){return`Bugsnag configuration error
`+St(m,function(y){return'"'+y.key+'" '+y.message+` 
    got `+Yi(y.value)}).join(`

`)},os=function(m){return"notify() expected error/opts parameters, got "+m},Yi=function(m){return typeof m=="object"?JSON.stringify(m):String(m)},On=Cr,Sr=function(m,y,x,k){var S=k&&k.filterKeys?k.filterKeys:[],N=k&&k.filterPaths?k.filterPaths:[];return JSON.stringify(Oc(m,S,N),y,x)},na=20,ss=25e3,Nu=8,Ji="...";function Nc(m){return m instanceof Error||/^\[object (Error|(Dom)?Exception)\]$/.test(Object.prototype.toString.call(m))}function cs(m){return"[Throws: "+(m?m.message:"?")+"]"}function ti(m,y){for(var x=0,k=m.length;x<k;x++)if(m[x]===y)return!0;return!1}function xr(m,y){for(var x=0,k=m.length;x<k;x++)if(y.indexOf(m[x])===0)return!0;return!1}function Qi(m,y){for(var x=0,k=m.length;x<k;x++)if(typeof m[x]=="string"&&m[x]===y||m[x]&&typeof m[x].test=="function"&&m[x].test(y))return!0;return!1}function ri(m){return Object.prototype.toString.call(m)==="[object Array]"}function Pc(m,y){try{return m[y]}catch(x){return cs(x)}}function Oc(m,y,x){var k=[],S=0;function N(I,te){function Z(){return te.length>Nu&&S>ss}if(S++,te.length>na||Z())return Ji;if(I===null||typeof I!="object")return I;if(ti(k,I))return"[Circular]";if(k.push(I),typeof I.toJSON=="function")try{S--;var ke=N(I.toJSON(),te);return k.pop(),ke}catch(ro){return cs(ro)}var le=Nc(I);if(le){S--;var et=N({name:I.name,message:I.message},te);return k.pop(),et}if(ri(I)){for(var Y=[],je=0,_n=I.length;je<_n;je++){if(Z()){Y.push(Ji);break}Y.push(N(I[je],te.concat("[]")))}return k.pop(),Y}var En={};try{for(var nr in I)if(Object.prototype.hasOwnProperty.call(I,nr)){if(xr(x,te.join("."))&&Qi(y,nr)){En[nr]="[Filtered]";continue}if(Z()){En[nr]=Ji;break}En[nr]=N(Pc(I,nr),te.concat(nr))}}catch(ro){}return k.pop(),En}return N(m,[])}var sn={},ls=["events.[].app","events.[].metaData","events.[].user","events.[].breadcrumbs","events.[].request","events.[].device"],Fc=["device","app","user"];sn.report=function(m,y){var x=Sr(m,null,null,{filterPaths:ls,filterKeys:y});if(x.length>1e6&&(delete m.events[0].metaData,m.events[0].metaData={notifier:`WARNING!
Serialized payload was `+x.length/1e6+`MB (limit = 1MB)
metaData was removed`},x=Sr(m,null,null,{filterPaths:ls,filterKeys:y}),x.length>1e6))throw new Error("payload exceeded 1MB limit");return x},sn.session=function(m,y){var x=Sr(m,null,null,{filterPaths:Fc,filterKeys:y});if(x.length>1e6)throw new Error("payload exceeded 1MB limit");return x};var ds={},_c=R.isoDate;ds=function(m){return m===void 0&&(m=window),{sendReport:function(y,x,k,S){S===void 0&&(S=function(){});var N=us(x,"notify","4",m),I=new m.XDomainRequest;I.onload=function(){S(null)},I.open("POST",N),setTimeout(function(){try{I.send(sn.report(k,x.filters))}catch(te){y.error(te),S(te)}},0)},sendSession:function(y,x,k,S){S===void 0&&(S=function(){});var N=us(x,"sessions","1",m),I=new m.XDomainRequest;I.onload=function(){S(null)},I.open("POST",N),setTimeout(function(){try{I.send(sn.session(k,x.filters))}catch(te){y.error(te),S(te)}},0)}}};var us=function(m,y,x,k){return Rc(m.endpoints[y],k.location.protocol)+"?apiKey="+encodeURIComponent(m.apiKey)+"&payloadVersion="+x+"&sentAt="+encodeURIComponent(_c())},Rc=ds._matchPageProtocol=function(m,y){return y==="http:"?m.replace(/^https:/,"http:"):m},Aa=R.isoDate,qr=function(m){return m===void 0&&(m=window),{sendReport:function(y,x,k,S){S===void 0&&(S=function(){});try{var N=x.endpoints.notify,I=new m.XMLHttpRequest;I.onreadystatechange=function(){I.readyState===m.XMLHttpRequest.DONE&&S(null)},I.open("POST",N),I.setRequestHeader("Content-Type","application/json"),I.setRequestHeader("Bugsnag-Api-Key",k.apiKey||x.apiKey),I.setRequestHeader("Bugsnag-Payload-Version","4"),I.setRequestHeader("Bugsnag-Sent-At",Aa()),I.send(sn.report(k,x.filters))}catch(te){y.error(te)}},sendSession:function(y,x,k,S){S===void 0&&(S=function(){});try{var N=x.endpoints.sessions,I=new m.XMLHttpRequest;I.onreadystatechange=function(){I.readyState===m.XMLHttpRequest.DONE&&S(null)},I.open("POST",N),I.setRequestHeader("Content-Type","application/json"),I.setRequestHeader("Bugsnag-Api-Key",x.apiKey),I.setRequestHeader("Bugsnag-Payload-Version","1"),I.setRequestHeader("Bugsnag-Sent-At",Aa()),I.send(sn.session(k,x.filters))}catch(te){y.error(te)}}}},wh={init:function(m,y){y===void 0&&(y=window),m.config.beforeSend.unshift(function(x){x.context||(x.context=y.location.pathname)})}};function aa(){return aa=Object.assign||function(m){for(var y=1;y<arguments.length;y++){var x=arguments[y];for(var k in x)Object.prototype.hasOwnProperty.call(x,k)&&(m[k]=x[k])}return m},aa.apply(this,arguments)}var ps=R.isoDate,Br={init:function(m,y){y===void 0&&(y=navigator);var x={locale:y.browserLanguage||y.systemLanguage||y.userLanguage||y.language,userAgent:y.userAgent};m.device=aa({},x,m.device),m.config.beforeSend.unshift(function(k){k.device=aa({},k.device,{time:ps()})})}};function ni(){return ni=Object.assign||function(m){for(var y=1;y<arguments.length;y++){var x=arguments[y];for(var k in x)Object.prototype.hasOwnProperty.call(x,k)&&(m[k]=x[k])}return m},ni.apply(this,arguments)}var qc={init:function(m,y){y===void 0&&(y=window),m.config.beforeSend.unshift(function(x){x.request&&x.request.url||(x.request=ni({},x.request,{url:y.location.href}))})}};function vn(){return vn=Object.assign||function(m){for(var y=1;y<arguments.length;y++){var x=arguments[y];for(var k in x)Object.prototype.hasOwnProperty.call(x,k)&&(m[k]=x[k])}return m},vn.apply(this,arguments)}var Pu=R.isArray,Ou=R.includes,Bc={init:function(m){return m.sessionDelegate(Uc)}},Uc={startSession:function(m){var y=m;y._session=new m.BugsnagSession;var x=an(y);return Pu(y.config.notifyReleaseStages)&&!Ou(y.config.notifyReleaseStages,x)?(y._logger.warn("Session not sent due to releaseStage/notifyReleaseStages configuration"),y):y.config.endpoints.sessions?(y._delivery.sendSession(y._logger,y.config,{notifier:y.notifier,device:y.device,app:vn({},{releaseStage:x},y.app),sessions:[{id:y._session.id,startedAt:y._session.startedAt,user:y.user}]}),y):(y._logger.warn("Session not sent due to missing endpoints.sessions configuration"),y)}};function Xi(){return Xi=Object.assign||function(m){for(var y=1;y<arguments.length;y++){var x=arguments[y];for(var k in x)Object.prototype.hasOwnProperty.call(x,k)&&(m[k]=x[k])}return m},Xi.apply(this,arguments)}var $c={init:function(m){m.config.collectUserIp||m.config.beforeSend.push(function(y){y.user&&typeof y.user.id=="undefined"&&delete y.user.id,y.user=Xi({id:"[NOT COLLECTED]"},y.user),y.request=Xi({clientIp:"[NOT COLLECTED]"},y.request)})},configSchema:{collectUserIp:{defaultValue:function(){return!0},message:"should be true|false",validate:function(m){return m===!0||m===!1}}}},ai={},zc=R.map,Kc=R.reduce,Ur=R.filter;ai.init=function(m){var y=/^dev(elopment)?$/.test(m.config.releaseStage),x=m.config.consoleBreadcrumbsEnabled===!1,k=(m.config.autoBreadcrumbs===!1||y)&&m.config.consoleBreadcrumbsEnabled!==!0;x||k||zc(Fu,function(S){var N=console[S];console[S]=function(){for(var I=arguments.length,te=new Array(I),Z=0;Z<I;Z++)te[Z]=arguments[Z];m.leaveBreadcrumb("Console output",Kc(te,function(ke,le,et){var Y="[Unknown value]";try{Y=String(le)}catch(je){}if(Y==="[object Object]")try{Y=JSON.stringify(le)}catch(je){}return ke["["+et+"]"]=Y,ke},{severity:S.indexOf("group")===0?"log":S}),"log"),N.apply(console,te)},console[S]._restore=function(){console[S]=N}})},ai.configSchema={consoleBreadcrumbsEnabled:{defaultValue:function(){},validate:function(m){return m===!0||m===!1||m===void 0},message:"should be true|false"}};var Fu=Ur(["log","debug","info","warn","error"],function(m){return typeof console!="undefined"&&typeof console[m]=="function"}),ia={},La=R.reduce;ia={init:function(m,y,x){y===void 0&&(y=document),x===void 0&&(x=window);var k="",S=!1,N=function(){return y.documentElement.outerHTML},I=x.location.href,te=function(ke){var le=ke.stacktrace[0];if(!le||!le.file||!le.lineNumber||le.file.replace(/#.*$/,"")!==I.replace(/#.*$/,""))return le;(!S||!k)&&(k=N());var et=["<!-- DOC START -->"].concat(k.split(`
`)),Y=gs(et,le.lineNumber-1),je=Y.script,_n=Y.start,En=La(je,function(nr,ro,jc){return Math.abs(_n+jc+1-le.lineNumber)>10||(nr[""+(_n+jc+1)]=ro),nr},{});le.code=En,ke.updateMetaData("script",{content:je.join(`
`)})};k=N();var Z=y.onreadystatechange;y.onreadystatechange=function(){y.readyState==="interactive"&&(k=N(),S=!0),typeof Z=="function"&&Z.apply(this,arguments)},m.config.beforeSend.unshift(te)}};var Zi=/^.*<script.*?>/,eo=/<\/script>.*$/,gs=ia.extractScriptContent=function(m,y){for(var x=y;x<m.length&&!eo.test(m[x]);)x++;for(var k=x;x>0&&!Zi.test(m[x]);)x--;var S=x,N=m.slice(S,k+1);return N[0]=N[0].replace(Zi,""),N[N.length-1]=N[N.length-1].replace(eo,""),{script:N,start:S}},Wc={init:function(m,y){if(y===void 0&&(y=window),"addEventListener"in y){var x=m.config.interactionBreadcrumbsEnabled===!1,k=m.config.autoBreadcrumbs===!1&&m.config.interactionBreadcrumbsEnabled!==!0;x||k||y.addEventListener("click",function(S){var N,I;try{N=_u(S.target),I=hs(S.target,y)}catch(te){N="[hidden]",I="[hidden]",m._logger.error("Cross domain error when tracking click event. See docs: https://tinyurl.com/y94fq5zm")}m.leaveBreadcrumb("UI click",{targetText:N,targetSelector:I},"user")},!0)}},configSchema:{interactionBreadcrumbsEnabled:{defaultValue:function(){},validate:function(m){return m===!0||m===!1||m===void 0},message:"should be true|false"}}},_u=function(m){var y=m.textContent||m.innerText||"";return!y&&(m.type==="submit"||m.type==="button")&&(y=m.value),y=y.replace(/^\s+|\s+$/g,""),Hc(y,140)};function hs(m,y){var x=[m.tagName];if(m.id&&x.push("#"+m.id),m.className&&m.className.length&&x.push("."+m.className.split(" ").join(".")),!y.document.querySelectorAll||!Array.prototype.indexOf)return x.join("");try{if(y.document.querySelectorAll(x.join("")).length===1)return x.join("")}catch(S){return x.join("")}if(m.parentNode.childNodes.length>1){var k=Array.prototype.indexOf.call(m.parentNode.childNodes,m)+1;x.push(":nth-child("+k+")")}return y.document.querySelectorAll(x.join("")).length===1?x.join(""):m.parentNode?hs(m.parentNode,y)+" > "+x.join(""):x.join("")}function Hc(m,y){var x="(...)";return m&&m.length<=y?m:m.slice(0,y-x.length)+x}var u={};u.init=function(m,y){if(y===void 0&&(y=window),"addEventListener"in y){var x=m.config.navigationBreadcrumbsEnabled===!1,k=m.config.autoBreadcrumbs===!1&&m.config.navigationBreadcrumbsEnabled!==!0;if(!(x||k)){var S=function(N){return function(){return m.leaveBreadcrumb(N,{},"navigation")}};y.addEventListener("pagehide",S("Page hidden"),!0),y.addEventListener("pageshow",S("Page shown"),!0),y.addEventListener("load",S("Page loaded"),!0),y.document.addEventListener("DOMContentLoaded",S("DOMContentLoaded"),!0),y.addEventListener("load",function(){return y.addEventListener("popstate",S("Navigated back"),!0)}),y.addEventListener("hashchange",function(N){var I=N.oldURL?{from:s(N.oldURL,y),to:s(N.newURL,y),state:d(y)}:{to:s(y.location.href,y)};m.leaveBreadcrumb("Hash changed",I,"navigation")},!0),y.history.replaceState&&o(m,y.history,"replaceState",y),y.history.pushState&&o(m,y.history,"pushState",y),m.leaveBreadcrumb("Bugsnag loaded",{},"navigation")}}},u.configSchema={navigationBreadcrumbsEnabled:{defaultValue:function(){},validate:function(m){return m===!0||m===!1||m===void 0},message:"should be true|false"}};var s=function(m,y){var x=y.document.createElement("A");return x.href=m,""+x.pathname+x.search+x.hash},i=function(m,y,x,k){var S=s(m.location.href,m);return{title:x,state:y,prevState:d(m),to:k||S,from:S}},o=function(m,y,x,k){var S=y[x];y[x]=function(N,I,te){m.leaveBreadcrumb("History "+x,i(k,N,I,te),"navigation"),typeof m.refresh=="function"&&m.refresh(),m.config.autoCaptureSessions&&m.startSession(),S.apply(y,[N,I].concat(te!==void 0?te:[]))},y[x]._restore=function(){y[x]=S}},d=function(m){try{return m.history.state}catch(y){}},h={},b="request",v="BS~~S",E="BS~~U",L="BS~~M",K=R.includes,B=[],_,H,X=function(){return[_.config.endpoints.notify,_.config.endpoints.sessions]};h.init=function(m,y){y===void 0&&(y=window);var x=m.config.networkBreadcrumbsEnabled===!1,k=m.config.autoBreadcrumbs===!1&&m.config.networkBreadcrumbsEnabled!==!0;x||k||(_=m,H=y,re(),Pe())},h.configSchema={networkBreadcrumbsEnabled:{defaultValue:function(){},validate:function(m){return m===!0||m===!1||m===void 0},message:"should be true|false"}};var re=function(){if("addEventListener"in H.XMLHttpRequest.prototype){var m=H.XMLHttpRequest.prototype.open;H.XMLHttpRequest.prototype.open=function(x,k){this[E]=k,this[L]=x,this[v]&&(this.removeEventListener("load",ne),this.removeEventListener("error",ue)),this.addEventListener("load",ne),this.addEventListener("error",ue),this[v]=!0,m.apply(this,arguments)}}};function ne(){if(!K(X(),this[E])){var m={status:this.status,request:this[L]+" "+this[E]};this.status>=400?_.leaveBreadcrumb("XMLHttpRequest failed",m,b):_.leaveBreadcrumb("XMLHttpRequest succeeded",m,b)}}function ue(){K(X(),this[E])||_.leaveBreadcrumb("XMLHttpRequest error",{request:this[L]+" "+this[E]},b)}var Pe=function(){if("fetch"in H){var m=H.fetch;H.fetch=function(){for(var x=arguments.length,k=new Array(x),S=0;S<x;S++)k[S]=arguments[S];var N=k[0],I=k[1],te="GET";return I&&I.method&&(te=I.method),new Promise(function(Z,ke){m.apply(void 0,k).then(function(le){lt(le,te,N),Z(le)}).catch(function(le){Oe(te,N),ke(le)})})}}},lt=function(m,y,x){var k={status:m.status,request:y+" "+x};m.status>=400?_.leaveBreadcrumb("fetch() failed",k,b):_.leaveBreadcrumb("fetch() succeeded",k,b)},Oe=function(m,y){_.leaveBreadcrumb("fetch() error",{request:m+" "+y},b)},dt=se.intRange,Dr={init:function(m){var y=0;m.config.beforeSend.push(function(x){if(y>=m.config.maxEvents)return x.ignore();y++}),m.refresh=function(){y=0}},configSchema:{maxEvents:{defaultValue:function(){return 10},message:"should be a positive integer \u2264100",validate:function(m){return dt(1,100)(m)}}}},wr={};function kn(){return kn=Object.assign||function(m){for(var y=1;y<arguments.length;y++){var x=arguments[y];for(var k in x)Object.prototype.hasOwnProperty.call(x,k)&&(m[k]=x[k])}return m},kn.apply(this,arguments)}var Fe=R.map;wr={init:function(m){m.config.beforeSend.push(function(y){y.stacktrace=Fe(y.stacktrace,function(x){return kn({},x,{file:Fn(x.file)})})})}};var Fn=wr._strip=function(m){return typeof m=="string"?m.replace(/\?.*$/,"").replace(/#.*$/,""):m},cn={init:function(m,y){y===void 0&&(y=window);function x(S,N,I,te,Z){if(I===0&&/Script error\.?/.test(S))m._logger.warn("Ignoring cross-domain or eval script error. See docs: https://tinyurl.com/y94fq5zm");else{var ke={severity:"error",unhandled:!0,severityReason:{type:"unhandledException"}},le;if(Z)Z.name&&Z.message?le=new m.BugsnagReport(Z.name,Z.message,ms(m.BugsnagReport.getStacktrace(Z),N,I,te),ke,Z):(le=new m.BugsnagReport("window.onerror",String(Z),ms(m.BugsnagReport.getStacktrace(Z,1),N,I,te),ke,Z),le.updateMetaData("window onerror",{error:Z}));else if(typeof S=="object"&&S!==null&&(!N||typeof N!="string")&&!I&&!te&&!Z){var et=S.type?"Event: "+S.type:"window.onerror",Y=S.message||S.detail||"";le=new m.BugsnagReport(et,Y,m.BugsnagReport.getStacktrace(new Error,1).slice(1),ke,S),le.updateMetaData("window onerror",{event:S,extraParameters:N})}else le=new m.BugsnagReport("window.onerror",String(S),ms(m.BugsnagReport.getStacktrace(Z,1),N,I,te),ke,S),le.updateMetaData("window onerror",{event:S});m.notify(le)}typeof k=="function"&&k.apply(this,arguments)}var k=y.onerror;y.onerror=x}},ms=function(m,y,x,k){var S=m[0];return S&&(!S.fileName&&typeof y=="string"&&S.setFileName(y),!S.lineNumber&&to(x)&&S.setLineNumber(x),S.columnNumber||(to(k)?S.setColumnNumber(k):window.event&&to(window.event.errorCharacter)&&S.setColumnNumber(window.event.errorCharacter))),m},to=function(m){return typeof m=="number"&&String.call(m)!=="NaN"},fs={},Rk=R.reduce,qk;fs.init=function(m,y){y===void 0&&(y=window);var x=function(k){var S=k.reason,N=!1;try{k.detail&&k.detail.reason&&(S=k.detail.reason,N=!0)}catch(ke){}var I={severity:"error",unhandled:!0,severityReason:{type:"unhandledPromiseRejection"}},te;if(S&&wn(S))te=new m.BugsnagReport(S.name,S.message,Du.parse(S),I,S),N&&(te.stacktrace=Rk(te.stacktrace,Uk(S),[]));else{var Z='Rejection reason was not an Error. See "Promise" tab for more detail.';te=new m.BugsnagReport(S&&S.name?S.name:"UnhandledRejection",S&&S.message?S.message:Z,[],I,S),te.updateMetaData("promise","rejection reason",Bk(S))}m.notify(te)};"addEventListener"in y?y.addEventListener("unhandledrejection",x):y.onunhandledrejection=function(k,S){x({detail:{reason:k,promise:S}})},qk=x};var Bk=function(m){if(m==null)return"undefined (or null)";if(Tc(m)){var y;return y={},y[Object.prototype.toString.call(m)]={name:m.name,message:m.message,code:m.code,stack:m.stack},y}else return m},Uk=function(m){return function(y,x){return x.file===m.toString()?y:(x.method&&(x.method=x.method.replace(/^\s+/,"")),y.concat(x))}},ys={};function Ru(){return Ru=Object.assign||function(m){for(var y=1;y<arguments.length;y++){var x=arguments[y];for(var k in x)Object.prototype.hasOwnProperty.call(x,k)&&(m[k]=x[k])}return m},Ru.apply(this,arguments)}var $k="Bugsnag JavaScript",zk="6.1.0",Kk="https://github.com/bugsnag/bugsnag-js",Wk=R.map,Hk=Ru({},ce.schema,Ze);return ys=function(m){typeof m=="string"&&(m={apiKey:m});var y=[];m.sessionTrackingEnabled&&(y.push("deprecated option sessionTrackingEnabled is now called autoCaptureSessions"),m.autoCaptureSessions=m.sessionTrackingEnabled),(m.endpoint||m.sessionEndpoint)&&!m.endpoints&&(y.push("deprecated options endpoint/sessionEndpoint are now configured in the endpoints object"),m.endpoints={notify:m.endpoint,sessions:m.sessionEndpoint}),m.endpoints&&m.endpoints.notify&&!m.endpoints.sessions&&y.push("notify endpoint is set but sessions endpoint is not. No sessions will be sent.");var x=new On({name:$k,version:zk,url:Kk});return x.setOptions(m),x.delivery(window.XDomainRequest?ds():qr()),x.configure(Hk),Wk(y,function(k){return x._logger.warn(k)}),x.use(Br),x.use(wh),x.use(qc),x.use(ia),x.use(Dr),x.use(Bc),x.use($c),x.use(wr),x.config.autoNotify!==!1&&(x.use(cn),x.use(fs)),x.use(u),x.use(Wc),x.use(h),x.use(ai),x.config.autoCaptureSessions?x.startSession():x},ys.Bugsnag={Client:On,Report:Hi,Session:is,Breadcrumb:jt},ys.default=ys,ys})});var Bv=Ga((N_,qv)=>{qv.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,menuitem:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}});var $v=Ga((P_,Uv)=>{var LD=/([\w-]+)|=|(['"])([.\s\S]*?)\2/g,GD=Bv();Uv.exports=function(e){var t=0,r,n=!0,a={type:"tag",name:"",voidElement:!1,attrs:{},children:[]};return e.replace(LD,function(c){if(c==="="){n=!0,t++;return}n?t===0?((GD[c]||e.charAt(e.length-2)==="/")&&(a.voidElement=!0),a.name=c):(a.attrs[r]=c.replace(/^['"]|['"]$/g,""),r=void 0):(r&&(a.attrs[r]=r),r=c),t++,n=!1}),a}});var Kv=Ga((O_,zv)=>{var VD=/(?:<!--[\S\s]*?-->|<(?:"[^"]*"['"]*|'[^']*'['"]*|[^'">])+>)/g,ID=$v(),ND=Object.create?Object.create(null):{};function Qg(e,t,r,n,a){var c=t.indexOf("<",n),l=t.slice(n,c===-1?void 0:c);/^\s*$/.test(l)&&(l=" "),(!a&&c>-1&&r+e.length>=0||l!==" ")&&e.push({type:"text",content:l})}zv.exports=function(t,r){r||(r={}),r.components||(r.components=ND);var n=[],a,c=-1,l=[],p={},g=!1;return t.replace(VD,function(f,w){if(g){if(f!=="</"+a.name+">")return;g=!1}var M=f.charAt(1)!=="/",G=f.indexOf("<!--")===0,R=w+f.length,se=t.charAt(R),ce;M&&!G&&(c++,a=ID(f),a.type==="tag"&&r.components[a.name]&&(a.type="component",g=!0),!a.voidElement&&!g&&se&&se!=="<"&&Qg(a.children,t,c,R,r.ignoreWhitespace),p[a.tagName]=a,c===0&&n.push(a),ce=l[c-1],ce&&ce.children.push(a),l[c]=a),(G||!M||a.voidElement)&&(G||c--,!g&&se!=="<"&&se&&(ce=c===-1?n:l[c].children,Qg(ce,t,c,R,r.ignoreWhitespace)))}),!n.length&&t.length&&Qg(n,t,0,0,r.ignoreWhitespace),n}});var jv=Ga((F_,Hv)=>{function PD(e){var t=[];for(var r in e)t.push(r+'="'+e[r]+'"');return t.length?" "+t.join(" "):""}function Wv(e,t){switch(t.type){case"text":return e+t.content;case"tag":return e+="<"+t.name+(t.attrs?PD(t.attrs):"")+(t.voidElement?"/>":">"),t.voidElement?e:e+t.children.reduce(Wv,"")+"</"+t.name+">"}}Hv.exports=function(e){return e.reduce(function(t,r){return t+Wv("",r)},"")}});var Jv=Ga((__,Yv)=>{Yv.exports={parse:Kv(),stringify:jv()}});var Th;function nE(e){Th=e(Ch)}nE(function(e){function t(){window.consoleOverride=!0;var n=window.console.log;window.console.log=function(){for(var a=[],c=0;c<arguments.length;c++)a.push(arguments[c]);n.apply(window.console,[].concat([a.join(" ")],a))}}var r={ready:function(){try{window.TestBridge=r,parent.USING_SELENIUM&&t()}catch(n){}}};return r});var{ready:Sh}=Th;var Y1=he(Dh());var Mh=function(){{var e={IS_IE8:navigator.userAgent.match(/MSIE 8.0/i)!==null,IS_IE9:navigator.userAgent.match(/MSIE 9.0/i)!==null,IS_IE:navigator.userAgent.match(/MSIE/i)!==null||navigator.userAgent.match(/Trident/i)!==null&&navigator.userAgent.match(/rv:11/i)!==null,IS_EDGE:navigator.userAgent.match(/Edge/i)!==null,IS_IPAD:navigator.userAgent.match(/iPad/i)!==null,IS_MOBILE:navigator.userAgent.match(/Mobile|Android/i)!==null,IS_ANDROID:navigator.userAgent.match(/Android/i)!==null,IS_IOS:navigator.userAgent.match(/(iPad|iPhone|iPod)/i)!==null||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,IS_CHROME:navigator.userAgent.match(/Chrome/i)!==null,IS_FIREFOX:navigator.userAgent.match(/Firefox/i)!==null,IS_SAFARI:navigator.userAgent.match(/^((?!chrome|android).)*safari/i)!==null,IS_APPLE:navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i)!==null,IS_WINDOWS:navigator.platform.match(/(Win32)/i)!==null,IS_TOUCH:navigator.userAgent.match(/Touch/i)!==null,IS_KINDLE:navigator.userAgent.match(/Kindle/i)!==null||navigator.userAgent.match(/Silk/i)!==null,IS_BRAILLENOTE:navigator.userAgent.match(/KeyWeb/i)!==null,IS_IN_IFRAME:window.parent!==window};return e.IS_TABLET=e.IS_IPAD||e.IS_ANDROID||e.IS_KINDLE,e.IS_TOUCH_DEVICE=e.SHOULD_NOT_AUTOFOCUS=e.IS_IOS||e.IS_ANDROID||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i),e.IOS_VERSION=function(){var t=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return t?[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3]||0,10)]:null}(),e.MAC_VERSION=function(){var t=navigator.appVersion.match(/OS X (\d+)_(\d+)_?(\d+)?/);return t?[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3]||0,10)]:null}(),e.CHROME_VERSION=function(){var t=navigator.appVersion.match(/Chrom(e|ium)\/([0-9]+)\.([0-9]+)\.?([0-9]+)?/);return t?[parseInt(t[2],10),parseInt(t[3],10),parseInt(t[4]||0,10)]:null}(),e.SUPPORTS_INPUTMODE=function(){var t="inputMode"in document.createElement("textarea");return!(!t||e.IS_IOS&&e.IOS_VERSION&&e.IOS_VERSION[0]<15)}(),e.SUPPORTS_CANVAS=function(){var t=document.createElement("canvas"),r=!!(t.getContext&&t.getContext("2d"));return r}(),e.PREFERS_REDUCED_MOTION=function(){return window.matchMedia("(prefers-reduced-motion: reduce)")===!0||window.matchMedia("(prefers-reduced-motion: reduce)").matches===!0||document.location.search.indexOf("prefersReducedMotion")>=0}(),e}}(),Ah=Mh,{SHOULD_NOT_AUTOFOCUS:Cn,IS_TOUCH_DEVICE:M1,IS_SAFARI:A1,IS_APPLE:Lh,IS_IOS:Qc,IS_ANDROID:Xc,IS_IPAD:L1,IS_IN_IFRAME:G1,IOS_VERSION:V1,MAC_VERSION:I1,CHROME_VERSION:N1,IS_IE:P1,IS_EDGE:O1,IS_CHROME:F1,IS_FIREFOX:Gh,IS_MOBILE:_1,IS_WINDOWS:Vh,IS_TOUCH:Ih,SUPPORTS_INPUTMODE:Zc,SUPPORTS_CANVAS:R1,PREFERS_REDUCED_MOTION:q1,translateRule:B1}=Mh;dr();var tm={segment:!0,line:!0,ray:!0,circle:!0,arc:!0,vector:!0,glider:!0,parallel:!0,perpendicular:!0,center:!0,radius:!0,area:!0,perimeter:!0,start:!0,end:!0,angles:!0,angle:!0,directedangles:!0,directedangle:!0,coterminal:!0,supplement:!0,vertices:!0,segments:!0,intersection:!0,translate:!0,dilate:!0,rotate:!0,reflect:!0,construction:!0,points:!0,lines:!0,circles:!0,arcs:!0,polygons:!0,rays:!0};var rm={segment:!0,triangle:!0,vector:!0,start:!0,end:!0,sphere:!0};var nm=["exp|exponent ln|natural-log log","total length count mean median quantile quartile nCr nPr stats","stdev|standard-deviation stddev|standard-deviation","stdDev|standard-deviation stdevp|standard-deviation-population","stddevp|standard-deviation-population stdDevP|standard-deviation-population mad var|variance","varp|variance-population variance cov|co-variance covp|co-variance-population corr|correlation spearman","lcm mcm gcd mcd gcf mod ceil|ceiling floor round abs|absolute-value min max sign|signum signum sgn","sin|sine cos|cosine tan|tangent csc|co-secant sec|secant cot|co-tangent","sinh|hyperbolic-sine cosh|hyperbolic-cosine tanh|hyperbolic-tangent csch|hyperbolic-co-secant","sech|hyperbolic-secant coth|hyperbolic-co-tangent","arcsin|arc-sine arccos|arc-cosine arctan|arc-tangent arccsc|arc-co-secant arcsec|arc-secant","arccot|arc-co-tangent","arcsinh|hyperbolic-arc-sine arccosh|hyperbolic-arc-cosine arctanh|hyperbolic-arc-co-tangent","arccsch|hyperbolic-arc-co-secant arcsech|hyperbolic-arc-secant","arccoth|hyperbolic-arc-co-tangent","arsinh|hyperbolic-ar-sine arcosh|hyperbolic-ar-cosine artanh|hyperbolic-ar-co-tangent","arcsch|hyperbolic-ar-co-secant arsech|hyperbolic-ar-secant","arcoth|hyperbolic-ar-co-tangent","polygon","distance midpoint","sort shuffle join unique","erf|error-function","TTest|t-test ttest|t-test TScore|t-score tscore|t-score","iTTest|independent-t-test ittest|independent-t-test IndependentTTest","TScore|t-score Tscore|t-score tscore|t-score","normaldist|normal-distribution tdist|t-distribution poissondist|poisson-distribution","binomialdist|binomial-distribution","uniformdist|uniform-distribution","pdf cdf random inverseCdf inversecdf","histogram dotplot boxplot","pdf cdf","rgb hsv","for","width height","with"].join(" "),AE=["det|determinant","inv|inverse","transpose","rref|reduced-row-echelon-form","trace"].join(" ");nm+=" "+AE;var LE="alpha beta sqrt theta phi pi tau nthroot cbrt sum prod integral percent infinity infty cross";function cl(e){e||(e={});let t=[LE];return e.disallowAns||t.push("ans"),e.disallowFrac||t.push("frac"),e.additionalCommands&&(t=t.concat(e.additionalCommands)),t.join(" ")}function ll(e){e||(e={});let t=nm;return e.additionalOperators&&e.additionalOperators.length&&(t=`${t} ${e.additionalOperators.join(" ")}`),e.includeGeometryFunctions&&(t+=" "+Object.keys(tm).join(" ")),e.include3DFunctions&&(t+=" "+Object.keys(rm).join(" ")),t}var Hu=function(e){if(!e)return;let t=e.getBoundingClientRect();return{top:t.top+window.scrollY,left:t.left+window.scrollX}},da=function(e,t){Object.assign(e.style,t)};function am(e){return!!(e&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length))}function im(e){if(document.readyState!=="loading")e();else{var t=function(){document.removeEventListener("DOMContentLoaded",t),e()};document.addEventListener("DOMContentLoaded",t)}}var om=window.MathQuill.noConflict().getInterface(3);om.config({leftRightIntoCmdGoes:"up",sumStartsWithNEquals:!0,supSubsRequireOperand:!0,charsThatBreakOutOfSupSub:"+-=<>*",autoCommands:cl(),autoSubscriptNumerals:!0,restrictMismatchedBrackets:!0,typingPercentWritesPercentOf:!0,substituteTextarea:function(){if(!Zc&&(Qc||Xc)){let t=document.createElement("span");return t.classList.add("dcg-mathquill-input-span"),t.setAttribute("tabindex","0"),t.setAttribute("role","textbox"),da(t,{display:"inline-block",height:"1px",width:"1px"}),t}if(Vh&&Ih){let t=document.createElement("textarea");return t.setAttribute("readonly",""),t.setAttribute("inputmode","none"),t.setAttribute("autocorrect","off"),t.setAttribute("autocapitalize","none"),t.setAttribute("spellcheck","false"),t.setAttribute("autocomplete","off"),ee(t).on("keydown",function(){this.readOnly=!1,this.select()}).on("blur",function(){this.readOnly=!0}),t}let e=document.createElement("textarea");return e.setAttribute("inputmode","none"),e.setAttribute("autocorrect","off"),e.setAttribute("autocapitalize","none"),e.setAttribute("spellcheck","false"),e.setAttribute("autocomplete","off"),e},autoOperatorNames:ll(),quietEmptyDelimiters:"( [",resetCursorOnBlur:!0,enableDigitGrouping:!0,disableAutoSubstitutionInSubscripts:!0,interpretTildeAsSim:!0});var Na=om;function ln(e){var t=e;if(t&&typeof t.toJSON=="function"&&(t=t.toJSON()),!t||typeof t!="object")return t;if(Array.isArray(t))return t.map(ln);var r={};for(var n in t)t.hasOwnProperty(n)&&(r[n]=ln(t[n]));return r}dl();var Ot={},$r=co();if(typeof Desmos!="undefined"&&Desmos.config)for(ul in Desmos.config)Desmos.config.hasOwnProperty(ul)&&($r[ul]=Desmos.config[ul]);var ul,Tn=function(e){return $r.hasOwnProperty(e)},Ce=function(e){Ot[e]=Tn(e)},st=function(e){Ot[e]=!Tn("no"+e)};Ce("testing");Ce("maintenance");Ce("disableScrollFix");Ce("nativeOnscreenKeypad");Ce("hidden");Ce("disableMouseInteractions");Ce("advancedStyling");Ce("outofdom");Ce("beta3d");$r.lang&&(Ot.language=$r.lang);$r.fontSize&&(Ot.fontSize=$r.fontSize);$r.backgroundColor&&(Ot.backgroundColor="#"+$r.backgroundColor);$r.textColor&&(Ot.textColor="#"+$r.textColor);Ot.no_navigation_warning=Tn("noconcat")||Tn("testing");Ot.previewMessage="You're previewing some new accessibility features.";Ot.previewFeedbackUrl="mailto:feedback@desmos.com";var VE=location&&location.hostname==="preview.desmos.com";Ot.previewMode=Tn("previewMode")||VE;Ce("lockViewport");Ce("authorFeatures");Ce("degreeMode");Ce("clearIntoDegreeMode");Ce("plaidMode");Ce("wireframe");Ce("editOnWeb");Ce("crossOriginSaveTest");Ce("showResetButtonOnGraphpaper");Ce("transparentBackground");Ce("forceLogModeRegressions");st("links");st("trace");st("zoomFit");Ce("expressionsCollapsed");Ce("invertedColors");Ce("projectorMode");st("images");st("folders");st("settingsMenu");st("expressionsTopbar");st("zoomButtons");st("keypad");st("graphpaper");st("expressions");st("branding");st("pointsOfInterest");st("plotSingleVariableImplicitEquations");st("plotImplicits");st("plotInequalities");st("notes");st("sliders");Ce("pauseWhenOffscreen");Ce("worksheetSVG");st("brailleControls");Ce("audioTraceKeypad");Ce("audioTraceSimult");st("audio");Ce("sciKeypad");Ce("4fnKeypad");Ce("ans");Tn("braille")&&(Ot.braille=!0);st("qwertyKeyboard");Ce("restrictedFunctions");Ce("forceEnableGeometryFunctions");st("functionDefinition");Ce("singleExpression");Ce("restrictedEditing");Ce("replaceCommaWith10Exp");Ce("replaceRoundWithReciprocal");Tn("typingAsteriskWritesTimesSymbol")&&(Ot.typingAsteriskWritesTimesSymbol=!0);st("substitutions");st("logScales");st("labels");st("distributions");Ot["4fnKeypad"]?Ce("decimalToFraction"):st("decimalToFraction");Ce("translucentSurfaces");Ce("3d");Ce("disableWorkerOnZoom");Ce("disableLighting");Tn("exponentButtonForSquareRoot")?Ot.additionalFunctions=["exponent"]:$r.additionalFunctions&&typeof $r.additionalFunctions=="string"&&(Ot.additionalFunctions=$r.additionalFunctions.split(","));Tn("actions")?Ot.actions=!0:Tn("noactions")?Ot.actions=!1:Tn("clickableObjects")&&(Ot.actions=!0);function sm(e){return Ot[e]}function cm(){return ln(Ot)}var dm=function(e,t,r){if(e===void 0||t===void 0)return!1;let n,a=t.getBoundingClientRect().height,c=e.getBoundingClientRect().height,l=Hu(e),p=Hu(t);if(!l||!p)return!1;let g=t.scrollTop,f=l.top+g-p.top,w=f-r,M=c+f+r-a;return w>=M?n=Math.min(Math.max(g,M),w):n=.5*(w+M),n!==g?(t.scrollTop=n,t.scrollTop!=g):!1};var Gr=he(me());var mf=he(me()),mt=class extends mf.Class{constructor(r,n){super(r,n)}init(){this.controller=this.props.controller(),this.model=this.controller.model,this.dispatch=this.controller.dispatch,this.s=this.controller.s}};var vl=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},El=Array.prototype,pp=Object.prototype,ff=typeof Symbol!="undefined"?Symbol.prototype:null,FL=El.push,KC=El.slice,kl=pp.toString,WC=pp.hasOwnProperty,HC=Array.isArray,yf=Object.keys,bf=Object.create,jC=vl.isNaN,_L=vl.isFinite,lp=function(){};function Ft(e){if(e instanceof Ft)return e;if(!(this instanceof Ft))return new Ft(e);this._wrapped=e}var RL=Ft.VERSION="1.10.2";function Cl(e,t,r){if(t===void 0)return e;switch(r==null?3:r){case 1:return function(n){return e.call(t,n)};case 3:return function(n,a,c){return e.call(t,n,a,c)};case 4:return function(n,a,c,l){return e.call(t,n,a,c,l)}}return function(){return e.apply(t,arguments)}}function vf(e,t,r){return e==null?wT:ua(e)?Cl(e,t,r):xo(e)&&!Ms(e)?vT(e):If(e)}Ft.iteratee=kf;function kf(e,t){return vf(e,t,1/0)}function ii(e,t,r){return Ft.iteratee!==kf?Ft.iteratee(e,t):vf(e,t,r)}function pn(e,t){return t=t==null?e.length-1:+t,function(){for(var r=Math.max(arguments.length-t,0),n=Array(r),a=0;a<r;a++)n[a]=arguments[a+t];switch(t){case 0:return e.call(this,n);case 1:return e.call(this,arguments[0],n);case 2:return e.call(this,arguments[0],arguments[1],n)}var c=Array(t+1);for(a=0;a<t;a++)c[a]=arguments[a];return c[t]=n,e.apply(this,c)}}function YC(e){if(!xo(e))return{};if(bf)return bf(e);lp.prototype=e;var t=new lp;return lp.prototype=null,t}function Ef(e){return function(t){return t==null?void 0:t[e]}}function mo(e,t){return e!=null&&WC.call(e,t)}function Cf(e,t){for(var r=t.length,n=0;n<r;n++){if(e==null)return;e=e[t[n]]}return r?e:void 0}var JC=Math.pow(2,53)-1,oi=Ef("length");function fo(e){var t=oi(e);return typeof t=="number"&&t>=0&&t<=JC}function Ss(e,t,r){t=Cl(t,r);var n,a;if(fo(e))for(n=0,a=e.length;n<a;n++)t(e[n],n,e);else{var c=$n(e);for(n=0,a=c.length;n<a;n++)t(e[c[n]],c[n],e)}return e}function gp(e,t,r){t=ii(t,r);for(var n=!fo(e)&&$n(e),a=(n||e).length,c=Array(a),l=0;l<a;l++){var p=n?n[l]:l;c[l]=t(e[p],p,e)}return c}function Tf(e){var t=function(r,n,a,c){var l=!fo(r)&&$n(r),p=(l||r).length,g=e>0?0:p-1;for(c||(a=r[l?l[g]:g],g+=e);g>=0&&g<p;g+=e){var f=l?l[g]:g;a=n(a,r[f],f,r)}return a};return function(r,n,a,c){var l=arguments.length>=3;return t(r,Cl(n,c,4),a,l)}}var qL=Tf(1),BL=Tf(-1);function Ds(e,t,r){var n=[];return t=ii(t,r),Ss(e,function(a,c,l){t(a,c,l)&&n.push(a)}),n}function Oa(e,t,r,n){return fo(e)||(e=Dl(e)),(typeof r!="number"||n)&&(r=0),aT(e,t,r)>=0}var UL=pn(function(e,t,r){var n,a;return ua(t)?a=t:Ms(t)&&(n=t.slice(0,-1),t=t[t.length-1]),gp(e,function(c){var l=a;if(!l){if(n&&n.length&&(c=Cf(c,n)),c==null)return;l=c[t]}return l==null?l:l.apply(c,r)})});function QC(e,t){return gp(e,If(t))}function XC(e,t,r){var n=-1/0,a=-1/0,c,l;if(t==null||typeof t=="number"&&typeof e[0]!="object"&&e!=null){e=fo(e)?e:Dl(e);for(var p=0,g=e.length;p<g;p++)c=e[p],c!=null&&c>n&&(n=c)}else t=ii(t,r),Ss(e,function(f,w,M){l=t(f,w,M),(l>a||l===-1/0&&n===-1/0)&&(n=f,a=l)});return n}function Tl(e,t){return function(r,n,a){var c=t?[[],[]]:{};return n=ii(n,a),Ss(r,function(l,p){var g=n(l,p,r);e(c,l,g)}),c}}var $L=Tl(function(e,t,r){mo(e,r)?e[r].push(t):e[r]=[t]}),zL=Tl(function(e,t,r){e[r]=t}),KL=Tl(function(e,t,r){mo(e,r)?e[r]++:e[r]=1});var WL=Tl(function(e,t,r){e[r?0:1].push(t)},!0);function yo(e,t,r,n){n=n||[];for(var a=n.length,c=0,l=oi(e);c<l;c++){var p=e[c];if(fo(p)&&(Ms(p)||up(p)))if(t)for(var g=0,f=p.length;g<f;)n[a++]=p[g++];else yo(p,t,r,n),a=n.length;else r||(n[a++]=p)}return n}var Sf=pn(function(e,t){return ZC(e,t)});function hp(e,t,r,n){xT(t)||(n=r,r=t,t=!1),r!=null&&(r=ii(r,n));for(var a=[],c=[],l=0,p=oi(e);l<p;l++){var g=e[l],f=r?r(g,l,e):g;t&&!r?((!l||c!==f)&&a.push(g),c=f):r?Oa(c,f)||(c.push(f),a.push(g)):Oa(a,g)||a.push(g)}return a}var HL=pn(function(e){return hp(yo(e,!0,!0))});var ZC=pn(function(e,t){return t=yo(t,!0,!0),Ds(e,function(r){return!Oa(t,r)})});function eT(e){for(var t=e&&XC(e,oi).length||0,r=Array(t),n=0;n<t;n++)r[n]=QC(e,n);return r}var jL=pn(eT);function Df(e){return function(t,r,n){r=ii(r,n);for(var a=oi(t),c=e>0?0:a-1;c>=0&&c<a;c+=e)if(r(t[c],c,t))return c;return-1}}var tT=Df(1),rT=Df(-1);function nT(e,t,r,n){r=ii(r,n,1);for(var a=r(t),c=0,l=oi(e);c<l;){var p=Math.floor((c+l)/2);r(e[p])<a?c=p+1:l=p}return c}function Mf(e,t,r){return function(n,a,c){var l=0,p=oi(n);if(typeof c=="number")e>0?l=c>=0?c:Math.max(c+p,l):p=c>=0?Math.min(c+1,p):c+p+1;else if(r&&c&&p)return c=r(n,a),n[c]===a?c:-1;if(a!==a)return c=t(KC.call(n,l,p),bT),c>=0?c+l:-1;for(c=e>0?l:p-1;c>=0&&c<p;c+=e)if(n[c]===a)return c;return-1}}var aT=Mf(1,tT,nT),YL=Mf(-1,rT);function Af(e,t,r,n,a){if(!(n instanceof t))return e.apply(r,a);var c=YC(e.prototype),l=e.apply(c,a);return xo(l)?l:c}var iT=pn(function(e,t,r){if(!ua(e))throw new TypeError("Bind must be called on a function");var n=pn(function(a){return Af(e,n,t,this,r.concat(a))});return n}),Sl=pn(function(e,t){var r=Sl.placeholder,n=function(){for(var a=0,c=t.length,l=Array(c),p=0;p<c;p++)l[p]=t[p]===r?arguments[a++]:t[p];for(;a<arguments.length;)l.push(arguments[a++]);return Af(e,n,this,this,l)};return n});Sl.placeholder=Ft;var JL=pn(function(e,t){t=yo(t,!1,!1);var r=t.length;if(r<1)throw new Error("bindAll must be passed function names");for(;r--;){var n=t[r];e[n]=iT(e[n],e)}});var oT=pn(function(e,t,r){return setTimeout(function(){return e.apply(null,r)},t)}),QL=Sl(oT,Ft,1);function bo(e,t,r){var n,a,c,l,p=0;r||(r={});var g=function(){p=r.leading===!1?0:wf(),n=null,l=e.apply(a,c),n||(a=c=null)},f=function(){var w=wf();!p&&r.leading===!1&&(p=w);var M=t-(w-p);return a=this,c=arguments,M<=0||M>t?(n&&(clearTimeout(n),n=null),p=w,l=e.apply(a,c),n||(a=c=null)):!n&&r.trailing!==!1&&(n=setTimeout(g,M)),l};return f.cancel=function(){clearTimeout(n),p=0,n=a=c=null},f}function sT(e){return function(){return!e.apply(this,arguments)}}function cT(e,t){var r;return function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=null),r}}var XL=Sl(cT,2),Lf=!{toString:null}.propertyIsEnumerable("toString"),xf=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function Gf(e,t){var r=xf.length,n=e.constructor,a=ua(n)&&n.prototype||pp,c="constructor";for(mo(e,c)&&!Oa(t,c)&&t.push(c);r--;)c=xf[r],c in e&&e[c]!==a[c]&&!Oa(t,c)&&t.push(c)}function $n(e){if(!xo(e))return[];if(yf)return yf(e);var t=[];for(var r in e)mo(e,r)&&t.push(r);return Lf&&Gf(e,t),t}function mp(e){if(!xo(e))return[];var t=[];for(var r in e)t.push(r);return Lf&&Gf(e,t),t}function Dl(e){for(var t=$n(e),r=t.length,n=Array(r),a=0;a<r;a++)n[a]=e[t[a]];return n}function lT(e){for(var t={},r=$n(e),n=0,a=r.length;n<a;n++)t[e[r[n]]]=r[n];return t}function fp(e,t){return function(r){var n=arguments.length;if(t&&(r=Object(r)),n<2||r==null)return r;for(var a=1;a<n;a++)for(var c=arguments[a],l=e(c),p=l.length,g=0;g<p;g++){var f=l[g];(!t||r[f]===void 0)&&(r[f]=c[f])}return r}}var dT=fp(mp),uT=fp($n);function pT(e,t,r){return t in r}var gT=pn(function(e,t){var r={},n=t[0];if(e==null)return r;ua(n)?(t.length>1&&(n=Cl(n,t[1])),t=mp(e)):(n=pT,t=yo(t,!1,!1),e=Object(e));for(var a=0,c=t.length;a<c;a++){var l=t[a],p=e[l];n(p,l,e)&&(r[l]=p)}return r}),ZL=pn(function(e,t){var r=t[0],n;return ua(r)?(r=sT(r),t.length>1&&(n=t[1])):(t=gp(yo(t,!1,!1),String),r=function(a,c){return!Oa(t,c)}),gT(e,r,n)}),eG=fp(mp,!0);function Vf(e){return xo(e)?Ms(e)?e.slice():dT({},e):e}function hT(e,t){var r=$n(t),n=r.length;if(e==null)return!n;for(var a=Object(e),c=0;c<n;c++){var l=r[c];if(t[l]!==a[l]||!(l in a))return!1}return!0}function dp(e,t,r,n){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return!1;if(e!==e)return t!==t;var a=typeof e;return a!=="function"&&a!=="object"&&typeof t!="object"?!1:mT(e,t,r,n)}function mT(e,t,r,n){e instanceof Ft&&(e=e._wrapped),t instanceof Ft&&(t=t._wrapped);var a=kl.call(e);if(a!==kl.call(t))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:+e==0?1/+e===1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return ff.valueOf.call(e)===ff.valueOf.call(t)}var c=a==="[object Array]";if(!c){if(typeof e!="object"||typeof t!="object")return!1;var l=e.constructor,p=t.constructor;if(l!==p&&!(ua(l)&&l instanceof l&&ua(p)&&p instanceof p)&&"constructor"in e&&"constructor"in t)return!1}r=r||[],n=n||[];for(var g=r.length;g--;)if(r[g]===e)return n[g]===t;if(r.push(e),n.push(t),c){if(g=e.length,g!==t.length)return!1;for(;g--;)if(!dp(e[g],t[g],r,n))return!1}else{var f=$n(e),w;if(g=f.length,$n(t).length!==g)return!1;for(;g--;)if(w=f[g],!(mo(t,w)&&dp(e[w],t[w],r,n)))return!1}return r.pop(),n.pop(),!0}function zn(e,t){return dp(e,t)}function zr(e){return function(t){return kl.call(t)==="[object "+e+"]"}}var Ms=HC||zr("Array");function xo(e){var t=typeof e;return t==="function"||t==="object"&&!!e}var up=zr("Arguments"),ua=zr("Function"),tG=zr("String"),fT=zr("Number"),rG=zr("Date"),nG=zr("RegExp"),aG=zr("Error"),iG=zr("Symbol"),oG=zr("Map"),sG=zr("WeakMap"),cG=zr("Set"),lG=zr("WeakSet");(function(){up(arguments)||(up=function(e){return mo(e,"callee")})})();var yT=vl.document&&vl.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof yT!="function"&&(ua=function(e){return typeof e=="function"||!1});function bT(e){return fT(e)&&jC(e)}function xT(e){return e===!0||e===!1||kl.call(e)==="[object Boolean]"}function wT(e){return e}function If(e){return Ms(e)?function(t){return Cf(t,e)}:Ef(e)}function vT(e){return e=uT({},e),function(t){return hT(t,e)}}var wf=Date.now||function(){return new Date().getTime()},Nf={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},kT=lT(Nf);function Pf(e){var t=function(c){return e[c]},r="(?:"+$n(e).join("|")+")",n=RegExp(r),a=RegExp(r,"g");return function(c){return c=c==null?"":""+c,n.test(c)?c.replace(a,t):c}}var ET=Pf(Nf),dG=Pf(kT);var CT=0;function Of(e){var t=++CT+"";return e?e+t:t}var uG=Ft.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};function Ff(e,t){return e._chain?Ft(t).chain():t}Ss(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=El[e];Ft.prototype[e]=function(){var r=this._wrapped;return t.apply(r,arguments),(e==="shift"||e==="splice")&&r.length===0&&delete r[0],Ff(this,r)}});Ss(["concat","join","slice"],function(e){var t=El[e];Ft.prototype[e]=function(){return Ff(this,t.apply(this._wrapped,arguments))}});Ft.prototype.value=function(){return this._wrapped};Ft.prototype.valueOf=Ft.prototype.toJSON=Ft.prototype.value;Ft.prototype.toString=function(){return String(this._wrapped)};function As(e,t){if(!(isNaN(e)||isNaN(t)))return e>=0?Math.atan(t/e):Math.atan(t/e)+Math.PI}function yp(e,t,r=1){if(e===t)return!0;if(!isFinite(e)||!isFinite(t))return!1;if(r>50)throw new Error("Within "+(52-r)+" bits isn't really approximate any more");let n=Math.max(Math.max(Math.abs(e),Math.abs(t)),1),a=r===1?.5:Math.pow(.5,r);return n===n+a*Math.abs(t-e)}function wo(e,t=1e6){if(e===1/0)return{n:1/0,d:1};if(e===-1/0)return{n:-1/0,d:1};if(!isFinite(e))return{n:NaN,d:1};let r,n=0,a=1,c=1,l=0,p,g;for(;r=Math.floor(e),p=r*a+n,g=r*l+c,!(g>t||(n=a,c=l,a=p,l=g,e===r));)e=1/(e-r);return{n:a,d:l}}var ST=/\.?0+$/;function DT(e){return e.indexOf(".")===-1?e:e.replace(ST,"")}function MT(e){let t=/\.?0+e/;return e.replace(t,"e")}function _f(e){return 1e6/Math.sqrt(Math.abs(e))}function Ml(e){let t=_f(e);if(t<1||t>1e12)return!1;let{n:r,d:n}=wo(e,t);return n===1?!1:e===e+Math.pow(2,-3)*Math.abs(r/n-e)}function AT(e,t){if(t=t||{},isNaN(e)||!isFinite(e))return{type:"undefined"};if(e===0||t.zeroCutoff&&Math.abs(e)<t.zeroCutoff)return{type:"decimal",value:"0"};let r=t.smallCutoff||.001,n=t.bigCutoff||1e6,a=t.digits||10,l=MT(e.toExponential(a-2)).match(/([\d\.\-]+)e\+?([\d\-]+)/);if(!l)return{type:"undefined"};let p=parseInt(l[2],10)>=a;if(Ml(e)&&t.displayAsFraction){let f=wo(e,_f(e));return{type:"fraction",numerator:f.n.toString(),denominator:f.d.toString()}}else{if(Math.abs(e)>n||Math.abs(e)<r||p)return{type:"scientific",mantissa:l[1],exponent:l[2]};{let f=DT(e.toPrecision(a));return e!==Number(f)&&t.addEllipses&&(f+="..."),{type:"decimal",value:f}}}}function Ls(e,t){let r=AT(e,t);switch(r.type){case"undefined":return"undefined";case"decimal":return r.value;case"scientific":return r.mantissa+"\\times10^{"+r.exponent+"}";case"fraction":return r.denominator==="1"?r.numerator:r.numerator[0]==="-"?`-\\frac{${r.numerator.slice(1)}}{${r.denominator}}`:`\\frac{${r.numerator}}{${r.denominator}}`;default:return r}}function kt(e){e=e.replace("\\","");let t={pi:"\u03C0",tau:"\u03C4",theta:"\u03B8",phi:"\u03D5",div:"\xF7",cdot:"\u22C5",times:"\xD7",lt:"<",gt:">",le:"\u2264",ge:"\u2265",sim:"\u223C",ldots:"\u2026",prime:"\u2032",approx:"\u2248",to:"\u2192","->":"\u2192"};return t.hasOwnProperty(e)?t[e]:e}function Rf(e){let t=e.match(/^\$(\d+)$/);if(t)return`\\token{${t[1]}}`;let r=e.split("_"),n="";return r[0].length>1&&(n+="\\"),n+=r[0],r[1]&&(n+="_{"+r[1]+"}"),n}function bp(e){let t=e.match(/\\token\{(\d+)\}/);return t?`$${t[1]}`:(e=e.replace(/\\operatorname\{(.*)\}/,"$1"),e.replace(/[{}\\]/g,""))}var LT=/^[\+\-]?[\d]*(\.\d+)?$/;var qf=Na.StaticMath(document.createElement("span"));function wp(e){let t="";return LT.test(e)?(/^\+/.test(e)?(t="positive ",e=e.slice(1)):/^\-/.test(e)&&(t="negative ",e=e.slice(1)),t+=e.replace(/(\.)([0-9]+)/g,(r,n,a)=>n+a.split("").join(" ").trim())):(qf.latex(e),t=qf.mathspeak().trim()),t}var We=he(me());var Up={};tE(Up,{add:()=>HT,det:()=>oS,div:()=>QT,inv:()=>iS,isMatrix:()=>Ol,leftScale:()=>tS,mul:()=>ZT,nadd:()=>WT,ndiv:()=>JT,neg:()=>KT,nmul:()=>XT,nneg:()=>zT,npow:()=>rS,nsqrt:()=>aS,nsub:()=>jT,pow:()=>nS,rightScale:()=>eS,rref:()=>lS,sub:()=>YT,trace:()=>sS,transpose:()=>cS});function Gs(e,t){if(isNaN(e)||isNaN(t))return NaN;if(e=Math.round(e),t=Math.round(t),e<0&&(e=-e),t<0&&(t=-t),t>e){let n=t;t=e,e=n}if(t===0)return e;let r=e%t;for(;r>0;)e=t,t=r,r=e%t;return t}function Vs(e,t){if(!isFinite(e)&&t===0)return NaN;if(e>=0||t===Math.floor(t))return Math.pow(e,t);let r=wo(t,100);return yp(r.n/r.d,t,2)&&r.d%2===1?(r.n%2===0?1:-1)*Math.pow(-e,t):NaN}function vp(e,t){return{n:e,d:t}}function Mt(e){return typeof e=="object"&&typeof e.n=="number"&&typeof e.d=="number"}var Is=Math.pow(2,53)-1;function Ns(e){let t=e.match(/^(-)?(\d*)?(?:\.(\d*))?$/);if(!t)return NaN;let r=t[1],n=t[2],a=t[3];if(!n&&!a)return NaN;let c=!!r;if(a){let l=a.replace(/0+$/,""),p=l.length,g=Math.pow(10,p),f=parseInt(n||"0",10)*g+parseInt(l||"0",10);return f>Is||g>Is?parseFloat(e):Qe(c?-f:f,g)}else{let l=parseInt(n,10);return l>Is?parseFloat(e):Qe(c?-l:l,1)}}function Ke(e){return Mt(e)?e.n/e.d:+e}function Qe(e,t){if(!isFinite(e)||!isFinite(t)||t===0||Math.floor(e)!==e||Math.floor(t)!==t||Math.abs(e)>Is||Math.abs(t)>Is)return e/t;t<0&&(e=-e,t=-t);let r=Gs(e,t);return vp(e/r,t/r)}function Kn(e){return Mt(e)?vp(-e.n,e.d):-e}function Bf(e){return Mt(e)?e.n===0?e.d/e.n:vp(e.n<0?-e.d:e.d,Math.abs(e.n)):1/e}function pa(e,t){if(!Mt(e)||!Mt(t))return Ke(e)+Ke(t);var r=Gs(e.d,t.d);return Qe(e.n*(t.d/r)+t.n*(e.d/r),e.d/r*t.d)}function Fa(e,t){if(!Mt(e)||!Mt(t))return Ke(e)*Ke(t);var r=Gs(e.n,t.d),n=Gs(t.n,e.d);return Qe(e.n/r*(t.n/n),e.d/n*(t.d/r))}function Ps(e,t){return pa(e,Kn(t))}function _a(e,t){return!Mt(e)||!Mt(t)?Ke(e)/Ke(t):Fa(e,Bf(t))}function VT(e,t){let r=e,n=t;if(t.n<0&&(n=Kn(t),r=Bf(e)),!Mt(r)||!Mt(n))return Vs(Ke(e),Ke(t));if(e=r,t=n,t.d===1)return Qe(Math.pow(e.n,t.n),Math.pow(e.d,t.n));let a=e.n<0;if(a&&t.d%2!==1)return NaN;let l=(a?-1:1)*Math.round(Math.pow(Math.abs(e.n),1/t.d)),p=Math.round(Math.pow(Math.abs(e.d),1/t.d));return Math.pow(l,t.d)!==e.n||Math.pow(p,t.d)!==e.d?Vs(Ke(e),Ke(t)):Qe(Math.pow(l,t.n),Math.pow(p,t.n))}function Uf(e,t){if(!Mt(e)||!Mt(t))return Vs(Ke(e),Ke(t));let r=VT(e,t);return Mt(r)?r:Vs(Ke(e),Ke(t))}function $f(e){if(!Mt(e))return Math.sqrt(e);let t=Math.round(Math.sqrt(e.n)),r=Math.round(Math.sqrt(e.d));return t*t!==e.n||r*r!==e.d?Math.sqrt(Ke(e)):Qe(t,r)}var IT=Math.pow(2,-52);function Kf(e){let t=[];for(let r of e)t.push(r.slice());return t}function Wf(e){let{numRows:t,numCols:r}=Wr(e),n=[];for(let a=0;a<r;a++)n.push([]);for(let a=0;a<t;a++)for(let c=0;c<r;c++)n[c].push(e[a][c]);return n}function Wr(e){let t=e.length,r=t>0?e[0].length:0;return{numRows:t,numCols:r}}function ga(e){let{numRows:t,numCols:r}=Wr(e);return t===r}function Os(e,t){var r=Wr(e),n=Wr(t);return r.numCols===n.numCols&&r.numRows===n.numRows}function Al(e){if(!ga(e))return!0;let t=Ke(Tp(e));return!isFinite(t)||t===0}function kp(){throw new Error("Matrix dimension mismatch")}function Ep(){throw new Error("Expected square matrix")}function Hf(e,t){Os(e,t)||kp();let r=[];for(let n=0;n<e.length;n++){let a=[];for(let c=0;c<e[n].length;c++)a.push(pa(e[n][c],t[n][c]));r.push(a)}return r}function jf(e,t){Os(e,t)||kp();let r=[];for(let n=0;n<e.length;n++){let a=[];for(let c=0;c<e[n].length;c++)a.push(Ps(e[n][c],t[n][c]));r.push(a)}return r}function vo(e,t){let r=Wr(e),n=Wr(t);r.numCols!==n.numRows&&kp();let a=[];for(let c=0;c<r.numRows;c++){let l=[];for(let p=0;p<n.numCols;p++){let g=Qe(0,1);for(let f=0;f<e[c].length;f++)g=pa(g,Fa(e[c][f],t[f][p]));l.push(g)}a.push(l)}return a}function Yf(e,t){if(ga(e)||Ep(),t=Ke(t),t!==Math.floor(t))throw new Error("Cannot raise a matrix to a fractional power");let r=NT(Wr(e).numCols);if(t===0)return r;t<0&&(t=-t,e=Sp(e));let n=r;for(;t>1;)t%2===1?(n=vo(e,n),e=vo(e,e),t=(t-1)/2):(e=vo(e,e),t=t/2);return vo(e,n)}function Cp(e,t){let r=[];for(let n of e){let a=[];for(let c of n)a.push(Fa(c,t));r.push(a)}return r}function Jf(e,t){let r=[];for(let n of e){let a=[];for(let c of n)a.push(_a(c,t));r.push(a)}return r}function Qf(e){let t=[];for(let r of e){let n=[];for(let a of r)n.push(Kn(a));t.push(n)}return t}function Tp(e){let{determinant:t}=Dp(Kf(e));return t}function Xf(e){ga(e)||Ep();let{numRows:t}=Wr(e),r=Qe(0,1);for(let n=0;n<t;n++)r=pa(r,e[n][n]);return r}function Sp(e){if(ga(e)||Ep(),Al(e))throw new Error("Cannot invert a singular matrix");let{numRows:t,numCols:r}=Wr(e),n=[];for(let c=0;c<t;c++){let l=e[c].slice();for(let p=0;p<r;p++)l.push(Qe(c===p?1:0,1));n.push(l)}Dp(n);let a=[];for(let c of n)a.push(c.slice(r));return a}function NT(e){let t=[];for(let r=0;r<e;r++){let n=[];for(let a=0;a<e;a++)n.push(Qe(r===a?1:0,1));t.push(n)}return t}function Zf(e){let t=Kf(e);return Dp(t),t}function PT(e){let t=0;for(let r of e)for(let n of r){let a=Math.abs(Ke(n));if(!isFinite(a))return NaN;a>t&&(t=a)}return t}function zf(e){for(let t=0;t<e.length;t++)for(let r=0;r<e[t].length;r++)e[t][r]=NaN}function Dp(e){let{numRows:t,numCols:r}=Wr(e),n=PT(e);if(!isFinite(n))return zf(e),{determinant:NaN,rank:0};let a=Math.max(t,r)*n*IT,c=Qe(1,1),l=0,p=0;for(;l<t&&p<r;){let g=l,f=Math.abs(Ke(e[l][p]));for(let M=l+1;M<t;M++){let G=Math.abs(Ke(e[M][p]));(!isFinite(G)||G>f)&&(f=G,g=M)}if(!isFinite(f))return zf(e),{determinant:NaN,rank:0};if(f===0){c=Qe(0,1),p+=1;continue}if(!Mt(e[g][p])&&f<a){for(let M=l;M<t;M++)e[l][M]=0;c=0,p+=1;continue}if(g!==l){c=Kn(c);let M=e[l];e[l]=e[g],e[g]=M}for(let M=0;M<t;M++){if(M===l)continue;let G=_a(e[M][p],e[l][p]);e[M][p]=Qe(0,1);for(let R=p+1;R<r;R++)e[M][R]=Ps(e[M][R],Fa(G,e[l][R]))}let w=e[l][p];c=Fa(c,w),e[l][p]=Qe(1,1);for(let M=p+1;M<r;M++)e[l][M]=_a(e[l][M],w);l+=1,p+=1}return{rank:l,determinant:l===t&&l===r?c:Qe(0,1)}}function vr(e,t,r){return{input:e,start:t,end:r}}function Mn(e,t){return vr(e,t,t)}function ir(e,t){if(e.input!==t.input)throw new Error("Programming Error: cannot form a span on different inputs");return vr(e.input,e.start,t.end)}function or(e){return e.input.slice(e.start,e.end)}var ty=()=>({type:"unknown"});function $(e,t){return{key:e,vars:t}}var gn=0,V=1,ko=2,J=3,Ar=4,Ll=5,Fr=6,ft=7,ha=8,Hr=9,Wn=10,Eo=11,Gl=12,Qt=13,Ra=14,ci=15,_t=16,li=17,pt=18,ma=19,tt=20,di=21,at=22,ui=23,qe=24,pi=25,Et=26,gi=27,Rt=28,fa=29,vt=30,ya=31,ct=32,hi=33,Xt=34,mi=35,Ue=100,ba=101,jr=102,fi=103,wi=104,yi=105,vi=106,bi=107,Yr=108,xi=109,_T={Any:gn,Number:V,Bool:ko,Point:J,Point3D:Ue,Distribution:Ar,Action:Ll,ListOfAny:Fr,ListOfNumber:ft,ListOfBool:ha,ListOfPoint:Hr,ListOfPoint3D:ba,ListOfDistribution:Wn,EmptyList:Eo,ErrorType:Gl,SeedType:Qt,RGBColor:Ra,ListOfColor:ci,Polygon:_t,ListOfPolygon:li,Segment:pt,ListOfSegment:ma,Circle:tt,ListOfCircle:di,Arc:at,ListOfArc:ui,Line:qe,ListOfLine:pi,Ray:Et,ListOfRay:gi,Vector:Xt,ListOfVector:mi,AngleMarker:Rt,ListOfAngleMarker:fa,DirectedAngleMarker:vt,ListOfDirectedAngleMarker:ya,Transformation:ct,ListOfTransformation:hi,Segment3D:jr,ListOfSegment3D:fi,Triangle3D:wi,ListOfTriangle3D:yi,Sphere3D:vi,ListOfSphere3D:bi,Vector3D:Yr,ListOfVector3D:xi},vG=Object.values(_T);function ny(e){return Array.isArray(e)?e.length:e.initial.length}function ay(e){return Array.isArray(e)?e.length:1/0}function Fs(e){if(typeof e=="number")return BT(e)?{meta:"union",types:[e,qT(e)]}:e;let t=[];for(let r of e.types){let n=Fs(r);typeof n=="number"?t.push(n):t.push(...n.types)}return{meta:"union",types:t}}function ki(e){return Array.isArray(e)?e.map(Fs):{type:"variadic",initial:e.initial.map(Fs),rest:Fs(e.rest)}}function RT(e){switch(e){case gn:return"Any";case V:return"Number";case ko:return"Bool";case J:return"Point";case Ue:return"Point3D";case Ar:return"Distribution";case Ll:return"Action";case Fr:return"ListOfAny";case ft:return"ListOfNumber";case ha:return"ListOfBool";case Hr:return"ListOfPoint";case ba:return"ListOfPoint3D";case Wn:return"ListOfDistribution";case Eo:return"EmptyList";case Gl:return"ErrorType";case Qt:return"SeedType";case Ra:return"RGBColor";case ci:return"ListOfColor";case _t:return"Polygon";case li:return"ListOfPolygon";case pt:return"Segment";case ma:return"ListOfSegment";case tt:return"Circle";case di:return"ListOfCircle";case at:return"Arc";case ui:return"ListOfArc";case qe:return"Line";case pi:return"ListOfLine";case Et:return"Ray";case gi:return"ListOfRay";case Xt:return"Vector";case mi:return"ListOfVector";case Rt:return"Angle";case fa:return"ListOfAngle";case vt:return"DirectedAngle";case ya:return"ListOfDirectedAngle";case ct:return"Transformation";case hi:return"ListOfTransformation";case jr:return"Segment3D";case fi:return"ListOfSegment3D";case Yr:return"Vector3D";case xi:return"ListOfVector3D";case wi:return"Triangle3D";case yi:return"ListOfTriangle3D";case vi:return"Sphere3D";case bi:return"ListOfSphere3D";default:let t=e;throw new Error(`Invalid type: ${t}`)}}var Ei=[Fr,ft,ha,Hr,ba,Wn,Eo,ci,li,ma,di,ui,pi,gi,mi,fa,ya,hi,fi,xi,yi,bi],kG={[Fr]:gn,[Eo]:V,[ft]:V,[ha]:ko,[Hr]:J,[ba]:Ue,[Wn]:Ar,[ci]:Ra,[li]:_t,[ma]:pt,[di]:tt,[ui]:at,[pi]:qe,[gi]:Et,[mi]:Xt,[fa]:Rt,[ya]:vt,[hi]:ct,[fi]:jr,[xi]:Yr,[yi]:wi,[bi]:vi};function qT(e){switch(e){case gn:return Fr;case V:return ft;case ko:return ha;case J:return Hr;case Ue:return ba;case Ar:return Wn;case Ra:return ci;case _t:return li;case pt:return ma;case tt:return di;case at:return ui;case qe:return pi;case Et:return gi;case Xt:return mi;case Rt:return fa;case vt:return ya;case ct:return hi;case jr:return fi;case Yr:return xi;case wi:return yi;case vi:return bi;case Eo:case ft:case ha:case Hr:case ba:case Wn:case ci:case li:case ma:case di:case ui:case pi:case gi:case mi:case fa:case ya:case hi:case fi:case xi:case yi:case bi:case Fr:case Gl:case Qt:case Ll:throw new Error("Type "+RT(e)+" does not implement listType.");default:let t=e;throw new Error(`Invalid type: ${t}`)}}function BT(e){switch(e){case gn:case V:case ko:case J:case Ue:case Ar:case Ra:case _t:case pt:case tt:case at:case qe:case Et:case Xt:case Rt:case vt:case ct:case jr:case Yr:case wi:case vi:return!0;case Eo:case ft:case ha:case Hr:case ba:case Wn:case ci:case li:case ma:case di:case ui:case pi:case gi:case mi:case fa:case ya:case hi:case fi:case xi:case yi:case bi:case Fr:case Qt:case Ll:case Gl:return!1;default:throw new Error(`Invalid type: ${e}`)}}var qa=class{constructor(){this.exportPenalty=0;this._dependencies=[],this._dummyDependencies=[],this._updateSymbols=[],this._substitutionSymbols=[],this._scope={definitions:[],dependencies:[],substitutionDependencies:[],scopes:[]},this._exports=[]}setInputSpan(t){this._inputSpan=t}getInputString(){return this._inputSpan===void 0?"":or(this._inputSpan)}getInputSpan(){return this._inputSpan}shouldExportAns(){return!1}getAnsVariable(){return this.shouldExportAns()&&this.userData&&this.userData.hasOwnProperty("index")?["ans_"+this.userData.index]:[]}addDependency(t){this._dependencies.indexOf(t)===-1&&this._dependencies.push(t),this._scope.dependencies.indexOf(t)===-1&&this._scope.dependencies.push(t)}addDependencies(t){for(var r=0;r<t.length;r++)this.addDependency(t[r])}addDummyDependency(t){this._dependencies.indexOf(t)===-1&&this._dependencies.push(t),this._dummyDependencies.indexOf(t)===-1&&this._dummyDependencies.push(t)}addDummyDependencies(t){for(var r=0;r<t.length;r++)this.addDummyDependency(t[r])}addUpdateSymbol(t){this._dependencies.indexOf(t)===-1&&this._dependencies.push(t),this._updateSymbols.indexOf(t)===-1&&this._updateSymbols.push(t)}addSubstitutionSymbol(t){this._dummyDependencies.indexOf(t)===-1&&this._dummyDependencies.push(t),this._substitutionSymbols.indexOf(t)===-1&&this._substitutionSymbols.push(t)}addSubstitutionDependencies(t){for(var r=0;r<t.length;r++){var n=t[r];if(this._dependencies.indexOf(n)===-1)throw new Error("Programming error: substitution dependency "+n+" must also be registered as a regular dependency");this._scope.substitutionDependencies.indexOf(n)===-1&&this._scope.substitutionDependencies.push(n)}}mergeDependencies(...t){for(var r=0;r<t.length;r++){var n=t[r],a;for(a=0;a<n._dependencies.length;a++)this._dependencies.indexOf(n._dependencies[a])===-1&&this._dependencies.push(n._dependencies[a]);for(a=0;a<n._updateSymbols.length;a++)this._updateSymbols.indexOf(n._updateSymbols[a])===-1&&this._updateSymbols.push(n._updateSymbols[a]);for(a=0;a<n._substitutionSymbols.length;a++)this._substitutionSymbols.indexOf(n._substitutionSymbols[a])===-1&&this._substitutionSymbols.push(n._substitutionSymbols[a]);for(a=0;a<n._scope.dependencies.length;a++)this._scope.dependencies.indexOf(n._scope.dependencies[a])===-1&&this._scope.dependencies.push(n._scope.dependencies[a]);for(a=0;a<n._scope.substitutionDependencies.length;a++)this._scope.substitutionDependencies.indexOf(n._scope.substitutionDependencies[a])===-1&&this._scope.substitutionDependencies.push(n._scope.substitutionDependencies[a]);this.addDummyDependencies(n.getDummyDependencies()),Array.prototype.push.apply(this._scope.scopes,n._scope.scopes)}}mergeDependenciesInScope(t,r,n,a){this.addDummyDependencies(r);var c=n.getScope(),l={kind:t,definitions:r,dependencies:c.dependencies,substitutionDependencies:c.substitutionDependencies,scopes:c.scopes,functionDefinitionSymbol:a==null?void 0:a.functionDefinitionSymbol};this._scope.scopes.push(l);for(var p=0;p<n._dependencies.length;p++)this._dependencies.indexOf(n._dependencies[p])===-1&&this._dependencies.push(n._dependencies[p]);for(p=0;p<n._updateSymbols.length;p++)this._updateSymbols.indexOf(n._updateSymbols[p])===-1&&this._updateSymbols.push(n._updateSymbols[p]);for(p=0;p<n._substitutionSymbols.length;p++)this._substitutionSymbols.indexOf(n._substitutionSymbols[p])===-1&&this._substitutionSymbols.push(n._substitutionSymbols[p]);this.addDummyDependencies(n.getDummyDependencies())}getDependencies(){return this._dependencies}graphmodeDependencies(t,r){return this.getDependencies()}getDummyDependencies(){return this._dummyDependencies}getUpdateSymbols(){return this._updateSymbols}getSubstitutionSymbols(){return this._substitutionSymbols}getScope(){return this._scope}dependsOn(t){return this._dependencies.indexOf(t)>-1}getExports(t){var r=this._exports||[];if(this.userData&&"id"in this.userData){var n=this.userData.id;r=r.concat(["idref_"+n])}return t.ansEnabled()&&(r=r.concat(this.getAnsVariable())),r}getLegalExports(t){return this.getExports(t).filter(function(r){return!t.assignmentForbidden(r)})}exportsSymbol(t){return this._exports.indexOf(t)>-1}exportTo(t,r,n){for(var a=this.getLegalExports(t),c=0;c<a.length;c++){var l=a[c];if(n[l])return;n[l]=r.blocksExport?r:this}}getOperator(){return this.operator||"="}isInequality(){return!1}isShadeBetween(){return!1}getAllIds(){return this.userData?[this.userData.id]:[]}getEvaluationInfo(){return!1}shouldPromoteToSlider(t){return!1}getSliderVariables(t,r,n){var a=t.sliderVariables(n!=null?n:r.getDependencies());return r.valueType===J||r.valueType===Hr||r.valueType===Ue||r.valueType===ba?t.is3dPolicy()?a.includes("t")&&!a.includes("u")&&!a.includes("v")?a.filter(c=>c!="t"):!a.includes("t")&&(a.includes("u")||a.includes("v"))?a.filter(c=>c!="u"&&c!="v"):a:a.filter(function(c){return!t.validParametricVariable(c)}):a}getCompiledDerivative(){var t=this.getDependencies(),n=this.takeDerivative(t[0]||"x");return n.getCompiledFunction()}asValue(){}boundDomain(t){return ty()}getCursorContext(){}polynomialOrder(t){}getPolynomialCoefficients(t){}asTypedValue(){}substitute(t){}getExpressionType(t,r){}tableInfo(t,r){}analyzeFourFunction(t,r,n){}analyzeScientific(t,r,n){}analyzeSingleExpressionScientific(t,r,n){}getGraphMode(t,r){}};var z=class extends qa{constructor(r){super();this.isError=!0;this._msg=r,this.blocksExport=!0}evaluateOnce(r){return this._msg}getError(){return this._msg}setDependencies(r){return this.addDependencies(r),this}setActionValue(r){this.actionValue=r}allowExport(){return this.blocksExport=!1,this}setCursorContext(r){this.cursorContext=r}getCursorContext(){return this.cursorContext}};var UT=!1;function iy(...e){UT&&console.error(...e)}function Ci(e){if(iy){let t=e instanceof Error?e:new Error(`${e}`);iy(t.stack)}return new z($("shared-calculator-error-parse-error"))}function Mp(e){return e=kt(e),new z($("shared-calculator-error-unrecognized-symbol",{symbol:e}))}function oy(){return new z($("shared-calculator-error-unexpected-inequality"))}function Ti(e){return e=kt(e),new z($("shared-calculator-error-unexpected-symbol",{symbol:e}))}function sy(e){return new z($("shared-calculator-error-add-type-error",{symbol1:e[0],symbol2:e[1]})).allowExport()}function cy(e){return new z($("shared-calculator-error-subtract-type-error",{symbol1:e[0],symbol2:e[1]})).allowExport()}function ly(e){return new z($("shared-calculator-error-multiply-type-error",{symbol1:e[0],symbol2:e[1]})).allowExport()}function dy(e){return new z($("shared-calculator-error-divide-type-error",{symbol1:e[0],symbol2:e[1]})).allowExport()}function uy(e){return new z($("shared-calculator-error-exponent-type-error",{symbol1:e[0],symbol2:e[1]})).allowExport()}function py(e){return new z($("shared-calculator-error-negative-type-error",{symbol:e[0]})).allowExport()}function gy(e,t){switch(t.length){case 1:return new z($("shared-calculator-error-function-type-error-1",{fn:kt(e),arg:t[0]})).allowExport();case 2:return new z($("shared-calculator-error-function-type-error-2",{fn:kt(e),arg1:t[0],arg2:t[1]})).allowExport();default:return new z($("shared-calculator-error-function-type-error-many",{fn:kt(e)})).allowExport()}}function hy(){return new z($("shared-calculator-error-update-rule-non-identifier-lhs",{arrow:"\u2192",example:"a"}))}function Il(e,t,r,n){e=kt(e);var a,c;if(t===1)n||(n=e+"(x)"),c=$("shared-calculator-error-wrong-arity-supplement",{recommendation:n}),r>1?a=$("shared-calculator-error-wrong-arity-single-arg-too-many",{dependency:e,supplement:c}):a=$("shared-calculator-error-wrong-arity-single-arg-too-few",{dependency:e,supplement:c});else{var l=[];if(!n){for(var p=0;p<t;p++)l[p]=p+1;n=kt(e)+"("+l.join(", ")+")"}c=$("shared-calculator-error-wrong-arity-supplement",{recommendation:n}),a=$("shared-calculator-error-wrong-arity-many-arg",{dependency:e,assignment_arity:t,supplement:c})}return new z(a)}function Ap(){return new z($("shared-calculator-error-primed-function-arity"))}function Lp(e){return e=kt(e),new z($("shared-calculator-error-bad-implicit-call",{symbol:e}))}function my(e,t){return new z($("shared-calculator-error-adjacent-numbers",{left:e,right:t}))}function Gp(e){return new z($("shared-calculator-error-adjacent-mixed-number",{mixedNumber:e}))}function fy(){return new z($("shared-calculator-error-token-with-subscript"))}function yy(e){return e=kt(e),e==="%"&&(e="% of"),new z($("shared-calculator-error-binary-operator-missing-operand",{symbol:e}))}function by(e){return e=kt(e),new z($("shared-calculator-error-unary-operator-missing-left",{symbol:e}))}function xy(e){return e=kt(e),new z($("shared-calculator-error-unary-operator-missing-right",{symbol:e}))}function wy(){return new z($("shared-calculator-error-fraction-missing-numerator"))}function vy(){return new z($("shared-calculator-error-fraction-missing-denominator"))}function ky(){return new z($("shared-calculator-error-fraction-empty"))}function Vp(){return new z($("shared-calculator-error-empty-subscript"))}function Ey(){return new z($("shared-calculator-error-empty-superscript"))}function Cy(e){return e=kt(e),new z($("shared-calculator-error-invalid-subscript",{symbol:e}))}function Ty(){return new z($("shared-calculator-error-invalid-operator-name"))}function Sy(){return new z($("shared-calculator-error-unexpected-subscript"))}function Dy(){return new z($("shared-calculator-error-superscript-with-prime"))}function Ip(){return new z($("shared-calculator-error-unexpected-prime"))}function Np(){return new z($("shared-calculator-error-prime-without-paren"))}function My(){return new z($("shared-calculator-error-empty-radical"))}function Ay(){return new z($("shared-calculator-error-empty-radical-index"))}function Ly(){return new z($("shared-calculator-error-empty-paren"))}function Gy(){return new z($("shared-calculator-error-empty-square-bracket"))}function Vy(){return new z($("shared-calculator-error-empty-pipe"))}function Iy(e){var t=e+"^2",r=e+"^-1";return new z($("shared-calculator-error-bad-trig-exponent",{form1:t,form2:r}))}function Ny(e){var t=e+"^2";return new z($("shared-calculator-error-bad-log-exponent",{form:t}))}function Pp(){return new z($("shared-calculator-error-inequality-chain-too-long"))}function Py(){return new z($("shared-calculator-error-piecewise-missing-condition"))}function Oy(){return new z($("shared-calculator-error-piecewise-part-missing-condition"))}function Fy(){return new z($("shared-calculator-error-colon-missing-condition"))}function _y(){return new z($("shared-calculator-error-blank-expression"))}function Ry(e){return e=kt(e),new z($("shared-calculator-error-function-not-defined",{dependency:e}))}function qy(e){return e=kt(e),new z($("shared-calculator-error-cannot-subscript",{symbol:e}))}function By(e){if(e=e.map(kt),e.length===0)return new z($("shared-calculator-error-too-many-variables-no-symbols"));var t=e.pop()||"";return e.length>0?new z($("shared-calculator-error-too-many-variables-many-symbols",{variables:e.join("', '"),lastVariable:t})):new z($("shared-calculator-error-too-many-variables-one-symbol",{variable:t}))}function Uy(e){return e=kt(e),new z($("shared-calculator-error-variable-as-function",{dependency:e}))}function $y(){return new z($("shared-calculator-error-invalid-half-empty-range"))}function zy(){return new z($("shared-calculator-error-sum-missing-bound"))}function Ky(){return new z($("shared-calculator-error-product-missing-bound"))}function Wy(){return new z($("shared-calculator-error-incorrect-sum-lower-bound"))}function Hy(){return new z($("shared-calculator-error-incorrect-product-lower-bound"))}function jy(){return new z($("shared-calculator-error-integral-missing-bound"))}function Yy(){return new z($("shared-calculator-error-integral-missing-differential"))}function Jy(){return new z($("shared-calculator-error-differential-with-superscript"))}function Qy(){return new z($("shared-calculator-error-sum-missing-body"))}function Xy(){return new z($("shared-calculator-error-product-missing-body"))}function Zy(){return new z($("shared-calculator-error-integral-missing-body"))}function eb(){return new z($("shared-calculator-error-derivative-missing-body"))}function tb(e,t){return e=kt(e),t=kt(t),new z($("shared-calculator-error-mismatched-braces",{symbol1:e,symbol2:t}))}function rb(){return new z($("shared-calculator-error-percent-missing-of"))}function Co(e){return new z($("shared-calculator-error-bad-symbol-context",{symbol:kt(e)}))}function Op(){return new z($("shared-calculator-error-write-integral",{command:"integral",symbol:"\u222B"}))}function $T(){return new z($("shared-calculator-error-polygon-unsupported-in-3d"))}function Nl(e,t=!1){return t&&e==="polygon"?$T():new z($("shared-calculator-error-function-unsupported",{symbol:kt(e)}))}function nb(){return new z($("shared-calculator-error-function-definition-unsupported"))}function Fp(){return new z($("shared-calculator-error-equations-unsupported"))}function Si(){return new z($("shared-calculator-error-inequalities-unsupported"))}function ab(){return new z($("shared-calculator-error-regressions-unsupported"))}function ib(){return new z($("shared-calculator-error-points-unsupported"))}function Ye(){return new z($("shared-calculator-error-feature-unavailable"))}function _p(){return new z($("basic-calculator-error-fractions-unavailable"))}function ob(){return new z($("shared-calculator-error-non-square-determinant"))}function sb(){return new z($("shared-calculator-error-non-square-trace"))}function cb(){return new z($("shared-calculator-error-non-square-inverse"))}function Rp(){return new z($("shared-calculator-error-non-singular-inverse"))}function lb(){return new z($("shared-calculator-error-matrix-assignment"))}function db(){return new z($("shared-calculator-error-matrix-add-dimensions"))}function ub(){return new z($("shared-calculator-error-matrix-subtract-dimensions"))}function pb(){return new z($("shared-calculator-error-matrix-multiply-dimensions"))}function gb(){return new z($("shared-calculator-error-matrix-fractional-power"))}function hb(){return new z($("shared-calculator-error-matrix-power-dimensions"))}function mb(e){return new z($("shared-calculator-error-matrix-element-type-error",{arg:e[0]}))}function fb(e){return new z($("shared-calculator-error-matrix-invalid-variable",{symbol:kt(e)}))}function yb(){return new z($("shared-calculator-error-incorrect-list-comprehension-input"))}function qp(){return new z($("shared-calculator-error-unexpected-for-keyword"))}function bb(){return new z($("shared-calculator-error-substitution-invalid-assignments"))}function Bp(){return new z($("shared-calculator-error-substitution-nested"))}function Pl(){return new z($("shared-calculator-error-substitution-ambiguous-comma"))}var zT=Kn,KT=Qf,WT=pa;function HT(e,t){if(!Os(e,t))throw db();return Hf(e,t)}var jT=Ps;function YT(e,t){if(!Os(e,t))throw ub();return jf(e,t)}var JT=_a,QT=Jf,XT=Fa;function Ol(e){return Array.isArray(e)}function ZT(e,t){if(Wr(e).numCols!==Wr(t).numRows)throw pb();return vo(e,t)}var eS=Cp;function tS(e,t){return Cp(t,e)}var rS=Uf;function nS(e,t){if(t=Ke(t),Math.floor(t)!==t)throw gb();if(!ga(e))throw hb();if(t<0&&Al(e))throw Rp();return Yf(e,t)}var aS=$f;function iS(e){if(!ga(e))throw cb();if(Al(e))throw Rp();return Sp(e)}function oS(e){if(!ga(e))throw ob();return Tp(e)}function sS(e){if(!ga(e))throw sb();return Xf(e)}var cS=Wf,lS=Zf;var yt=he(me());dr();var _G=function(){{var e="_*_";ee.Event.prototype.wasHandled=function(t){t=t||e;var r=this.originalEvent,n=r&&r.handledBy;if(n&&n[t])return!0;if(t!==e)return!1;var a=this.target.closest("[handleEvent]");return a&&a!==this.currentTarget?a.getAttribute("handleEvent")!=="false":!1},ee.Event.prototype.handle=function(t){t=t||e;var r=this.originalEvent;if(r){var n=r.handledBy;n||(n=r.handledBy={}),n[t]=!0}}}}();var dS=function(){{var e=function(){for(var t={8:this.BACKSPACE="Backspace",9:this.TAB="Tab",13:this.ENTER="Enter",16:this.SHIFT="Shift",17:this.CONTROL="Control",18:this.ALT="Alt",20:this.CAPSLOCK="CapsLock",27:this.ESCAPE="Esc",32:this.SPACEBAR="Space",33:this.PAGEUP="PageUp",34:this.PAGEDOWN="PageDown",35:this.END="End",36:this.HOME="Home",37:this.LEFT="Left",38:this.UP="Up",39:this.RIGHT="Right",40:this.DOWN="Down",46:this.DELETE="Del"},r={Backspace:this.BACKSPACE,Tab:this.TAB,Enter:this.ENTER,Shift:this.SHIFT,Control:this.CONTROL,Alt:this.ALT,CapsLock:this.CAPSLOCK,Escape:this.ESCAPE," ":this.SPACEBAR,PageUp:this.PAGEUP,PageDown:this.PAGEDOWN,End:this.END,Home:this.HOME,ArrowLeft:this.LEFT,ArrowUp:this.UP,ArrowRight:this.RIGHT,ArrowDown:this.DOWN,Delete:this.DELETE},n={UIKeyInputUpArrow:this.UP,UIKeyInputDownArrow:this.DOWN,UIKeyInputLeftArrow:this.LEFT,UIKeyInputRightArrow:this.RIGHT,UIKeyInputEscape:this.ESCAPE,UIKeyInputPageUp:this.PAGEUP,UIKeyInputPageDown:this.PAGEDOWN},a=["0123456789abcdefghijklmnopqrstuvwxyz","\xBA\xA1\u2122\xA3\xA2\u221E\xA7\xB6\u2022\xAA\xE5\u222B\xE7\u2202 \u0192\xA9\u02D9 \u2206\u02DA\xAC\xB5 \xF8\u03C0\u0153\xAE\xDF\u2020 \u221A\u2211\u2248\xA5\u03A9","\u201A\u2044\u20AC\u2039\u203A\uFB01\uFB02\u2021\xB0\xB7\xC5\u0131\xC7\xCE\xB4\xCF\u02DD\xD3\u02C6\xD4\uF8FF\xD2\xC2\u02DC\xD8\u220F\u0152\u2030\xCD\u02C7\xA8\u25CA\u201E\u02DB\xC1\xB8"].map(function(G){return G.split("")}),c=a[0],l=a[1],p=a[2],g={},f={},w=0;w<c.length;w++){var M=c[w];l[w]!==" "&&(g[l[w]]=M.toUpperCase()),p[w]!==" "&&(f[p[w]]=M.toUpperCase())}this.isUndo=function(G){return!G.altKey&&!G.shiftKey&&(G.ctrlKey||G.metaKey)&&(G.key=="z"||G.which==90)},this.isRedo=function(G){return!G.altKey&&(G.ctrlKey||G.metaKey)&&(G.key==="y"||G.which==89||G.shiftKey&&(G.key==="Z"||G.key==="z"||G.which===90))},this.isSelectAll=function(G){return!G.altKey&&(G.ctrlKey||G.metaKey)&&(G.key==="a"||G.key==="A"||G.which==65)},this.isBacktick=function(G){return!G.altKey&&!G.ctrlKey&&!G.metaKey&&!G.shiftKey&&(G.key==="`"||G.which==192)},this.isHelp=function(G){return!G.altKey&&(G.ctrlKey||G.metaKey)&&(G.key==="/"||G.which==191)},this.isSwitchPanes=function(G){return G.key==="F6"||G.key==="f6"||G.which===117||G.keyCode===117},this.lookup=function(G){return r[G.key]||t[G.which]||n[G.key]},this.lookupChar=function(G){if(!G.key)return String.fromCharCode(G.which);if(Ah.IS_APPLE&&G.altKey){var R=G.shiftKey?f:g;if(R[G.key])return R[G.key]}if(G.key.length===1)return G.key.toUpperCase();if(G.key==="Enter")return String.fromCharCode(13);if(G.key==="Tab")return String.fromCharCode(9)}};return new e}}();var{isUndo:xb,isRedo:wb,isSelectAll:BG,isBacktick:UG,isHelp:$G,isSwitchPanes:zG,BACKSPACE:vb,TAB:kb,ENTER:$p,SHIFT:KG,CONTROL:WG,ALT:HG,CAPSLOCK:jG,ESCAPE:Fl,SPACEBAR:zp,PAGEUP:YG,PAGEDOWN:JG,END:QG,HOME:XG,LEFT:Eb,UP:ZG,RIGHT:Cb,DOWN:eV,DELETE:tV,lookup:qt,lookupChar:rV}=dS;var Qr=he(me());dr();var Bl=he(me());var Tb=he(me());var Zt=he(me());function _l(e){return{shouldBeFocused:()=>uS(e),onFocusedChanged:t=>{pS(e,t)}}}function uS(e){let t=e.predicate;if(t&&!t())return!1;let r=e.controller.getFocusLocation();return r&&zn(r,e.location)}function pS(e,t){let r=e.predicate;r&&!r()||(t?e.controller.dispatch({type:"set-focus-location",location:e.location}):e.controller.dispatch({type:"blur-focus-location",location:e.location}))}var{If:Rl}=Zt.Components,ql=class extends Zt.Class{init(){this.controller=this.props.controller()}template(){return Zt.createElement("span",{class:()=>{var r,n;let t=this.parentOrChildHovered();return{"dcg-geo-token-view":!0,"dcg-static-token":(n=(r=this.props).isStatic)==null?void 0:n.call(r),"dcg-selected-token":this.isTokenSelected(),"dcg-hidden-token":this.isHidden(),"dcg-token-has-label":this.hasLabel(),"dcg-child-of-hovered-token":t==="child","dcg-parent-of-hovered-token":t==="parent","dcg-assignment-token":!!this.getAssignment(),"dcg-graph-interactions-disabled":this.isGraphInteractionDisabled()}},style:()=>({color:this.getColor()}),role:this.bindFn(this.getAriaRole),"dcg-token-type":()=>this.getTokenInfo().iconType,"aria-roledescription":()=>this.props.insideGroup()?void 0:this.controller.s("graphing-calculator-narration-geometry-construction-role-description"),"aria-label":this.bindFn(this.getAriaLabel),"aria-selected":this.bindFn(this.isTokenSelected),tabindex:()=>this.props.putInTabOrder()?0:-1,manageFocus:()=>this.props.focusLocation?_l({controller:this.controller,location:this.props.focusLocation()}):void 0,onTapStart:this.bindFn(this.onTapStart),onTap:this.bindFn(this.onTap),onPointerOver:this.bindFn(this.onPointerOver),onPointerOut:this.bindFn(this.onPointerOut)},Zt.createElement("span",{class:Zt.const("dcg-token-background")}),Zt.createElement("span",{class:()=>({"dcg-token-icon":!0,[this.getAdditionalTokenClass()]:this.getAdditionalTokenClass(),"dcg-token-is-list":this.getIsList()&&!this.getAssignment()}),style:()=>({"--dcg-icon-angle":this.getIconAngle()})},Zt.createElement(Rl,{predicate:()=>!!this.getIcon()},()=>Zt.createElement("i",{class:this.bindFn(this.getIcon)}))),Zt.createElement(Rl,{predicate:()=>!!this.getAssignment()},()=>Zt.createElement(At,{latex:this.bindFn(this.getAssignment),config:this.const({})})),Zt.createElement(Rl,{predicate:()=>this.hasLabel()},()=>Zt.createElement("span",{class:()=>({"dcg-token-label":!0})},()=>this.getLabel())),Zt.createElement(Rl,{predicate:this.bindFn(this.isGraphInteractionDisabled)},()=>Zt.createElement("i",{class:Zt.const("dcg-icon-lock")})))}getIconAngle(){let t=this.controller.getItemsByIdentifier(this.props.identifier());if(!t||t.length!==1)return;let r=t[0];if(!r||!r.formula||!r.formula.typed_constant_value)return;let n;switch(this.getIconType()){case"vector":case"translate":if(r.formula.typed_constant_value.valueType!==Xt)return;let[a,c]=r.formula.typed_constant_value.value[0];n=As(a,c);break;case"segment":{if(r.formula.typed_constant_value.valueType!==pt)return;let[[l,p],[g,f]]=r.formula.typed_constant_value.value;n=As(g-l,f-p);break}case"line":{if(r.formula.typed_constant_value.valueType!==qe)return;let[[l,p],[g,f]]=r.formula.typed_constant_value.value;n=As(g-l,f-p);break}case"ray":{if(r.formula.typed_constant_value.valueType!==Et)return;let[[l,p],[g,f]]=r.formula.typed_constant_value.value;n=As(g-l,f-p);break}}return n!==void 0?`${-Number(n).toFixed(2)}rad`:void 0}getAdditionalTokenClass(){if(this.getAssignment()||this.hasError())return"";switch(this.getIconType()){case"glider":return"dcg-token-glider";case"line":return"dcg-token-line";case"segment":return"dcg-token-segment";case"ray":return"dcg-token-ray";case"intersection":return"dcg-token-intersection";case"midpoint":return"dcg-token-midpoint";case"parallel":return"dcg-token-parallel";case"perpendicular":return"dcg-token-perpendicular";case"rotate":return"dcg-token-rotate";case"circle":return"dcg-token-circle";case"arc":return"dcg-token-arc";case"vector":return"dcg-token-vector";case"dilate":return"dcg-token-dilate";case"reflect":return"dcg-token-reflect";case"translate":return"dcg-token-translate";case"transformation":return"dcg-token-transformation";case"point":case"start":case"end":return"dcg-token-point";case"polygon":return"dcg-token-polygon";case"angle":return"dcg-token-angle";case"angles":return"dcg-token-angles";case"directedangle":case"directedangles":return"dcg-token-directedangle"}return""}getIdFromParentRef(t){if(t)return this.controller.getExpressionIdForIdentifier(t[0])}isGraphInteractionDisabled(){let t=this.props.controller().getExpressionIdForIdentifier(this.props.identifier())||"",r=this.controller.getItemModel(t);return!!r&&(r.type==="expression"||r.type==="image")&&!!r.disableGraphInteractions}parentOrChildHovered(){var f,w,M,G,R,se;if(!this.props.showParentChildrenHover||!this.props.showParentChildrenHover())return!1;let t=this.controller.getHoveredOrFocusedTokenIdentifier(),r=this.controller.getExpressionIdForIdentifier(t),n=this.props.identifier(),a=this.props.controller().getExpressionIdForIdentifier(n)||"";if(!r)return!1;let c=this.controller.getItemModel(r),l=this.controller.getItemModel(a);if(!c||c.type!=="expression"||!l||l.type!=="expression")return!1;let p=((M=(w=(f=c.formula)==null?void 0:f.geometry)==null?void 0:w.call)==null?void 0:M.parents)||[],g=((se=(R=(G=l.formula)==null?void 0:G.geometry)==null?void 0:R.call)==null?void 0:se.parents)||[];for(let ce=0;ce<p.length;ce++)if(this.getIdFromParentRef(p[ce])===a)return"parent";for(let ce=0;ce<g.length;ce++)if(this.getIdFromParentRef(g[ce])===r)return"child";return!1}willUnmount(){this.implicitMouseOut()}didUpdate(){let t=this.props.identifier();this.currentlyActiveIdentifier&&t!==this.currentlyActiveIdentifier&&this.implicitMouseOut()}implicitMouseOut(){this.currentlyActiveIdentifier&&this.controller.runAfterDispatch(()=>{let t=this.currentlyActiveIdentifier;t&&(this.currentlyActiveIdentifier=void 0,this.controller.dispatch({type:"unset-active-token",identifier:t,style:"hovered"}))})}isHidden(){return this.getTokenInfo().isHidden}hasError(){let t=this.getTokenInfo();return!t||t.hasError}getIcon(){if(this.getAssignment())return;let t=this.getTokenInfo();if(this.hasError())return"dcg-icon-error";switch(t.iconType){case"point":case"glider":case"intersection":case"strictintersection":case"midpoint":case"start":case"end":return"dcg-icon-point";case"translate":case"vector":return"dcg-icon-vector";case"dilate":return"dcg-icon-dilation";case"rotate":return"dcg-icon-rotation";case"reflect":return"dcg-icon-reflection";case"transformation":return"dcg-icon-title";case"angle":case"angles":case"directedangle":case"directedangles":return"dcg-icon-angle";case"polygon":return"dcg-icon-polygon-solid";case"apply":case"arc":case"circle":case"clockwise":case"counterclockwise":case"error":case"line":case"parallel":case"perpendicular":case"ray":case"reflex":case"segment":case"segments":case"unknown":case"vertices":return;default:return t.iconType}}hasLabel(){return!!this.getLabel()}getLabel(){if(this.getAssignment())return"";let t=this.getTokenInfo().label.trim();return t.length<=2?t:""}getAssignment(){let t=this.props.identifier();return t[0]!=="$"?Rf(t):""}getAriaLabel(){let{description:t}=this.getTokenInfo();return this.isHidden()?this.controller.s("graphing-calculator-narration-geometry-hidden-construction-description",{description:t}):t}isTransformation(){var t;return((t=this.getTokenInfo())==null?void 0:t.groupType)==="transformation"}getColor(){if(this.getAssignment())return;let t=this.getTokenInfo();return this.hasError()?"#fa824c":this.isTransformation()||this.isHidden()?"#aaa":t.color}getIconType(){return this.getTokenInfo().iconType}getIsList(){return this.getTokenInfo().isList}getTokenInfo(){let t=this.props.identifier();return this.controller.getTokenRenderInfoByIdentifier(t)}onPointerOver(t){var r,n;(n=(r=this.props).isStatic)!=null&&n.call(r)||t.pointerType==="mouse"&&(this.currentlyActiveIdentifier=this.props.identifier(),this.controller.dispatch({type:"set-active-token",identifier:this.currentlyActiveIdentifier,style:"hovered"}))}onPointerOut(t){var r,n;(n=(r=this.props).isStatic)!=null&&n.call(r)||t.pointerType==="mouse"&&this.currentlyActiveIdentifier&&(this.controller.dispatch({type:"unset-active-token",identifier:this.currentlyActiveIdentifier,style:"hovered"}),this.currentlyActiveIdentifier=void 0)}onTapStart(t){var r,n;(n=(r=this.props).isStatic)!=null&&n.call(r)||t.handle()}onTap(t){var r,n;(n=(r=this.props).isStatic)!=null&&n.call(r)||(t.handle(),this.props.focusLocation&&this.controller.dispatch({type:"set-focus-location",location:this.props.focusLocation()}),this.controller.dispatch({type:"select-expression-that-defines-token",identifier:this.props.identifier(),toggle:this.isTokenSelected(),multiSelectMode:this.controller.isMultiSelectEnabled()&&!!t.shiftKey}))}isTokenSelected(){let t=this.getTokenInfo();return!!(t&&t.isSelected)}getAriaRole(){var t,r;if(!((r=(t=this.props).isStatic)!=null&&r.call(t)))return this.props.insideGroup()?"option":"button"}};var To=e=>{let t=function(){return e};return t.isDcgViewConst=!0,t},So=class{constructor(t,r,n){this.tokenController=t,this.mathNode=r,this.isStatic=n}updateTokens(t){if(!this.mathNode)return;if(!this.lastTokenInfo||this.lastTokenInfo.latex!==t)if(!this.tokenController.doesLatexContainToken(t))this.lastTokenInfo={latex:t,tokens:[]};else{let n=[];this.mathNode.querySelectorAll(".dcg-mq-token").forEach(a=>{n.push(a)}),this.lastTokenInfo={latex:t,tokens:n}}let r=this.lastTokenInfo.tokens;for(let n of r){let a=n.dcgTokenView;if(a)a.update();else{let c=n.getAttribute("data-dcg-mq-token")||"",l=Tb.mountToNode(ql,n,{controller:To(this.tokenController),identifier:To("$"+c),insideMQ:To(!0),insideGroup:To(!1),putInTabOrder:To(!1),isStatic:To(this.isStatic)});n.dcgTokenView=l}}}};var At=class extends Bl.Class{template(){return this.children.length===1?this.children[0]:Bl.createElement("div",{onMount:t=>this.onMountMathquill(t)})}onMount(){this.children.length===1&&this.onMountMathquill(this.findRootNode())}onMountMathquill(t){this.props.tokenController&&(this.mathquillTokenHelper=new So(this.props.tokenController(),t,!0)),this.staticMath=Na.StaticMath(t,be({},this.props.config())),t.classList.add("dcg-static-mathquill-view"),this.updateMathquill()}didUpdate(){this.updateMathquill()}updateMathquill(){var t;this.updateMathquillAria(),this.updateMathquillLatex(),(t=this.mathquillTokenHelper)==null||t.updateTokens(this.props.latex())}updateMathquillLatex(){if(!this.staticMath)return;let t=this.props.latex();this.lastLatex!==t&&(this.staticMath.latex(t),this.lastLatex=t,this.props.onReflow&&this.props.onReflow())}updateMathquillAria(){if(!this.staticMath||!this.props.getAriaLabel)return;let t=this.props.getAriaLabel();t!==this.staticMath.getAriaLabel()&&this.staticMath.setAriaLabel(t)}};function Sb(e){return 48<=e&&e<=57}function gS(e){return 97<=e&&e<=122}function hS(e){return 65<=e&&e<=90}function Ul(e){return gS(e)||hS(e)}function $l(e){return e===92}function Kp(e){return e===39}function Db(e){if(9<=e&&e<=13||8192<=e&&e<=8202)return!0;switch(e){case 32:case 160:case 5760:case 8232:case 8233:case 8239:case 8287:case 12288:case 65279:return!0;default:return!1}}function Ua(e,t){return ir(e.token.span,t.prevSpan)}function Ba(e,t,r){return{type:e,span:t,val:r}}function mS(e,t,r,n){return{input:e,prevSpan:t,pos:r,token:n}}function zl(e){return Mb(e,0,Mn(e,0))}function Mb(e,t,r){for(;Db(e.charCodeAt(t));)t+=1;let n=bS(e,t);return mS(e,r,t,n)}function Jr(e){return Mb(e.input,e.token.span.end,e.token.span)}function Lr(e){return e.token}function Hn(e,t){if(Lr(e).type!==t)throw`Parse Error: expected ${t}.`;return Jr(e)}function Ab(e,t){return Lr(e).type===t}function Do(e){return e.pos>=e.input.length}var fS={"\\left":"Left","\\right":"Right","\\sqrt":"Sqrt","\\frac":"Frac","\\operatorname":"OperatorName","\\token":"Token"},yS={"[":"[","]":"]","{":"{","}":"}","^":"^",_:"_"};function bS(e,t){let r=t;if(t>=e.length)return Ba("End",Mn(e,t),"");let n=e.charCodeAt(t);if(Sb(n)){let a=vr(e,r,t+1);return Ba("Digit",a,e.charAt(r))}else if(Ul(n)){let a=vr(e,r,t+1);return Ba("Letter",a,e.charAt(r))}else if($l(n))if(t+=1,Ul(e.charCodeAt(t))){for(;Ul(e.charCodeAt(t));)t+=1;let a=vr(e,r,t),c=or(a),l=fS[c]||"Cmd";return Ba(l,a,c)}else{t+=1;let a=vr(e,r,t),c=or(a);return Ba("EscapedSymbol",a,c)}else if(Kp(n)){for(t+=1;Kp(e.charCodeAt(t));)t+=1;if(e.charAt(t)==="^"){t+=1;let a=vr(e,r,t),c=or(a);return Ba("Primes^",a,c)}else{let a=vr(e,r,t),c=or(a);return Ba("Primes",a,c)}}else{let a=vr(e,r,t+1),c=e.charAt(r),l=yS[c]||"Symbol";return Ba(l,a,c)}}function Kl(e){let t=zl(e),r=0;for(;!Do(t);)r+=1,t=Jr(t);return r}var{If:xS}=Qr.Components,Lb=500,wS=30,rt=class e extends Qr.Class{constructor(){super(...arguments),this.lastLatexProp="",this.wasFocusedLastUpdate=!1}template(){return Qr.createElement("div",{class:Qr.const("dcg-mq-container")},Qr.createElement(xS,{predicate:()=>this.getPlaceholder().trim().length>0},()=>Qr.createElement("span",{class:Qr.const("dcg-mq-placeholder")},Qr.createElement(At,{config:()=>this.props.config(),latex:()=>this.getPlaceholder()}))),Qr.createElement("div",{class:()=>({"dcg-math-field":!0,"dcg-no-fadeout":this.props.noFadeout&&this.props.noFadeout(),"dcg-invalid":this.props.hasError(),"dcg-focus":this.props.isFocused()}),didMount:t=>this.didMountMathquill(t),"data-dcg-label":()=>this.props.dataLabelAttributeValue?this.props.dataLabelAttributeValue():void 0}))}didMount(){this.children.length===1&&this.didMountMathquill(this.findRootNode())}willUnmount(){this.$mathField.off(".view"),this.mathField=void 0}getPlaceholder(){return!this.props.placeholder||this.props.isFocused()||this.props.latex()?"":this.props.placeholder()}didMountMathquill(t){this.cachedConfig=this.getCacheableMQConfig();let r=ar(be({},this.cachedConfig),{handlers:{reflow:n=>{this.props.onReflow&&this.mathField&&this.props.onReflow(n)}},onCut:()=>{this.mathField&&this.props.onUserChangedLatex(this.mathField.latex())},onPaste:()=>{this.mathField&&this.props.onUserChangedLatex(this.mathField.latex())},overrideTypedText:n=>{this.mathField&&this.viewCanAcceptText(n)&&(this.props.onUserTypedText?this.props.onUserTypedText(n):(this.mathField.typedText(n),this.props.onUserChangedLatex(this.mathField.latex())))},overrideKeystroke:(n,a)=>{if(n==="Backspace"&&a.preventDefault(),!this.mathField)return;if(n==="Spacebar"&&this.props.disableSpace&&this.props.disableSpace())return a.preventDefault();let c=qt(a);if(c==="Up"||c==="Down"||c==="Left"||c==="Right"||c==="Esc"){let l=[];a.ctrlKey&&l.push("Ctrl"),a.metaKey&&l.push("Meta"),a.altKey&&l.push("Alt"),a.shiftKey&&l.push("Shift"),l.length?(l.push(c),n=l.join("-")):n=c}this.props.onUserPressedKey?this.props.onUserPressedKey(n,a):(this.mathField.keystroke(n,a),this.props.onUserChangedLatex(this.mathField.latex())),this.maybeTriggerOnSelectionChange()}});this.props.needsSystemKeypad&&this.props.needsSystemKeypad()&&(r.substituteTextarea=()=>{let n=document.createElement("textarea");return n.setAttribute("autocorrect","off"),n.setAttribute("autocapitalize","none"),n.setAttribute("spellcheck","false"),n.setAttribute("autocomplete","off"),n}),this.props.tokenController&&(this.mathquillTokenHelper=new So(this.props.tokenController(),t,!1)),this.$mathField=ee(t),this.mathField=Na.MathField(t,r),t._mqMathFieldInstance=this.mathField,t._mqViewInstance=this,this.$mathField.on("focusin.view focusout.view",n=>this.onFocusEvent(n)).on("paste.view",n=>this.onPasteEvent(n)),!Zc&&(Qc||Xc)&&this.$mathField.on("keypress.view",n=>this.onKeypressEvent(n)),this.hookupMQTapTouch(),this.updateMathquill()}getCacheableMQConfig(){let t=be({},this.props.config());return this.props.capExpressionSize()&&(t.maxDepth=wS),t}didUpdate(){this.updateMathquill()}updateMathquill(){var t;this.updateMathquillConfig(),this.updateMathquillAria(),this.updateMathquillLatex(),this.updateMathquillFocused(),this.updateMathquillPostLabel(),(t=this.mathquillTokenHelper)==null||t.updateTokens(this.props.latex())}onFocusEvent(t){let r=this.isFocused();r!==this.shouldBeFocused()&&this.props.onFocusedChanged(r,t)}onPasteEvent(t){let r="",n=window.clipboardData,a=t.originalEvent;n&&n.getData?r=n.getData("Text"):a&&a.clipboardData&&a.clipboardData.getData&&(r=a.clipboardData.getData("text/plain"));var c=this.viewCanAcceptText(r);return!c&&this.props.onExpressionSizeExceeded&&this.props.onExpressionSizeExceeded(),c}viewCanAcceptText(t){return e.canAcceptText(this.mathField,this.props.capExpressionSize(),t)}static canAcceptText(t,r,n){if(!t)return!1;if(!r)return!0;let a=t.latex();return Kl(a)+Kl(n)<=Lb}onKeypressEvent(t){if(t.stopPropagation(),t.preventDefault(),!!this.mathField){var r=t.key&&t.key.length===1?t.key:void 0;r&&this.viewCanAcceptText(r)&&(this.props.onUserTypedText?this.props.onUserTypedText(r):(this.mathField.typedText(r),this.props.onUserChangedLatex(this.mathField.latex())))}}hookupMQTapTouch(){this.$mathField.on("dcg-tapstart.view",()=>{let t="dcg-tapend.mathquill-selection-change";ee(document).on(t,()=>{this.maybeTriggerOnSelectionChange(),ee(document).off(t)})}),this.$mathField.on("dcg-tap.view",t=>{let r=t;if(r.device!=="touch"||r.target.closest(".dcg-mq-ignore-mousedown")||!this.mathField)return;let n=r.changedTouches[0];this.mathField.clickAt(n.clientX,n.clientY,n.target),this.isFocused()||this.mathField.focus();let a;setTimeout(function(){a=Date.now()},0),this.mathField.ignoreNextMousedown(function(){return a===void 0?!0:Date.now()-a<500})})}updateMathquillConfig(){if(!this.mathField)return;let t=this.getCacheableMQConfig();zn(t,this.cachedConfig)||(this.cachedConfig=t,this.mathField.config(t))}updateMathquillAria(){if(!this.mathField)return;let t=this.props.getAriaLabel();t!==this.mathField.getAriaLabel()&&this.mathField.setAriaLabel(t)}updateMathquillPostLabel(){this.mathField&&this.mathField.setAriaPostLabel(this.props.getAriaPostLabel(),this.props.hasError()?5e3:1e3)}updateMathquillLatex(){let t=this.props.latex();this.mathField&&this.lastLatexProp!==t&&(this.props.capExpressionSize()&&Kl(t)>Lb||(this.lastLatexProp=t,this.mathField.latex()!==t&&this.mathField.latex(t)))}updateMathquillFocused(){if(!this.mathField)return;let t=this.isFocused(),r=this.shouldBeFocused();r&&r!==this.wasFocusedLastUpdate&&this.props.selectOnFocus&&this.props.selectOnFocus()&&this.mathField.select(),this.wasFocusedLastUpdate=r,t!==r&&(r?this.mathField.focus():this.mathField.blur())}isFocused(){return!!(document.activeElement&&this.$mathField[0].contains(document.activeElement))}shouldBeFocused(){return this.props.isFocused()}maybeTriggerOnSelectionChange(){let t=this.props.onSelectionChanged;if(!t||!this.mathField)return;let r=this.mathField.selection();zn(r,this.lastSelection)||(this.lastSelection=r,t(r))}static getFocusedMathquill(){if(!document.activeElement)return;let t=document.activeElement.closest(".dcg-mq-editable-field");if(t)return t._mqMathFieldInstance}static getMQViewInstance(t){let r=t.el();if(r)return r._mqViewInstance}static applyArrowKeyAndReturnIfWasAtBounds(t,r,n){var a=t.selection();let c=a.startIndex===0&&a.endIndex===a.latex.length;if((r==="Up"||r==="Down")&&c)return t.keystroke(r,n),!0;t.keystroke(r,n);var l=t.selection(),p=l.latex!==a.latex||l.startIndex!==a.startIndex||l.endIndex!==a.endIndex;return!p}static simulateKeypress(t,r){var n=e.getMQViewInstance(t);n&&(n.props.onUserPressedKey?n.props.onUserPressedKey(r):(t.keystroke(r),n.props.onUserChangedLatex(t.latex())),n.maybeTriggerOnSelectionChange())}static simulateUserChangedLatex(t){var r=e.getMQViewInstance(t);r&&r.mathField&&r.props.onUserChangedLatex(r.mathField.latex())}static handleKeystrokeAndDecideIfSpecialEvent(t,r,n){return r==="Enter"||r==="Delete"&&t.latex()===""||r==="Backspace"&&t.latex()===""?!0:r==="Up"||r==="Down"||r==="Left"||r==="Right"?e.applyArrowKeyAndReturnIfWasAtBounds(t,r,n):(t.keystroke(r,n),!1)}};var{For:Gb,IfElse:vS}=yt.Components,Mo=class extends mt{template(){let e=this.props.editableId()||"";return yt.createElement("div",{class:yt.const("dcg-matrix-container"),style:()=>({"border-color":this.controller.getTextColor()})},yt.createElement("div",{class:yt.const("dcg-top-occluder"),style:()=>({background:this.controller.getBackgroundColor()})}),yt.createElement("div",{class:yt.const("dcg-bottom-occluder"),style:()=>({background:this.controller.getBackgroundColor()})}),yt.createElement(Gb,{each:()=>this.getRowKeys()},yt.createElement("div",{"aria-label":()=>this.props.variable?this.controller.s("matrix-calculator-narration-matrix-with-variable",{variable:this.props.variable()}):this.controller.s("matrix-calculator-narration-matrix-without-variable"),role:yt.const("grid"),class:yt.const("dcg-matrix-view")},t=>yt.createElement(Gb,{each:()=>this.getColumnKeys()},yt.createElement("div",{role:yt.const("row"),class:yt.const("dcg-matrix-view-row")},r=>yt.createElement(Wp,{controller:this.props.controller,isEditable:()=>!!this.props.editableId(),isFocused:()=>this.model.isMatrixExpressionCellFocused(e,t,r),ariaLabel:()=>this.controller.s("shared-calculator-narration-table-cell-coordinates",{rowNumber:t+1,columnNumber:r+1}),latex:()=>this.getCellContents(t,r),onFocusedChanged:n=>{n?this.dispatch({type:"focus-matrix-expression-cell",id:e,row:t,col:r}):this.dispatch({type:"blur-matrix-expression-cell",id:e,row:t,col:r})}}))))))}getCellContents(e,t){return this.props.matrix()[e][t]}getRowKeys(){let e=[],t=this.props.matrix();if(t)for(let r=0;r<t.length;r++)e.push(r);return e}getColumnKeys(){let e=[],t=this.props.matrix(),r=t&&t[0];if(r)for(let n=0;n<r.length;n++)e.push(n);return e}},Wp=class extends mt{template(){return yt.createElement("div",{role:yt.const("gridcell"),class:yt.const("dcg-matrix-view-cell")},vS(this.props.isEditable,{true:()=>yt.createElement(rt,{latex:this.props.latex,isFocused:this.props.isFocused,capExpressionSize:()=>this.model.isEnabled("capExpressionSize"),config:()=>this.controller.getMathquillConfig(),getAriaLabel:()=>this.props.ariaLabel(),getAriaPostLabel:()=>"",noFadeout:this.const(!0),hasError:()=>!1,onFocusedChanged:this.props.onFocusedChanged,placeholder:this.const("0"),selectOnFocus:this.const(!0),onUserPressedKey:(t,r)=>{this.dispatch({type:"keypad/press-key",key:t,evt:r})},onUserTypedText:t=>{this.dispatch({type:"keypad/type-text",text:t})},onUserChangedLatex:t=>{this.dispatch({type:"mq-updated-latex",latex:t})}}),false:()=>yt.createElement(At,{config:this.const({}),latex:this.props.latex})}))}};var Bt=he(me());dr();function Wl(e){return Array.from(e.querySelectorAll('input:enabled, button:enabled, select:enabled, textarea:enabled, [tabindex="0"], a[href]')).filter(t=>!t.getAttribute("aria-hidden")&&!t.getAttribute("aria-disabled")&&am(t))}function Vb(e){return function(r){if(qt(r)==kb&&e){let n=Wl(e);if(n.length===0)return;let a=n[0],c=n[n.length-1];r.shiftKey&&document.activeElement===a?(r.preventDefault(),ee(c).trigger("focus")):!r.shiftKey&&document.activeElement===c?(r.preventDefault(),ee(a).trigger("focus")):document.activeElement&&!e.contains(document.activeElement)&&(r.preventDefault(),ee(a).trigger("focus"))}}}dr();function Hl(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}var{IfElse:kS}=Bt.Components,ES=500,jn=5,Rs=2,Hp=class extends Bt.Class{constructor(){super(...arguments),this.offsetLeft=0}init(){this.uuid=this.props.uuid()}gravity(){var t,r;return((r=(t=this.props).gravity)==null?void 0:r.call(t))||"s"}template(){return Bt.createElement("div",{class:()=>{var t,r,n,a;return{"dcg-tooltip-positioning-container":!0,"dcg-tooltip-gravity-n-s":this.gravity()==="n"||this.gravity()==="s","dcg-tooltip-gravity-e-w":this.gravity()==="e"||this.gravity()==="w","dcg-tooltip-theme-light":((r=(t=this.props).theme)==null?void 0:r.call(t))==="light","dcg-tooltip-theme-dark":((a=(n=this.props).theme)==null?void 0:a.call(n))!=="light"}},style:()=>{var t,r,n,a;return{top:`${this.props.hitAreaRect().top+(((r=(t=this.props).offset)==null?void 0:r.call(t).top)||0)}px`,left:`${this.props.hitAreaRect().left+(((a=(n=this.props).offset)==null?void 0:a.call(n).left)||0)}px`,width:`${this.props.hitAreaRect().width}px`,height:`${this.props.hitAreaRect().height}px`}}},Bt.createElement("div",{class:Bt.const("dcg-tooltip-message-container"),style:this.bindFn(this.getMessageStyle)},Bt.createElement("div",{role:Bt.const("tooltip"),id:this.const(this.uuid),class:()=>({"dcg-tooltip-message":!0,"dcg-sticky-not-stuck":this.props.isStickyAndNotStuck()}),onMount:t=>this.tooltipMessage=t,style:()=>({left:`${Math.round(this.offsetLeft)}px`})},kS(()=>!!this.props.customTooltipView,{true:()=>this.props.customTooltipView(),false:()=>Bt.createElement("span",null,this.props.tooltip)}))),Bt.createElement("div",{class:()=>({"dcg-tooltip-arrow":!0,[this.getTooltipGravityClass()]:!0}),style:()=>{var t,r;return((r=(t=this.props).theme)==null?void 0:r.call(t))==="light"?this.getArrowWithBorderStyle():this.getSolidArrowStyle()}}))}updatePositionIfNecessary(){if(this.gravity()!=="s"&&this.gravity()!=="n")return;let t=this.tooltipMessage.getBoundingClientRect(),r=this.tooltipMessage.closest(".dcg-tap-container");if(!r)return;let n=r.getBoundingClientRect();t.right+Rs>n.right?this.offsetLeft=n.right-t.right-Rs:t.left-Rs<n.left&&(this.offsetLeft=n.left-t.left+Rs),this.offsetLeft!==0&&this.update()}didMount(){this.updatePositionIfNecessary()}getTooltipGravityClass(){switch(this.gravity()){case"n":return"dcg-tooltip-gravity-n";case"s":return"dcg-tooltip-gravity-s";case"e":return"dcg-tooltip-gravity-e";case"w":return"dcg-tooltip-gravity-w"}}getArrowWithBorderStyle(){let t=this.gravity(),r=this.getBackgroundColor(),n="#bbb",a="8px",c={width:a,height:a,border:`1px solid ${n}`,background:r};switch(t){case"s":return ar(be({},c),{top:"100%",left:"50%","margin-top":"1px","border-right":"0","border-bottom":"0"});case"n":return ar(be({},c),{bottom:"100%",left:"50%","margin-bottom":"1px","border-left":"0","border-top":"0"});case"e":return ar(be({},c),{top:"50%",left:"100%","margin-left":"1px","border-right":"0","border-top":"0"});case"w":return ar(be({},c),{top:"50%",right:"100%","margin-right":"1px","border-left":"0","border-bottom":"0"});default:return t}}getSolidArrowStyle(){let t=this.gravity(),r=this.getBackgroundColor(),n=`transparent transparent ${r} transparent`,a=`${r} transparent transparent transparent`,c=`transparent ${r} transparent transparent`,l=`transparent transparent transparent ${r}`,p=`-${jn}px`;switch(t){case"s":return{top:"100%",left:"50%",border:`${jn}px solid transparent`,"border-color":n,"margin-top":p,"margin-left":p};case"n":return{bottom:"100%",left:"50%",border:`${jn}px solid transparent`,"border-color":a,"margin-bottom":p,"margin-left":p};case"e":return{top:"50%",left:"100%",border:`${jn}px solid transparent`,"border-color":c,"margin-left":`-${jn}px`,"margin-top":p};case"w":return{top:"50%",right:"100%",border:`${jn}px solid transparent`,"border-color":l,"margin-right":p,"margin-top":p};default:return t}}getBackgroundColor(){var t,r;return((r=(t=this.props).theme)==null?void 0:r.call(t))==="light"?"#fff":this.props.isStickyAndNotStuck()?"#666":"#000"}getMessageStyle(){let t=this.props.hitAreaRect(),r=this.gravity(),n=this.props.maxWidth();switch(r){case"s":return{top:"100%",width:`${n}px`,transform:"translate(-50%, 0)",left:`${.5*t.width}px`,"margin-top":`${jn}px`,"text-align":"center"};case"n":return{bottom:"100%",width:`${n}px`,transform:"translate(-50%, 0)",left:`${.5*t.width}px`,"margin-bottom":`${jn}px`,"text-align":"center"};case"e":return{transform:"translate(0, -50%)",left:"100%",width:`${n}px`,top:`${.5*t.height}px`,"margin-left":`${jn}px`,"text-align":"left"};case"w":return{transform:"translate(0, -50%)",right:"100%",width:`${n}px`,top:`${.5*t.height}px`,"margin-right":`${jn}px`,"text-align":"right"};default:return r}}};function CS(){return document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement}var Xr=class extends Bt.Class{init(){this.uuid=`dcg-tooltip-${Hl()}`}template(){return Bt.createElement("div",{class:()=>{var t,r;return{"dcg-tooltip-hit-area-container":!0,"dcg-display-block":(r=(t=this.props).displayBlock)==null?void 0:r.call(t),"dcg-tooltip-disabled":this.props.disabled&&this.props.disabled()}},handleevent:Bt.const("true"),didMount:t=>{this.isMounted=!0,this.hitAreaNode=t,this.setupEventListeners(this.hitAreaNode)},onTap:()=>{if(this.shouldStickOnTargetClick())if(this.isStuck)this.clearTimeouts(),this.hideTooltip();else{if(this.props.disabled&&this.props.disabled())return;this.showTooltip(),this.stickTooltip()}else if(this.shouldShowOnTapstart()){if(this.props.disabled&&this.props.disabled())return;this.showTooltip(),this.setUpHideOnExternalMousedown()}else this.hideTooltipImmediately()}},this.children)}shouldShowOnTapstart(){return this.props.showOnTapstart&&this.props.showOnTapstart()}didUpdate(){this.updateTooltip()}updateTooltip(){if(!this.wrapperRef)return;if(!this.props.tooltip()){this.hideTooltip();return}let t=this.hitAreaNode.getBoundingClientRect(),r=this.wrapperRef.elt.getBoundingClientRect(),{originalTop:n,originalLeft:a}=this.wrapperRef,c=t.top-r.top,l=t.left-r.left;Math.abs(c-n)>3||Math.abs(l-a)>3?this.hideTooltip():this.wrapperRef.view.update()}handleShowEvent(t){if(this.props.disabled&&this.props.disabled())return;let r=this.props.delay?this.props.delay():ES;this.clearTimeouts(),this.showTooltipTimeout=setTimeout(t,r)}hideTooltipImmediately(){this.clearTimeouts(),this.hideTooltip()}handleHideEvent(){this.clearTimeouts(),this.hideTooltipTimeout=setTimeout(this.bindFn(this.hideTooltip),150)}setupEventListeners(t){ee(t).on("tipsyshow",r=>{r.target===t&&this.handleShowEvent(()=>{this.showTooltip()})}).on("tipsyhide",r=>{r.target!==t||this.isStuck||this.handleHideEvent()})}willUnmount(){this.clearTimeouts(),this.isMounted=!1,this.hideTooltip()}setUpHideOnExternalMousedown(){ee(document).on(`mousedown.dcg-tooltip-${this.uuid} touchstart.dcg-tooltip-${this.uuid} pointerdown.dcg-tooltip-${this.uuid}`,t=>{this.wrapperRef&&(this.hitAreaNode.contains(t.target)||this.wrapperRef.elt.contains(t.target)||this.hideTooltip())})}stickTooltip(){this.isMounted&&this.wrapperRef&&(this.isStuck||(this.setUpHideOnExternalMousedown(),this.isStuck=!0,this.updateTooltip()))}clearTimeouts(){clearTimeout(this.showTooltipTimeout),clearTimeout(this.hideTooltipTimeout)}showTooltip(){var R,se,ce;if(!this.isMounted||this.wrapperRef||!this.props.tooltip())return;let t=this.hitAreaNode.getBoundingClientRect(),r=document.createElement("div");r.className="dcg-tooltip-mount-pt";let n=this.hitAreaNode.closest(".dcg-tap-container"),a=CS();(!!a&&a.contains(this.hitAreaNode)&&a.closest(".dcg-tap-container")?a:n).appendChild(r);let l=r.getBoundingClientRect(),p=t.left-l.left,g=t.top-l.top,f=200;if((se=(R=this.props).noWrap)!=null&&se.call(R)){let Se=(ce=r.closest(".dcg-tap-container"))==null?void 0:ce.getBoundingClientRect();Se&&(f=Se.width-2*Rs)}let w=ar(be({},this.props),{isStickyAndNotStuck:()=>this.shouldStickOnTargetClick()&&!this.isStuck,maxWidth:()=>f,hitAreaRect:()=>({top:g||0,left:p||0,width:t.width||0,height:t.height||0}),uuid:()=>this.uuid});this.setupEventListeners(r),ee(r).on("dcg-tap",()=>{this.shouldStickOnTargetClick()&&this.stickTooltip()});let M=Bt.mountToNode(Hp,r,w);ee(document).on(`keydown.dcg-tooltip-${this.uuid}`,Se=>{qt(Se)===Fl&&this.hideTooltip()});let G=()=>this.updateTooltip();window.addEventListener("scroll",G,!0),this.wrapperRef={elt:r,view:M,originalLeft:p,originalTop:g,onScroll:G},this.assignAriaDescribedBy()}hideTooltip(){this.clearTimeouts(),this.wrapperRef&&(this.isStuck=!1,ee(document).off(`.dcg-tooltip-${this.uuid}`),window.removeEventListener("scroll",this.wrapperRef.onScroll,!0),this.restoreAriaDescribedBy(),Bt.unmountFromNode(this.wrapperRef.elt),this.wrapperRef.elt.parentNode&&this.wrapperRef.elt.parentNode.removeChild(this.wrapperRef.elt),this.wrapperRef=void 0)}assignAriaDescribedBy(){let t=Wl(this.hitAreaNode)[0]||this.hitAreaNode;this.originalDescribedBy=t.getAttribute("aria-describedby"),t.setAttribute("aria-describedby",this.uuid)}restoreAriaDescribedBy(){let t=Wl(this.hitAreaNode)[0]||this.hitAreaNode;this.originalDescribedBy?t.setAttribute("aria-describedby",this.originalDescribedBy):t.removeAttribute("aria-describedby")}shouldStickOnTargetClick(){return!!this.props.sticky&&this.props.sticky()}};var{SwitchUnion:TS,If:Ib}=We.Components,jl=class extends mt{template(){return We.createElement("div",{class:()=>({"dcg-latex-expression":!0,"dcg-focused":this.model.isLatexExpressionFocused(this.props.id()),"dcg-do-not-blur":!0}),style:()=>({background:this.props.controller().getBackgroundColor()})},We.createElement(rt,{latex:()=>this.getItem().latex,isFocused:()=>this.model.isLatexExpressionFocused(this.props.id()),capExpressionSize:()=>this.model.isEnabled("capExpressionSize"),config:()=>this.controller.getMathquillConfig(),getAriaLabel:()=>this.controller.s("shared-calculator-narration-expression"),getAriaPostLabel:()=>{let e=this.getError();if(e)return this.controller.unpack(e);let t=this.getAnswer();switch(t.type){case"number":return this.controller.s("shared-calculator-narration-evaluation",{answer:wp(Ls(Ke(t.value),{displayAsFraction:this.shouldDisplayEvaluationAsFraction()}))});case"matrix":var r=this.getMatrixEvaluationAria(t.matrix);try{let a=this.controller.s("matrix-calculator-narration-evaluation",{rowCount:r.length,columnCount:r[0].length});for(var n=0;n<r.length;n++)a+=" "+this.controller.s("matrix-calculator-narration-evaluation-row",{rowNumber:n+1,values:r[n].map(c=>c.toString()).join(", ")});return a}catch(a){return this.controller.raw("")}default:return this.controller.raw("")}},hasError:()=>!!this.getError(),onUserPressedKey:(e,t)=>{this.dispatch({type:"keypad/press-key",key:e,evt:t})},onUserTypedText:this.bindFn(this.onUserTypedText),onUserChangedLatex:e=>{this.dispatch({type:"mq-updated-latex",latex:e})},onFocusedChanged:e=>{e?this.dispatch({type:"focus-latex-expression",id:this.props.id()}):this.dispatch({type:"blur-latex-expression",id:this.props.id()})}}),TS("type",()=>this.getAnswer())({number:e=>We.createElement("div",{class:We.const("dcg-evaluation dcg-number-evaluation")},We.createElement("span",{class:We.const("dcg-output")},We.createElement(At,{latex:()=>"="+Ls(Ke(e().value),{displayAsFraction:this.shouldDisplayEvaluationAsFraction()}),config:this.const({})})),this.fractionToggleTemplate()),matrix:e=>We.createElement("div",{class:We.const("dcg-evaluation dcg-matrix-evaluation")},We.createElement("span",{class:We.const("dcg-equals-sign")},We.const("=")),We.createElement(Mo,{controller:this.props.controller,editableId:this.const(void 0),matrix:()=>this.getMatrixEvaluationLatex(e().matrix)}),this.fractionToggleTemplate()),none:()=>{}}),We.createElement(Ib,{predicate:()=>!!this.getError()},()=>We.createElement(Xr,{gravity:this.const("w"),sticky:this.const(!0),tooltip:()=>{let e=this.getError();return e!==void 0?this.controller.unpack(e):this.controller.raw("")}},We.createElement("div",{class:We.const("dcg-expression-error")},We.createElement("i",{class:We.const("dcg-icon-error"),"aria-hidden":We.const("true")})))))}fractionToggleTemplate(){return We.createElement(Ib,{predicate:this.bindFn(this.canDisplayEvaluationAsFraction)},()=>We.createElement(Xr,{tooltip:this.bindFn(this.getFractionMessage),gravity:this.const("s")},We.createElement("span",{role:We.const("button"),tabindex:We.const("0"),"aria-label":this.bindFn(this.getFractionDisplayAriaLabel),class:()=>({"dcg-basic-fraction-toggle":!0,"dcg-selected":this.isFractionEvaluation()}),onTap:this.bindFn(this.toggleFractionEvaluation)},We.createElement("i",{class:We.const("dcg-icon-fraction"),"aria-hidden":We.const("true")}))))}onUserTypedText(e){let t=this.getItem().latex;e==="x"&&t&&t.match(/(.*)matri$/)&&this.model.hasUnusedMatrixVariables()?(this.dispatch({type:"mq-updated-latex",latex:t.replace(/(.*)matri$/,"$1")}),this.dispatch({type:"add-new-matrix"})):this.dispatch({type:"keypad/type-text",text:e})}getItem(){return this.model.getExpressionById(this.props.id())}getError(){return this.model.getEvaluations()[this.props.id()].error}getAnswer(){var e=this.model.getEvaluations()[this.props.id()].answer;return e===void 0?{type:"none"}:Ol(e)?{type:"matrix",matrix:e}:{type:"number",value:e}}getMatrixEvaluationLatex(e){let t=this.isFractionEvaluation(),r=[];for(let n of e){let a=[];for(let c of n)a.push(Ls(Ke(c),{digits:6,bigCutoff:1e6,smallCutoff:.001,displayAsFraction:t}));r.push(a)}return r}getMatrixEvaluationAria(e){let t=this.isFractionEvaluation(),r=[];for(let n of e){let a=[];for(let c of n)a.push(wp(Ls(Ke(c),{digits:6,bigCutoff:1e6,smallCutoff:.001,displayAsFraction:t})));r.push(a)}return r}canDisplayEvaluationAsFraction(){if(!this.model.isEnabled("decimalToFraction"))return!1;let e=this.model.getEvaluations()[this.props.id()].answer;if(e===void 0)return!1;if(Ol(e)){let t=!1;for(let r of e)for(let n of r){if(!Mt(n))return!1;Ml(Ke(n))&&(t=!0)}return t}return Ml(Ke(e))}getFractionMessage(){return this.shouldDisplayEvaluationAsFraction()?this.controller.s("shared-calculator-label-tooltip-convert-to-decimal"):this.controller.s("shared-calculator-label-tooltip-convert-to-fraction")}getFractionDisplayAriaLabel(){return this.shouldDisplayEvaluationAsFraction()?this.controller.s("shared-calculator-narration-display-as-decimal"):this.controller.s("shared-calculator-narration-display-as-fraction")}shouldDisplayEvaluationAsFraction(){return this.canDisplayEvaluationAsFraction()&&this.isFractionEvaluation()}toggleFractionEvaluation(){this.controller.dispatch({type:"set-display-as-fraction",id:this.props.id(),value:!this.getItem().displayAsFraction})}isFractionEvaluation(){return this.getItem().displayAsFraction}};var sr=he(me());var{If:SS}=sr.Components,Yl=class extends mt{template(){return sr.createElement("div",{class:()=>({"dcg-matrix-expression":!0,"dcg-focused":this.model.isExpressionFocused(this.props.id()),"dcg-do-not-blur":!0}),onTapStart:e=>this.onTapBlankSpace(e)},sr.createElement("span",{class:sr.const("dcg-variable-definition")},sr.createElement(At,{config:this.const({}),latex:()=>this.getItem().variable+"="})),sr.createElement(Mo,{controller:this.props.controller,editableId:this.props.id,matrix:()=>this.getItem().matrix,variable:()=>this.getItem().variable}),sr.createElement(SS,{predicate:()=>!!this.getEvaluation().error},()=>sr.createElement("div",{class:sr.const("dcg-matrix-expression-error-container")},sr.createElement(Xr,{gravity:this.const("w"),sticky:this.const(!0),tooltip:()=>{let e=this.getEvaluation().error;return e!==void 0?this.controller.unpack(e):this.controller.raw("")}},sr.createElement("div",{class:sr.const("dcg-matrix-expression-error")},sr.createElement("i",{class:sr.const("dcg-icon-error"),"aria-hidden":sr.const("true")}))))))}getItem(){return this.model.getExpressionById(this.props.id())}onTapBlankSpace(e){e.target.classList.contains("dcg-matrix-expression")&&this.dispatch({type:"focus-matrix-expression-cell",id:this.props.id(),row:0,col:0})}getEvaluation(){return this.model.getEvaluations()[this.props.id()]}};var{For:DS,Switch:MS}=Gr.Components,Jl=class extends mt{template(){return Gr.createElement("div",{class:Gr.const("dcg-matrix-list-container"),didMount:e=>this.didMountNode(e)},Gr.createElement("div",{class:Gr.const("dcg-matrix-list-placeholder")}),Gr.createElement(DS,{each:()=>this.model.getExpressionOrder()},Gr.createElement("div",{class:()=>({"dcg-matrix-list":!0,"dcg-projector-mode":this.controller.isProjectorMode()}),role:Gr.const("region"),"aria-label":()=>this.controller.s("shared-calculator-narration-expression-list")},e=>Gr.createElement(MS,{key:()=>this.model.getExpressionById(e).type},t=>t==="latex"?Gr.createElement(jl,{controller:this.props.controller,id:this.const(e)}):t==="matrix"?Gr.createElement(Yl,{controller:this.props.controller,id:this.const(e)}):Gr.createElement("span",null)))))}didMountNode(e){this.node=e}didUpdate(){let e=this.node.querySelector(".dcg-focused");e&&dm(e,this.node,0)}};var Lt=he(me());var Ai=he(me());var Nb=he(me()),Mi=class extends Nb.Class{init(){this.controller=this.props.controller()}};var qs=class extends Mi{template(){return Ai.createElement("div",{class:Ai.const("dcg-keypad-control-bar dcg-do-not-blur"),role:Ai.const("group"),"aria-label":()=>this.controller.s("shared-calculator-narration-keypad-controlbar")},Ai.createElement("div",{class:Ai.const("dcg-keypad-control-bar-contents")},this.children))}};var Ao=he(me()),Yn=class extends Ao.Class{template(){return Ao.createElement("div",{didMount:e=>{this.didMountRoot(e),this.props.didMount&&this.props.didMount(e)},class:()=>({"dcg-keypad-control-btn":!0,"dcg-menu-btn":!!this.props.menu(),"dcg-btn-primary":!!this.props.menu(),"dcg-disabled":!!this.props.disabled(),"dcg-selected":!!this.props.disabled()&&this.props.selected(),"dcg-selectable-btn":this.props.disabled()&&this.props.selectable()}),role:Ao.const("button"),"aria-disabled":()=>this.props.disabled(),"aria-label":this.props.ariaLabel||this.props.command,"dcg-command":this.props.command,onTap:e=>{this.props.disabled()||this.props.onTap(e)},onKeydown:e=>{this.props.onKeydown&&this.props.onKeydown(e)},onFocusin:e=>this.onFocusEvent(e),onFocusout:e=>this.onFocusEvent(e),"aria-pressed":()=>!this.hasPopup()&&this.props.selectable()&&!this.props.disabled()&&this.props.selected()||void 0,"aria-expanded":()=>this.hasPopup()&&this.props.selectable()&&!this.props.disabled()&&this.props.selected()||void 0,tabindex:()=>this.props.disabled()||this.props.ignoreInTabOrder()?-1:0},this.children)}didMountRoot(e){var t,r;this.root=e,(r=(t=this.props).shouldBeFocused)!=null&&r.call(t)&&!this.isFocused()&&this.root.focus()}didUpdate(){var e,t;(t=(e=this.props).shouldBeFocused)!=null&&t.call(e)&&!this.isFocused()&&this.root.focus()}hasPopup(){return this.props.ariaPopup?this.props.ariaPopup():!1}isFocused(){return!!(document.activeElement&&this.root.contains(document.activeElement))}onFocusEvent(e){if(!this.props.shouldBeFocused||!this.props.onFocusedChanged)return;let t=this.isFocused();t!==this.props.shouldBeFocused()&&this.props.onFocusedChanged(t,e)}};var kr=he(me());var ur=he(me());dr();var Zr=he(me());var xa=class extends Zr.Class{template(){return Zr.createElement("div",{role:Zr.const("checkbox"),tabindex:()=>this.props.disabled&&this.props.disabled()?-1:0,"aria-label":()=>{var t,r;return(r=(t=this.props).ariaLabel)==null?void 0:r.call(t)},"aria-labelledby":()=>{var t,r;return(r=(t=this.props).labelledBy)==null?void 0:r.call(t)},"aria-describedby":()=>{var t,r;return(r=(t=this.props).describedBy)==null?void 0:r.call(t)},"aria-disabled":()=>this.props.disabled&&this.props.disabled(),"aria-checked":this.props.checked,manageFocus:()=>{var t,r;return(r=(t=this.props).manageFocus)==null?void 0:r.call(t)},class:()=>({"dcg-component-checkbox":!0,"dcg-checked":this.props.checked(),"dcg-disabled":this.props.disabled&&this.props.disabled(),"dcg-small":this.props.small&&this.props.small(),[this.props.class===void 0?"":this.props.class()]:this.props.class!==void 0}),style:()=>this.props.style?this.props.style():{},onTap:this.bindFn(this.onChange)},Zr.createElement("span",{class:Zr.const("dcg-checkbox")},Zr.createElement("i",{class:Zr.const("dcg-icon-check"),"aria-hidden":Zr.const("true")})),Zr.createElement("span",{class:Zr.const("dcg-checkbox-children")},this.children))}onChange(t){let r=t.target;r&&r.getAttribute("href")||this.props.disabled&&this.props.disabled()||this.props.onChange(!this.props.checked())}};var cr=he(me());var{For:AS,If:LS}=cr.Components,Ql=class extends cr.Class{init(){this.config=this.props.staticConfig()}template(){return cr.createElement(AS,{each:()=>this.config,key:t=>t.key},cr.createElement("div",{class:cr.const("dcg-segmented-control-container"),role:cr.const("group"),"aria-label":this.props.ariaGroupLabel},t=>cr.createElement("div",{class:()=>({"dcg-segmented-control-btn":!0,"dcg-selected":t.selected(),"dcg-theme-mini":this.getTheme()==="mini","dcg-theme-default":this.getTheme()==="default","dcg-disabled":this.isDisabled(),[t.class?t.class():""]:!!t.class}),role:cr.const("button"),tabindex:cr.const(0),"aria-label":()=>this.getAriaLabel(t),style:()=>({"min-width":this.props.minButtonWidth?this.props.minButtonWidth()+"px":void 0}),"aria-pressed":()=>t.selected(),onTap:()=>{this.isDisabled()||t.onSelect()},manageFocus:()=>{if(t.focusHelperOptions)return _l(t.focusHelperOptions)}},cr.createElement(Xr,{tooltip:()=>t.tooltip?t.tooltip():"",gravity:()=>t.tooltipGravity?t.tooltipGravity():"s",disabled:()=>!(t.tooltip&&t.tooltip())},cr.createElement("div",{class:cr.const("dcg-segmented-control-interior")},()=>t.label?t.label():"",cr.createElement(LS,{predicate:()=>!!t.icon},()=>cr.createElement("i",{class:()=>t.icon?t.icon():""})))))))}getAriaLabel(t){return t.ariaLabel?t.ariaLabel():t.label?t.label():t.tooltip?t.tooltip():""}isDisabled(){return this.props.disabled&&this.props.disabled()}getTheme(){return this.props.theme?this.props.theme():"default"}};var{If:GS}=ur.Components,Xl=class extends mt{template(){return ur.createElement("div",{class:()=>({"dcg-settings-dropdown":!0,"dcg-popover":!0,"dcg-has-background-color":this.controller.hasBackgroundColor(),"dcg-point-left":this.controller.getContainerSize().height<=420}),role:ur.const("region"),"aria-label":()=>this.controller.s("matrix-calculator-narration-settings-menu"),didMount:this.bindFn(this.didMountSettingsDropdown),didUnmount:this.bindFn(this.didUnmountSettingsDropdown)},ur.createElement("div",{class:ur.const("dcg-popover-interior"),style:()=>({background:this.controller.getBackgroundColor()})},ur.createElement("div",{class:()=>({"dcg-settings-menu-option":!0,"dcg-displaysize-container":!0})},ur.createElement(Ql,{ariaGroupLabel:()=>this.controller.s("shared-calculator-narration-settings-display-size"),staticConfig:this.bindFn(this.getProjectorModeOptions)})),ur.createElement(xa,{onChange:this.bindFn(this.onToggleInvertedColors),checked:()=>this.controller.getInvertedColors(),class:this.const("dcg-settings-menu-option dcg-do-not-blur dcg-reverse-contrast")},ur.createElement("span",{class:ur.const("dcg-checkbox-label")},()=>this.controller.s("shared-calculator-button-reverse-contrast"))),ur.createElement(GS,{predicate:()=>!!this.getVersionNumber()},()=>ur.createElement("div",{class:ur.const("dcg-version-number")},ur.const("Version: "),()=>this.getVersionNumber()))))}getProjectorModeOptions(){return[{key:"default",label:()=>"A",ariaLabel:()=>this.controller.s("shared-calculator-narration-settings-display-size-default"),class:()=>"dcg-displaysize-default",selected:()=>!this.controller.isProjectorMode(),onSelect:()=>this.onSelectProjectorModeOption(!1)},{key:"large",label:()=>"A",ariaLabel:()=>this.controller.s("shared-calculator-narration-settings-display-size-large"),class:()=>"dcg-displaysize-large",selected:()=>this.controller.isProjectorMode(),onSelect:()=>this.onSelectProjectorModeOption(!0)}]}onSelectProjectorModeOption(t){this.controller.dispatch({type:"update-projector-mode",mode:t})}getVersionNumber(){let t=window;if(t&&t.AppBridge)return t.AppBridge.versionNumber}didUnmountSettingsDropdown(){ee(document.documentElement).off(".dcg-settings-view")}didMountSettingsDropdown(t){this.settingsGroupNode=t,ee(document.documentElement).on("dcg-tapstart.dcg-settings-view",r=>{r.target.closest("")||this.controller.dispatch({type:"close-settings-menu"})}),ee(document.documentElement).on("keydown.dcg-settings-view",r=>{if(qt(r)==="Esc"&&(this.controller.dispatch({type:"close-settings-menu"}),this.controller.dispatch({type:"focus-last-expression"})),qt(r)==="Tab"&&!r.altKey&&!r.metaKey&&!r.ctrlKey){let n=document.activeElement,a=ee(this.props.settingsButtonNode()),c=this.settingsGroupNode.querySelectorAll(".dcg-settings-menu-option"),l=ee(c[c.length-1]);!r.shiftKey&&n===l[0]?(a.trigger("focus"),r.preventDefault(),r.stopPropagation()):r.shiftKey&&n===a[0]&&(l.trigger("focus"),r.preventDefault(),r.stopPropagation())}})}onToggleInvertedColors(){this.controller.dispatch({type:"update-inverted-colors",invertedColors:!this.controller.getInvertedColors()})}setDefaultDisplaySize(){this.controller.dispatch({type:"update-projector-mode",mode:!1})}setLargeDisplaySize(){this.controller.dispatch({type:"update-projector-mode",mode:!0})}};var{If:VS}=kr.Components,Zl=class extends mt{template(){let e=this.props.controller();return kr.createElement("div",{class:kr.const("")},kr.createElement(Yn,{menu:kr.const(!1),didMount:t=>this.settingsButtonNode=t,command:this.const("settings"),ariaLabel:()=>e.s("matrix-calculator-button-settings"),onTap:this.bindFn(this.onToggleSettingsMenu),ignoreInTabOrder:kr.const(!1),selectable:kr.const(!0),selected:()=>this.controller.isSettingsMenuOpen(),disabled:kr.const(!1),ariaPopup:this.const(!0)},kr.createElement("i",{class:kr.const(""),"aria-hidden":kr.const("true")})),kr.createElement(VS,{predicate:()=>this.controller.isSettingsMenuOpen()},()=>kr.createElement(Xl,{controller:this.props.controller,settingsButtonNode:()=>this.settingsButtonNode})))}onToggleSettingsMenu(){this.controller.dispatch({type:"toggle-settings-menu"})}};var{If:jp}=Lt.Components,ed=class extends mt{template(){return Lt.createElement(qs,{controller:this.props.controller},Lt.createElement(Yn,{menu:()=>!0,disabled:()=>!this.model.hasUnusedMatrixVariables(),selected:()=>!1,selectable:()=>!1,ignoreInTabOrder:()=>!1,command:()=>"add-matrix",ariaLabel:()=>this.controller.s("matrix-calculator-button-new"),onTap:()=>{this.model.hasUnusedMatrixVariables()&&this.dispatch({type:"add-new-matrix"})},onKeydown:e=>{e.key==="Tab"&&e.shiftKey&&this.dispatch({type:"tab-backward-from-control-bar",evt:e})},shouldBeFocused:()=>this.model.isAddMatrixButtonFocused(),onFocusedChanged:(e,t)=>{this.controller.dispatch({type:e?"focus-add-matrix-button":"blur-add-matrix-button"})}},Lt.createElement("span",null,()=>this.controller.s("matrix-calculator-button-new"))),Lt.createElement(Yn,{menu:()=>!1,disabled:()=>!this.controller.canUndo(),selected:()=>!1,selectable:()=>!1,ignoreInTabOrder:()=>!1,command:()=>"undo",ariaLabel:()=>this.controller.s("shared-calculator-narration-undo"),onTap:()=>this.dispatch({type:"undo"})},Lt.createElement("i",{class: Lt.const("fa-solid fa-rotate-left"),"aria-hidden": Lt.const("true") })),Lt.createElement(Yn,{menu:()=>!1,disabled:()=>!this.controller.canRedo(),selected:()=>!1,selectable:()=>!1,ignoreInTabOrder:()=>!1,command:()=>"redo",ariaLabel:()=>this.controller.s("shared-calculator-narration-redo"),onTap:()=>this.dispatch({type:"redo"})},Lt.createElement("i", { class: Lt.const("fa-solid fa-rotate-right"), "aria-hidden": Lt.const("true") })),Lt.createElement(jp,{predicate:()=>this.controller.shouldShowClear()},()=>Lt.createElement(Yn,{menu:()=>!1,disabled:()=>!1,selected:()=>!1,selectable:()=>!1,ignoreInTabOrder:()=>!1,command:()=>"clear",ariaLabel:()=>this.controller.s("shared-calculator-button-clear"),onTap:()=>this.dispatch({type:"clear-focused-expression"})},()=>this.controller.s("shared-calculator-button-clear"))),Lt.createElement(jp,{predicate:()=>!this.controller.shouldShowClear()},()=>Lt.createElement(Yn,{menu:()=>!1,disabled:()=>!this.model.canClear(),selected:()=>!1,selectable:()=>!1,ignoreInTabOrder:()=>!1,command:()=>"clear-all",ariaLabel:()=>this.controller.s("shared-calculator-button-clear-all"),onTap:()=>this.dispatch({type:"clear-all"})},()=>this.controller.s("shared-calculator-button-clear-all"))),Lt.createElement(jp,{predicate:()=>this.props.controller().getSettingsMenu()},()=>Lt.createElement(Zl,{controller:this.props.controller})))}};var ye=he(me());var td=he(me());var Bs=class extends Mi{template(){return td.createElement("div",{class:td.const("dcg-basic-keypad dcg-do-not-blur")},this.children)}};var Lo=he(me()),$a=class extends Lo.Class{template(){return Lo.createElement("div",{class:Lo.const("dcg-keypad-row")},this.children)}};var wa=he(me()),He=class extends wa.Class{template(){return wa.createElement("div",{class:()=>({"dcg-keypad-btn-container":!0,"dcg-disabled":this.isDisabled()}),style:()=>({"flex-grow":this.getColSpan()})},wa.createElement("span",{role:wa.const("button"),class:this.bindFn(this.getClasses),"dcg-command":this.props.command,"aria-label":this.bindFn(this.getAriaLabel),"aria-disabled":this.bindFn(this.isDisabled),"aria-controls":this.props.ariaControls?this.props.ariaControls:this.const(void 0),"aria-expanded":this.props.ariaExpanded?this.bindFn(this.getAriaExpanded):this.const(void 0),onTap:()=>{this.isDisabled()||this.props.onTap()}},wa.createElement("span",{class:wa.const("dcg-keypad-btn-content")},this.children)))}getClasses(){let t={"dcg-keypad-btn":!0,"dcg-keypad-btn-active":this.isActive()},r=this.props.style();switch(r){case"default":t["dcg-btn-light-on-gray"]=!0;break;case"highlight":t["dcg-btn-dark-on-gray"]=!0;break;case"popover":t["dcg-btn-light-gray"]=!0;break;case"blue":t["dcg-btn-short-blue"]=!0;break;case"tall-blue":t["dcg-btn-tall-blue"]=!0;break;default:return r}return t}isActive(){return this.props.active?this.props.active():!1}getAriaLabel(){return this.props.ariaLabel?this.props.ariaLabel():this.props.command()}getColSpan(){if(this.props.colspan)return this.props.colspan()}isDisabled(){return this.props.disabled&&this.props.disabled()}getAriaExpanded(){return this.props.ariaExpanded?this.props.ariaExpanded():void 0}};var T=he(me()),{IfElse:Fb,If:Pb,Switch:IS}=T.Components;function Me(e,t){return e===void 0?T.const(t):typeof e=="function"?e:T.const(e)}function Go(e){return(t,r,n={},a)=>T.createElement(He,{command:T.const(e.command||e.typedText||e.keys[0]),ariaLabel:()=>e.ariaLabelKey?a(e.ariaLabelKey):e.typedText||e.keys[0],colspan:Me(n.colspan,1),style:()=>n.style||"default",onTap:()=>r({type:"keypad/type-text",text:e.typedText||e.keys[0]})},Fb(()=>e.keys[0]==="{"||e.keys[0]==="[",{true:()=>T.createElement("span",{class:T.const("dcg-mq-math-mode"),style:T.const("font-size: 120%")},T.const(e.keys[0]),T.const("\xA0"),T.createElement("span",{style:T.const("color: #999")},T.const(e.keys[1]))),false:()=>T.createElement("span",{class:T.const("dcg-either-or-btn")},T.createElement(At,{config:T.const({}),latex:T.const(e.keys[0])}),T.createElement("span",{style:T.const("color: #999")},T.createElement(At,{config:T.const({}),latex:T.const(e.keys[1])})))}))}function Vo(e){return(t,r,n={},a)=>T.createElement(He,{command:T.const(e.command||e.typedText||e.keys[1]),ariaLabel:()=>e.ariaLabelKey?a(e.ariaLabelKey):e.typedText||e.keys[0],colspan:Me(n.colspan,1),style:Me(n.style,"default"),onTap:()=>r({type:"keypad/type-text",text:e.typedText||e.keys[1]})},Fb(()=>e.keys[1]==="}"||e.keys[1]==="]",{true:()=>T.createElement("span",{class:T.const("dcg-mq-math-mode"),style:T.const("font-size: 120%")},T.createElement("span",{style:T.const("color: #999")},T.const(e.keys[0])),T.const("\xA0"),T.const(e.keys[1])),false:()=>T.createElement("span",null,T.createElement("span",{style:T.const("color: #999")},T.createElement(At,{config:T.const({}),latex:T.const(e.keys[0])})),T.createElement(At,{config:T.const({}),latex:T.const(e.keys[1])}))}))}function NS(e){return(t,r,n={},a)=>T.createElement(He,{command:T.const(e.command),ariaLabel:()=>e.ariaLabelKey?a(e.ariaLabelKey):t,colspan:Me(n.colspan,1),style:()=>n.style||"default",onTap:()=>{r({type:"keypad/audio-trace",command:e.command})}},T.createElement(Pb,{predicate:T.const(e.iconClass!==void 0)},()=>T.createElement("span",{class:()=>({"dcg-button-icon":!0,"dcg-icon-only":e.contentKey===void 0})},T.createElement("i",{class:T.const(e.iconClass),"aria-hidden":T.const("true")}))),T.createElement(Pb,{predicate:T.const(e.contentKey!==void 0)},()=>T.createElement("span",null,()=>a(e.contentKey)||t)))}function q(e){return(t,r,n={},a)=>T.createElement(He,{command:T.const(e.command||t),ariaLabel:()=>e.ariaLabelKey?a(e.ariaLabelKey):t,colspan:Me(n.colspan,1),style:()=>n.style||"default",onTap:()=>r({type:"keypad/type-text",text:e.typedText||t})},T.createElement(At,{config:T.const({}),latex:T.const(e.content||t)}))}function Ob(e){return(t,r,n={},a)=>T.createElement(He,{command:T.const(e.command||t),ariaLabel:()=>e.ariaLabelKey?a(e.ariaLabelKey):t,colspan:Me(n.colspan,1),style:()=>n.style||"default",onTap:()=>r({type:"keypad/type-text",text:e.typedText||t})},T.createElement("span",{class:T.const("dcg-mq-math-mode")},T.const(e.content||t)))}function U(e){return(t,r,n={},a)=>T.createElement(He,{command:T.const(t),ariaLabel:()=>e.ariaLabelKey?a(e.ariaLabelKey):t,colspan:Me(n.colspan,1),style:()=>n.style||"default",onTap:()=>r({type:"keypad/type-text",text:t+"("})},T.createElement(IS,{key:()=>t.match(/^[a-z]{2,}$/)},c=>c?T.createElement("span",{class:T.const("dcg-mq-math-mode dcg-static-mathquill-view")},T.createElement("span",{class:T.const("dcg-mq-root-block")},T.createElement("span",{class:T.const("dcg-mq-operator-name")},()=>t))):T.createElement(At,{config:T.const({}),latex:T.const(t)})))}function er(e){return(t,r,n={},a)=>T.createElement(He,{command:T.const(e.command),ariaLabel:()=>e.ariaLabelKey?a(e.ariaLabelKey):e.command,colspan:Me(n.colspan,1),style:()=>n.style||"default",onTap:()=>{r({type:"keypad/custom-command",command:e.command})}},T.createElement(At,{config:T.const({}),latex:T.const(e.content)}))}var PS={"{":Ob({ariaLabelKey:"shared-calculator-narration-keypad-key-left-bracket"}),"}":Ob({ariaLabelKey:"shared-calculator-narration-keypad-key-right-bracket"}),"(":q({ariaLabelKey:"shared-calculator-narration-keypad-key-left-paren"}),")":q({ariaLabelKey:"shared-calculator-narration-keypad-key-right-paren"}),sqrt:q({content:"\\sqrt{}",ariaLabelKey:"shared-calculator-narration-keypad-key-sqrt"}),"/":q({ariaLabelKey:"shared-calculator-narration-keypad-key-divide"}),division:q({content:"\xF7",typedText:"/",command:"/",ariaLabelKey:"shared-calculator-narration-keypad-key-divide"}),obelus:q({content:"\xF7",typedText:"\xF7",ariaLabelKey:"shared-calculator-narration-keypad-key-divide"}),"*":q({ariaLabelKey:"shared-calculator-narration-keypad-key-times"}),multiplication:q({content:"\xD7",typedText:"*",command:"*",ariaLabelKey:"shared-calculator-narration-keypad-key-times"}),"\xB1":q({ariaLabelKey:"shared-calculator-narration-keypad-plus-minus"}),"-":q({ariaLabelKey:"shared-calculator-narration-keypad-key-minus"}),"+":q({ariaLabelKey:"shared-calculator-narration-keypad-key-plus"}),".":q({ariaLabelKey:"shared-calculator-narration-keypad-key-decimal"}),ans:(e,t,r={},n)=>T.createElement(He,{command:T.const(e),ariaLabel:()=>n("shared-calculator-narration-keypad-key-ans"),colspan:Me(r.colspan,1),style:()=>r.style||"default",onTap:()=>t({type:"keypad/type-text",text:e})},T.const("ans")),enter:(e,t,r={},n)=>T.createElement(He,{command:T.const(e),ariaLabel:()=>n("shared-calculator-narration-keypad-key-enter"),colspan:Me(r.colspan,1),style:()=>r.style||"default",onTap:()=>t({type:"keypad/press-key",key:"Enter"})},T.createElement("i", { class: T.const("fa-solid fa-reply"), "aria-hidden": T.const("true") })),shift:(e,t,r={},n)=>T.createElement(He,{command:T.const(e),ariaLabel:()=>n("shared-calculator-narration-keypad-key-shift"),colspan:Me(r.colspan,1),style:()=>r.style||"default",active:Me(r.active,!1),onTap:()=>t({type:"keypad/shift"})},T.createElement("i",{class:T.const("dcg-icon-shift"),"aria-hidden":T.const("true")})),left:(e,t,r={},n)=>T.createElement(He,{command:T.const(e),ariaLabel:()=>n("shared-calculator-narration-keypad-key-left-arrow"),colspan:Me(r.colspan,1),style:()=>r.style||"default",onTap:()=>t({type:"keypad/press-key",key:"Left"})},T.createElement("i", { class: T.const("fa-solid fa-left-long"), "aria-hidden": T.const("true") })),right:(e,t,r={},n)=>T.createElement(He,{command:T.const(e),ariaLabel:()=>n("shared-calculator-narration-keypad-key-right-arrow"),colspan:Me(r.colspan,1),style:()=>r.style||"default",onTap:()=>t({type:"keypad/press-key",key:"Right"})},T.createElement("i", { class: T.const("fa-solid fa-right-long"), "aria-hidden": T.const("true") })),123:(e,t,r={},n)=>T.createElement(He,{command:T.const(e),ariaLabel:()=>n("shared-calculator-narration-keypad-key-toggle-numbers"),colspan:Me(r.colspan,1),style:()=>r.style||"default",onTap:()=>t({type:"keypad/123"})},T.const("1 2 3")),ABC:(e,t,r={},n)=>T.createElement(He,{command:T.const(e),ariaLabel:()=>n("shared-calculator-narration-keypad-key-toggle-letters"),colspan:Me(r.colspan,1),style:()=>r.style||"default",onTap:()=>t({type:"keypad/abc"})},T.const("A B C")),Audio:(e,t,r={},n)=>T.createElement(He,{command:T.const(e),ariaLabel:()=>n("shared-calculator-narration-keypad-key-toggle-audio-trace"),colspan:Me(r.colspan,1),style:()=>r.style||"default",onTap:()=>t({type:"keypad/audio-trace",command:"on"})},T.createElement("i",{class:T.const("dcg-icon-volume"),"aria-hidden":T.const("true")})),backspace:(e,t,r={},n)=>T.createElement(He,{command:T.const(e),ariaLabel:()=>n("shared-calculator-narration-keypad-key-backspace"),colspan:Me(r.colspan,1),style:()=>r.style||"default",onTap:()=>t({type:"keypad/press-key",key:"Backspace"})},T.createElement("i", { class: T.const("fa-solid fa-delete-left"), "aria-hidden": T.const("true") })),pi:q({content:"\\pi",ariaLabelKey:"shared-calculator-narration-keypad-key-pi"}),alpha:q({content:"\\alpha",ariaLabelKey:"shared-calculator-narration-keypad-key-alpha"}),beta:q({content:"\\beta",ariaLabelKey:"shared-calculator-narration-keypad-key-beta"}),theta:q({content:"\\theta",ariaLabelKey:"shared-calculator-narration-keypad-key-theta"}),tau:q({content:"\\tau",ariaLabelKey:"shared-calculator-narration-keypad-key-tau"}),"a^2":er({command:"a^2",content:"a^2",ariaLabelKey:"shared-calculator-narration-keypad-key-squared"}),"a^3":er({command:"a^3",content:"a^3",ariaLabelKey:"shared-calculator-narration-keypad-key-cubed"}),"x^3":er({command:"a^3",content:"x^3",ariaLabelKey:"shared-calculator-narration-keypad-key-cubed"}),"a^b":q({content:"a^b",typedText:"^",ariaLabelKey:"shared-calculator-narration-keypad-key-superscript"}),a_b:q({content:"a_b",typedText:"_",ariaLabelKey:"shared-calculator-narration-keypad-key-subscript"}),"a/b":er({content:"\\frac{a}{b}",command:"a/b",ariaLabelKey:"shared-calculator-narration-keypad-key-fraction"}),"x^2":er({command:"a^2",content:"x^2",ariaLabelKey:"shared-calculator-narration-keypad-key-squared"}),"x^y":q({content:"x^y",typedText:"^",ariaLabelKey:"shared-calculator-narration-keypad-key-superscript"}),"x/y":q({content:"\\frac{x}{y}",typedText:"/",ariaLabelKey:"shared-calculator-narration-keypad-key-fraction"}),nthroot:er({command:"nthroot",content:"\\sqrt[n]{}",ariaLabelKey:"shared-calculator-narration-keypad-key-nthroot"}),ythroot:er({command:"nthroot",content:"\\sqrt[y]{}",ariaLabelKey:"shared-calculator-narration-keypad-key-ythroot"}),sin:U({ariaLabelKey:"shared-calculator-narration-keypad-key-sin"}),cos:U({ariaLabelKey:"shared-calculator-narration-keypad-key-cos"}),tan:U({ariaLabelKey:"shared-calculator-narration-keypad-key-tan"}),sec:U({ariaLabelKey:"shared-calculator-narration-keypad-key-sec"}),csc:U({ariaLabelKey:"shared-calculator-narration-keypad-key-csc"}),cot:U({ariaLabelKey:"shared-calculator-narration-keypad-key-cot"}),sinh:U({ariaLabelKey:"shared-calculator-narration-keypad-key-sinh"}),cosh:U({ariaLabelKey:"shared-calculator-narration-keypad-key-cosh"}),tanh:U({ariaLabelKey:"shared-calculator-narration-keypad-key-tanh"}),sech:U({ariaLabelKey:"shared-calculator-narration-keypad-key-csch"}),csch:U({ariaLabelKey:"shared-calculator-narration-keypad-key-csch"}),coth:U({ariaLabelKey:"shared-calculator-narration-keypad-key-coth"}),arcsin:er({command:"arcsin",content:"sin^{-1}",ariaLabelKey:"shared-calculator-narration-keypad-key-arcsin"}),arccos:er({command:"arccos",content:"cos^{-1}",ariaLabelKey:"shared-calculator-narration-keypad-key-arccos"}),arctan:er({command:"arctan",content:"tan^{-1}",ariaLabelKey:"shared-calculator-narration-keypad-key-arctan"}),arccsc:er({command:"arccsc",content:"csc^{-1}",ariaLabelKey:"shared-calculator-narration-keypad-key-arccsc"}),arcsec:er({command:"arcsec",content:"sec^{-1}",ariaLabelKey:"shared-calculator-narration-keypad-key-arcsec"}),arccot:er({command:"arccot",content:"cot^{-1}",ariaLabelKey:"shared-calculator-narration-keypad-key-arccot"}),"|a|":q({typedText:"|",ariaLabelKey:"shared-calculator-narration-keypad-key-abs"}),"|x|":q({typedText:"|",ariaLabelKey:"shared-calculator-narration-keypad-key-abs"}),ln:U({ariaLabelKey:"shared-calculator-narration-keypad-key-ln"}),midpoint:U({ariaLabelKey:"shared-calculator-narration-keypad-key-midpoint"}),segment:U({ariaLabelKey:"shared-calculator-narration-keypad-key-segment"}),line:U({ariaLabelKey:"shared-calculator-narration-keypad-key-line"}),ray:U({ariaLabelKey:"shared-calculator-narration-keypad-key-ray"}),parallel:U({ariaLabelKey:"shared-calculator-narration-keypad-key-parallel"}),perpendicular:U({ariaLabelKey:"shared-calculator-narration-keypad-key-perpendicular"}),circle:U({ariaLabelKey:"shared-calculator-narration-keypad-key-circle"}),arc:U({ariaLabelKey:"shared-calculator-narration-keypad-key-arc"}),angle:U({ariaLabelKey:"shared-calculator-narration-keypad-key-angle"}),directedangle:U({ariaLabelKey:"shared-calculator-narration-keypad-key-directed-angle"}),glider:U({ariaLabelKey:"shared-calculator-narration-keypad-key-glider"}),coterminal:U({ariaLabelKey:"shared-calculator-narration-keypad-key-coterminal"}),supplement:U({ariaLabelKey:"shared-calculator-narration-keypad-key-supplement"}),dilate:U({ariaLabelKey:"shared-calculator-narration-keypad-key-dilate"}),rotate:U({ariaLabelKey:"shared-calculator-narration-keypad-key-rotate"}),translate:U({ariaLabelKey:"shared-calculator-narration-keypad-key-translate"}),reflect:U({ariaLabelKey:"shared-calculator-narration-keypad-key-reflect"}),vertices:U({ariaLabelKey:"shared-calculator-narration-keypad-key-vertices"}),angles:U({ariaLabelKey:"shared-calculator-narration-keypad-key-angles"}),directedangles:U({ariaLabelKey:"shared-calculator-narration-keypad-key-directed-angles"}),segments:U({ariaLabelKey:"shared-calculator-narration-keypad-key-segments"}),radius:U({ariaLabelKey:"shared-calculator-narration-keypad-key-radius"}),center:U({ariaLabelKey:"shared-calculator-narration-keypad-key-center"}),intersection:U({ariaLabelKey:"shared-calculator-narration-keypad-key-intersection"}),area:U({ariaLabelKey:"shared-calculator-narration-keypad-key-area"}),perimeter:U({ariaLabelKey:"shared-calculator-narration-keypad-key-perimeter"}),log:U({ariaLabelKey:"shared-calculator-narration-keypad-key-log"}),quantile:U({ariaLabelKey:"shared-calculator-narration-keypad-key-quantile"}),quartile:U({ariaLabelKey:"shared-calculator-narration-keypad-key-quartile"}),var:U({}),varp:U({}),nCr:U({}),loga:er({command:"loga",content:"log_a",ariaLabelKey:"shared-calculator-narration-keypad-key-loga"}),stdev:U({ariaLabelKey:"shared-calculator-narration-keypad-key-stdev"}),mad:U({}),nPr:U({}),total:U({}),count:U({}),length:U({}),for:U({}),min:U({}),max:U({}),cov:U({ariaLabelKey:"shared-calculator-narration-keypad-key-cov"}),covp:U({ariaLabelKey:"shared-calculator-narration-keypad-key-covp"}),corr:U({ariaLabelKey:"shared-calculator-narration-keypad-key-corr"}),spearman:U({ariaLabelKey:"shared-calculator-narration-keypad-key-spearman"}),stats:U({ariaLabelKey:"shared-calculator-narration-keypad-key-stats"}),polygon:U({ariaLabelKey:"shared-calculator-narration-keypad-key-polygon"}),distance:U({ariaLabelKey:"shared-calculator-narration-keypad-key-distance"}),triangle:U({ariaLabelKey:"shared-calculator-narration-keypad-key-triangle"}),sphere:U({ariaLabelKey:"shared-calculator-narration-keypad-key-sphere"}),vector:U({ariaLabelKey:"shared-calculator-narration-keypad-key-vector"}),mean:U({ariaLabelKey:"shared-calculator-narration-keypad-key-mean"}),stdevp:U({ariaLabelKey:"shared-calculator-narration-keypad-key-stdevp"}),mod:U({}),"e^x":q({typedText:"e^",ariaLabelKey:"shared-calculator-narration-keypad-key-exp"}),"10^n":q({content:"\\times10^{n}",typedText:"*10^",ariaLabelKey:"shared-calculator-narration-keypad-key-10-n"}),"a^{-1}":q({typedText:"^-1",ariaLabelKey:"shared-calculator-narration-keypad-key-reciprocal"}),sum:q({content:"\\sum",ariaLabelKey:"shared-calculator-narration-keypad-key-sum"}),prod:q({content:"\\prod",ariaLabelKey:"shared-calculator-narration-keypad-key-product"}),floor:U({ariaLabelKey:"shared-calculator-narration-keypad-key-floor"}),ceil:U({ariaLabelKey:"shared-calculator-narration-keypad-key-ceil"}),round:U({ariaLabelKey:"shared-calculator-narration-keypad-key-round"}),abs:U({ariaLabelKey:"shared-calculator-narration-keypad-key-abs"}),"!":q({ariaLabelKey:"shared-calculator-narration-keypad-key-factorial"}),"n!":q({typedText:"!",ariaLabelKey:"shared-calculator-narration-keypad-key-factorial"}),median:U({ariaLabelKey:"shared-calculator-narration-keypad-key-median"}),lcm:U({}),gcd:U({}),gcf:U({}),ddx:er({command:"ddx",content:"\\frac{d}{dx}"}),integral:er({command:"integral",content:"\\int",ariaLabelKey:"shared-calculator-narration-keypad-key-int"}),"%":q({content:"\\%",ariaLabelKey:"shared-calculator-narration-keypad-key-percent-of"}),"->":q({content:"\\to",ariaLabelKey:"shared-calculator-narration-keypad-key-action-to"}),with:q({typedText:"with",content:"with",ariaLabelKey:"shared-calculator-narration-keypad-key-action-with"}),prime:q({typedText:"'",content:"f'",ariaLabelKey:"shared-calculator-narration-keypad-key-prime"}),exp:q({}),sign:U({}),normaldist:U({ariaLabelKey:"shared-calculator-narration-keypad-key-normaldist"}),poissondist:U({ariaLabelKey:"shared-calculator-narration-keypad-key-poissondist"}),binomialdist:U({ariaLabelKey:"shared-calculator-narration-keypad-key-binomialdist"}),uniformdist:U({ariaLabelKey:"shared-calculator-narration-keypad-key-uniformdist"}),erf:U({ariaLabelKey:"shared-calculator-narration-keypad-key-erf"}),histogram:U({ariaLabelKey:"shared-calculator-narration-keypad-key-histogram"}),boxplot:U({ariaLabelKey:"shared-calculator-narration-keypad-key-boxplot"}),dotplot:U({ariaLabelKey:"shared-calculator-narration-keypad-key-dotplot"}),tscore:U({ariaLabelKey:"shared-calculator-narration-keypad-key-tscore"}),ittest:U({ariaLabelKey:"shared-calculator-narration-keypad-key-ittest"}),ttest:U({ariaLabelKey:"shared-calculator-narration-keypad-key-ttest"}),tdist:U({ariaLabelKey:"shared-calculator-narration-keypad-key-tdist"}),pdf:U({ariaLabelKey:"shared-calculator-narration-keypad-key-pdf"}),cdf:U({ariaLabelKey:"shared-calculator-narration-keypad-key-pdf"}),random:U({ariaLabelKey:"shared-calculator-narration-keypad-key-random"}),inversecdf:U({ariaLabelKey:"shared-calculator-narration-keypad-key-inversecdf"}),hsv:U({}),rgb:U({}),sort:U({}),shuffle:U({}),unique:U({}),join:U({}),"A^-1":er({command:"A^-1",content:"A^{-1}",ariaLabelKey:"matrix-calculator-narration-keypad-key-inverse"}),"A^T":er({command:"A^T",content:"A^T",ariaLabelKey:"matrix-calculator-narration-keypad-key-transpose"}),"A^2":er({command:"A^2",content:"A^2",ariaLabelKey:"shared-calculator-narration-keypad-key-squared"}),"A^n":q({content:"A^n",typedText:"^",ariaLabelKey:"shared-calculator-narration-keypad-key-exp"}),det:U({ariaLabelKey:"matrix-calculator-narration-keypad-key-det"}),trace:U({ariaLabelKey:"matrix-calculator-narration-keypad-key-trace"}),rref:U({ariaLabelKey:"matrix-calculator-narration-keypad-key-rref"}),a:q({}),b:q({}),c:q({}),d:q({}),e:q({}),f:q({}),g:q({}),h:q({}),i:q({}),j:q({}),k:q({}),l:q({}),m:q({}),n:q({}),o:q({}),p:q({}),q:q({}),r:q({}),s:q({}),t:q({}),u:q({}),v:q({}),w:q({}),x:q({}),boldX:q({content:"x",typedText:"x"}),y:q({}),boldY:q({content:"y",typedText:"y"}),z:q({}),boldZ:q({content:"z",typedText:"z"}),A:q({}),B:q({}),C:q({}),D:q({}),E:q({}),F:q({}),G:q({}),H:q({}),I:q({}),J:q({}),K:q({}),L:q({}),M:q({}),N:q({}),O:q({}),P:q({}),Q:q({}),R:q({}),S:q({}),T:q({}),U:q({}),V:q({}),W:q({}),X:q({}),Y:q({}),Z:q({}),0:q({}),1:q({}),2:q({}),3:q({}),4:q({}),5:q({}),6:q({}),7:q({}),8:q({}),9:q({}),",":q({}),"=":q({}),"[":q({}),"]":q({}),"{}_left":Go({keys:["{","}"]}),"{}_right":Vo({keys:["{","}"]}),"()_left":Go({keys:["(",")"]}),"()_right":Vo({keys:["(",")"]}),"[]_left":Go({keys:["[","]"]}),"[]_right":Vo({keys:["[","]"]}),",'_left":Go({keys:[",","\u2032"]}),",'_right":Vo({keys:[",","\u2032"],typedText:"'"}),'"':q({}),"'":q({}),"~":q({}),":":q({}),">":q({}),"<":q({}),">=":q({content:"\\ge"}),"<=":q({content:"\\le"}),"!%_left":Go({keys:["!","{}^{%}"]}),"!%_right":Vo({keys:["!","{}^{%}"],typedText:"%"}),"~:_left":Go({keys:["~","{}^{:}"]}),"~:_right":Vo({keys:["~","{}^{:}"],typedText:":"}),"audio-trace-off":NS({contentKey:"graphing-calculator-button-keypad-audio-trace-off",command:"off"}),"hear-graph":(e,t,r={},n)=>T.createElement(He,{command:T.const(e),disabled:Me(r.disabled,!1),colspan:Me(r.colspan,1),style:Me(r.style,"blue"),ariaLabel:T.const(void 0),onTap:()=>{t({type:"keypad/audio-trace",command:"hear-graph"})}},T.createElement("span",{class:T.const("dcg-play-icon-container")},T.createElement("i",{class:T.const("dcg-icon-play"),"aria-hidden":T.const("true")})),T.createElement("span",null,()=>n("graphing-calculator-button-audio-trace-hear-graph"))),"stop-graph":(e,t,r={},n)=>T.createElement(He,{command:T.const(e),disabled:Me(r.disabled,!1),colspan:Me(r.colspan,1),style:Me(r.style,"blue"),onTap:()=>{t({type:"keypad/audio-trace",command:"stop-graph"})}},T.createElement("span",{class:T.const("dcg-stop-icon-container")},T.createElement("span",{class:T.const("dcg-stop-icon")})),T.createElement("span",null,()=>n("graphing-calculator-button-audio-trace-stop-graph"))),"volume-down":(e,t,r={},n)=>T.createElement(He,{command:T.const(e),ariaLabel:()=>n("graphing-calculator-narration-keypad-key-volume-down"),disabled:Me(r.disabled,!1),style:()=>r.style||"default",onTap:()=>t({type:"keypad/audio-trace",command:"volume-down"})},T.createElement("span",{class:T.const("dcg-button-icon dcg-icon-only")},T.createElement("i",{class:T.const("dcg-icon-volume-down"),"aria-hidden":T.const("true")}))),"volume-up":(e,t,r={},n)=>T.createElement(He,{command:T.const(e),ariaLabel:()=>n("graphing-calculator-narration-keypad-key-volume-up"),disabled:Me(r.disabled,!1),style:()=>r.style||"default",onTap:()=>t({type:"keypad/audio-trace",command:"volume-up"})},T.createElement("span",{class:T.const("dcg-button-icon dcg-icon-only")},T.createElement("i",{class:T.const("dcg-icon-volume-up"),"aria-hidden":T.const("true")}))),"speed-down":(e,t,r={},n)=>T.createElement(He,{command:T.const(e),ariaLabel:()=>n("graphing-calculator-narration-keypad-key-speed-down"),disabled:Me(r.disabled,!1),style:()=>r.style||"default",onTap:()=>t({type:"keypad/audio-trace",command:"speed-down"})},T.createElement("span",{class:T.const("dcg-button-icon dcg-icon-only")},T.createElement("i",{class:T.const("dcg-icon-hide"),"aria-hidden":T.const("true")}))),"speed-up":(e,t,r={},n)=>T.createElement(He,{command:T.const(e),ariaLabel:()=>n("graphing-calculator-narration-keypad-key-speed-up"),disabled:Me(r.disabled,!1),style:()=>r.style||"default",onTap:()=>t({type:"keypad/audio-trace",command:"speed-up"})},T.createElement("span",{class:T.const("dcg-button-icon dcg-icon-only")},T.createElement("i",{class:T.const("dcg-icon-show"),"aria-hidden":T.const("true")}))),"previous-point":(e,t,r={},n)=>T.createElement(He,{ariaLabel:()=>n("graphing-calculator-narration-keypad-key-previous-point"),command:T.const(e),disabled:Me(r.disabled,!1),colspan:Me(r.colspan,1),style:()=>r.style||"default",onTap:()=>t({type:"keypad/audio-trace",command:"previous-point"})},T.createElement("span",{class:T.const("dcg-button-icon dcg-icon-only")},T.createElement("i",{class:T.const("dcg-icon-thin-arrow-left"),"aria-hidden":T.const("true")}))),"next-point":(e,t,r={},n)=>T.createElement(He,{ariaLabel:()=>n("graphing-calculator-narration-keypad-key-next-point"),command:T.const(e),disabled:Me(r.disabled,!1),colspan:Me(r.colspan,1),style:()=>r.style||"default",onTap:()=>t({type:"keypad/audio-trace",command:"next-point"})},T.createElement("span",{class:T.const("dcg-button-icon dcg-icon-only")},T.createElement("i",{class:T.const("dcg-icon-thin-arrow-right"),"aria-hidden":T.const("true")}))),"previous-poi":(e,t,r={},n)=>T.createElement(He,{ariaLabel:()=>n("graphing-calculator-narration-keypad-key-previous-poi"),command:T.const(e),disabled:Me(r.disabled,!1),colspan:Me(r.colspan,1),style:()=>r.style||"default",onTap:()=>t({type:"keypad/audio-trace",command:"previous-poi"})},T.createElement("span",{class:T.const("dcg-button-icon dcg-icon-only")},T.createElement("i",{class:T.const("dcg-icon-hide"),"aria-hidden":T.const("true")}))),"next-poi":(e,t,r={},n)=>T.createElement(He,{ariaLabel:()=>n("graphing-calculator-narration-keypad-key-next-poi"),command:T.const(e),disabled:Me(r.disabled,!1),colspan:Me(r.colspan,1),style:()=>r.style||"default",onTap:()=>t({type:"keypad/audio-trace",command:"next-poi"})},T.createElement("span",{class:T.const("dcg-button-icon dcg-icon-only")},T.createElement("i",{class:T.const("dcg-icon-show"),"aria-hidden":T.const("true")}))),"previous-curve":(e,t,r={},n)=>T.createElement(He,{ariaLabel:()=>n("graphing-calculator-narration-keypad-key-previous-curve"),command:T.const(e),disabled:Me(r.disabled,!1),colspan:Me(r.colspan,1),style:()=>r.style||"default",onTap:()=>t({type:"keypad/audio-trace",command:"previous-curve"})},T.createElement("span",{class:T.const("dcg-button-icon dcg-icon-only")},T.createElement("i",{class:T.const("dcg-icon-caret-up"),"aria-hidden":T.const("true")}))),"next-curve":(e,t,r={},n)=>T.createElement(He,{ariaLabel:()=>n("graphing-calculator-narration-keypad-key-next-curve"),command:T.const(e),disabled:Me(r.disabled,!1),style:()=>r.style||"default",onTap:()=>t({type:"keypad/audio-trace",command:"next-curve"})},T.createElement("span",{class:T.const("dcg-button-icon dcg-icon-only")},T.createElement("i",{class:T.const(""),"aria-hidden":T.const("true")})))};function Ae(e,t,r={}){let n=e.dispatch;return PS[t](t,n,r,e.s)}function Li(e=1){return T.createElement("div",{style:T.const(`flex-grow:${e}`)})}var Le=he(me());var Us=class extends mt{template(){return Le.createElement("div",{class:Le.const("dcg-edit-matrix-bar dcg-do-not-blur"),role:Le.const("toolbar"),"aria-label":()=>this.controller.s("matrix-calculator-narration-resize-controls")},Le.createElement("div",{class:Le.const("dcg-edit-section-title")},()=>this.controller.s("matrix-calculator-heading-edit-matrix",{variable:this.getItem().variable})),Le.createElement("div",{class:Le.const("dcg-resize-section")},Le.createElement(Io,{id:()=>this.props.id(),op:Le.const("remove-matrix-row"),ariaLabel:()=>this.controller.s("matrix-calculator-narration-remove-row"),iconClass:Le.const("dcg-icon-minus"),controller:()=>this.props.controller()}),Le.createElement("span",{class:Le.const("dcg-resize-info")},Le.createElement("span",{class:Le.const("dcg-resize-category")},()=>this.controller.s("matrix-calculator-label-rows")),Le.createElement("span",{class:Le.const("dcg-resize-count")},()=>this.numRows())),Le.createElement(Io,{id:()=>this.props.id(),op:Le.const("add-matrix-row"),ariaLabel:()=>this.controller.s("matrix-calculator-narration-add-row"),iconClass:Le.const("dcg-icon-plus"),controller:()=>this.props.controller()})),Le.createElement("div",{class:Le.const("dcg-resize-section")},Le.createElement(Io,{id:()=>this.props.id(),op:Le.const("remove-matrix-col"),ariaLabel:()=>this.controller.s("matrix-calculator-narration-remove-column"),iconClass:Le.const("dcg-icon-minus"),controller:()=>this.props.controller()}),Le.createElement("span",{class:Le.const("dcg-resize-info")},Le.createElement("span",{class:Le.const("dcg-resize-category")},()=>this.controller.s("matrix-calculator-label-columns")),Le.createElement("span",{class:Le.const("dcg-resize-count")},()=>this.numCols())),Le.createElement(Io,{id:()=>this.props.id(),op:Le.const("add-matrix-col"),ariaLabel:()=>this.controller.s("matrix-calculator-narration-add-column"),iconClass:Le.const("dcg-icon-plus"),controller:()=>this.props.controller()})))}numRows(){return this.getItem().matrix.length}numCols(){let t=this.getItem().matrix;return t.length===0?0:t[0].length}getItem(){return this.model.getExpressionById(this.props.id())}},Io=class extends mt{template(){return Le.createElement("span",{class:()=>({"dcg-resize-action":!0,"dcg-disabled":this.isDisabled()}),tabindex:()=>this.isDisabled()?-1:0,onTap:()=>{this.isDisabled()||this.controller.dispatch({type:this.props.op(),id:this.props.id()})},onMount:t=>this.didMountRoot(t),onFocusin:t=>this.onFocusEvent(t),onFocusout:t=>this.onFocusEvent(t),onKeydown:t=>this.onKey(t),role:Le.const("button"),"aria-label":()=>this.props.ariaLabel(),"aria-disabled":()=>this.isDisabled(),"dcg-command":()=>this.props.op()},Le.createElement("i",{class:()=>this.props.iconClass(),"aria-hidden":Le.const("true")}))}didMountRoot(t){this.root=t,this.shouldBeFocused()&&!this.isFocused()&&this.root.focus()}didUpdate(){this.shouldBeFocused()&&!this.isFocused()&&this.root.focus()}onFocusEvent(t){let r=this.isFocused();r!==this.shouldBeFocused()&&this.controller.dispatch({type:r?"focus-resize-button":"blur-resize-button",id:this.props.id(),op:this.props.op()})}shouldBeFocused(){return this.model.isResizeButtonFocused(this.props.id(),this.props.op())}isDisabled(){return this.model.isResizeOpDisabled(this.props.id(),this.props.op())}isFocused(){return!!(document.activeElement&&this.root.contains(document.activeElement))}onKey(t){t.key==="Tab"&&this.controller.dispatch({type:"edit-bar/press-key",key:t.key,evt:t})}};var{If:Ct}=ye.Components,rd=class extends mt{template(){return ye.createElement("div",{role:ye.const("region"),"aria-label":()=>this.controller.s("shared-calculator-narration-keypad"),class:ye.const("dcg-basic-keypad-container")},ye.createElement(Bs,{controller:this.props.controller},ye.createElement($a,null,ye.createElement(Ct,{predicate:this.bindFn(this.shouldShowEditMatrixBar)},()=>Li(4)),ye.createElement(Ct,{predicate:this.bindFn(this.showBtn)},()=>Ae(this,"A")),ye.createElement(Ct,{predicate:this.bindFn(this.showBtn)},()=>Ae(this,"B")),ye.createElement(Ct,{predicate:this.bindFn(this.showBtn)},()=>Ae(this,"C")),ye.createElement(Ct,{predicate:this.bindFn(this.showBtn)},()=>Ae(this,"D")),ye.createElement("div",{class:ye.const("dcg-partition-placeholder")}),Ae(this,"7",{style:"highlight"}),Ae(this,"8",{style:"highlight"}),Ae(this,"9",{style:"highlight"}),Ae(this,"division"),ye.createElement("div",{class:ye.const("dcg-partition-placeholder")}),Ae(this,"("),Ae(this,")")),ye.createElement($a,null,ye.createElement(Ct,{predicate:this.bindFn(this.shouldShowEditMatrixBar)},()=>Li(4)),ye.createElement(Ct,{predicate:this.bindFn(this.showBtn)},()=>Ae(this,"E")),ye.createElement(Ct,{predicate:this.bindFn(this.showBtn)},()=>Ae(this,"F")),ye.createElement(Ct,{predicate:this.bindFn(this.showBtn)},()=>Ae(this,"G")),ye.createElement(Ct,{predicate:this.bindFn(this.showBtn)},()=>Ae(this,"H")),ye.createElement("div",{class:ye.const("dcg-partition-placeholder")}),Ae(this,"4",{style:"highlight"}),Ae(this,"5",{style:"highlight"}),Ae(this,"6",{style:"highlight"}),Ae(this,"multiplication"),ye.createElement("div",{class:ye.const("dcg-partition-placeholder")}),Ae(this,"left",{style:"highlight"}),Ae(this,"right",{style:"highlight"})),ye.createElement($a,null,ye.createElement(Ct,{predicate:this.bindFn(this.shouldShowEditMatrixBar)},()=>Li(4)),ye.createElement(Ct,{predicate:this.bindFn(this.showBtn)},()=>Ae(this,"A^2")),ye.createElement(Ct,{predicate:this.bindFn(this.showBtn)},()=>Ae(this,"A^-1")),ye.createElement(Ct,{predicate:this.bindFn(this.showBtn)},()=>Ae(this,"A^T")),ye.createElement(Ct,{predicate:this.bindFn(this.showBtn)},()=>Ae(this,"A^n")),ye.createElement("div",{class:ye.const("dcg-partition-placeholder")}),Ae(this,"1",{style:"highlight"}),Ae(this,"2",{style:"highlight"}),Ae(this,"3",{style:"highlight"}),Ae(this,"+"),ye.createElement("div",{class:ye.const("dcg-partition-placeholder")}),Li(.5),Ae(this,"backspace",{style:"highlight",colspan:1.5})),ye.createElement($a,null,ye.createElement(Ct,{predicate:this.bindFn(this.shouldShowEditMatrixBar)},()=>Li(4)),ye.createElement(Ct,{predicate:this.bindFn(this.showBtn)},()=>Ae(this,"rref")),ye.createElement(Ct,{predicate:this.bindFn(this.showBtn)},()=>Ae(this,"det")),ye.createElement(Ct,{predicate:()=>!this.controller.isNarrow()&&this.showBtn()},()=>Ae(this,"trace")),ye.createElement(Ct,{predicate:()=>!this.controller.isNarrow()&&this.showBtn()},()=>Li(1)),ye.createElement(Ct,{predicate:()=>this.controller.isNarrow()&&this.showBtn()},()=>Ae(this,"trace",{colspan:2})),ye.createElement("div",{class:ye.const("dcg-partition-placeholder")}),Ae(this,"0",{style:"highlight"}),Ae(this,".",{style:"highlight"}),Ae(this,"sqrt"),Ae(this,"-"),ye.createElement("div",{class:ye.const("dcg-partition-placeholder")}),Ae(this,"enter",{style:"blue",colspan:2}))),ye.createElement(Ct,{predicate:()=>this.shouldShowEditMatrixBar()},()=>ye.createElement(Us,{id:()=>this.model.getIdOfFocus(),controller:this.props.controller})))}showBtn(){return!this.shouldShowEditMatrixBar()}shouldShowEditMatrixBar(){let e=this.model.getIdOfFocus();return e===void 0?!1:this.model.getExpressionById(e).type==="matrix"}};var Ir=he(me());dr();var FS=document.location.href.indexOf("dcgDebugTouchTracking=dcgYES")!==-1,za,No;window._touchtracking_id_counter==null&&(window._touchtracking_id_counter=0);window._touchtracking_id_counter+=1;var zs="touchtracking_id_"+window._touchtracking_id_counter,bt=function(e){No&&(No.value="("+Date.now()+") "+e+`
`+No.value)};function id(e){if(e.classList.add("dcg-tap-container",zs),FS){za&&za.remove(),za=document.createElement("div"),da(za,{position:"absolute",bottom:"10px",right:"10px"});let t=document.createElement("textarea");t.setAttribute("rows","30"),t.setAttribute("cols","40"),za.append(t);let r=document.createElement("div");r.id="dcg-touchtracking-debug-copy",r.classList.add("dcg-btn-blue"),r.innerText="COPY LOGS",za.append(r),No=za.querySelector("textarea"),e.append(za),r.addEventListener("mousedown",function(){No&&(No.select(),document.execCommand("copy"))},!0),bt("monitor touches")}}var Ks=0,hn=1,Ws=2,Po=3,ka=4,Ve=Ks,Yp={},An={},va=[],Jp=0,$s=null,ad=null,Gi=!1,nd=null,_b=Gi,Ka=function(e){e.type.startsWith("key")?Gi=!0:e.type.startsWith("pointer")&&(Gi=!1);let t=document.activeElement;t&&!t.closest(".dcg-tap-container."+zs)&&(t=null),t!==nd?(nd&&nd.classList.remove("dcg-focus-visible"),t&&Gi&&t.classList.add("dcg-focus-visible")):_b!==Gi&&t&&(Gi?t.classList.add("dcg-focus-visible"):t.classList.remove("dcg-focus-visible")),_b=Gi,nd=t};document.addEventListener("keydown",Ka,{capture:!0});document.addEventListener("keydown",Ka);document.addEventListener("pointerdown",Ka);document.addEventListener("pointerdown",Ka,{capture:!0});document.addEventListener("focusin",Ka,{capture:!0});document.addEventListener("focusin",Ka);document.addEventListener("focusout",Ka,{capture:!0});document.addEventListener("focusout",Ka);var Rb,_r=[],Qp=function(e){if(!(e instanceof Element))return[];let t=e.closest(".dcg-tap-container."+zs);if(!t)return[];let r=e,n=[];for(;r;){if(n.push(r),r===t)return n;r=r.parentNode}return[]},od=function(e,t){ad=null,Ve=e,bt("beginMode:"+Ve),Ve===hn?va=Qp(t.originalEvent.touches[0].target):va=Qp(t.target),va.forEach(r=>{r.classList.add("dcg-depressed"),$b(r)&&r.classList.add("dcg-focus-by-tap")}),va.forEach(function(r){let n=ee(r);n.data({originalScrollTop:n.scrollTop(),originalScrollLeft:n.scrollLeft()})}),An={}};function Xp(e){return e.matches('input, textarea, select, [role="textbox"]')||e.classList.contains("dcg-mathquill-input-span")||e.matches("[contenteditable=true]")}var Fo=function(e){if(!(e instanceof Element))return!1;let t=e.closest(".dcg-tap-container");return t?t.matches(".dcg-tap-container."+zs):!1},$b=function(e){return Ve!==Po&&!Xp(e)&&Fo(e)},_o=function(e,t){ad=null;let r=!1;bt("endMode:"+Ve),document.querySelectorAll(".dcg-depressed").forEach(a=>{a.classList.remove("dcg-depressed")});let n=document.activeElement;if(!Wb(e.target)&&n&&$b(n))try{n.blur()}catch(a){}if(document.querySelectorAll(".dcg-focus-by-tap").forEach(a=>a.classList.remove("dcg-focus-by-tap")),va.forEach(function(a){let c=ee(a),l=c.data("originalScrollTop")-c.scrollTop(),p=c.data("originalScrollLeft")-c.scrollLeft();(l||p)&&(An.scroll=!0)}),An["dcg-tapstart"]===1&&An["dcg-tapend"]===1&&!An["dcg-tapcancel"]&&!An.scroll){bt("potential dcg-tap");let a=t.changedTouches[0].clientX,c=t.changedTouches[0].clientY;if(e&&!e.device&&a===0&&c===0){bt("event appears to be simulated"),r=!0,Ve=Po;let g=e.target.getBoundingClientRect();a=(g.left+g.right)/2,c=(g.top+g.bottom)/2}bt("potential dcg-tap coords:"+a+":"+c);let l=!1,p=!1;for(let g of va){if(l)break;let f;if(typeof g.getBoundingClientRect=="function"&&(f=g.getBoundingClientRect()),typeof g.getAttribute=="function"&&g.getAttribute("tapboundary")==="true"&&(l=!0),!(f&&(a<f.left||c<f.top||a>f.right||c>f.bottom))){ad=g,p=!0,Vr("dcg-tap",e,{target:ad,touches:t.touches,changedTouches:t.changedTouches});break}}bt("result of dcg-tap:  did_dispatch="+p+"  did_escape="+l)}Ve===hn||Ve===ka?$s=setTimeout(function(){$s=null,Jp=new Date().getTime()},1e3):r&&($s=setTimeout(function(){$s=null,Jp=new Date().getTime()},100)),va=[],Ve=Ks},Oo=function(){return $s||new Date().getTime()-Jp<500},zb=function(e){return e.identifier!==void 0?e.identifier:e.pointerId},qb=function(e){let t=[];for(let r of e)t.push({identifier:zb(r),x:r.pageX,y:r.pageY,screenX:r.screenX,screenY:r.screenY,pageX:r.pageX,pageY:r.pageY,clientX:r.clientX,clientY:r.clientY});return t},Vr=function(e,t,r){let n=zb(t),a=qb(r.touches),c=qb(r.changedTouches);if(bt("dispatchEvent:"+e),e==="dcg-tapstart")Yp[n]={type:e,pageX:c[0].pageX,pageY:c[0].pageY};else if(e==="dcg-tapmove"){let f=c[0],w=Yp[n];if(w&&f.pageX===w.pageX&&f.pageY===w.pageY||(Ve===hn||Ve===ka)&&w&&w.type==="dcg-tapstart"&&Math.abs(w.pageX-f.pageX)+Math.abs(w.pageY-f.pageY)<2)return;Yp[n]={type:e,pageX:c[0].pageX,pageY:c[0].pageY}}let l=e.toLowerCase();An[l]===void 0?An[l]=1:An[l]++;let p=ee.event.fix(t.originalEvent);p.type=e,p.device=Ve===hn||Ve===ka?"touch":Ve===Po?"keyboard":"mouse",p.touches=a,p.changedTouches=c,p.target=r.target?r.target:t.target;let g=p.device!=="keyboard"&&An["dcg-longhold"]>0;p.wasLongheld=function(){return g},p.preventTap=function(){An["dcg-tapcancel"]=1},clearTimeout(Rb),p.type==="dcg-tapstart"&&p.device!=="keyboard"&&p.touches.length===1&&(Rb=setTimeout(function(){Vr("dcg-longhold",t,r)},500)),p.target&&p.target.nodeName&&p.target.nodeName.toLowerCase()==="a"&&p.type==="dcg-tap"&&p.device==="keyboard"&&p.target.click&&p.target.click(),bt("trigger event:"+p.type),ee(p.target).trigger(p)},sd=function(e){let t=va,r=!!va.length,n=document.querySelectorAll(".dcg-tap-container."+zs+" .dcg-hovered"),a=Array.from(n).filter(Fo),c=[],l=[],p=[];e&&Qp(e).forEach(function(g){(!r||t.indexOf(g)!==-1)&&(a.indexOf(g)===-1&&p.push(g),c.push(g))});for(let g of a)c.indexOf(g)===-1&&l.push(g);l.forEach(g=>{g&&g.classList.remove("dcg-hovered"),ee(g).trigger("tipsyhide")}),p.forEach(g=>{g&&g.classList.add("dcg-hovered"),ee(g).trigger("tipsyshow")})},cd=function(e){for(let t of _r)if(t.pointerId===e)return!0;return!1},Zp=function(e){for(let t=0;t<_r.length;t++)if(_r[t].pointerId===e){_r.splice(t,1)[0];return}},Kb=function(e){Ve===Ks&&od(ka,e),sd(null),_r.push(e.originalEvent),Vr("dcg-tapstart",e,{touches:_r,changedTouches:[e.originalEvent]})},Bb=function(e){Zp(e.originalEvent.pointerId);let t={touches:_r,changedTouches:[e.originalEvent]};Vr("dcg-tapcancel",e,t),_r.length===0&&_o(e,t)},Ub=function(e){Zp(e.originalEvent.pointerId);let t={touches:_r,changedTouches:[e.originalEvent]};Vr("dcg-tapend",e,t),_r.length===0&&_o(e,t)},ld=function(e){return e.originalEvent.pointerType==="touch"},Ro=function(e,t){e.trim().split(/\s+/).forEach(function(r){let n=_S?{passive:!1}:void 0;document.addEventListener(r,function(a){bt("document.on:"+a.type),t(ee.event.fix(a))},n)})};Ro("pointerdown MSPointerDown",function(e){if(!(Ve===Ws||Ve===hn||!ld(e))){if(cd(e.originalEvent.pointerId)){bt("exit. pointer id already exists: "+e.originalEvent.pointerId);return}Kb(e)}});Ro("pointermove MSPointerMove",function(e){Ve===Ws||Ve===hn||!ld(e)||(cd(e.originalEvent.pointerId)||(bt("pointer id already exists: "+e.originalEvent.pointerId),Kb(e)),Zp(e.originalEvent.pointerId),_r.push(e.originalEvent),Vr("dcg-tapmove",e,{touches:_r,changedTouches:[e.originalEvent]}))});ee(document).on("pointercancel MSPointerCancel",function(e){if(bt("document.on:"+e.type),Ve!==ka||!ld(e)||!cd(e.originalEvent.pointerId))return;Bb(e);let t;for(;t=_r.pop();){let r=ee.Event(t,{originalEvent:t});Bb(r)}});ee(document).on("pointerup MSPointerUp",function(e){if(bt("document.on:"+e.type),Ve!==ka||!ld(e)||!cd(e.originalEvent.pointerId))return;Ub(e);let t;for(;t=_r.pop();){let r=ee.Event(t,{originalEvent:t});Ub(r)}});var _S=function(){let e=!1;try{let t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",function(){},t),window.removeEventListener("test",function(){},t)}catch(t){}return e}();Ro("touchstart",function(e){Ve===Ws||Ve===ka||(Ve===Ks&&od(hn,e),sd(null),Vr("dcg-tapstart",e,{touches:e.originalEvent.touches,changedTouches:e.originalEvent.changedTouches}))});Ro("touchmove",function(e){Ve===hn&&Vr("dcg-tapmove",e,{touches:e.originalEvent.touches,changedTouches:e.originalEvent.changedTouches})});Ro("touchcancel",function(e){if(Ve!==hn)return;let t={touches:e.originalEvent.touches,changedTouches:e.originalEvent.changedTouches};Vr("dcg-tapcancel",e,t),e.originalEvent.touches.length===0&&_o(e,t)});Ro("touchend",function(e){if(Ve!==hn)return;let t={touches:e.originalEvent.touches,changedTouches:e.originalEvent.changedTouches};Vr("dcg-tapend",e,t),e.originalEvent.touches.length===0&&_o(e,t)});ee(document).on("mousedown",function(e){if(bt("document.on:"+e.type),!(e.button===1||e.button===2)){if(Ve===hn||Ve===ka||Oo()){!e.target.matches("input, textarea, select")&&Fo(e.target)&&e.preventDefault(),bt("abort mousedown: "+Ve+":"+Oo());return}od(Ws,e),Vr("dcg-tapstart",e,{touches:[e],changedTouches:[e]})}});var Wb=function(e){if(!(e instanceof Element))return!1;let t=!!e.closest(".dcg-do-not-blur"),r=!!e.closest(".dcg-do-blur");return!!(t&&!r&&Fo(e))};ee(document).on("mousedown",function(e){if(bt("document.on:"+e.type),!!Wb(e.target)){e.preventDefault();try{let t=window.getSelection();if(t.rangeCount===1){let r=t.getRangeAt(0);r.startContainer===r.endContainer&&r.startContainer.closest(".dcg-text-selectable")&&t.removeAllRanges()}}catch(t){}}});ee(document).on("mouseleave",function(e){if(bt("document.on:"+e.type),Ve===Ks){if(Oo()){bt("abort mouseleave: "+Ve+":"+Oo());return}sd(null)}});ee(document).on("mousemove",function(e){if(bt("document.on:"+e.type),!(e.button===1||e.button===2)&&!(Ve===hn||Ve===ka)){if(Oo()){bt("abort mousemove: "+Ve+":"+Oo());return}sd(e.target),Vr("dcg-tapmove",e,{touches:[e],changedTouches:[e]})}});ee(document).on("mouseup",function(e){if(bt("document.on:"+e.type),e.button===1||e.button===2||Ve!==Ws)return;let t={touches:[],changedTouches:[e]};Vr("dcg-tapend",e,t),_o(e,t)});ee(document).on("keydown",function(e){if(bt("document.on:"+e.type),!(qt(e)!==$p&&qt(e)!==zp||!Fo(e.target))&&Ve!==Po){if(e.target.matches('a:not([ontap]), button:not([ontap]), input, textarea, select, [role="textbox"], [contenteditable="true"]'))return;e.preventDefault(),od(Po,e),Vr("dcg-tapstart",e,{touches:[e],changedTouches:[e]})}});ee(document).on("keyup",function(e){if(bt("document.on:"+e.type),qt(e)!==$p&&qt(e)!==zp||!Fo(e.target)||Ve!==Po)return;let t={touches:[],changedTouches:[e]};Vr("dcg-tapend",e,t),_o(e,t)});var{If:RS}=Ir.Components,dd=class extends mt{template(){return Ir.createElement(RS,{predicate:()=>this.controller.shouldRender()},()=>Ir.createElement("div",{class:Ir.const("dcg-matrix-api-container"),style:Ir.const("width: 100%; height: 100%; position: relative;")},Ir.createElement("div",{class:()=>({"dcg-calc-matrix-main-wrapper":!0,"dcg-container":!0,"dcg-has-background-color":this.controller.hasBackgroundColor(),"dcg-narrow":this.controller.isNarrow(),"dcg-very-narrow":this.controller.isVeryNarrow(),"dcg-very-very-narrow":this.controller.isVeryVeryNarrow()}),didMount:this.bindFn(this.didMountRoot),onKeydown:this.bindFn(this.handleRootKeydown),"x-ms-format-detection":Ir.const("none"),style:()=>({color:this.controller.getTextColor(),filter:this.model.isEnabled("invertedColors")?"invert(100%)":"none"})},Ir.createElement("div",{class:()=>({"dcg-calc-matrix-main":!0,"dcg-projector-mode":this.controller.isProjectorMode()}),style:()=>({background:this.controller.getBackgroundColor(),"font-size":`${this.controller.getFontSize()}px`}),role:Ir.const("application"),"aria-label":()=>this.props.controller().s("matrix-calculator-narration-title")},Ir.createElement(Jl,{controller:this.props.controller}),Ir.createElement(ed,{controller:this.props.controller}),Ir.createElement(rd,{controller:this.props.controller})))))}didMountRoot(e){id(e)}handleRootKeydown(e){return xb(e)?(this.dispatch({type:"undo"}),!1):wb(e)?(this.dispatch({type:"redo"}),!1):!(!e.altKey&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&qt(e)===vb&&(!document.activeElement||!Xp(document.activeElement)))}};function ud(e){return{type:"constant",value:e}}function jb(e){return{type:"matrix",elements:e}}function pd(e){return{type:"identifier",symbol:e}}function eg(e,t){return{type:"functionCall",symbol:e,args:t}}function Yb(e,t){return{type:"functionExponent",symbol:e,args:t}}function qo(e,t){return{type:"op",symbol:e,args:t}}function Jb(e){return qo("add",e)}function Qb(e){return qo("sub",e)}function Bo(e){return qo("mul",e)}function Xb(e){return qo("div",e)}function gd(e){return qo("pow",e)}function Zb(e){return qo("neg",e)}function ex(e){return{type:"constant",value:e,valueType:"number"}}function tx(e){return{type:"matrix",elements:e,valueType:"matrix"}}function hd(e,t,r){return{type:"intrinsic",symbol:e,args:t,valueType:r}}var rx=function(){{var e=function(){},t=["log","info","warn","error","assert","dir","clear","profile","profileEnd","time","timeEnd","group","groupCollapsed","groupEnd","trace"],r={},n=function(a){typeof window!="undefined"&&window.console&&window.console[a]?r[a]=function(){Function.prototype.apply.call(window.console[a],window.console,arguments)}:r[a]=e};return t.forEach(n),r}}(),Gt=rx,{log:gP,warn:hP,error:mP,assert:fP,dir:yP,clear:bP,profile:xP,profileEnd:wP,time:vP,timeEnd:kP,group:EP,groupCollapsed:CP,groupEnd:TP,trace:SP}=rx;function md(e){var t=[];for(let n of e)if(!(!n||typeof n!="string")){var r=n.split("-")[0];t.push(n),t.push(r);for(let a in Ea){let c=Ea[a];a.split("-")[0]===r&&c.useAsRoot&&t.push(a)}}return t}var Ea={en:{displayName:"English (US)",userGuideURL:"https://docs.google.com/document/d/1gV-WgDjgR9hKKb32ffeUpjwggNAgfqxl0Gsg6xocbok/preview",useAsRoot:!1},es:{displayName:"Espa\xF1ol (LATAM)",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_ES-ES.pdf",useAsRoot:!0},et:{displayName:"Eesti",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},ru:{displayName:"\u0420\u0443\u0441\u0441\u043A\u0438\u0439",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_RU.pdf",useAsRoot:!1},da:{displayName:"Dansk",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},de:{displayName:"Deutsch",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_DE.pdf",useAsRoot:!1},"pt-BR":{displayName:"Portugu\xEAs (Brasil)",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!0},"pt-PT":{displayName:"Portugu\xEAs (Portugal)",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},ca:{displayName:"Catal\xE0",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},fr:{displayName:"Fran\xE7ais",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_FR.pdf",useAsRoot:!1},it:{displayName:"Italiano",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_IT.pdf",useAsRoot:!1},is:{displayName:"\xCDslenska",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},nl:{displayName:"Nederlands",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},no:{displayName:"Norsk",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},"sv-SE":{displayName:"Svenska",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!0},hu:{displayName:"Magyar",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},cs:{displayName:"\u010Ce\u0161tina",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},pl:{displayName:"Polski",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_PL.pdf",useAsRoot:!1},id:{displayName:"Bahasa Indonesia",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},vi:{displayName:"Ti\u1EBFng Vi\u1EC7t",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_VI.pdf",useAsRoot:!1},el:{displayName:"\u0395\u03BB\u03BB\u03B7\u03BD\u03B9\u03BA\u03AC",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_EL.pdf",useAsRoot:!1},uk:{displayName:"\u0423\u043A\u0440\u0430\u0457\u043D\u0441\u044C\u043A\u0430",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},ka:{displayName:"\u10E5\u10D0\u10E0\u10D7\u10E3\u10DA\u10D8",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},th:{displayName:"\u0E20\u0E32\u0E29\u0E32\u0E44\u0E17\u0E22",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},tr:{displayName:"T\xFCrk\xE7e",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_TR.pdf",useAsRoot:!1},"zh-CN":{displayName:"\u7B80\u4F53\u4E2D\u6587",useAsRoot:!0,userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_ZH-CN.pdf"},"zh-TW":{displayName:"\u7E41\u9AD4\u4E2D\u6587",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_ZH-TW.pdf",useAsRoot:!1},ko:{displayName:"\uD55C\uAD6D\uC5B4",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},ja:{displayName:"\u65E5\u672C\u8A9E",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_JA.pdf",useAsRoot:!1}};var nx=`account-shell-text-login-window-blocked-apple = Login window blocked. Please allow popups from desmos.com to sign in with Apple
account-shell-text-login-window-blocked-google = Login window blocked. Please allow popups from desmos.com to sign in with Google.
shared-button-accept = Accept
shared-button-cancel = Cancel
shared-button-change-email-address = Change email address
shared-button-change-email-and-password = Change email and password
shared-button-close-dialog = Close Dialog
shared-button-confirm-name = Confirm Name
shared-button-continue-to-desmos = Continue to Desmos
shared-button-create-account = Create Account
shared-button-delete-account-question = Delete your Desmos account?
shared-button-email-address-narrow = Email
shared-button-email-address-wide = Email Address
shared-button-external-account-narrow = External
shared-button-external-account-wide = External Account
shared-button-go-to-account-settings = Go to Account Settings
shared-button-google-account-narrow = Google
shared-button-google-account-wide = Google Account
shared-button-recover-password = Recover Password
shared-button-save = Save
shared-button-send-delete-account-email = Send Delete Account Email
shared-button-send-email = Send Email
shared-button-sign-in-with-apple = Sign in with Apple
shared-button-sign-in-with-google = Sign in with Google
shared-button-try-again = Didn't work? Try again!
shared-calculator-button-clear = 
shared-calculator-button-clear-all = Borrar todo
shared-calculator-button-print = Print
shared-calculator-button-reverse-contrast = Reverse Contrast
shared-calculator-error-add-type-error = Cannot add { $symbol1 } and { $symbol2 }.
shared-calculator-error-adjacent-mixed-number = Sorry, I don't know what to do with mixed number '{ $mixedNumber }'. Try using a '*' symbol around it.
shared-calculator-error-adjacent-numbers = Sorry, I don't know what to do with adjacent numbers '{ $left }' and '{ $right }'. Try using parentheses or a '*' symbol.
shared-calculator-error-bad-implicit-call = Usa parentesis alrededor del argumento de '{ $symbol }'.
shared-calculator-error-bad-log-exponent = Solo { $form } es soportada. De lo contrario, usa parentesis.
shared-calculator-error-bad-symbol-context = You can't use '{ $symbol }' in this context.
shared-calculator-error-bad-trig-exponent = Solo { $form1 } y { $form2 } son soportados. De lo contrario, usa parentesis.
shared-calculator-error-binary-operator-missing-operand = Necesitas algo en ambos lados del '{ $symbol }' simbolo.
shared-calculator-error-blank-expression = No has escrito nada todava .
shared-calculator-error-cannot-subscript = '{ $symbol }' no puede tener un superindice.
shared-calculator-error-colon-missing-condition = El lado izquierdo de ':' debe ser una condicion, como 'x>1'.
shared-calculator-error-derivative-missing-body = De que quieres calcular la derivada?
shared-calculator-error-differential-with-superscript = La variable de la integracion no puede estar sobreescrita.
shared-calculator-error-divide-type-error = No se puede dividir { $symbol1 } por { $symbol2 }.
shared-calculator-error-empty-paren = Los parentesis no pueden estar vacios.
shared-calculator-error-empty-pipe = Simbolo del valor absoluto no puede estar vacio.
shared-calculator-error-empty-radical = El radical no puede estar vacio.
shared-calculator-error-empty-radical-index = Indice del radical no puede estar vacio.
shared-calculator-error-empty-square-bracket = Los corchetes no pueden estar vacios.
shared-calculator-error-empty-subscript = Los superindices no pueden estar vacios.
shared-calculator-error-empty-superscript = Los sobreescrita no pueden estar vacios.
shared-calculator-error-equations-unsupported = Esta calculadora no admite este tipo de ecuacin.
shared-calculator-error-exponent-type-error = No se puede aumentar { $symbol1 } a { $symbol2 }.
shared-calculator-error-feature-unavailable = Esta caracteristica no es valida en la calculado actual.
shared-calculator-error-fraction-empty = Necesitas un numero para la fraccion.
shared-calculator-error-fraction-missing-denominator = Necesitas un denominador para la parte inferior de la fraccion.
shared-calculator-error-fraction-missing-numerator = Necesitas un numerador para la parte superior de la fraccion. 
shared-calculator-error-function-definition-unsupported = Esta calculadora no soporta funciones definidas.
shared-calculator-error-function-not-defined = Function '{ $dependency }' no esta definido.
shared-calculator-error-function-type-error-1 = Function '{ $fn }' no se puede aplicar a { $arg }.
shared-calculator-error-function-type-error-2 = Function '{ $fn }' no se puede aplicar a { $arg1 } and { $arg2 }.
shared-calculator-error-function-type-error-many = Function '{ $fn }' no se puede aplicar a estos argumentos.
shared-calculator-error-function-unsupported = Esta calculadora no soporta la funcion '{ $symbol }' .
shared-calculator-error-incorrect-list-comprehension-input = Las entradas a una lista por comprensin deben establecer una variable igual a una lista. Intentar i=[1...10].
shared-calculator-error-incorrect-product-lower-bound = El lmite inferior de un producto debe establecer una variable igual a un nmero. Intentar n=1.
shared-calculator-error-incorrect-sum-lower-bound = El lmite inferior de una suma debe establecer una variable igual a un nmero. Intentar n=1.
shared-calculator-error-inequalities-unsupported = Esta calculadora no admite desigualdades.
shared-calculator-error-inequality-chain-too-long = No se pueden encadenar ms de 2 desigualdades.
shared-calculator-error-integral-missing-body = De qu quieres tomar la integral?
shared-calculator-error-integral-missing-bound = Las integrales deben tener lmites superiores e inferiores.
shared-calculator-error-integral-missing-differential = Integrando debe terminar con una variable de integracin, como dx.
shared-calculator-error-invalid-half-empty-range = El rango debe tener un lmite superior e inferior.
shared-calculator-error-invalid-operator-name = Los nombres de los operadores slo pueden contener letras.
shared-calculator-error-invalid-subscript = Subindices solo deben contener letras. '{ $symbol }' no est permitido.
shared-calculator-error-matrix-add-dimensions = No se puede aadir matrices con diferentes dimensiones.
shared-calculator-error-matrix-assignment = Esta calculadora no soporta este tipo de variable. Intenta usar 'Nueva Matriz'.
shared-calculator-error-matrix-element-type-error = No se puede usar { $arg } como elemento de una matriz.
shared-calculator-error-matrix-fractional-power = A matriz slo se puede elevar a potencias enteras.
shared-calculator-error-matrix-invalid-variable = No se puede usar '{ $symbol }' como una variable.
shared-calculator-error-matrix-multiply-dimensions = No se pueden multiplicar matrices con dimensiones incompatibles.
shared-calculator-error-matrix-power-dimensions = Slo las matrices cuadradas pueden elevarse a una potencia.
shared-calculator-error-matrix-subtract-dimensions = No se pueden restar matrices con diferentes dimensiones.
shared-calculator-error-mismatched-braces = Se espera '{ $symbol1 }' demaciado '{ $symbol2 }'.
shared-calculator-error-multiply-type-error = No se puede multiplicar { $symbol1 } por { $symbol2 }.
shared-calculator-error-negative-type-error = N { $symbol }.
shared-calculator-error-non-singular-inverse = Las matrices singulares no tienen una inversa.
shared-calculator-error-non-square-determinant = Slo las matrices cuadradas tienen determinante.
shared-calculator-error-non-square-inverse = Solo las matrices cuadradas tienen una inversa.
shared-calculator-error-non-square-trace = Slo las matrices cuadradas tienen traza.
shared-calculator-error-parse-error = Lo siento, no entiendo esto.
shared-calculator-error-percent-missing-of = '%' debe usarse con 'of'. Intenta '25% of 12'.
shared-calculator-error-piecewise-missing-condition = Una expresion por partes debe tener almenos una condicion.
shared-calculator-error-piecewise-part-missing-condition = Every part of a piecewise expression must have a condition except the last.
shared-calculator-error-points-unsupported = /Esta calculadora no admite puntos.
shared-calculator-error-polygon-unsupported-in-3d = Esta calculadora no soporta la funcion 'polygon' . Intenta 'triangle' en su lugar.
shared-calculator-error-prime-without-paren = Primed function calls must use parentheses.
shared-calculator-error-primed-function-arity = Prime notation can only be used for functions of a single argument.
shared-calculator-error-product-missing-body = What do you want to take the product of?
shared-calculator-error-product-missing-bound = Products must have upper and lower bounds.
shared-calculator-error-regressions-unsupported = This calculator does not support regressions.
shared-calculator-error-substitution-ambiguous-comma = Ambiguous use of ',' and 'with'. Add parentheses around the 'with' expression.
shared-calculator-error-substitution-invalid-assignments = 'with' must be followed by one or more variable assignments.
shared-calculator-error-substitution-nested = Using one 'with' expression inside another 'with' expression is not allowed.
shared-calculator-error-subtract-type-error = Cannot subtract { $symbol2 } from { $symbol1 }.
shared-calculator-error-sum-missing-body = 
De qu quieres sacar la suma?
shared-calculator-error-sum-missing-bound = Las sumas deben tener lmites superior e inferior.
shared-calculator-error-superscript-with-prime = Los superndices y los nmeros primos no se pueden combinar.
shared-calculator-error-token-with-subscript = Es posible que los tokens no tengan subndices.
shared-calculator-error-too-many-variables-many-symbols = Demasiadas variables. Intenta definir '{ $variables }' o '{ $lastVariable }'.
shared-calculator-error-too-many-variables-no-symbols = Demasiadas variables, no s qu hacer con esto.
shared-calculator-error-too-many-variables-one-symbol = Demaciadas variables. Intenta definir '{ $variable }'.
shared-calculator-error-unary-operator-missing-left = Necesitas algo antes del '{ $symbol }' .
shared-calculator-error-unary-operator-missing-right = Necesitas algo antes del '{ $symbol }' .
shared-calculator-error-unexpected-for-keyword = 'for' slo se puede utilizar dentro de una lista. Intentar [i for i=[1...10]].
shared-calculator-error-unexpected-inequality = No se puede utilizar una desigualdad aqu.
shared-calculator-error-unexpected-prime = Lo siento, no entiendo este uso de la notacin prima.
shared-calculator-error-unexpected-subscript = Slo las funciones y variables pueden tener subndices.
shared-calculator-error-unexpected-symbol = Lo siento, no entiendo la forma en que '{ $symbol }' se utiliza aqu.
shared-calculator-error-unrecognized-symbol = Lo siento, no entiendo el '{ $symbol }' symbol.
shared-calculator-error-update-rule-non-identifier-lhs = El lado izquierdo de '{ $arrow }' 
debera ser un nombre de variable como '{ $example }'.
shared-calculator-error-variable-as-function = Variable '{ $dependency }' no se puede utilizar como funcin.
shared-calculator-error-write-integral = Type '{ $command }' for { $symbol }.
shared-calculator-error-wrong-arity-many-arg = Funcion '{ $dependency }' requiere { $assignment_arity } argumentos. { $supplement }
shared-calculator-error-wrong-arity-single-arg-too-few = Funcion '{ $dependency }' requiere un argumento.{ $supplement }
shared-calculator-error-wrong-arity-single-arg-too-many = Funcion '{ $dependency }' requiere solo 1 argumento. { $supplement }
shared-calculator-error-wrong-arity-supplement = Por ejemplo, intente escribir: { $recommendation }.
shared-calculator-label-accessibility = Accesibilidad
shared-calculator-label-tooltip-convert-to-decimal = Convertir a decimal.
shared-calculator-label-tooltip-convert-to-fraction = Convertir a fraccin.
shared-calculator-label-value-type-matrix = a matriz
shared-calculator-label-value-type-number = a numero
shared-calculator-narration-display-as-decimal = Mostrando como fraccin. Presione Enter para mostrar como decimal
shared-calculator-narration-display-as-fraction = Mostrando como decimal. Presione Enter para mostrar como fraccin
shared-calculator-narration-evaluation = igual { $answer }
shared-calculator-narration-expression = Expresion
shared-calculator-narration-expression-list = Lista de expresiones
shared-calculator-narration-keypad = keypad
shared-calculator-narration-keypad-controlbar = Control Bar
shared-calculator-narration-keypad-key-10-n = Times ten to the power of
shared-calculator-narration-keypad-key-abs = Absolute Value
shared-calculator-narration-keypad-key-action-to = Set Value To
shared-calculator-narration-keypad-key-action-with = Substitute With
shared-calculator-narration-keypad-key-alpha = Alpha
shared-calculator-narration-keypad-key-angle = Angle
shared-calculator-narration-keypad-key-angles = Angles
shared-calculator-narration-keypad-key-ans = Answer
shared-calculator-narration-keypad-key-arc = Arc
shared-calculator-narration-keypad-key-arccos = Inverse Cosine
shared-calculator-narration-keypad-key-arccot = Inverse Cotangent
shared-calculator-narration-keypad-key-arccsc = Inverse Cosecant
shared-calculator-narration-keypad-key-arcsec = Inverse Secant
shared-calculator-narration-keypad-key-arcsin = Inverse Sine
shared-calculator-narration-keypad-key-arctan = Inverse Tangent
shared-calculator-narration-keypad-key-area = Area
shared-calculator-narration-keypad-key-backspace = Backspace
shared-calculator-narration-keypad-key-beta = Beta
shared-calculator-narration-keypad-key-binomialdist = Binomial Distribution
shared-calculator-narration-keypad-key-boxplot = Box Plot
shared-calculator-narration-keypad-key-ceil = Ceiling
shared-calculator-narration-keypad-key-center = Center
shared-calculator-narration-keypad-key-circle = Circle
shared-calculator-narration-keypad-key-corr = Correlation
shared-calculator-narration-keypad-key-cos = Cosine
shared-calculator-narration-keypad-key-cosh = Hyperbolic Cosine
shared-calculator-narration-keypad-key-cot = Cotangent
shared-calculator-narration-keypad-key-coterminal = Coterminal
shared-calculator-narration-keypad-key-coth = Hyperbolic Cotangent
shared-calculator-narration-keypad-key-cov = Co Variance
shared-calculator-narration-keypad-key-covp = Population Co Variance
shared-calculator-narration-keypad-key-csc = Cosecant
shared-calculator-narration-keypad-key-csch = Hyperbolic Cosecant
shared-calculator-narration-keypad-key-cubed = Cubed
shared-calculator-narration-keypad-key-decimal = Decimal
shared-calculator-narration-keypad-key-dilate = Dilate
shared-calculator-narration-keypad-key-directed-angle = Directed Angle
shared-calculator-narration-keypad-key-directed-angles = Directed Angles
shared-calculator-narration-keypad-key-distance = Distance
shared-calculator-narration-keypad-key-divide = Divide
shared-calculator-narration-keypad-key-dotplot = Dot Plot
shared-calculator-narration-keypad-key-enter = Enter
shared-calculator-narration-keypad-key-erf = Error Function
shared-calculator-narration-keypad-key-exp = Exponent
shared-calculator-narration-keypad-key-factorial = Factorial
shared-calculator-narration-keypad-key-floor = Floor
shared-calculator-narration-keypad-key-fraction = A over B
shared-calculator-narration-keypad-key-glider = Glider
shared-calculator-narration-keypad-key-histogram = Histogram
shared-calculator-narration-keypad-key-int = Integral
shared-calculator-narration-keypad-key-intersection = Intersection
shared-calculator-narration-keypad-key-inversecdf = Inverse CDF function
shared-calculator-narration-keypad-key-ittest = Independent T Test
shared-calculator-narration-keypad-key-left-arrow = Left Arrow
shared-calculator-narration-keypad-key-left-bracket = Left Bracket
shared-calculator-narration-keypad-key-left-paren = Left Parenthesis
shared-calculator-narration-keypad-key-line = Line
shared-calculator-narration-keypad-key-ln = Natural Log
shared-calculator-narration-keypad-key-log = Log
shared-calculator-narration-keypad-key-loga = Log A
shared-calculator-narration-keypad-key-mean = Mean
shared-calculator-narration-keypad-key-median = Median
shared-calculator-narration-keypad-key-midpoint = Midpoint
shared-calculator-narration-keypad-key-minus = Minus
shared-calculator-narration-keypad-key-normaldist = Normal Distribution
shared-calculator-narration-keypad-key-nthroot = Nth Root
shared-calculator-narration-keypad-key-parallel = Parallel
shared-calculator-narration-keypad-key-pdf = Probability Density Function
shared-calculator-narration-keypad-key-percent-of = Percent Of
shared-calculator-narration-keypad-key-perimeter = Perimeter
shared-calculator-narration-keypad-key-perpendicular = Perpendicular
shared-calculator-narration-keypad-key-pi = Pi
shared-calculator-narration-keypad-key-plus = Plus
shared-calculator-narration-keypad-key-poissondist = Poisson Distribution
shared-calculator-narration-keypad-key-polygon = Polygon
shared-calculator-narration-keypad-key-prime = Function derivative
shared-calculator-narration-keypad-key-product = Product
shared-calculator-narration-keypad-key-quantile = Quantile
shared-calculator-narration-keypad-key-quartile = Quartile
shared-calculator-narration-keypad-key-radius = Radius
shared-calculator-narration-keypad-key-random = Random Number
shared-calculator-narration-keypad-key-ray = Ray
shared-calculator-narration-keypad-key-reciprocal = Reciprocal
shared-calculator-narration-keypad-key-reflect = Reflect
shared-calculator-narration-keypad-key-right-arrow = Right Arrow
shared-calculator-narration-keypad-key-right-bracket = Right Bracket
shared-calculator-narration-keypad-key-right-paren = Right Parenthesis
shared-calculator-narration-keypad-key-rotate = Rotate
shared-calculator-narration-keypad-key-round = Round
shared-calculator-narration-keypad-key-sec = Secant
shared-calculator-narration-keypad-key-segment = Segment
shared-calculator-narration-keypad-key-segments = Segments
shared-calculator-narration-keypad-key-shift = Shift
shared-calculator-narration-keypad-key-sin = Sine
shared-calculator-narration-keypad-key-sinh = Hyperbolic Sine
shared-calculator-narration-keypad-key-spearman = Spearman Rank Correlation
shared-calculator-narration-keypad-key-sphere = Sphere
shared-calculator-narration-keypad-key-sqrt = Square Root
shared-calculator-narration-keypad-key-squared = Squared
shared-calculator-narration-keypad-key-stats = Summary statistics
shared-calculator-narration-keypad-key-stdev = Standard Deviation
shared-calculator-narration-keypad-key-stdevp = Standard Deviation of Population
shared-calculator-narration-keypad-key-subscript = Subscript
shared-calculator-narration-keypad-key-sum = Sum
shared-calculator-narration-keypad-key-superscript = Superscript
shared-calculator-narration-keypad-key-supplement = Supplement
shared-calculator-narration-keypad-key-tan = Tangent
shared-calculator-narration-keypad-key-tanh = Hyperbolic Tangent
shared-calculator-narration-keypad-key-tau = Tau
shared-calculator-narration-keypad-key-tdist = Student-t Distribution
shared-calculator-narration-keypad-key-theta = Theta
shared-calculator-narration-keypad-key-times = Times
shared-calculator-narration-keypad-key-toggle-audio-trace = Toggle Audio Trace
shared-calculator-narration-keypad-key-toggle-letters = Toggle Letters
shared-calculator-narration-keypad-key-toggle-numbers = Toggle Numbers
shared-calculator-narration-keypad-key-translate = Translate
shared-calculator-narration-keypad-key-triangle = Triangle
shared-calculator-narration-keypad-key-tscore = T Score
shared-calculator-narration-keypad-key-ttest = T Test
shared-calculator-narration-keypad-key-uniformdist = Uniform Distribution
shared-calculator-narration-keypad-key-vector = Vector
shared-calculator-narration-keypad-key-vertices = Vertices
shared-calculator-narration-keypad-key-ythroot = Yth Root
shared-calculator-narration-keypad-plus-minus = Plus-Minus
shared-calculator-narration-redo = redo
shared-calculator-narration-settings-display-size = Display Size
shared-calculator-narration-settings-display-size-default = Display size: default
shared-calculator-narration-settings-display-size-large = Display size: large
shared-calculator-narration-table-cell-coordinates = Row { $rowNumber } Column { $columnNumber }
shared-calculator-narration-undo = undo
shared-label-email = Email
shared-label-family-name = Last Name (optional)
shared-label-given-name-or-nickname = First Name or Nickname
shared-label-name = Name
shared-label-new-email-address = New Email Address
shared-label-password = Password
shared-message-account-reactivated = You previously requested to delete your account, but because you logged back in within 30 days, we will not delete your account. Welcome back!
shared-message-change-password-email-sent = We will send a link to your email address ({ $emailAddress }) so you can change your password.
shared-message-check-email-for-delete-link = Please check your email ({ $emailAddress }) for the link to delete your account.
shared-message-check-email-for-link = Please check { $emailAddress } for the Change Email link.
shared-message-check-email-for-password-link = Please check your email ({ $emailAddress }) for the link to change your password.
shared-message-check-email-for-password-recovery-link = Message sent. Please check your email for a password recovery link.
shared-message-consent-delete-information = If you don't want Desmos to hold onto this information, you may delete your account from the Account Settings menu at any time.
shared-message-consent-information = When you created your Desmos account, you gave us your name, email address, and password (unless you signed in with Google, in which case you gave us access to the name and email address associated with that account). You also gave us access to your saved work. To continue using your Desmos account, please consent below to the collection of this information.
shared-message-consent-text = I agree to let Desmos store and maintain the information I provide (e.g. login credentials, saved work) in order to provide and improve its service. To withdraw consent, you may delete your account at any time.
shared-message-cookie-notice = <1>Note:</1> Desmos uses cookies to enable persistence when you are signed in. If you do not wish to use cookies, please use Desmos without logging in. <2>Learn More.</2>
shared-message-delete-account-notice = When you delete your account, <1>we will retain your data for 30 days.</1> You can reactivate your account at any time during those 30 days by logging back in. If there's something about Desmos we can improve, please <2>let us know.</2>
shared-message-delete-account-will-send-email = We will send you a link to your email address ({ $email }) so you can delete your account.
shared-message-email-sent = Email sent
shared-message-email-settings-will-send-email = We will send a Change Email link to { $emailAddress }.
shared-message-google-login-not-available = Google Login is not available on this device.
shared-message-information-saved = Saved!
shared-message-or-login-with-desmos = Or log in with Desmos
shared-message-please-review-name = We tried to split your name into first and last name. Please review your name below and edit any mistakes.
shared-message-set-new-email-address = Set a new email address and password.
shared-prompt-already-have-account = Already have a Desmos account?
shared-prompt-enter-email-for-password-recovery-link = Enter your email address to get a password recovery link.
shared-prompt-forgot-your-password = Forgot your password?
shared-prompt-new-to-desmos-sign-up-here = New to Desmos? <1>Sign up</1>.
shared-prompt-new-to-desmos-teacher-or-student = New to Desmos? <1>Sign up!</1>
shared-prompt-please-consent-to-sign-up-with-apple = Please consent above to sign up with Apple
shared-prompt-please-consent-to-sign-up-with-google = Please consent above to sign up with Google
shared-prompt-sign-up-with-apple = Sign up with Apple
shared-prompt-sign-up-with-google = Sign up with Google
shared-title-account-reactivated = Your account has been reactivated.
shared-title-account-settings = Account Settings
shared-title-change-email-address = Change your Desmos email address
shared-title-change-password-narrow = Password
shared-title-change-password-wide = Change Password
shared-title-consent = We value your privacy
shared-title-delete-account = Are you sure you want to delete your account?
shared-title-email-settings = Email
shared-title-language-menu = Language
shared-title-login = Log In
shared-title-profile-information-narrow = Profile
shared-title-profile-information-wide = Profile Information
shared-title-recover-password = Recover Password
shared-title-signup = Sign-Up
basic-calculator-error-fractions-unavailable = Fractions are not available in the current calculator.
graphing-calculator-button-audio-trace-hear-graph = Hear Graph
graphing-calculator-button-audio-trace-stop-graph = Stop Graph
graphing-calculator-button-keypad-audio-trace-off = Audio Trace Off
graphing-calculator-narration-geometry-construction-role-description = construction
graphing-calculator-narration-geometry-hidden-construction-description = Hidden { $description }
graphing-calculator-narration-keypad-key-next-curve = Next Curve
graphing-calculator-narration-keypad-key-next-poi = Next Point of Interest
graphing-calculator-narration-keypad-key-next-point = Next Point
graphing-calculator-narration-keypad-key-previous-curve = Previous Curve
graphing-calculator-narration-keypad-key-previous-poi = Previous Point of Interest
graphing-calculator-narration-keypad-key-previous-point = Previous Point
graphing-calculator-narration-keypad-key-speed-down = Speed Down
graphing-calculator-narration-keypad-key-speed-up = Speed Up
graphing-calculator-narration-keypad-key-volume-down = Volume Down
graphing-calculator-narration-keypad-key-volume-up = Volume Up
matrix-calculator-button-new = Nueva Matriz
matrix-calculator-button-settings = ajustes
matrix-calculator-heading-edit-matrix = Editar Matriz { $variable }
matrix-calculator-label-columns = Columna
matrix-calculator-label-rows = Fila
matrix-calculator-narration-add-column = aadir Columna
matrix-calculator-narration-add-row = aadir fila
matrix-calculator-narration-evaluation = igual { $rowCount } por { $columnCount } matriz.
matrix-calculator-narration-evaluation-row = fila { $rowNumber }: { $values }.
matrix-calculator-narration-keypad-key-det = Determinante
matrix-calculator-narration-keypad-key-inverse = Inversa
matrix-calculator-narration-keypad-key-rref = Reduced row echelon form
matrix-calculator-narration-keypad-key-trace = Trazo
matrix-calculator-narration-keypad-key-transpose = Transpuesta
matrix-calculator-narration-matrix-with-variable = Matriz { $variable }
matrix-calculator-narration-matrix-without-variable = Matriz
matrix-calculator-narration-new-dimensions = Matriz tamao: { $rows } por { $cols }
matrix-calculator-narration-remove-column = Quitar Columna
matrix-calculator-narration-remove-row = Quitar fila
matrix-calculator-narration-resize-controls = Resize Matrix Controls
matrix-calculator-narration-settings-menu = Settings Menu
matrix-calculator-narration-title = Desmos Matriz Calculadora
frontpage-button-account-menu = Account Menu
frontpage-error-something-went-wrong-try-again-later = Lo siento! Algo sali mal. Por favor, intntelo de nuevo ms tarde.learning platform, <1>now part of Amplify.</1>
frontpage-link-main-for-students = For Students
frontpage-link-main-for-teachers = For Teachers
frontpage-link-shared-3d-calculator = 3D Calculator
frontpage-link-shared-about-us = About Us
frontpage-link-shared-account-settings = Account Settings
frontpage-link-shared-assessments = Assessments
frontpage-link-shared-blog = Des-Blog
frontpage-link-shared-careers = Careers
frontpage-link-shared-curriculum = Desmos Math 6\u2013A1
frontpage-link-shared-equity-principles = Equity Principles
frontpage-link-shared-four-function-calculator = Four-Function Calculator
frontpage-link-shared-geometry-tool = Geometry Tool
frontpage-link-shared-graphing-calculator = Graphing Calculator
frontpage-link-shared-guiding-principles = Guiding Principles
frontpage-link-shared-help-center = Help Center
frontpage-link-shared-log-out = Log Out
frontpage-link-shared-matrix-calculator = Matrix Calculator
frontpage-link-shared-scientific-calculator = Scientific Calculator
frontpage-link-shared-store = Desmos Store
frontpage-link-shared-test-practice = Test Practice
frontpage-narration-shared-desmos-logo = Desmos Logo
frontpage-text-header-app-links = Download our apps in the <1>Google Play Store</1> and <2>iOS App Store</2>.
frontpage-text-header-terms-update = We've updated our Terms of Service.
frontpage-text-header-terms-update-link = Read about the changes.





`;var $S={ar:!0,de:!0,en:!0,es:!0,et:!0,fr:!0,id:!0,it:!0,ja:!0,ko:!0,nl:!0,pl:!0,"pt-BR":!0,ru:!0,"sv-SE":!0,th:!0,tr:!0,vi:!0,"zh-CN":!0,"zh-TW":!0};function ax(e){return!!$S[e]}var Wa=class{constructor(t){this.value=t}valueOf(){return this.value}},gt=class extends Wa{constructor(t="???"){super(t)}toString(t){return`{${this.value}}`}},en=class extends Wa{constructor(t,r={}){super(t),this.opts=r}toString(t){try{return t.memoizeIntlObject(Intl.NumberFormat,this.opts).format(this.value)}catch(r){return t.reportError(r),this.value.toString(10)}}},Ca=class extends Wa{constructor(t,r={}){super(t),this.opts=r}toString(t){try{return t.memoizeIntlObject(Intl.DateTimeFormat,this.opts).format(this.value)}catch(r){return t.reportError(r),new Date(this.value).toISOString()}}};var ix=100,zS="\u2068",KS="\u2069";function WS(e,t,r){if(r===t||r instanceof en&&t instanceof en&&r.value===t.value)return!0;if(t instanceof en&&typeof r=="string"){let n=e.memoizeIntlObject(Intl.PluralRules,t.opts).select(t.value);if(r===n)return!0}return!1}function ox(e,t,r){return t[r]?Uo(e,t[r].value):(e.reportError(new RangeError("No default")),new gt)}function tg(e,t){let r=[],n=Object.create(null);for(let a of t)a.type==="narg"?n[a.name]=Hs(e,a.value):r.push(Hs(e,a));return{positional:r,named:n}}function Hs(e,t){switch(t.type){case"str":return t.value;case"num":return new en(t.value,{minimumFractionDigits:t.precision});case"var":return HS(e,t);case"mesg":return jS(e,t);case"term":return YS(e,t);case"func":return JS(e,t);case"select":return QS(e,t);default:return new gt}}function HS(e,{name:t}){let r;if(e.params)if(Object.prototype.hasOwnProperty.call(e.params,t))r=e.params[t];else return new gt(`$${t}`);else if(e.args&&Object.prototype.hasOwnProperty.call(e.args,t))r=e.args[t];else return e.reportError(new ReferenceError(`Unknown variable: $${t}`)),new gt(`$${t}`);if(r instanceof Wa)return r;switch(typeof r){case"string":return r;case"number":return new en(r);case"object":if(r instanceof Date)return new Ca(r.getTime());default:return e.reportError(new TypeError(`Variable type not supported: $${t}, ${typeof r}`)),new gt(`$${t}`)}}function jS(e,{name:t,attr:r}){let n=e.bundle._messages.get(t);if(!n)return e.reportError(new ReferenceError(`Unknown message: ${t}`)),new gt(t);if(r){let a=n.attributes[r];return a?Uo(e,a):(e.reportError(new ReferenceError(`Unknown attribute: ${r}`)),new gt(`${t}.${r}`))}return n.value?Uo(e,n.value):(e.reportError(new ReferenceError(`No value: ${t}`)),new gt(t))}function YS(e,{name:t,attr:r,args:n}){let a=`-${t}`,c=e.bundle._terms.get(a);if(!c)return e.reportError(new ReferenceError(`Unknown term: ${a}`)),new gt(a);if(r){let p=c.attributes[r];if(p){e.params=tg(e,n).named;let g=Uo(e,p);return e.params=null,g}return e.reportError(new ReferenceError(`Unknown attribute: ${r}`)),new gt(`${a}.${r}`)}e.params=tg(e,n).named;let l=Uo(e,c.value);return e.params=null,l}function JS(e,{name:t,args:r}){let n=e.bundle._functions[t];if(!n)return e.reportError(new ReferenceError(`Unknown function: ${t}()`)),new gt(`${t}()`);if(typeof n!="function")return e.reportError(new TypeError(`Function ${t}() is not callable`)),new gt(`${t}()`);try{let a=tg(e,r);return n(a.positional,a.named)}catch(a){return e.reportError(a),new gt(`${t}()`)}}function QS(e,{selector:t,variants:r,star:n}){let a=Hs(e,t);if(a instanceof gt)return ox(e,r,n);for(let c of r){let l=Hs(e,c.key);if(WS(e,a,l))return Uo(e,c.value)}return ox(e,r,n)}function rg(e,t){if(e.dirty.has(t))return e.reportError(new RangeError("Cyclic reference")),new gt;e.dirty.add(t);let r=[],n=e.bundle._useIsolating&&t.length>1;for(let a of t){if(typeof a=="string"){r.push(e.bundle._transform(a));continue}if(e.placeables++,e.placeables>ix)throw e.dirty.delete(t),new RangeError(`Too many placeables expanded: ${e.placeables}, max allowed is ${ix}`);n&&r.push(zS),r.push(Hs(e,a).toString(e)),n&&r.push(KS)}return e.dirty.delete(t),r.join("")}function Uo(e,t){return typeof t=="string"?e.bundle._transform(t):rg(e,t)}var fd=class{constructor(t,r,n){this.dirty=new WeakSet,this.params=null,this.placeables=0,this.bundle=t,this.errors=r,this.args=n}reportError(t){if(!this.errors)throw t;this.errors.push(t)}memoizeIntlObject(t,r){let n=this.bundle._intls.get(t);n||(n={},this.bundle._intls.set(t,n));let a=JSON.stringify(r);return n[a]||(n[a]=new t(this.bundle.locales,r)),n[a]}};function sx(e,t){let r=Object.create(null);for(let[n,a]of Object.entries(e))t.includes(n)&&(r[n]=a.valueOf());return r}var XS=["unitDisplay","currencyDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits"];function cx(e,t){let r=e[0];if(r instanceof gt)return new gt(`NUMBER(${r.valueOf()})`);if(r instanceof en||r instanceof Ca)return new en(r.valueOf(),be(be({},r.opts),sx(t,XS)));throw new TypeError("Invalid argument to NUMBER")}var ZS=["dateStyle","timeStyle","fractionalSecondDigits","dayPeriod","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName"];function lx(e,t){let r=e[0];if(r instanceof gt)return new gt(`DATETIME(${r.valueOf()})`);if(r instanceof en||r instanceof Ca)return new Ca(r.valueOf(),be(be({},r.opts),sx(t,ZS)));throw new TypeError("Invalid argument to DATETIME")}var js=class{constructor(t,{functions:r,useIsolating:n=!0,transform:a=c=>c}={}){this._terms=new Map,this._messages=new Map,this._intls=new WeakMap,this.locales=Array.isArray(t)?t:[t],this._functions=be({NUMBER:cx,DATETIME:lx},r),this._useIsolating=n,this._transform=a}hasMessage(t){return this._messages.has(t)}getMessage(t){return this._messages.get(t)}addResource(t,{allowOverrides:r=!1}={}){let n=[];for(let a=0;a<t.body.length;a++){let c=t.body[a];if(c.id.startsWith("-")){if(r===!1&&this._terms.has(c.id)){n.push(new Error(`Attempt to override an existing term: "${c.id}"`));continue}this._terms.set(c.id,c)}else{if(r===!1&&this._messages.has(c.id)){n.push(new Error(`Attempt to override an existing message: "${c.id}"`));continue}this._messages.set(c.id,c)}}return n}formatPattern(t,r=null,n=null){if(typeof t=="string")return this._transform(t);let a=new fd(this,n,r);try{return rg(a,t).toString(a)}catch(c){if(a.errors)return a.errors.push(c),new gt().toString(a);throw c}}};var ng=/^(-?[a-zA-Z][\w-]*) *= */gm,dx=/\.([a-zA-Z][\w-]*) *= */y,e0=/\*?\[/y,ag=/(-?[0-9]+(?:\.([0-9]+))?)/y,t0=/([a-zA-Z][\w-]*)/y,ux=/([$-])?([a-zA-Z][\w-]*)(?:\.([a-zA-Z][\w-]*))?/y,r0=/^[A-Z][A-Z0-9_-]*$/,yd=/([^{}\n\r]+)/y,n0=/([^\\"\n\r]*)/y,px=/\\([\\"])/y,gx=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{6})/y,a0=/^\n+/,hx=/ +$/,i0=/ *\r?\n/g,o0=/( *)$/,s0=/{\s*/y,mx=/\s*}/y,c0=/\[\s*/y,l0=/\s*] */y,d0=/\s*\(\s*/y,u0=/\s*->\s*/y,p0=/\s*:\s*/y,g0=/\s*,?\s*/y,h0=/\s+/y,$o=class{constructor(t){this.body=[],ng.lastIndex=0;let r=0;for(;;){let Q=ng.exec(t);if(Q===null)break;r=ng.lastIndex;try{this.body.push(g(Q[1]))}catch(de){if(de instanceof SyntaxError)continue;throw de}}function n(Q){return Q.lastIndex=r,Q.test(t)}function a(Q,de){if(t[r]===Q)return r++,!0;if(de)throw new de(`Expected ${Q}`);return!1}function c(Q,de){if(n(Q))return r=Q.lastIndex,!0;if(de)throw new de(`Expected ${Q.toString()}`);return!1}function l(Q){Q.lastIndex=r;let de=Q.exec(t);if(de===null)throw new SyntaxError(`Expected ${Q.toString()}`);return r=Q.lastIndex,de}function p(Q){return l(Q)[1]}function g(Q){let de=w(),Ze=f();if(de===null&&Object.keys(Ze).length===0)throw new SyntaxError("Expected message value or attributes");return{id:Q,value:de,attributes:Ze}}function f(){let Q=Object.create(null);for(;n(dx);){let de=p(dx),Ze=w();if(Ze===null)throw new SyntaxError("Expected attribute value");Q[de]=Ze}return Q}function w(){let Q;if(n(yd)&&(Q=p(yd)),t[r]==="{"||t[r]==="}")return M(Q?[Q]:[],1/0);let de=ot();return de?Q?M([Q,de],de.length):(de.value=ge(de.value,a0),M([de],de.length)):Q?ge(Q,hx):null}function M(Q=[],de){for(;;){if(n(yd)){Q.push(p(yd));continue}if(t[r]==="{"){Q.push(G());continue}if(t[r]==="}")throw new SyntaxError("Unbalanced closing brace");let hr=ot();if(hr){Q.push(hr),de=Math.min(de,hr.length);continue}break}let Ze=Q.length-1,nn=Q[Ze];typeof nn=="string"&&(Q[Ze]=ge(nn,hx));let Ht=[];for(let hr of Q)hr instanceof bd&&(hr=hr.value.slice(0,hr.value.length-de)),hr&&Ht.push(hr);return Ht}function G(){c(s0,SyntaxError);let Q=R();if(c(mx))return Q;if(c(u0)){let de=Se();return c(mx,SyntaxError),be({type:"select",selector:Q},de)}throw new SyntaxError("Unclosed placeable")}function R(){if(t[r]==="{")return G();if(n(ux)){let[,Q,de,Ze=null]=l(ux);if(Q==="$")return{type:"var",name:de};if(c(d0)){let nn=se();if(Q==="-")return{type:"term",name:de,attr:Ze,args:nn};if(r0.test(de))return{type:"func",name:de,args:nn};throw new SyntaxError("Function names must be all upper-case")}return Q==="-"?{type:"term",name:de,attr:Ze,args:[]}:{type:"mesg",name:de,attr:Ze}}return Ge()}function se(){let Q=[];for(;;){switch(t[r]){case")":return r++,Q;case void 0:throw new SyntaxError("Unclosed argument list")}Q.push(ce()),c(g0)}}function ce(){let Q=R();return Q.type!=="mesg"?Q:c(p0)?{type:"narg",name:Q.name,value:Ge()}:Q}function Se(){let Q=[],de=0,Ze;for(;n(e0);){a("*")&&(Ze=de);let nn=ze(),Ht=w();if(Ht===null)throw new SyntaxError("Expected variant value");Q[de++]={key:nn,value:Ht}}if(de===0)return null;if(Ze===void 0)throw new SyntaxError("Expected default variant");return{variants:Q,star:Ze}}function ze(){c(c0,SyntaxError);let Q;return n(ag)?Q=Re():Q={type:"str",value:p(t0)},c(l0,SyntaxError),Q}function Ge(){if(n(ag))return Re();if(t[r]==='"')return Je();throw new SyntaxError("Invalid expression")}function Re(){let[,Q,de=""]=l(ag),Ze=de.length;return{type:"num",value:parseFloat(Q),precision:Ze}}function Je(){a('"',SyntaxError);let Q="";for(;;){if(Q+=p(n0),t[r]==="\\"){Q+=Nt();continue}if(a('"'))return{type:"str",value:Q};throw new SyntaxError("Unclosed string literal")}}function Nt(){if(n(px))return p(px);if(n(gx)){let[,Q,de]=l(gx),Ze=parseInt(Q||de,16);return Ze<=55295||57344<=Ze?String.fromCodePoint(Ze):"\uFFFD"}throw new SyntaxError("Unknown escape sequence")}function ot(){let Q=r;switch(c(h0),t[r]){case".":case"[":case"*":case"}":case void 0:return!1;case"{":return ra(t.slice(Q,r))}return t[r-1]===" "?ra(t.slice(Q,r)):!1}function ge(Q,de){return Q.replace(de,"")}function ra(Q){let de=Q.replace(i0,`
`),Ze=o0.exec(Q)[1].length;return new bd(de,Ze)}}},bd=class{constructor(t,r){this.value=t,this.length=r}};var f0=["ae","ar","arc","bcc","bqi","ckb","dv","fa","glk","he","ku","mzn","nqo","pnb","ps","sd","ug","ur","yi"],ig=class{constructor(t){this.value=t}},xd=class e{constructor(t,r){this.bundles=t;this.onError=r}static fromSources(t,r,n){let a=[];for(let{lang:c,source:l}of t){let p=c.split("-")[0],g=new js(c,ar(be({},n),{useIsolating:f0.indexOf(p)>=0}));g.addResource(new $o(l),{allowOverrides:!1}),g.addResource(new $o(`
l10n-internal-date-day-month-year = {DATETIME($d, month: "short", day: "numeric", year: "numeric")}
l10n-internal-date-day-month = {DATETIME($d, month: "short", day: "numeric")}
l10n-internal-time = {DATETIME($d, minute: "numeric", hour: "numeric")}
      `),{allowOverrides:!1}),a.push(g)}return new e(a,r)}format(t,r){for(let n of this.bundles){if(!n.hasMessage(t))continue;let a=n.getMessage(t);if(!(a!=null&&a.value))return;let c=[],l=n.formatPattern(a.value,this.coerceNumericVariables(r),c);for(let p of c)this.onError(`Error formatting ${t} for locale ${n.locales.join(",")}: ${p}`);return l}this.onError(`Couldn't find message for key ${t} for locales ${this.getLocales().join(",")}`)}formatDate(t,r){return r.showYear?this.format("l10n-internal-date-day-month-year",{d:t}):this.format("l10n-internal-date-day-month",{d:t})}formatTime(t){let r=this.format("l10n-internal-time",{d:t});return this.getLocales()[0]==="en"?r==null?void 0:r.toLowerCase():r}hasTranslation(t,r){for(let n of this.bundles)if(n.locales.indexOf(r)>=0)return n.hasMessage(t);return!1}coerceNumericVariables(t){let r={};for(let n in t){let a=t[n];a instanceof ig?r[n]=a.value:typeof a=="number"?r[n]=`${a}`:r[n]=a}return r}getLocales(){return this.bundles.reduce((t,r)=>t.concat(r.locales),[])}};var cg="",og={},fx={},sg={},y0=["ar","hy-AM","hi","tr","xx-XX"];function wd(e){cg=e||""}function lg(e){for(let t in e)delete sg[t],fx[t]=e[t]}function dg(){for(let e in Ea)ax(e)||delete Ea[e]}function Ys(e,t){let r=t!=null?t:cg;return bx(r).hasTranslation(e,r)}function Vi(e,t){if(t)for(var r in t)t.hasOwnProperty(r)&&(e=e.split("__"+r+"__").join(t[r]));return e}function Ie(e,t,r){return yx(e,t!=null?t:{},r!=null?r:cg)}function Js(e){return function(r,n){return yx(r,n!=null?n:{},e())}}function b0(e){let t={};for(let r in e){let n=e[r];n!==void 0&&(t[r]=n)}return t}function yx(e,t,r){let a=bx(r).format(e,b0(t));return a==null?(Gt.warn(`Could not format string ${e}`),""):a}function bx(e){let t=sg[e];if(!t){og[e]||(og[e]=md([e]));let r=[];for(let a of og[e]){let c=fx[a];c&&r.push({lang:a,source:c})}let n={};e==="xx-XX"&&(n.transform=a=>a.replace(/[a-z]/gi,"\u2666")),t=sg[e]=xd.fromSources([...r,{lang:"en",source:nx}],a=>{Gt.warn(a)},n)}return t}function ug(e){return Ea.hasOwnProperty(e)||Oa(y0,e)}function vd(e,t){if(e==null)return"";if(typeof e=="string")return e;if(typeof e=="number")return""+e;let r=e.vars,n;if(r){n={};for(let a in r)r.hasOwnProperty(a)&&(n[a]=vd(r[a],t))}return Ie(e.key,n,t)}var kd={cb20221031:"1"};var Qs=typeof desmosLocaleData=="object"?desmosLocaleData:{};function Xs(){for(var e=md([sm("language"),navigator.userLanguage,navigator.language]),t=0;t<e.length;t++){var r=e[t];if(ug(r))return r}return"en"}async function Ed(e){if(Qs[e]||e==="en"||e==="xx-XX")return wd(e),!0;if(!ug(e)){let n=e.indexOf("-")!==-1?e.split("-")[0]:e;for(let a in Ea)if(n===a.split("-")[0]&&Ea[a].useAsRoot){e=a;break}}let t=await fetch(`/api/v1/calculator/language/${e}.ftl?${new URLSearchParams(kd)}`,{headers:{Accept:"application/json"}});if(!t.ok)throw t.status===404&&Gt.warn(e+" is not an available language."),void 0;let r=await t.json();return Qs[e]=r[e],lg(Qs),wd(e),!0}function xx(e){return!!Qs[e]}lg(Qs);wd(Xs());function pg(e,t){return{type:"Group",span:e,args:t}}function wx(e,t,r){return{type:"Sqrt",span:e,optArg:t,arg:r}}function vx(e,t,r){return{type:"Frac",span:e,num:t,den:r}}function kx(e,t,r,n){return{type:"SupSub",span:e,sup:t,sub:r,nprimes:n}}function Ex(e,t,r,n){return{type:"LeftRight",span:e,left:t,right:r,arg:n}}function Cx(e,t){return{type:"OperatorName",span:e,arg:t}}function Tx(e,t){return{type:"TokenNode",span:e,arg:t}}function Sx(e,t){return{type:"Symbol",span:e,val:t}}function Dx(e){switch(e){case"Frac":return 2;case"^":case"_":case"Primes^":case"Left":case"Sqrt":case"OperatorName":case"Token":return 1;default:return 0}}function Mx(e){let{state:t,tree:r}=Cd(zl(e),!1);if(!Do(t))throw`Parse error: unexpected ${or(Lr(t).span)}.`;return r}function mn(e,t){return{state:e,tree:t}}function Cd(e,t){let r=e,n=[];e:for(;!Do(e);){let c=Lr(e);switch(c.type){case"Cmd":case"EscapedSymbol":case"Letter":case"Digit":case"Symbol":case"[":case"{":case"^":case"_":case"Primes":case"Primes^":case"Left":case"Frac":case"Sqrt":case"OperatorName":case"Token":case"]":{if(c.type==="]"&&t)break e;let p;if({state:e,tree:p}=Ax(e),p.type==="Group")for(let g of p.args)n.push(g);else n.push(p);break}case"}":case"Right":case"End":break e;default:throw`Unexpected token type ${c.type}.`}}let a=Ua(r,e);return mn(e,pg(a,n))}function Ax(e){let t=Lr(e);switch(t.type){case"Cmd":case"EscapedSymbol":case"Letter":case"Digit":case"Symbol":return e=Jr(e),mn(e,t);case"[":case"]":return e=Jr(e),mn(e,Sx(t.span,t.val));case"{":{e=Jr(e);let n;return{state:e,tree:n}=Cd(e,!1),e=Hn(e,"}"),mn(e,n)}case"^":case"_":case"Primes":case"Primes^":return T0(e);case"Left":return C0(e);case"Frac":return E0(e);case"Sqrt":return k0(e);case"OperatorName":return w0(e);case"Token":return v0(e);case"}":case"Right":throw`Parse Error: unexpected ${t.val}.`;case"End":throw"Parse Error: unexpected end.";default:throw`Unexpected token type ${t.type}.`}}function w0(e){let t=e,r=Lr(e);e=Hn(e,"OperatorName");let n;({state:e,tree:n}=Ha(e,r));let a=Ua(t,e);return mn(e,Cx(a,n))}function v0(e){let t=e,r=Lr(e);e=Hn(e,"Token");let n;({state:e,tree:n}=Ha(e,r));let a=Ua(t,e);return mn(e,Tx(a,n))}function k0(e){let t=e,r=Lr(e);e=Hn(e,"Sqrt");let n;Ab(e,"[")&&({state:e,tree:n}=S0(e));let a;({state:e,tree:a}=Ha(e,r));let c=Ua(t,e);return mn(e,wx(c,n,a))}function E0(e){let t=e,r=Lr(e);e=Hn(e,"Frac");let n;({state:e,tree:n}=Ha(e,r));let a;({state:e,tree:a}=Ha(e,r));let c=Ua(t,e);return mn(e,vx(c,n,a))}function C0(e){let t=e;e=Hn(e,"Left");let r=Lr(e);e=Jr(e);let n;({state:e,tree:n}=Cd(e,!1)),e=Hn(e,"Right");let a=Lr(e);e=Jr(e);let c=Ua(t,e);return mn(e,Ex(c,r,a,n))}function T0(e){let t=e,r,n,a=0;e:for(;!Do(e);){let l=Lr(e);switch(l.type){case"^":if(e=Jr(e),r)throw"Parse Error: double superscript.";({state:e,tree:r}=Ha(e,l));break;case"_":if(e=Jr(e),n)throw"Parse Error: double subscript.";({state:e,tree:n}=Ha(e,l));break;case"Primes":if(e=Jr(e),a>0)throw"Parse Error: double primes.";a=l.val.length;break;case"Primes^":if(e=Jr(e),a>0)throw"Parse Error: double primes.";if(r)throw"Parse Error: double superscript";a=l.val.length-1,{state:e,tree:r}=Ha(e,l);break;default:break e}}let c=Ua(t,e);return mn(e,kx(c,r,n,a))}function Ha(e,t){let r=Dx(t.type),n;if(r<=0)throw new Error("Programming Error: greediness must be greater than 0.");let a=Dx(Lr(e).type);if(a>0&&a<=r){let c=or(t.span);throw`Parse Error: can't use ${or(Lr(e).span)} as argument of ${c}. Use {}.`}return{state:e,tree:n}=Ax(e),n.type!=="Group"&&(n=pg(n.span,[n])),mn(e,n)}function S0(e){e=Hn(e,"[");let t;return{state:e,tree:t}=Cd(e,!0),e=Hn(e,"]"),mn(e,t)}var D0={mcd:"gcd",gcf:"gcd",mcm:"lcm",signum:"sign",sgn:"sign",stdDevP:"stdevp",stddevp:"stdevp",stdDev:"stdev",stddev:"stdev",variance:"var",TTest:"ttest",TScore:"tscore",IndependentTTest:"ittest",iTTest:"ittest",inverseCdf:"quantile",inversecdf:"quantile",arsinh:"arcsinh",arcosh:"arccosh",artanh:"arctanh",arcsch:"arccsch",arsech:"arcsech",arcoth:"arccoth"};function Lx(e){let t=0;for(;$l(e.charCodeAt(t));)t+=1;return t>0&&(e=e.slice(t)),D0[e]||e}function Gx(e,t){return{type:"Equals",span:e,args:t}}function Zs(e,t,r){return{type:"Inequality",span:e,symbol:t,args:r}}function Vx(e,t,r){return{type:"TrailingInequalityPiece",span:e,symbol:t,args:r}}function Ix(e,t,r){return{type:"InequalityChain",span:e,first:t,chain:r}}function Nx(e,t){return{type:"Tilde",span:e,args:t}}function Px(e,t){return{type:"Pos",span:e,args:t}}function Ox(e,t){return{type:"Neg",span:e,args:t}}function Fx(e,t){return{type:"Add",span:e,args:t}}function _x(e,t){return{type:"Sub",span:e,args:t}}function Rx(e,t){return{type:"Mul",span:e,args:t}}function qx(e,t){return{type:"DotMul",span:e,args:t}}function Bx(e,t){return{type:"CrossMul",span:e,args:t}}function Ux(e,t){return{type:"Div",span:e,args:t}}function $x(e,t){return{type:"Bang",span:e,args:t}}function ec(e,t){return{type:"Call",span:e,args:t}}function gg(e,t){return{type:"ImplicitCall",span:e,args:t}}function zx(e,t){return{type:"Index",span:e,args:t}}function hg(e,t){return{type:"Paren",span:e,args:t}}function mg(e,t){return{type:"List",span:e,args:t}}function Kx(e,t){return{type:"Pipes",span:e,args:t}}function fg(e,t){return{type:"Subscript",span:e,args:t}}function Td(e,t){return{type:"Superscript",span:e,args:t}}function tc(e,t,r){return{type:"Prime",span:e,nprimes:t,args:r}}function Sd(e,t){return{type:"Seq",span:e,args:t}}function Wx(e,t){return{type:"Sqrt",span:e,args:t}}function Hx(e,t){return{type:"Nthroot",span:e,args:t}}function jx(e,t){return{type:"Frac",span:e,args:t}}function Yx(e,t){return{type:"Derivative",span:e,args:t}}function Jx(e,t){return{type:"Integral",span:e,args:t}}function Qx(e,t){return{type:"EmptyIntegral",span:e,args:t}}function Xx(e,t){return{type:"Sum",span:e,args:t}}function Zx(e,t){return{type:"Product",span:e,args:t}}function ew(e,t){return{type:"Piecewise",span:e,args:t}}function tw(e){return{type:"EmptyPiecewise",span:e}}function rw(e){return{type:"EmptyRangeEnd",span:e}}function nw(e,t){return{type:"Colon",span:e,args:t}}function yg(e,t){return{type:"Ellipsis",span:e,args:t}}function aw(e,t){return{type:"For",span:e,args:t}}function iw(e,t){return{type:"With",span:e,args:t}}function ow(e,t){return{type:"Dot",span:e,args:t}}function sw(e,t){return{type:"PercentOf",span:e,args:t}}function cw(e,t){return{type:"RightArrow",span:e,args:t}}function bg(e,t){return{type:"Juxt",span:e,args:t}}function lw(e,t){return{type:"Letter",span:e,val:t}}function Dd(e,t){return{type:"Decimal",span:e,val:t}}function Ii(e,t){return{type:"Cmd",span:e,val:Lx(t)}}function dw(e,t){return{type:"Alphanumeric",span:e,val:t}}function uw(e,t,r,n){return{type:"MixedNumber",span:e,whole:t,num:r,den:n}}function Ut(e){if(e.type==="Subscript"){if(e.args[1].type!=="Alphanumeric")return!1;e=e.args[0]}switch(e.type){case"Cmd":return!0;case"Letter":return!0;default:return!1}}function pw(e){return e.type!=="Superscript"?!1:Ut(e.args[0])}function gw(e,t){if(e.type!=="Letter"||e.val!=="d"||t.type!=="Juxt")return!1;let[r,n]=t.args;return r.type!=="Letter"||r.val!=="d"?!1:Ut(n)}function $t(e){return e.type==="Seq"?e.args:[e]}function oe(e,t){return{type:"Err",span:e,error:t}}function xg(){return{type:"UnexpectedParseError"}}function hw(){return{type:"EmptyInput"}}function mw(){return{type:"EmptyGroup"}}function wg(){return{type:"EmptySubscript"}}function fw(){return{type:"EmptySuperscript"}}function vg(){return{type:"EmptyRadical"}}function yw(){return{type:"EmptySquareBracket"}}function bw(){return{type:"EmptyPipe"}}function xw(){return{type:"EmptyRadicalIndex"}}function kg(){return{type:"UnexpectedEnd"}}function ja(e){return{type:"BinaryOperatorMissingRight",val:e}}function ww(e){return{type:"BinaryOperatorMissingLeft",val:e}}function Eg(e){return{type:"UnaryOperatorMissingRight",val:e}}function Cg(e){return{type:"UnaryOperatorMissingLeft",val:e}}function vw(e,t){return{type:"MissingCloseDelimiter",open:e,close:t}}function rc(e,t){return{type:"UnexpectedCloseDelimiter",open:e,close:t}}function kw(){return{type:"UnexpectedDifferential"}}function Ew(e){return{type:"UnrecognizedSymbol",val:e}}function Cw(e){return{type:"InvalidSubscript",val:e}}function Tw(e){return{type:"UnexpectedSubscript",base:e}}function Tg(e){return{type:"FunctionMissingArgument",val:e}}function Sw(){return{type:"PercentMissingOf"}}function Sg(){return{type:"PrimeWithoutParen"}}function Dw(){return{type:"SuperscriptWithPrime"}}function Md(){return{type:"UnexpectedPrime"}}function Mw(){return{type:"SumMissingBound"}}function Aw(){return{type:"ProductMissingBound"}}function Dg(){return{type:"MissingBound"}}function Lw(){return{type:"IntegralMissingBound"}}function Gw(){return{type:"SumMissingBody"}}function Vw(){return{type:"ProductMissingBody"}}function Iw(){return{type:"IntegralMissingBody"}}function Nw(){return{type:"DerivativeMissingBody"}}function Pw(){return{type:"IntegralMissingDifferential"}}function Ow(){return{type:"DifferentialWithSuperscript"}}function Fw(){return{type:"FractionMissingNumerator"}}function _w(){return{type:"FractionMissingDenominator"}}function Rw(){return{type:"FractionEmpty"}}function Mg(e){return{type:"AdjacentNumbers",args:e}}function qw(){return{type:"UnexpectedFor"}}function Bw(){return{type:"TokenWithSubscript"}}var L0={"+":!0,"-":!0,"*":!0,"\\cdot":!0,"\\times":!0,"/":!0,"!":!0,"(":!0,")":!0,"\\{":!0,"\\}":!0,"(|":!0,"|)":!0,"[":!0,"]":!0,",":!0,"...":!0,":":!0,"=":!0,">":!0,"<":!0,">=":!0,"<=":!0,"->":!0,"~":!0,"%":!0,".":!0,for:!0,with:!0,Letter:!0,Decimal:!0,Cmd:!0,TokenNode:!0,Differential:!0,End:!0,Trig:!0,Ln:!0,Log:!0,Int:!0,Sum:!0,Prod:!0,Err:!0},Ya={"\\lt":"<","\\gt":">","\\le":"<=","\\ge":">=","\\leq":"<=","\\geq":">=","\\ldots":"...","\\sim":"~","\\to":"->","\\cdot":"\\cdot","\\times":"\\times","\\div":"/","\\ln":"Ln","\\log":"Log","\\int":"Int","\\sum":"Sum","\\prod":"Prod","\\backslash":"Err","\\for":"for","\\with":"with"},G0=["sin","cos","tan","cot","sec","csc"];for(let e of G0)Ya["\\"+e]="Trig",Ya["\\"+e+"h"]="Trig",Ya["\\arc"+e]="Trig",Ya["\\arc"+e+"h"]="Trig",Ya["\\ar"+e+"h"]="Trig";var Ag={"+":"+","-":"-","*":"*","/":"/","!":"!","(":"(",")":")","[":"[","]":"]",",":",","...":"...",":":":","=":"=",">=":">=","<=":"<=",">":">","<":"<","~":"~",".":"."},Uw={"\\{":"\\{","\\}":"\\}","\\%":"%"},$w={"|":"(|","\\{":"\\{","[":"[","(":"("},zw={"|":"|)","\\}":"\\}","]":"]",")":")"},Kw=Object.keys(L0);function Ww(e,t,r,n,a,c,l,p){return{opts:e,input:t,prevSpan:r,startIndex:n,endIndex:a,token:c,mode:l,parent:p}}function ae(e,t){return ir(e.token.span,t.prevSpan)}function ht(e,t){return ir(e,t.prevSpan)}function Gg(e){return Mn(e.token.span.input,e.token.span.start)}function V0(e,t){return{type:"Differential",span:e,val:t}}function pr(e,t,r){return{type:e,span:t,val:r}}function Ta(e,t){let r=Mn(e.span.input,e.span.start);return Vg(t,e,0,r,void 0,void 0)}function Vg(e,t,r,n,a,c){let l=t.args;if(r>l.length&&c)return Hw(c,n);r=nc(l,r);let{token:p,endIndex:g}=jw(t,r,a);if(p.type==="End"&&c){let f=c.input.args[c.startIndex];if(f.type==="LeftRight"){let w=f.right,M=zw[w.val]||"Err",G=pr(M,w.span,w.val);return Ww(e,t,n,r,g,G,a,c)}}else p.type==="Int"?a=I0(a):p.type==="Differential"&&(a=N0(a));return Ww(e,t,n,r,g,p,a,c)}function pe(e){let t=e.input.args[e.startIndex],r=e.token.span;return t&&t.type==="LeftRight"?Vg(e.opts,t.arg,0,r,e.mode,e):Hw(e,r)}function Hw(e,t){let{input:r,endIndex:n,mode:a,parent:c}=e;return Vg(e.opts,r,n+1,t,a,c)}function zt(e){return e.token}function I0(e){return{type:"integral",parent:e}}function N0(e){if(!e||e.type!=="integral")throw new Error("Programming Error: expected lexer to be in integral mode.");return e.parent}function Kt(e,t){return zt(e).type===t}function Gd(e){return e.startIndex>=e.input.args.length}function Ig(e,t){return t.token.span.start>e.token.span.start}function Tt(e,t){return{token:t,endIndex:e}}function jw(e,t,r){let n=e.args;if(t>=n.length){let l=Mn(e.span.input,e.span.end);return Tt(t,pr("End",l,""))}let a=e.args[t];switch(a.type){case"Sqrt":case"Frac":case"SupSub":return Tt(t,a);case"Letter":{if(!r||r.type!=="integral"||a.val!="d")return Tt(t,a);let{endIndex:w,token:M}=jw(e,t+1,r);if(M.type==="Letter"||M.type==="Cmd"){let G=V0(ir(a.span,M.span),M.val);return Tt(w,G)}else return Tt(t,a)}case"LeftRight":{let w=a.left,M=$w[w.val]||"Err";var c=ir(a.span,w.span);return Tt(t,pr(M,c,w.val))}case"OperatorName":let l=[];for(let w of a.arg.args){if(w.type!=="Letter")return Tt(t,pr("Err",a.span,or(a.arg.span)));l.push(w.val)}let p="\\"+l.join(""),g=Ya[p]||"Cmd";return Tt(t,pr(g,a.span,p));case"TokenNode":{let w="$";if(a.arg.args.length===0)return Tt(t,pr("Err",a.span,or(a.arg.span)));for(let M of a.arg.args){if(M.type!=="Digit")return Tt(t,pr("Err",a.span,or(a.arg.span)));w+=M.val}return Tt(t,pr("TokenNode",a.span,w))}case"Cmd":{let w=Ya[a.val]||"Cmd";return Tt(t,pr(w,a.span,a.val))}case"EscapedSymbol":{let w=Uw[a.val]||"Err";return Tt(t,pr(w,a.span,a.val))}case"Symbol":return P0(e,t,a);case"Digit":return Yw(e,t);default:throw`Unexpected atom ${a.type}.`}}function P0(e,t,r){switch(r.val){case".":return O0(e,t);case"-":{let a=e.args[t+1];if(a&&Ad(a,">")){let c=pr("->",ir(r.span,a.span),"->");return Tt(t+1,c)}break}case"<":{let a=e.args[t+1];if(a&&Ad(a,"=")){let c=pr("<=",ir(r.span,a.span),"<=");return Tt(t+1,c)}break}case">":{let a=e.args[t+1];if(a&&Ad(a,"=")){let c=pr(">=",ir(r.span,a.span),">=");return Tt(t+1,c)}break}}let n=Ag[r.val]||"Err";return Tt(t,pr(n,r.span,r.val))}function O0(e,t){let r=e.args[t];if(r.type!=="Symbol"||r.val!==".")throw new Error("Programming Error: expected '.'");if(t+2<e.args.length&&Ld(e.args[t+1])&&Ld(e.args[t+2])){let c=ir(r.span,e.args[t+2].span);return Tt(t+2,pr("...",c,or(c)))}let n=nc(e.args,t+1);if(n<e.args.length&&e.args[n].type==="Digit")return Yw(e,t);let a=Ag[r.val]||"Err";return Tt(t,pr(a,r.span,r.val))}function Yw(e,t){let r=F0(e,t);if(r)return r;let n=e.args,a=e.args[t].span,c=[],l=!1,p=!1;for(;t<n.length;t++){let f=nc(n,t);if(f>=n.length)break;let w=n[f];if(w.type==="Digit")t=f,l=!0,c.push(w.val);else if(!p&&Ld(w)){if(f+1<n.length&&Ld(e.args[f+1]))break;t=f,p=!0,c.push(".")}else break}if(!l)throw new Error("Programming Error: decimals must have at least one digit.");let g=ir(a,e.args[t-1].span);return Tt(t-1,pr("Decimal",g,c.join("")))}function F0(e,t){let r=e.args,n=r[t].span,a=[];for(;t<r.length;t++){let f=nc(r,t);if(f>=r.length)break;let w=r[f];if(w.type!=="Digit")break;t=f,a.push(w.val)}if(t=nc(r,t),t>=r.length)return;let c=r[t];if(c.type!=="Frac")return;let l=[],p=[];for(let f of c.num.args)if(!Lg(f)){if(f.type!=="Digit")return;l.push(f.val)}for(let f of c.den.args)if(!Lg(f)){if(f.type!=="Digit")return;p.push(f.val)}let g=ir(n,c.span);return Tt(t,uw(g,a.join(""),l.join(""),p.join("")))}function Lg(e){switch(e.type){case"Sqrt":case"Frac":case"SupSub":case"LeftRight":case"OperatorName":case"TokenNode":case"Symbol":case"Letter":case"Digit":return!1;case"Cmd":return e.val==="\\space";case"EscapedSymbol":return e.val==="\\ "||e.val==="\\:"||e.val==="\\,"||e.val==="\\;";default:throw`Unexpected atom ${e.type}.`}}function nc(e,t){for(;t<e.length&&Lg(e[t]);)t+=1;return t}function Ld(e){return Ad(e,".")}function Ad(e,t){return e.type==="Symbol"&&e.val===t}function zo(e){return{type:"initial",tokenType:e}}function ac(e){return{type:"l",tokenType:e}}function ic(e){return{type:"r",tokenType:e}}function Ne(e){return{type:"la",tokenType:e}}function Ko(e){return{type:"ra",tokenType:e}}function Jw(e,t){for(let r of Kw)if(t[r]===void 0)throw new Error(`Programming Error: token ${r} must be a assigned a ${e} precedence`)}function Ni(e,t,r,n){if(t[r]!==void 0)throw new Error(`Programming Error: duplicate ${e} entry for token ${r}.`);t[r]=n}function Qw(e){let t={},r={},n={};for(let p=0;p<e.length;p++){let g=e[p];for(let{type:f,tokenType:w}of g)switch(f){case"initial":Ni("initial",t,w,p);break;case"l":Ni("left",r,w,p);break;case"r":Ni("right",n,w,p);break;case"la":Ni("left",r,w,p),Ni("right",n,w,p);break;case"ra":Ni("left",r,w,p),Ni("right",n,w,p-1);break}}Jw("left",r),Jw("right",n);function a(p){return n[p]}function c(p){return r[p]}function l(p){let g=t[p];return g===void 0?a(p):g}return{rightPrec:a,leftPrec:c,initialPrec:l}}var Wo={},_0=["sin","cos","tan","cot","sec","csc","sinh","cosh","tanh","coth","sech","csch"];_0.forEach(function(e){Wo[e]="arc"+e,Wo["arc"+e]=e});var R0=0;function tv(e,t){return q0(e,t)}function ve(e,t){let r=[];for(let n=0;n<t.length;n++)r.push(Xe(e,t[n]));return r}function q0(e,t){return e.setInput(B0(e,t),t.span)}function rv(e){if(e.type!=="Call")return;let[t,r]=e.args,n=$t(r);if(Ut(t)&&n.every(Ut))return{base:t,args:n}}function nv(e){return rv(e)!==void 0}function av(e){return e.type==="Paren"&&e.args[0].type==="Seq"&&e.args[0].args.every(Ut)}function Pg(e){return Ut(e)||av(e)}function B0(e,t){let r=e.nodes;switch(t.type){case"Equals":{let[n,a]=t.args,c=rv(n);if(c){let{base:l,args:p}=c;return r.FunctionDefinition(Xe(e,l),ve(e,p),Xe(e,a))}else if(Pg(n)){let l=Xe(e,a);return av(n)?r.CoordinateEquation(Xe(e,n),l):r.Assignment(Xe(e,n),l)}return r.Equation(Xe(e,n),Xe(e,a))}case"Tilde":{let[n,a]=ve(e,t.args);return r.Regression(n,a)}case"Inequality":return Pi(e,t);case"InequalityChain":{if(t.chain.length>1)throw Pp();let{first:{symbol:n,args:[a,c]},chain:[{symbol:l,args:[p]}]}=t;return Ut(c)?r.DoubleInequality([Xe(e,a),n,Xe(e,c),l,Xe(e,p)]):Pi(e,t)}case"Call":{let[n,a]=t.args;if(n.type==="Cmd")switch(n.val){case"histogram":return r.Histogram(ve(e,$t(a)));case"dotplot":return r.DotPlot(ve(e,$t(a)));case"boxplot":return r.BoxPlot(ve(e,$t(a)));case"ttest":return r.TTest(ve(e,$t(a)));case"ittest":return r.IndependentTTest(ve(e,$t(a)));case"stats":return r.Stats(ve(e,$t(a)));default:return oc(e,t)}return oc(e,t)}default:return oc(e,t)}}function iv(e){if(e.type!=="Paren")return!1;let[t]=e.args;return t.type!=="Seq"?!1:t.args.length===2||t.args.length===3}function Xe(e,t){return e.setInput(oc(e,t),t.span)}function oc(e,t){let r=e.nodes;switch(t.type){case"Pos":return Xe(e,t.args[0]);case"Neg":let n=-1,a=t.args[0];for(;;)if(a.type==="Pos"||a.type==="Paren"&&!iv(a))a=a.args[0];else if(a.type==="Neg")a=a.args[0],n*=-1;else break;switch(a.type){case"Decimal":{let l=Zw(a);return r.Constant(n===-1?Kn(l):l)}case"MixedNumber":{let l=ev(a);return r.MixedNumber(n===-1?Kn(l):l)}default:return n===-1?r.Negative([Xe(e,a)]):Xe(e,a)}case"Add":return r.Add(ve(e,t.args));case"Sub":return r.Subtract(ve(e,t.args));case"Mul":return r.Multiply(ve(e,t.args));case"DotMul":return r.DotMultiply(ve(e,t.args));case"CrossMul":return r.CrossMultiply(ve(e,t.args));case"Div":return r.Divide(ve(e,t.args));case"Bang":{let[l]=t.args;return l.type==="Call"&&!Vd(l.args[0])?r.FunctionFactorial(ve(e,l.args)):r.FunctionCall("\\factorial",ve(e,t.args))}case"PercentOf":return r.PercentOf(ve(e,t.args));case"Call":return Xw(e,t);case"ImplicitCall":return H0(t),Xw(e,t);case"Dot":{let l=t.args[1],[p,g]=ve(e,t.args);if(Vd(l)){let f=Mn(l.span.input,l.span.end),w=e.setInput(cv(e),f);g=e.setInput(r.SeededFunctionCall(g,[w]),l.span)}else if(l.type==="Letter")switch(l.val){case"x":case"y":case"z":return r.NamedCoordinateAccess(l.val,[p]);default:break}else if(l.type==="Call"){let f=l.args[0];if(f.type==="Letter")switch(f.val){case"x":case"y":case"z":return r.Multiply([e.setInput(r.NamedCoordinateAccess(f.val,[p]),ir(t.args[0].span,f.span)),Xe(e,l.args[1])])}}return r.DotAccess([p,g])}case"Prime":{let[l]=t.args;if(l.type==="Call"){let[p,g]=l.args,f=$t(g).length;if(p.type==="Cmd"&&p.val==="logbase"){if(f!==2)throw Ap()}else if(f!==1)throw Ap();return r.Prime(t.nprimes,ve(e,t.args))}else throw l.type==="ImplicitCall"?Np():Ip()}case"Index":{let[l,p]=t.args;if(p.type==="Seq")return r.ListAccess([Xe(e,l),e.setInput(r.List(ve(e,p.args)),void 0)]);if(p.type==="Ellipsis"){let[g,f]=p.args;return r.ListAccess([Xe(e,l),e.setInput(r.Range([e.setInput(r.List(ve(e,$t(g))),void 0),e.setInput(r.List(f.type==="EmptyRangeEnd"?[]:ve(e,$t(f))),void 0)]),void 0)])}return sv(p)?r.ListAccess([Xe(e,l),e.setInput(Pi(e,p),void 0)]):r.ListAccess(ve(e,t.args))}case"Paren":{let[l]=t.args;if(l.type==="Seq"){if(l.args.length===0)throw Ly();return r.ParenSeq(ve(e,l.args))}else return Xe(e,l)}case"List":{if(t.args.length===0)return r.List([]);let l=t.args[0];if(l.type==="Ellipsis"){let[p,g]=l.args;return r.Range([e.setInput(r.List(ve(e,$t(p))),void 0),e.setInput(r.List(ve(e,$t(g))),void 0)])}else if(l.type==="For"){let[p,g]=l.args,f=e.setInput(r.Identifier(`_comprehensionIndex_${R0++}`),void 0),w=Xe(Id(e,{prefix:"li",expr:f}),p),M=[];for(let G of $t(g)){if(!sc(G))throw yb();M.push(e.setInput(r.AssignmentExpression(ve(e,G.args)),G.span))}return r.ListComprehension(f,w,M)}return r.List(ve(e,$t(l)))}case"Pipes":{let[l]=t.args;return r.Norm([Xe(e,l)])}case"Subscript":{let[l,p]=t.args;if(p.val.length===0)throw Vp();let g;switch(l.type){case"Letter":g=l.val;break;case"Cmd":g=l.val;break;default:throw Sy()}if(g==="ans")throw Ti("ans");return r.Identifier(`${g}_${p.val}`)}case"Superscript":{let[l,p]=t.args;if(l.type==="Call"&&l.args[1].type!=="Seq"&&!Vd(l.args[0])&&!j0(l))return r.FunctionExponent(ve(e,[l.args[0],l.args[1],p]));if(l.type==="Dot"){let g=l.args[1],[f,w]=ve(e,l.args),M=Xe(e,p);if(g.type==="Letter")switch(g.val){case"x":case"y":case"z":return r.Exponent([e.setInput(r.NamedCoordinateAccess(g.val,[f]),l.span),M]);default:break}else if(g.type==="Call"){let G=g.args[0];if(G.type==="Letter")switch(G.val){case"x":case"y":case"z":return r.Multiply([e.setInput(r.NamedCoordinateAccess(G.val,[f]),ir(l.args[0].span,G.span)),e.setInput(r.Exponent([Xe(e,g.args[1]),M]),vr(t.span.input,g.args[0].span.end,p.span.end))]);default:break}}return r.Exponent([e.setInput(r.DotAccess([f,w]),l.span),M])}else return r.Exponent(ve(e,t.args))}case"Sqrt":return r.FunctionCall("sqrt",ve(e,t.args));case"Nthroot":return r.FunctionCall("nthroot",ve(e,[t.args[1],t.args[0]]));case"Frac":return r.Divide(ve(e,t.args));case"Derivative":{let l=ve(e,t.args);if(!Ut(t.args[0]))throw Ci(`Expected identifier in derivative, but found ${t.args[0].type}`);return r.Derivative(l[0],[l[1]])}case"Integral":{let[l,p,g,f]=t.args,w=ve(e,[l,p,g,f]);return r.Integral(w)}case"EmptyIntegral":{let[l,p,g]=ve(e,t.args),f=e.setInput(r.Constant(Qe(1,1)),void 0);return r.Integral([l,p,g,f])}case"Sum":{let[l,p,g]=t.args;if(!sc(p))throw Wy();let f=ve(e,[p.args[0],p.args[1],g]),w=Xe(Id(e,{prefix:"ro",expr:f[0]}),l);return r.Sum(f.concat(w))}case"Product":{let[l,p,g]=t.args;if(!sc(p))throw Hy();let f=ve(e,[p.args[0],p.args[1],g]),w=Xe(Id(e,{prefix:"ro",expr:f[0]}),l);return r.Product(f.concat(w))}case"Juxt":{if(e.writeIntegral){let[g,f]=t.args;if(f.type==="Letter"&&f.val==="t"&&g.type==="Juxt"&&([g,f]=g.args,f.type==="Letter"&&f.val==="n")){if(g.type==="Juxt"){if([g,f]=g.args,f.type==="Letter"&&f.val==="i")throw Op()}else if(g.type==="Letter"&&g.val==="i")throw Op()}}let[l,p]=t.args;if(l.type==="MixedNumber"&&!(Ut(p)||p.type==="Piecewise"||p.type==="Call"||p.type==="Paren"))throw Gp(Nd(l));if(p.type==="MixedNumber")throw Gp(Nd(p));return r.Multiply(ve(e,t.args))}case"Letter":return r.Identifier(t.val);case"Cmd":{let l=t.val;switch(l){case"ans":{if(e.currentIndex===void 0)throw Co("ans");return r.Ans(`ans_{${e.currentIndex-1}}`)}case"approx":throw Mp(l);case"dt":{if(!e.allowDt)throw Co(l);return r.Identifier(l)}case"index":{if(!e.allowIndex)throw Co(l);return r.Identifier(l)}default:return r.Identifier(l)}}case"With":{if(e.isSubstitutionRHS)throw Bp();let[l,p]=t.args,g=ar(be({},e),{isSubstitutionRHS:!0});return r.Substitution(Xe(g,l),z0(g,p))}case"Decimal":return r.Constant(Zw(t));case"MixedNumber":return r.MixedNumber(ev(t));case"Piecewise":return W0(e,t);case"RightArrow":return K0(e,t);case"Seq":return r.BareSeq(ve(e,t.args));case"EmptyPiecewise":if(!r.Piecewise.empty)throw Ye();return r.Piecewise.empty();case"Equals":throw Ti("=");case"Inequality":case"InequalityChain":throw oy();case"Tilde":throw Ti("~");case"Colon":throw Ti(":");case"Ellipsis":throw Ti("...");case"For":throw qp();case"EmptyRangeEnd":throw $y();case"Err":throw Y0(t.error);default:throw`Unexpected surface node ${t.type}.`}}function Ng(e){return Wo.hasOwnProperty(e)}function ov(e){return e==="ln"||e==="log"||e==="logbase"}function U0(e){return e.type==="Decimal"&&e.val==="2"}function $0(e){return e.type!=="Neg"?!1:(e=e.args[0],e.type==="Decimal"&&e.val==="1")}function Xw(e,t){let r=e.nodes,[n,a]=t.args,c=Xe(e,n),l=$t(a),p=ve(e,l);if(Vd(n)){let g=Mn(a.span.input,a.span.start),f=e.setInput(cv(e),g);return r.SeededFunctionCall(c,[f].concat(p))}if(Ut(n))return r.FunctionCall(c,p);if(n.type==="Superscript"){let[g,f]=n.args;if(g.type==="Cmd"){let w=g.val;if(Ng(w)||ov(w)){if(U0(f))return r.Exponent([e.setInput(r.FunctionCall(w,p),void 0),Xe(e,f)]);if($0(f)&&Wo[w]!==void 0)return r.FunctionCall(Wo[w],p);throw Ng(w)?Iy(w):Ny(w==="logbase"?"log":w)}}}return r.Multiply([c,Xe(e,a)])}function z0(e,t){let r=e.nodes;if(t.type==="Seq"){let c=!1,l=!1;for(let p=0;p<t.args.length;p++){if(t.args[p].type==="With")throw Pl();sc(t.args[p])?c=!0:l=!0}if(c&&l)throw Pl()}if(t.type==="With")throw Bp();let n=$t(t),a=[];for(let c of n){if(!sc(c))throw bb();let l=e.setInput(r.AssignmentExpression(ve(e,c.args)),c.span);a.push(l)}return a}function K0(e,t){let r=e.nodes;if(!Ut(t.args[0]))throw hy();return e=Id(e,{prefix:"ec",expr:e.setInput(r.Identifier("globalEventCount"),void 0)}),r.UpdateRule(ve(e,t.args))}function W0(e,t){let r=e.nodes,[n]=t.args,a=$t(n),c,l=[];e:for(c=0;c<a.length;c++){let G=a[c];switch(G.type){case"Colon":{let[R,se]=G.args;if(!sv(R))throw Fy();if(se.type==="With"&&se.args[1].type==="Seq")throw Pl();l.push({condition:e.setInput(Pi(e,R),R.span),if_expr:Xe(e,se)});break}case"Equals":case"Inequality":case"InequalityChain":l.push({condition:e.setInput(Pi(e,G),G.span),if_expr:e.setInput(r.Constant(Qe(1,1)),vr("1",0,1))});break;default:break e}}if(c===0)throw Py();if(c<a.length-1)throw Oy();let p,g;c===a.length-1?(p=oc(e,a[c]),g=a[c]):p=r.Constant(NaN);let f=p,w=g==null?void 0:g.span,M;for(;l.length;)M=l.pop(),f=r.Piecewise([M.condition,M.if_expr,e.setInput(f,w)]),w=void 0;return f}function sv(e){return e.type==="Equals"||e.type==="Inequality"||e.type==="InequalityChain"}function Pi(e,t){let r=e.nodes;switch(t.type){case"Equals":return r.Comparator["="](ve(e,t.args));case"Inequality":return r.Comparator[t.symbol](ve(e,t.args));case"InequalityChain":if(t.chain.length>1)throw Pp();let{first:{symbol:n,args:[a,c]},chain:[{symbol:l,args:[p]}]}=t,g=Mn(t.span.input,t.span.start);return r.And([e.setInput(Pi(e,Zs(g,n,[a,c])),ir(a.span,c.span)),e.setInput(Pi(e,Zs(g,l,[c,p])),ir(c.span,p.span))]);default:throw Ci(`Unexpected type for condition: ${t.type}`)}}function H0(e){let[t,r]=e.args;if(t.type==="Superscript"&&(t=t.args[0]),t.type==="Cmd"&&t.val==="logbase"&&r.type==="Seq"&&r.args.length===2){if(!Ln(r.args[0]))throw Lp("log")}else if(!Ln(r))throw t.type==="Cmd"?Lp(t.val):Ci(`Unexpected type for args of implicit call: ${r.type}`)}function Zw(e){return Ns(e.val)}function ev(e){let t=Ns(e.whole),r=Ns(e.num),n=Ns(e.den);return pa(t,_a(r,n))}function j0(e){if(e.type!=="Call")return!1;let t=e.args[0];for(;t.type==="Superscript"||t.type==="Subscript"||t.type==="Prime";)t=t.args[0];return t.type!=="Cmd"?!1:Ng(t.val)||ov(t.val)}function sc(e){return e.type==="Equals"&&Ut(e.args[0])}function Y0(e){switch(e.type){case"UnexpectedParseError":case"MissingBound":case"EmptyGroup":case"UnexpectedDifferential":case"UnexpectedEnd":return Ci(`Unexpected error type: ${e.type}`);case"InvalidOperatorName":return Ty();case"UnexpectedCloseDelimiter":case"MissingCloseDelimiter":return tb(e.open,e.close);case"UnrecognizedSymbol":return e.val==="."?Ti(e.val):Mp(e.val);case"EmptyInput":return _y();case"BinaryOperatorMissingRight":case"BinaryOperatorMissingLeft":return yy(e.val==="%"?"% of":e.val);case"UnaryOperatorMissingLeft":return by(e.val);case"UnaryOperatorMissingRight":return xy(e.val);case"UnexpectedSubscript":return qy(e.base);case"PercentMissingOf":return rb();case"SumMissingBound":return zy();case"ProductMissingBound":return Ky();case"IntegralMissingBound":return jy();case"SumMissingBody":return Qy();case"ProductMissingBody":return Xy();case"IntegralMissingBody":return Zy();case"DerivativeMissingBody":return eb();case"IntegralMissingDifferential":return Yy();case"DifferentialWithSuperscript":return Jy();case"FractionMissingNumerator":return wy();case"FractionMissingDenominator":return vy();case"FractionEmpty":return ky();case"EmptySuperscript":return Ey();case"EmptySubscript":return Vp();case"InvalidSubscript":return Cy(e.val);case"SuperscriptWithPrime":return Dy();case"PrimeWithoutParen":return Np();case"UnexpectedPrime":return Ip();case"EmptyRadical":return My();case"EmptyRadicalIndex":return Ay();case"EmptySquareBracket":return Gy();case"EmptyPipe":return Vy();case"FunctionMissingArgument":return Il(e.val,1,0);case"AdjacentNumbers":return my(Nd(e.args[0]),Nd(e.args[1]));case"TokenWithSubscript":return fy();case"UnexpectedFor":return qp();default:throw`Unexpected surface node ${e.type}.`}}function Nd(e){switch(e.type){case"Decimal":return e.val;case"MixedNumber":return`${e.whole} ${e.num}/${e.den}`;default:let t=e;throw new Error(`Unexpected node type ${t.type}`)}}function Ln(e){switch(e.type){case"Letter":case"Decimal":case"MixedNumber":case"Cmd":case"EmptyPiecewise":return!0;case"Neg":{let r=e.args[0];for(;;)if(r.type==="Pos"||r.type==="Paren"&&!iv(r))r=r.args[0];else if(r.type==="Neg")r=r.args[0];else break;return r.type==="Decimal"||r.type==="MixedNumber"}case"Pos":return Ln(e.args[0]);case"Paren":return Ln(e.args[0]);case"Juxt":case"Mul":case"DotMul":case"CrossMul":case"Div":return Ln(e.args[0])&&Ln(e.args[1]);case"Subscript":return Ln(e.args[0]);case"Superscript":case"Frac":case"Add":case"Sub":return Ln(e.args[0])&&Ln(e.args[1]);case"Piecewise":{let[r]=e.args;return r.type==="Equals"||r.type==="Inequality"||r.type==="InequalityChain"}case"Call":{let[r,n]=e.args;return Ut(r)||pw(r)?!1:Ln(r)&&Ln(n)}case"Derivative":case"Sqrt":case"Nthroot":case"Pipes":case"Bang":return!1;case"Equals":case"Inequality":case"InequalityChain":case"Tilde":case"ImplicitCall":case"Index":case"List":case"Seq":case"Integral":case"EmptyIntegral":case"Sum":case"Product":case"Colon":case"Ellipsis":case"For":case"With":case"Dot":case"PercentOf":case"Prime":case"EmptyRangeEnd":case"RightArrow":return!1;default:throw`Unexpected surface node ${e.type}.`}}function Vd(e){return e.type!=="Cmd"?!1:e.val==="random"||e.val==="shuffle"}function cv(e){let t=e.nodes.ExtendSeed("",[e.setInput(e.nodes.Identifier("globalRandomSeed"),void 0),e.setInput(e.nodes.Seed(e.nextSeed()),void 0)]);if(!e.seedExtensions)return t;for(let{prefix:r,expr:n}of e.seedExtensions)t=e.nodes.ExtendSeed(r,[e.setInput(t,void 0),n]);return t}function Id(e,t){let r=e.seedExtensions||[];return ar(be({},e),{seedExtensions:r.concat(t)})}var J0=[[zo("("),Ne(")"),zo("\\{"),Ne("\\}"),ic("["),Ne("]"),zo("(|"),Ne("|)"),Ne("Differential"),Ne("End")],[Ne("for")],[ic("with")],[Ko("...")],[Ne(",")],[Ko(":")],[ic("->")],[ac("with")],[Ne("="),Ne(">"),Ne("<"),Ne(">="),Ne("<="),Ne("~")],[ac("->")],[Ne("+"),Ne("-")],[Ne("*"),Ne("\\cdot"),Ne("\\times"),Ne("/"),Ne("Decimal"),Ne("MixedNumber"),Ne("Letter"),Ne("Cmd"),Ne("TokenNode"),Ne("%"),ic("("),Ne("\\{"),Ne("(|"),Ne("Frac"),Ne("Sqrt"),Ne("Trig"),Ne("Ln"),Ne("Log"),Ko("Int"),Ko("Sum"),Ko("Prod")],[zo("+"),zo("-")],[Ne("!")],[Ne("SupSub")],[ac("["),Ne(".")],[ac("(")],[Ne("Err")]],{leftPrec:Pd,rightPrec:lv,initialPrec:gv}=Qw(J0),dv={trailingComma:!1};function hv(e,t){let r=t?be(be({},dv),t):dv,n=Ta(e,r),a=Q0(n);return a.type==="Err"&&a.error.type==="EmptyGroup"?oe(a.span,hw()):a}function Q0(e){return Ja(e,{isToplevel:!0})}function Ja(e,{isToplevel:t}={isToplevel:!1}){if(Gd(e))return oe(ae(e,e),mw());let{state:r,tree:n}=xt(e,0,{isToplevel:t});return n.type!=="Err"&&!Gd(r)?Fg(r).tree:n}function P(e,t){return{state:e,tree:t}}function xt(e,t,{isToplevel:r}={isToplevel:!1}){let n=e,a;if({state:n,tree:a}=X0(n),a.type==="Err")return P(n,a);if(!Ig(e,n))throw new Error("Programming Error: parseInitial did not advance state.");for(;!Gd(n);){let c;if(Kt(n,"(")&&!tD(a)?c=lv("("):c=Pd(zt(n).type),t>=c)break;let l=n,p=Z0(n,a,r)?Pd(",")-1:lv(zt(n).type);if({state:n,tree:a}=eD(n,a,p),a.type==="Err")return P(n,a);if(!Ig(l,n))throw new Error("Programming Error: parseSuccessor did not advance state.")}return P(n,a)}function Nr(e){return e.type==="UnexpectedDifferential"||e.type==="UnexpectedCloseDelimiter"||e.type==="UnexpectedEnd"||e.type==="BinaryOperatorMissingLeft"}function X0(e){let t=e,r=zt(e),n=gv(r.type),a;switch(r.type){case"+":{if(e=pe(e),{state:e,tree:a}=xt(e,n),a.type==="Err"){if(!Nr(a.error))return P(e,a);let l=ae(t,e),p=oe(l,Eg(r.val));return P(e,p)}return P(e,Px(ae(t,e),[a]))}case"-":if(e=pe(e),{state:e,tree:a}=xt(e,n),a.type==="Err"){if(!Nr(a.error))return P(e,a);let l=ae(t,e),p=oe(l,Eg(r.val));return P(e,p)}else return P(e,Ox(ae(t,e),[a]));case"(":return cc(e);case"\\{":return e=pe(e),Kt(e,"\\}")?(e=pe(e),P(e,tw(ae(t,e)))):({state:e,tree:a}=xt(e,n),{state:e,tree:a}=lc(t,e,a,"\\{","\\}"),a.type==="Err"?P(e,a):P(e,ew(ae(t,e),[a])));case"[":return e=pe(e),Kt(e,"]")?(e=pe(e),P(e,mg(ae(t,e),[]))):({state:e,tree:a}=xt(e,n),{state:e,tree:a}=lc(t,e,a,"[","]"),a.type==="Err"?P(e,a):P(e,mg(ae(t,e),[a])));case"(|":{if(e=pe(e),Kt(e,"|)")){e=pe(e);let l=ae(t,e);return P(e,oe(l,bw()))}return{state:e,tree:a}=xt(e,n),{state:e,tree:a}=lc(t,e,a,"(|","|)"),a.type==="Err"?P(e,a):P(e,Kx(ae(t,e),[a]))}case"Frac":{if(e.opts.disallowFrac)throw _p();e=pe(e);let l=Ja(Ta(r.num,e.opts)),p=Ja(Ta(r.den,e.opts));if(l.type==="Err"&&l.error.type==="EmptyGroup"&&p.type==="Err"&&p.error.type==="EmptyGroup"){let g=ae(t,e),f=oe(g,Rw());return P(e,f)}if(l.type==="Err"&&l.error.type==="EmptyGroup"){let g=ae(t,e),f=oe(g,Fw());return P(e,f)}if(p.type==="Err"&&p.error.type==="EmptyGroup"){let g=ae(t,e),f=oe(g,_w());return P(e,f)}if(l.type==="Err")return P(e,l);if(p.type==="Err")return P(e,p);if(gw(l,p)&&p.type==="Juxt"){let g=p.args[1],f;if({state:e,tree:f}=xt(e,Pd("*")-1),f.type==="Err"){if(Nr(f.error)){let w=ae(t,e);return P(e,oe(w,Nw()))}return P(e,f)}return P(e,Yx(ae(t,e),[g,f]))}return P(e,jx(ae(t,e),[l,p]))}case"Sqrt":if(e=pe(e),r.optArg){let l=Ja(Ta(r.optArg,e.opts));if(l.type==="Err")return l.error.type==="EmptyGroup"?P(e,oe(l.span,xw())):P(e,l);let p=Ja(Ta(r.arg,e.opts));return p.type==="Err"?p.error.type==="EmptyGroup"?P(e,oe(p.span,vg())):P(e,p):P(e,Hx(ae(t,e),[l,p]))}else{let l=Ja(Ta(r.arg,e.opts));return l.type==="Err"?l.error.type==="EmptyGroup"?P(e,oe(l.span,vg())):P(e,l):P(e,Wx(ae(t,e),[l]))}case"Trig":case"Ln":{e=pe(e);let l=Ii(ae(t,e),r.val),p=0,g=zt(e);if(g.type==="SupSub"){if(e=pe(e),g.sub){let M=ae(t,e),G=oe(M,Tw(l.val));return P(e,G)}let w=Od(g,e.opts);if(w){if(w.type==="Err")return P(e,w);l=Td(ae(t,e),[l,w])}p=g.nprimes}let f=Kt(e,"(");if(f){if({state:e,tree:a}=cc(e),a.type==="Err")return P(e,a);a=ec(ae(t,e),[l,a.args[0]])}else{if({state:e,tree:a}=xt(e,n-1),a.type==="Err")return Nr(a.error)?P(e,oe(ae(t,e),Tg(r.val))):P(e,a);a=gg(ae(t,e),[l,a])}if(p>0){let w=ae(t,e);if(!f){let M=oe(w,Sg());return P(e,M)}a=tc(w,p,[a])}return P(e,a)}case"Log":{e=pe(e);let l=ae(t,e),p=Ii(l,r.val),g=0,f,w,M=zt(e);if(M.type==="SupSub"&&(e=pe(e),f=mv(M,e.opts),w=Od(M,e.opts),g=M.nprimes),f&&f.type==="Err")return P(e,f);if(w&&w.type==="Err")return P(e,w);let G=Kt(e,"(");if(G){if({state:e,tree:a}=cc(e),a.type==="Err")return P(e,a);a=a.args[0]}else if({state:e,tree:a}=xt(e,n-1),a.type==="Err")return Nr(a.error)?P(e,oe(ae(t,e),Tg(r.val))):P(e,a);let R=f?Ii(l,"\\logbase"):p,se=f?Sd(ae(t,e),$t(a).concat(f)):a;if(w&&(R=Td(ae(t,e),[R,w])),G?a=ec(ae(t,e),[R,se]):a=gg(ae(t,e),[R,se]),g>0){let ce=ae(t,e);if(!G){let Se=oe(ce,Sg());return P(e,Se)}a=tc(ce,g,[a])}return P(e,a)}case"Int":{e=pe(e);let l=zt(e);e=pe(e);let p=Og(l,t,e);if(p.type==="Err")return p.error.type==="MissingBound"?P(e,oe(p.span,Lw())):P(e,p);let{sup:g,sub:f}=p,w;if(Kt(e,"Differential"))return{state:e,tree:w}=pv(e),w.type==="Err"?P(e,w):P(e,Qx(ae(t,e),[w,f,g]));if({state:e,tree:a}=xt(e,n),a.type==="Err")return Nr(a.error)?P(e,oe(a.span,Iw())):P(e,a);let M=a;return Kt(e,"Differential")?({state:e,tree:w}=pv(e),w.type==="Err"?P(e,w):P(e,Jx(ae(t,e),[w,f,g,M]))):P(e,oe(ae(t,e),Pw()))}case"Sum":{e=pe(e);let l=zt(e);e=pe(e);let p=Og(l,t,e);if(p.type==="Err")return p.error.type==="MissingBound"?P(e,oe(p.span,Mw())):P(e,p);let{sup:g,sub:f}=p;return{state:e,tree:a}=xt(e,n),a.type==="Err"?Nr(a.error)?P(e,oe(a.span,Gw())):P(e,a):P(e,Xx(ae(t,e),[a,f,g]))}case"Prod":{e=pe(e);let l=zt(e);e=pe(e);let p=Og(l,t,e);if(p.type==="Err")return p.error.type==="MissingBound"?P(e,oe(p.span,Aw())):P(e,p);let{sup:g,sub:f}=p;return{state:e,tree:a}=xt(e,n),a.type==="Err"?Nr(a.error)?P(e,oe(a.span,Vw())):P(e,a):P(e,Zx(ae(t,e),[a,f,g]))}case"Cmd":return e=pe(e),a=Ii(ae(t,e),r.val),P(e,a);case"TokenNode":{e=pe(e);let l=zt(e);return l.type==="SupSub"&&l.sub?(e=pe(e),P(e,oe(ae(t,e),Bw()))):(a=Ii(ae(t,e),r.val),P(e,a))}case"Letter":return e=pe(e),a=lw(ae(t,e),r.val),P(e,a);case"Decimal":{e=pe(e);let l=Dd(ae(t,e),r.val),p=e.token;if(p.type==="Decimal"||p.type==="MixedNumber"){let g=e;e=pe(e);let f=ae(t,e),w=p.type==="MixedNumber"?p:Dd(ae(g,e),p.val);return P(e,oe(f,Mg([l,w])))}return P(e,l)}case"MixedNumber":{if(e.opts.disallowFrac)throw _p();e=pe(e);let l=e.token;if(l.type==="Decimal"||l.type==="MixedNumber"){let p=e;e=pe(e);let g=ae(t,e),f=l.type==="MixedNumber"?l:Dd(ae(p,e),l.val);return P(e,oe(g,Mg([r,f])))}return P(e,r)}case"*":case"\\cdot":case"\\times":case"/":case",":case"=":case">":case"<":case">=":case"<=":case"->":case"~":case":":case"...":case"%":case".":{e=pe(e);let l=ae(t,e),p=oe(l,ww(r.val));return P(e,p)}case"for":{e=pe(e);let l=ae(t,e),p=oe(l,qw());return P(e,p)}case"with":{e=pe(e);let l=ae(t,e),p=oe(l,xg());return P(e,p)}case"!":{e=pe(e);let l=ae(t,e),p=oe(l,Cg(r.val));return P(e,p)}case"SupSub":{e=pe(e);let l="supsub";r.sub?l="subscript":r.sup?l="superscript":r.nprimes>0&&(l="prime");let p=ae(t,e),g=oe(p,Cg(l));return P(e,g)}case")":case"\\}":case"]":case"|)":case"Differential":return Fg(e);case"Err":{e=pe(e);let l=ae(t,e),p=oe(l,Ew(r.val));return P(e,p)}case"End":{let l=ae(t,e),p=oe(l,kg());return P(e,p)}default:throw`Unexpected token type ${r.type}.`}}function Z0(e,t,r){return Kt(e,"=")&&r&&(nv(t)||Pg(t))}function eD(e,t,r){let n=zt(e),a;switch(n.type){case"+":case"-":case"*":case"\\cdot":case"\\times":case"/":case"=":case"~":case":":case".":case"->":case"for":{if(e=pe(e),{state:e,tree:a}=xt(e,r),a.type==="Err")if(Nr(a.error)){let l=ht(t.span,e),p=oe(l,ja(n.val));return P(e,p)}else return P(e,a);return P(e,uv(n.type,ht(t.span,e),[t,a]))}case"with":{if(e=pe(e),{state:e,tree:a}=xt(e,r),a.type==="Err")if(Nr(a.error)){let l=ht(t.span,e),p=oe(l,ja(n.val));return P(e,p)}else return P(e,a);return P(e,uv(n.type,ht(t.span,e),[t,a]))}case"%":{e=pe(e);let l=zt(e);if(l.type!=="Cmd"||l.val!=="of"&&l.val!=="\\of"){let p=oe(n.span,Sw());return P(e,p)}if(e=pe(e),{state:e,tree:a}=xt(e,r),a.type==="Err")if(Nr(a.error)){let p=ht(t.span,e),g=oe(p,ja(n.val));return P(e,g)}else return P(e,a);return P(e,sw(ht(t.span,e),[t,a]))}case">=":case"<=":case">":case"<":{let l=n.type;if(e=pe(e),{state:e,tree:a}=xt(e,r),a.type==="Err")if(Nr(a.error)){let w=ht(t.span,e),M=oe(w,ja(n.val));return P(e,M)}else return P(e,a);let p=Zs(ht(t.span,e),l,[t,a]),g=[],f=zt(e).type;for(;f===">="||f==="<="||f===">"||f==="<";){let w=e;if(l=f,e=pe(e),{state:e,tree:a}=xt(e,r),a.type==="Err")if(Nr(a.error)){let M=ht(t.span,e),G=oe(M,ja(n.val));return P(e,G)}else return P(e,a);g.push(Vx(ae(w,e),l,[a])),f=zt(e).type}return g.length?P(e,Ix(ht(t.span,e),p,g)):P(e,p)}case"!":return e=pe(e),P(e,$x(ht(t.span,e),[t]));case"[":{let l=e;if(e=pe(e),Kt(e,"]")){e=pe(e);let p=ae(l,e);return P(e,oe(p,yw()))}return{state:e,tree:a}=xt(e,r),{state:e,tree:a}=lc(l,e,a,"[","]"),a.type==="Err"?P(e,a):P(e,zx(ht(t.span,e),[t,a]))}case"Sqrt":case"Frac":case"Letter":case"Cmd":case"TokenNode":case"Trig":case"Ln":case"Log":case"Sum":case"Int":case"Prod":case"Decimal":case"MixedNumber":case"\\{":case"(|":return{state:e,tree:a}=xt(e,r),a.type==="Err"?P(e,a):P(e,bg(ht(t.span,e),[t,a]));case"(":if(Ut(t)){if({state:e,tree:a}=cc(e),a.type==="Err")return P(e,a);let l=ht(t.span,e);return P(e,ec(l,[t,a.args[0]]))}else if(t.type==="Prime"&&Ut(t.args[0])){if({state:e,tree:a}=cc(e),a.type==="Err")return P(e,a);let l=ht(t.span,e);return P(e,tc(l,t.nprimes,[ec(l,[t.args[0],a.args[0]])]))}else return{state:e,tree:a}=xt(e,r),a.type==="Err"?P(e,a):P(e,bg(ht(t.span,e),[t,a]));case"SupSub":{e=pe(e);let l=fv(n),p=Od(n,e.opts);if(l&&l.type==="Err")return P(e,l);if(p&&p.type==="Err")return P(e,p);if(l&&(t=fg(ht(t.span,e),[t,l])),p&&(t=Td(ht(t.span,e),[t,p])),n.nprimes>0){let g=ht(t.span,e);if(!Ut(t)){let f=oe(g,Md());return P(e,f)}t=tc(g,n.nprimes,[t])}return P(e,t)}case",":{let l=[t];for(;Kt(e,",")&&(e=pe(e),!(Kt(e,"...")||e.opts.trailingComma&&rD(e)));){if({state:e,tree:a}=xt(e,r),a.type==="Err")if(Nr(a.error)){let p=ht(t.span,e),g=oe(p,ja(n.val));return P(e,g)}else return P(e,a);l.push(a)}return P(e,Sd(ht(t.span,e),l))}case"...":{if(e=pe(e),Kt(e,",")&&(e=pe(e)),r>=Pd(zt(e).type))return P(e,yg(ht(t.span,e),[t,rw(Gg(e))]));if({state:e,tree:a}=xt(e,r),a.type==="Err")if(Nr(a.error)){let l=ht(t.span,e),p=oe(l,ja(n.val));return P(e,p)}else return P(e,a);return P(e,yg(ht(t.span,e),[t,a]))}case"]":case")":case"\\}":case"|)":case"Differential":return Fg(e);case"Err":return xt(e,r);case"End":{let l=ae(e,e),p=oe(l,kg());return P(e,p)}default:throw`Unexpected token type ${n.type}.`}}function tD(e){return!!(Ut(e)||e.type==="Prime"&&Ut(e.args[0]))}function uv(e,t,r){switch(e){case"+":return Fx(t,r);case"-":return _x(t,r);case"*":return Rx(t,r);case"\\cdot":return qx(t,r);case"\\times":return Bx(t,r);case"/":return Ux(t,r);case"=":return Gx(t,r);case"~":return Nx(t,r);case":":return nw(t,r);case".":return ow(t,r);case"->":return cw(t,r);case"for":return aw(t,r);case"with":return iw(t,r);default:throw`Unexpected token type ${e}.`}}function mv(e,t){if(!e.sub)return;let r=e.sub,n=Ja(Ta(r,t));return n.type==="Err"&&n.error.type==="EmptyGroup"?oe(n.span,wg()):n}function fv(e){if(!e.sub)return;let t=e.sub;if(t.args.length===0)return oe(t.span,wg());let r=[];for(let n of t.args)if(n.type==="Digit"||n.type==="Letter")r.push(n.val);else{let a=n.span;return oe(a,Cw(or(a)))}return dw(t.span,r.join(""))}function Od(e,t){if(!e.sup)return;let r=Ja(Ta(e.sup,t));return r.type==="Err"?r.error.type==="EmptyGroup"?oe(r.span,fw()):r:e.nprimes>0?oe(e.span,Dw()):r}function Og(e,t,r){if(e.type!=="SupSub"){let c=ae(t,r);return oe(c,Dg())}if(e.nprimes>0){let c=ae(t,r);return oe(c,Md())}let n=mv(e,r.opts),a=Od(e,r.opts);if(!n||n.type==="Err"&&n.error.type==="EmptySubscript"||!a||a.type==="Err"&&a.error.type==="EmptySuperscript"){let c=ae(t,r);return oe(c,Dg())}return n.type==="Err"?n:a.type==="Err"?a:{type:"Bounds",sup:a,sub:n}}function cc(e){let t=e,r=zt(e),n=gv(r.type);if(Kt(e,"("))e=pe(e);else throw new Error("Programming Error: expected '(' at start of parseParen.");if(Kt(e,")")){let c=Sd(Gg(e),[]);e=pe(e);let l=ae(t,e);return P(e,hg(l,[c]))}let a;return{state:e,tree:a}=xt(e,n),{state:e,tree:a}=lc(t,e,a,"(",")"),a.type==="Err"?P(e,a):P(e,hg(ae(t,e),[a]))}function pv(e){let t=e,r=zt(e);if(r.type!=="Differential")throw new Error("Programming Error: expected differential");e=pe(e);let n=Ii(r.span,r.val),a=zt(e);if(a.type==="SupSub"){e=pe(e);let c=ae(t,e),l=fv(a);if(l){if(l.type==="Err")return P(e,l);n=fg(c,[n,l])}if(a.sup)return P(e,oe(c,Ow()));if(a.nprimes>0)return P(e,oe(c,Md()))}return P(e,n)}function lc(e,t,r,n,a){if(r.type==="Err"&&r.error.type!=="UnexpectedEnd")return P(t,r);if(r.type==="Err"||!Kt(t,a)){let c=ae(e,t),l=oe(c,vw(n,a));return P(t,l)}return t=pe(t),P(t,r)}function Fg(e){let t=e;switch(zt(e).type){case")":{e=pe(e);let n=ae(t,e);return P(e,oe(n,rc("(",")")))}case"]":{e=pe(e);let n=ae(t,e);return P(e,oe(n,rc("[","]")))}case"\\}":{e=pe(e);let n=ae(t,e);return P(e,oe(n,rc("\\{","\\}")))}case"|)":{e=pe(e);let n=ae(t,e);return P(e,oe(n,rc("|","|")))}case"Differential":{e=pe(e);let n=ae(t,e);return P(e,oe(n,kw()))}default:{e=pe(e);let n=ae(t,e);return P(e,oe(n,xg()))}}}function rD(e){return Kt(e,")")||Kt(e,"]")||Kt(e,"\\}")}var Qn=class extends qa{constructor(r,n){if(!Array.isArray(r))throw new TypeError("Argument to expression constructor must be an Array.");super();this.args=r,(!n||!n.skipRegisterDependencies)&&this.registerDependencies()}shouldExportAns(){return!0}registerDependencies(){for(var r=0;r<this.args.length;r++)this.mergeDependencies(this.args[r])}copyWithArgs(r){return new this.constructor(r)}};var Xn=class extends Qn{constructor(r){super([]);this.isConstant=!0;typeof r=="number"&&(r=Qe(r,1)),this._constantValue=r}asValue(){let r=this._constantValue;return typeof r=="boolean"?r:Ke(r)}asCompilerValue(){return this._constantValue}scalarExprString(){return this.asValue()>0?String(this.asValue()):"("+String(this.asValue())+")"}getEvaluationInfo(){return[{val:this.asValue()}]}isNaN(){let r=this.asValue();return typeof r=="number"&&isNaN(r)}};var dc=class extends Qn{constructor(r){super([]);this._symbol=bp(r),this._errorSymbol=this._symbol,this.addDependency(this._symbol)}setInputSpan(r){super.setInputSpan(r),this._errorSymbol=bp(this.getInputString())}getInputSpan(){return this._inputSpan===void 0?vr(this._symbol,0,this._symbol.length):this._inputSpan}};function iD(e){switch(e){case"default":case"trig":case"inverseTrig":case"trig2":case"never-broadcast":return[V];case"reducer":return[ft];case"doubleReducer":return[ft,ft];case"parameterizedReducer":return[ft,V];case"color":return[V,V,V]}}function oD(e){switch(e){case"default":case"trig":case"inverseTrig":case"trig2":case"doubleReducer":case"color":case"never-broadcast":return!1;case"reducer":case"parameterizedReducer":return!0}}function sD(e,t,r){return e==="reducer"?1/0:t+r}function D(e,t,r){var w,M,G,R,se;let n=(w=r==null?void 0:r.tag)!=null?w:"default",a=(M=r==null?void 0:r.argumentTypes)!=null?M:iD(n),c=r!=null&&r.defaultArguments?r.defaultArguments.length:0,l=a.length-c,p=sD(n,l,c),g=(G=r==null?void 0:r.allowDotCall)!=null?G:oD(n),f=(R=r==null?void 0:r.noPeel)!=null?R:!1;return{module:e,symbol:t,argumentTypes:a,defaultArguments:r==null?void 0:r.defaultArguments,returnType:(se=r==null?void 0:r.returnType)!=null?se:V,tag:n,minArity:l,maxArity:p,allowDotCall:g,noPeel:f}}function Bg(e){if(!Mt(e))throw new Error("Programming Error: numeric constants should be rational");return{type:1,valueType:V,value:e}}var Oi=Bg(Qe(0,1)),Fi=Bg(Qe(1,1)),qg=Bg(Qe(1,2));function bv(e){let t;return e in uc&&(t=uc[e].tag),t==="trig"||t==="trig2"||t==="inverseTrig"?!0:e==="angle"||e==="angles"||e==="directedangle"||e==="directedangles"||e==="rotate"}var uc={sin:D("BuiltIn","sin",{tag:"trig"}),cos:D("BuiltIn","cos",{tag:"trig"}),tan:D("BuiltIn","tan",{tag:"trig"}),cot:D("BuiltIn","cot",{tag:"trig"}),sec:D("BuiltIn","sec",{tag:"trig"}),csc:D("BuiltIn","csc",{tag:"trig"}),arcsin:D("Math","asin",{tag:"inverseTrig"}),arccos:D("Math","acos",{tag:"inverseTrig"}),arctan:D("Math","atan2",{argumentTypes:[V,V],defaultArguments:[Fi],tag:"inverseTrig"}),arccot:D("BuiltIn","acot",{tag:"inverseTrig"}),arcsec:D("BuiltIn","asec",{tag:"inverseTrig"}),arccsc:D("BuiltIn","acsc",{tag:"inverseTrig"}),sinh:D("BuiltIn","sinh"),cosh:D("BuiltIn","cosh"),tanh:D("BuiltIn","tanh"),coth:D("BuiltIn","coth"),sech:D("BuiltIn","sech"),csch:D("BuiltIn","csch"),arcsinh:D("BuiltIn","asinh"),arccosh:D("BuiltIn","acosh"),arctanh:D("BuiltIn","atanh"),arccoth:D("BuiltIn","acoth"),arcsech:D("BuiltIn","asech"),arccsch:D("BuiltIn","acsch"),sqrt:D("Math","sqrt"),rtxsqpone:D("BuiltIn","sqrtxsqp1"),rtxsqmone:D("BuiltIn","sqrtxsqm1"),nthroot:D("BuiltIn","nthroot",{argumentTypes:[V,V]}),hypot:D("BuiltIn","hypot",{argumentTypes:[V,V]}),log:D("BuiltIn","common_log"),logbase:D("BuiltIn","log_base",{argumentTypes:[V,V]}),ln:D("BuiltIn","log"),exp:D("Math","exp"),floor:D("Math","floor"),ceil:D("Math","ceil"),round:D("Math","round"),abs:D("Math","abs"),sign:D("BuiltIn","sign"),mod:D("BuiltIn","mod",{argumentTypes:[V,V]}),nCr:D("BuiltIn","nCr",{argumentTypes:[V,V]}),nPr:D("BuiltIn","nPr",{argumentTypes:[V,V]}),factorial:D("BuiltIn","factorial"),polyGamma:D("BuiltIn","polyGamma",{argumentTypes:[V,V]}),lcm:D("BuiltIn","listLCM",{tag:"reducer"}),gcd:D("BuiltIn","listGCD",{tag:"reducer"}),distance:D("BuiltIn","distance",{argumentTypes:[J,J]}),polygon:D("BuiltIn","polygon",{tag:"reducer",argumentTypes:[Hr],returnType:_t}),area:D("BuiltIn","polygonArea",{argumentTypes:[_t]}),perimeter:D("BuiltIn","polygonPerimeter",{argumentTypes:[_t]}),pointDet:D("BuiltIn","pointDet",{argumentTypes:[J,J]}),pointDot:D("BuiltIn","pointDot",{argumentTypes:[J,J]}),pointPerp:D("BuiltIn","pointPerp",{argumentTypes:[J],returnType:J}),segment:D("BuiltIn","segment",{argumentTypes:[J,J],returnType:pt}),line:D("BuiltIn","line",{argumentTypes:[J,J],returnType:qe}),ray:D("BuiltIn","ray",{argumentTypes:[J,J],returnType:Et}),vector:D("BuiltIn","vector",{argumentTypes:[J,J],returnType:Xt}),vectorThreeD:D("BuiltIn","vectorThreeD",{argumentTypes:[Ue,Ue],returnType:Yr}),mathVector:D("BuiltIn","mathVector",{argumentTypes:[J,J],returnType:Xt}),mathVectorThreeD:D("BuiltIn","mathVectorThreeD",{argumentTypes:[Ue,Ue],returnType:Yr}),vectorDisplacementAsPoint:D("BuiltIn","vectorDisplacementAsPoint",{argumentTypes:[Xt],returnType:J}),vectorThreeDDisplacementAsPoint:D("BuiltIn","vectorThreeDDisplacementAsPoint",{argumentTypes:[Yr],returnType:Ue}),basePointFromVector:D("BuiltIn","basePointFromVector",{argumentTypes:[Xt],returnType:J}),basePointFromVectorThreeD:D("BuiltIn","basePointFromVectorThreeD",{argumentTypes:[Yr],returnType:Ue}),circle:D("BuiltIn","circle",{argumentTypes:[J,V],returnType:tt}),center:D("BuiltIn","center",{argumentTypes:[tt],returnType:J,allowDotCall:!0}),radius:D("BuiltIn","radius",{argumentTypes:[tt],returnType:V,allowDotCall:!0}),arc:D("BuiltIn","arc",{argumentTypes:[J,J,J],returnType:at}),arcCenter:D("BuiltIn","arcCenter",{argumentTypes:[at],returnType:J}),arcOmega:D("BuiltIn","arcOmega",{argumentTypes:[at],returnType:V}),undirectedAngleMarker:D("BuiltIn","undirectedAngleMarker",{argumentTypes:[vt],returnType:Rt}),directedAngleMarker:D("BuiltIn","directedAngleMarker",{argumentTypes:[J,V,V,V],returnType:vt}),directedCoterminalAngle:D("BuiltIn","directedCoterminalAngle",{argumentTypes:[vt],returnType:vt}),undirectedCoterminalAngle:D("BuiltIn","undirectedCoterminalAngle",{argumentTypes:[Rt],returnType:Rt}),supplement:D("BuiltIn","supplementAngle",{argumentTypes:[vt],returnType:vt}),directedAngleMarkerRawDelta:D("BuiltIn","angleMarkerRawDelta",{argumentTypes:[vt],returnType:V}),undirectedAngleMarkerRawDelta:D("BuiltIn","angleMarkerRawDelta",{argumentTypes:[Rt],returnType:V}),directedAngleMarkerMultiplier:D("BuiltIn","angleMarkerMultiplier",{argumentTypes:[vt],returnType:V}),undirectedAngleMarkerMultiplier:D("BuiltIn","angleMarkerMultiplier",{argumentTypes:[Rt],returnType:V}),polygonInteriorUndirectedAngles:D("BuiltIn","polygonInteriorUndirectedAngles",{argumentTypes:[_t,V],returnType:fa,allowDotCall:!0,tag:"never-broadcast"}),polygonInteriorDirectedAngles:D("BuiltIn","polygonInteriorDirectedAngles",{argumentTypes:[_t,V],returnType:ya,allowDotCall:!0,tag:"never-broadcast"}),vertices:D("BuiltIn","vertices",{argumentTypes:[_t],returnType:Hr,allowDotCall:!0,tag:"never-broadcast"}),segments:D("BuiltIn","polygonEdges",{argumentTypes:[_t],returnType:ma,allowDotCall:!0,tag:"never-broadcast"}),scaleTangentSegment:D("BuiltIn","scaleTangentSegment",{argumentTypes:[pt,V],returnType:pt}),scaleTangentLine:D("BuiltIn","scaleTangentLine",{argumentTypes:[qe,V],returnType:qe}),scaleTangentRay:D("BuiltIn","scaleTangentRay",{argumentTypes:[Et,V],returnType:Et}),scaleTangentCircle:D("BuiltIn","scaleTangentCircle",{argumentTypes:[tt,V],returnType:tt}),scaleTangentArc:D("BuiltIn","scaleTangentArc",{argumentTypes:[at,V],returnType:tt}),scaleTangentDirectedAngleMarker:D("BuiltIn","scaleTangentAngle",{argumentTypes:[vt,V],returnType:vt}),scaleTangentUndirectedAngleMarker:D("BuiltIn","scaleTangentAngle",{argumentTypes:[Rt,V],returnType:Rt}),addTangentSegment:D("BuiltIn","addTangentSegment",{argumentTypes:[pt,pt],returnType:pt}),addTangentSegmentThreeD:D("BuiltIn","addTangentSegmentThreeD",{argumentTypes:[jr,jr],returnType:jr}),addTangentLine:D("BuiltIn","addTangentLine",{argumentTypes:[qe,qe],returnType:qe}),addTangentRay:D("BuiltIn","addTangentRay",{argumentTypes:[Et,Et],returnType:Et}),addTangentCircle:D("BuiltIn","addTangentCircle",{argumentTypes:[tt,tt],returnType:tt}),addTangentArc:D("BuiltIn","addTangentArc",{argumentTypes:[at,at],returnType:at}),addTangentDirectedAngleMarker:D("BuiltIn","addTangentAngle",{argumentTypes:[vt,vt],returnType:vt}),addTangentUndirectedAngleMarker:D("BuiltIn","addTangentAngle",{argumentTypes:[Rt,Rt],returnType:Rt}),segmentGlider:D("BuiltIn","segmentGlider",{argumentTypes:[pt,V],returnType:J}),segmentThreeDGlider:D("BuiltIn","segmentThreeDGlider",{argumentTypes:[jr,V],returnType:Ue}),lineGlider:D("BuiltIn","lineGlider",{argumentTypes:[qe,V],returnType:J}),rayGlider:D("BuiltIn","rayGlider",{argumentTypes:[Et,V],returnType:J}),circleGlider:D("BuiltIn","circleGlider",{argumentTypes:[tt,V],returnType:J}),arcGlider:D("BuiltIn","arcGlider",{argumentTypes:[at,V],returnType:J}),polygonGlider:D("BuiltIn","polygonGlider",{argumentTypes:[_t,V],returnType:J}),chooseNonIncidentPoint:D("BuiltIn","chooseNonIncidentPoint",{argumentTypes:[J,J,J],returnType:J}),circleCircleIntersection:D("BuiltIn","circleCircleIntersection",{argumentTypes:[tt,tt,V],returnType:J}),circleArcIntersection:D("BuiltIn","circleArcIntersection",{argumentTypes:[tt,at,V],returnType:J}),circleLineIntersection:D("BuiltIn","circleLineIntersection",{argumentTypes:[tt,qe,V],returnType:J}),arcCircleIntersection:D("BuiltIn","arcCircleIntersection",{argumentTypes:[at,tt,V],returnType:J}),arcArcIntersection:D("BuiltIn","arcArcIntersection",{argumentTypes:[at,at,V],returnType:J}),arcLineIntersection:D("BuiltIn","arcLineIntersection",{argumentTypes:[at,qe,V],returnType:J}),lineCircleIntersection:D("BuiltIn","lineCircleIntersection",{argumentTypes:[qe,tt,V],returnType:J}),lineArcIntersection:D("BuiltIn","lineArcIntersection",{argumentTypes:[qe,at,V],returnType:J}),lineLineIntersection:D("BuiltIn","lineLineIntersection",{argumentTypes:[qe,qe,V],returnType:J}),lineFromSegment:D("BuiltIn","identity",{argumentTypes:[pt],returnType:qe}),lineFromRay:D("BuiltIn","identity",{argumentTypes:[Et],returnType:qe}),parallel:D("BuiltIn","parallel",{argumentTypes:[qe,J],returnType:qe}),perpendicular:D("BuiltIn","perpendicular",{argumentTypes:[qe,J],returnType:qe}),translation:D("BuiltIn","translation",{argumentTypes:[J],returnType:ct}),dilation:D("BuiltIn","dilation",{argumentTypes:[J,V],returnType:ct}),rotation:D("BuiltIn","rotation",{tag:"trig2",argumentTypes:[J,V],returnType:ct}),reflection:D("BuiltIn","reflection",{argumentTypes:[qe],returnType:ct}),compose:D("BuiltIn","composeTransformation",{argumentTypes:[ct,ct],returnType:ct}),inverse:D("BuiltIn","invertTransformation",{argumentTypes:[ct],returnType:ct}),transformPoint:D("BuiltIn","transformPoint",{argumentTypes:[ct,J],returnType:J}),transformSegment:D("BuiltIn","transformSegment",{argumentTypes:[ct,pt],returnType:pt}),transformLine:D("BuiltIn","transformLine",{argumentTypes:[ct,qe],returnType:qe}),transformRay:D("BuiltIn","transformRay",{argumentTypes:[ct,Et],returnType:Et}),transformVector:D("BuiltIn","transformVector",{argumentTypes:[ct,Xt],returnType:Xt}),transformCircle:D("BuiltIn","transformCircle",{argumentTypes:[ct,tt],returnType:tt}),transformArc:D("BuiltIn","transformArc",{argumentTypes:[ct,at],returnType:at}),transformPolygon:D("BuiltIn","transformPolygon",{argumentTypes:[ct,_t],returnType:_t}),transformAngleMarker:D("BuiltIn","transformAngleMarker",{argumentTypes:[ct,Rt],returnType:Rt}),transformDirectedAngleMarker:D("BuiltIn","transformAngleMarker",{argumentTypes:[ct,vt],returnType:vt}),distanceThreeD:D("BuiltIn","distanceThreeD",{argumentTypes:[Ue,Ue]}),segmentThreeD:D("BuiltIn","segmentThreeD",{argumentTypes:[Ue,Ue],returnType:jr}),triangle:D("BuiltIn","triangle",{argumentTypes:[Ue,Ue,Ue],returnType:wi}),sphere:D("BuiltIn","sphere",{argumentTypes:[Ue,V],returnType:vi}),mean:D("BuiltIn","mean",{tag:"reducer"}),total:D("BuiltIn","total",{tag:"reducer"}),stdev:D("BuiltIn","stdev",{tag:"reducer"}),stdevp:D("BuiltIn","stdevp",{tag:"reducer"}),mad:D("BuiltIn","mad",{tag:"reducer"}),count:D("BuiltIn","listLength",{tag:"reducer",argumentTypes:[Fr],noPeel:!0}),min:D("BuiltIn","listMin",{tag:"reducer"}),max:D("BuiltIn","listMax",{tag:"reducer"}),argmin:D("BuiltIn","argMin",{tag:"reducer",noPeel:!0}),argmax:D("BuiltIn","argMax",{tag:"reducer",noPeel:!0}),median:D("BuiltIn","median",{tag:"reducer"}),var:D("BuiltIn","variance",{tag:"reducer"}),varp:D("BuiltIn","varp",{tag:"reducer"}),cov:D("BuiltIn","cov",{tag:"doubleReducer"}),covp:D("BuiltIn","covp",{tag:"doubleReducer"}),corr:D("BuiltIn","corr",{tag:"doubleReducer"}),spearman:D("BuiltIn","spearman",{tag:"doubleReducer"}),quantile:D("BuiltIn","quantile",{tag:"parameterizedReducer"}),quartile:D("BuiltIn","quartile",{tag:"parameterizedReducer"}),upperQuantileIndex:D("BuiltIn","upperQuantileIndex",{tag:"parameterizedReducer"}),lowerQuantileIndex:D("BuiltIn","lowerQuantileIndex",{tag:"parameterizedReducer"}),quartileIndex:D("BuiltIn","quartileIndex",{tag:"parameterizedReducer"}),upperQuartileIndex:D("BuiltIn","upperQuartileIndex",{tag:"parameterizedReducer"}),lowerQuartileIndex:D("BuiltIn","lowerQuartileIndex",{tag:"parameterizedReducer"}),normalcdf:D("BuiltIn","normalcdf",{argumentTypes:[V,V,V,V],defaultArguments:[Oi,Fi]}),normalpdf:D("BuiltIn","normalpdf",{argumentTypes:[V,V,V],defaultArguments:[Oi,Fi]}),binomcdf:D("BuiltIn","binomcdf",{argumentTypes:[V,V,V,V],defaultArguments:[qg]}),binompdf:D("BuiltIn","binompdf",{argumentTypes:[V,V,V],defaultArguments:[qg]}),poissoncdf:D("BuiltIn","poissoncdf",{argumentTypes:[V,V,V]}),poissonpdf:D("BuiltIn","poissonpdf",{argumentTypes:[V,V,V]}),uniformcdf:D("BuiltIn","uniformcdf",{argumentTypes:[V,V,V,V],defaultArguments:[Oi,Fi]}),uniformpdf:D("BuiltIn","uniformpdf",{argumentTypes:[V,V,V],defaultArguments:[Oi,Fi]}),invT:D("BuiltIn","invT",{argumentTypes:[V,V]}),invPoisson:D("BuiltIn","invPoisson",{argumentTypes:[V,V]}),invBinom:D("BuiltIn","invBinom",{argumentTypes:[V,V,V]}),invUniform:D("BuiltIn","invUniform",{argumentTypes:[V,V,V]}),tpdf:D("BuiltIn","tpdf",{argumentTypes:[V,V]}),tcdf:D("BuiltIn","tcdf",{argumentTypes:[V,V,V]}),erf:D("BuiltIn","erf"),invNorm:D("BuiltIn","invNorm"),tscore:D("BuiltIn","tscore",{tag:"parameterizedReducer",defaultArguments:[Oi]}),normalSample:D("BuiltIn","normalSample",{argumentTypes:[Qt,V,V]}),uniformSample:D("BuiltIn","uniformSample",{argumentTypes:[Qt,V,V]}),tSample:D("BuiltIn","tSample",{argumentTypes:[Qt,V]}),poissonSample:D("BuiltIn","poissonSample",{argumentTypes:[Qt,V]}),binomSample:D("BuiltIn","binomSample",{argumentTypes:[Qt,V,V]}),rgb:D("BuiltIn","rgb",{returnType:Ra,tag:"color"}),hsv:D("BuiltIn","hsv",{returnType:Ra,tag:"color"}),validateRangeLength:D("BuiltIn","validateRangeLength",{returnType:V,argumentTypes:[ft,ft,V,V],tag:"never-broadcast",noPeel:!0}),validateSampleCount:D("BuiltIn","validateSampleCount",{returnType:V,argumentTypes:[V]}),select:D("BuiltIn","select",{argumentTypes:[Fr,ha],returnType:e=>e[0],tag:"never-broadcast",noPeel:!0}),shuffle:D("BuiltIn","shuffle",{argumentTypes:[Qt,Fr],returnType:e=>e[1],tag:"never-broadcast"}),sortPerm:D("BuiltIn","sortPerm",{argumentTypes:[ft],returnType:ft,tag:"never-broadcast",noPeel:!0}),elementsAt:D("BuiltIn","elementsAt",{argumentTypes:[Fr,ft],returnType:e=>e[0],tag:"never-broadcast",noPeel:!0}),uniquePerm:D("BuiltIn","uniquePerm",{argumentTypes:[Fr],returnType:ft,tag:"never-broadcast",noPeel:!0})};function fe(e,t){var se,ce,Se,ze,Ge;let r=t==null?void 0:t.defaultArguments,n=1/0,a=0,c=(se=r==null?void 0:r.length)!=null?se:0;t!=null&&t.noBroadcast||(e=e.map(ki));for(let Re of e){let Je=ny(Re)-c;Je<n&&(n=Je);let Nt=ay(Re);Nt>a&&(a=Nt)}let l=(ce=t==null?void 0:t.fallthroughUnlessDistribution)!=null?ce:!1,p=(Se=t==null?void 0:t.allowDotCall)!=null?Se:!1,g=(ze=t==null?void 0:t.isSeeded)!=null?ze:!1,f=t==null?void 0:t.minArityExampleArgs,w=t==null?void 0:t.maxArityExampleArgs,M=t==null?void 0:t.dotMinArityExampleArgs,G=t==null?void 0:t.dotMaxArityExampleArgs,R=(Ge=t==null?void 0:t.noPeel)!=null?Ge:!1;return{minArity:n,argumentTypes:e,maxArity:a,defaultArguments:r,fallthroughUnlessDistribution:l,minArityExampleArgs:f,maxArityExampleArgs:w,dotMinArityExampleArgs:M,dotMaxArityExampleArgs:G,allowDotCall:p,isSeeded:g,noPeel:R}}function Gn(){return fe([{type:"variadic",initial:[],rest:gn}],{})}var Fd={meta:"union",types:[pt,tt,qe,Et,at]},_g={meta:"union",types:[pt,qe,Et,Xt]},Ho={meta:"union",types:[J,pt,tt,qe,Et,Xt,at,_t,Rt,vt,ct]},Rg={meta:"union",types:[...Ei.filter(e=>e!==Wn),Ar]},Ug={midpoint:fe([[J,J],[Ue,Ue],[pt],[jr]],{allowDotCall:!0}),segment:fe([[J,J],[Ue,Ue]]),vector:fe([[J,J],[Ue,Ue]]),distance:fe([[J,J],[Ue,Ue]]),glider:fe([[{meta:"union",types:[pt,tt,qe,Et,at,_t]},V]]),circle:fe([[J,pt],[J,J],[J,V]],{}),center:fe([[tt],[at]],{allowDotCall:!0}),radius:fe([[tt],[at]],{allowDotCall:!0}),intersection:fe([[Fd,Fd]]),strictintersection:fe([[Fd,Fd]]),parallel:fe([[_g,J]]),perpendicular:fe([[_g,J]]),start:fe([[Xt],[Yr]],{allowDotCall:!0}),end:fe([[Xt],[Yr]],{allowDotCall:!0}),length:fe([[{meta:"union",types:Ei}],ki([jr]),ki([Yr]),ki([pt]),ki([at]),{type:"variadic",initial:[gn],rest:gn}],{allowDotCall:!0,noBroadcast:!0,noPeel:!0}),translate:fe([[Ho,Xt],[Ho,J,J]]),dilate:fe([[Ho,J,V]]),rotate:fe([[Ho,J,V]]),reflect:fe([[Ho,_g]]),apply:fe([[ct,Ho]]),points:fe([]),lines:fe([]),circles:fe([]),arcs:fe([]),polygons:fe([]),rays:fe([]),vectors:fe([]),angle:fe([[J,J,J]]),directedangle:fe([[J,J,J]]),angles:fe([[_t]],{allowDotCall:!0}),directedangles:fe([[_t]],{allowDotCall:!0}),coterminal:fe([[Rt],[vt]]),round:fe([[V],[V,V]]),sort:fe([[ft],[{meta:"union",types:Ei},ft]],{minArityExampleArgs:"([3,2,1])",maxArityExampleArgs:"([1,2,3],[3,2,1])",dotMaxArityExampleArgs:"([3,4])",allowDotCall:!0}),shuffle:fe([[Qt,{meta:"union",types:Ei}],[Qt,{meta:"union",types:Ei},V]],{minArityExampleArgs:"([1,2,3])",maxArityExampleArgs:"([1,2,3],2)",dotMaxArityExampleArgs:"(2)",allowDotCall:!0,isSeeded:!0,noBroadcast:!0}),join:fe([{type:"variadic",initial:[gn,gn],rest:gn}],{minArityExampleArgs:"([1,2],[3,4])",dotMinArityExampleArgs:"([3,4])",allowDotCall:!0}),unique:fe([[{meta:"union",types:Ei.filter(e=>e!==Wn&&e!==Fr)}]],{minArityExampleArgs:"([1,2,3])",maxArityExampleArgs:"([1,2,3])",allowDotCall:!0}),normaldist:fe([[V,V]],{defaultArguments:[Oi,Fi]}),tdist:fe([[V]]),binomialdist:fe([[V,V]],{defaultArguments:[qg]}),poissondist:fe([[V]]),uniformdist:fe([[V,V]],{defaultArguments:[Oi,Fi]}),pdf:fe([[Ar,V]],{allowDotCall:!0}),cdf:fe([[Ar,V],[Ar,V,V]],{allowDotCall:!0}),median:fe([[Ar]],{fallthroughUnlessDistribution:!0,allowDotCall:!0}),stdev:fe([[Ar]],{fallthroughUnlessDistribution:!0,allowDotCall:!0}),var:fe([[Ar]],{fallthroughUnlessDistribution:!0,allowDotCall:!0}),quantile:fe([[Ar,V]],{fallthroughUnlessDistribution:!0,allowDotCall:!0,minArityExampleArgs:"([1,2,3], 1)",maxArityExampleArgs:"([1,2,3], 1)",dotMinArityExampleArgs:"(x)",dotMaxArityExampleArgs:"(x)"}),random:fe([[Qt],[Qt,V],[Qt,V,V],[Qt,Rg],[Qt,Rg,V],[Qt,Rg,V,V]],{allowDotCall:!0,isSeeded:!0,noBroadcast:!0}),polygon:fe([{type:"variadic",initial:[],rest:J},[Hr],[ft,ft],[V,ft],[ft,V]]),total:fe([V,J,Ue].map(yv),{allowDotCall:!0}),mean:fe([[Ar],...[V,J,Ue].map(yv)],{allowDotCall:!0}),histogram:Gn(),dotplot:Gn(),boxplot:Gn(),ttest:Gn(),ittest:Gn(),stats:Gn(),det:Gn(),inv:Gn(),transpose:Gn(),rref:Gn(),trace:Gn()};function yv(e){return ki({type:"variadic",initial:[e],rest:e})}var _d=class extends Qn{constructor(r,n){super(n,{skipRegisterDependencies:!0});typeof r=="string"&&(r=new dc(r)),this._identifier=r,this._symbol=r._symbol,this._errorSymbol=r._errorSymbol==="logbase"?"log":r._errorSymbol,this.registerDependencies()}registerDependencies(){this.addDependency(this._symbol),super.registerDependencies(),bv(this._symbol)&&this.addDependency("trigAngleMultiplier")}copyWithArgs(r){return new this.constructor(new dc(this._symbol),r)}};var Rd=class extends Qn{};var qd={pi:new Xn(Math.PI),tau:new Xn(2*Math.PI),e:new Xn(Math.E),trigAngleMultiplier:new Xn(Qe(1,1)),infty:new Xn(1/0),identityTransformation:new _d("translation",[new Rd([new Xn(0),new Xn(0)])])};var Bd=class extends qa{constructor(){super(...arguments);this.isFunction=!0}},Zn,Qa={};for(Zn in qd)qd.hasOwnProperty(Zn)&&(Qa[Zn]=qd[Zn]);for(Zn in uc)uc.hasOwnProperty(Zn)&&(Qa[Zn]=new Bd);for(Zn in Ug)Ug.hasOwnProperty(Zn)&&(Qa[Zn]=new Bd);function xv(e){return e=e.replace(/\\operatorname\{(.*)\}/,"$1"),e.replace(/[{}\\]/g,"")}var lD={Constant:e=>ud(e),MixedNumber:e=>ud(e),Identifier:e=>pd(xv(e)),FunctionCall:function(e,t){let r;return typeof e=="string"?r=xv(e):r=e.symbol,eg(r,t)},FunctionExponent:function(e){return Yb(e[0].symbol,e.slice(1))},Add:Jb,Subtract:Qb,Multiply:Bo,DotMultiply:Bo,CrossMultiply:Bo,Divide:Xb,Exponent:gd,Negative:Zb,And:()=>{throw Si()},Ans:()=>{throw Co("ans")},Assignment:()=>{throw lb()},CoordinateEquation:()=>{throw Ye()},Comparator:{"<":()=>{throw Si()},">":()=>{throw Si()},"<=":()=>{throw Si()},">=":()=>{throw Si()},"=":()=>{throw Fp()}},Derivative:()=>{throw Ye()},DoubleInequality:()=>{throw Si()},Equation:()=>{throw Fp()},FunctionDefinition:()=>{throw nb()},Integral:()=>{throw Ye()},List:()=>{throw Ye()},ListAccess:()=>{throw Ye()},ParenSeq:()=>{throw ib()},NamedCoordinateAccess:()=>{throw Ye()},Norm:()=>{throw Nl("abs")},Piecewise:()=>{throw Ye()},Prime:()=>{throw Ye()},Product:()=>{throw Ye()},Range:()=>{throw Ye()},Regression:()=>{throw ab()},Sum:()=>{throw Ye()},DotAccess:()=>{throw Ye()},Histogram:function(){throw Ye()},DotPlot:function(){throw Ye()},BoxPlot:function(){throw Ye()},TTest:function(){throw Ye()},IndependentTTest:function(){throw Ye()},Stats:function(){throw Ye()},PercentOf:function(){throw Ye()},FunctionFactorial:function(){throw Ye()},SeededFunctionCall:function(){throw Ye()},BareSeq:function(){throw Ye()},AssignmentExpression:function(){throw Ye()},ListComprehension:function(){throw Ye()},Substitution:function(){throw Ye()},UpdateRule:function(){throw Ye()},Seed:function(){throw Ye()},ExtendSeed:function(){throw Ye()}};function dD(e,t){return e}function uD(){throw new Error("Programming error: function 'sample' not implemented in the matrix calculator.")}function zg(e){let t=Mx(e),r=hv(t);return tv({nodes:lD,setInput:dD,nextSeed:uD,allowIndex:!1,allowDt:!1,writeIntegral:!1},r)}function Kg(e){let t=[];for(let r of e){let n=[];for(let a of r)a===""?n.push(ud(Qe(0,1))):n.push(zg(a));t.push(n)}return jb(t)}var pD={canDefine:e=>/^[A-F]$/.test(e)};function vv(){return{frame:{},policy:pD}}function Ud(e){throw new Error("Unexpected object: "+e)}var $g={add:[[["number","number"],"number","nadd"],[["matrix","matrix"],"matrix","add"]],sub:[[["number","number"],"number","nsub"],[["matrix","matrix"],"matrix","sub"]],mul:[[["number","number"],"number","nmul"],[["number","matrix"],"matrix","leftScale"],[["matrix","number"],"matrix","rightScale"],[["matrix","matrix"],"matrix","mul"]],div:[[["number","number"],"number","ndiv"],[["matrix","number"],"matrix","div"]],pow:[[["number","number"],"number","npow"],[["matrix","number"],"matrix","pow"]],sqrt:[[["number"],"number","nsqrt"]],neg:[[["number"],"number","nneg"],[["matrix"],"matrix","neg"]],inv:[[["matrix"],"matrix","inv"]],det:[[["matrix"],"number","det"]],trace:[[["matrix"],"number","trace"]],transpose:[[["matrix"],"matrix","transpose"]],rref:[[["matrix"],"matrix","rref"]]};function wv(e,t){for(let r=0;r<e.length;r++){if(t.length!==e[r][0].length)continue;let n=!0;for(let a=0;a<t.length;a++)if(t[a].valueType!==e[r][0][a]){n=!1;break}if(n)return e[r]}}function gD(e){var t=e[0][0].length;for(let r=1;r<e.length;r++)if(e[r][0].length!==t)return-1;return t}function kv(e){switch(e){case"matrix":return Ie("shared-calculator-label-value-type-matrix");case"number":return Ie("shared-calculator-label-value-type-number");default:return Ud(e)}}function _i(e){return e.map(t=>kv(t.valueType))}function Vn(e,t){switch(t.type){case"constant":return ex(t.value);case"matrix":{let r=t.elements.map(n=>n.map(a=>Vn(e,a)));return r.forEach(n=>n.forEach(a=>{if(a.valueType!=="number")throw mb([kv(a.valueType)])})),tx(r)}case"op":{if(t.symbol==="pow"&&t.args.length===2){let c=Vn(e,t.args[0]),l=t.args[1];if(c.valueType==="matrix"&&l.type==="identifier"&&l.symbol==="T")return hd("transpose",[c],"matrix")}let r=t.args.map(c=>Vn(e,c)),n=$g[t.symbol],a=wv(n,r);if(!a){let c=t.symbol;switch(c){case"add":throw sy(_i(r));case"sub":throw cy(_i(r));case"mul":throw ly(_i(r));case"div":throw dy(_i(r));case"pow":throw uy(_i(r));case"neg":throw py(_i(r));default:return Ud(c)}}return hd(a[2],r,a[1])}case"functionCall":{let r=$g[t.symbol];if(!r){if(t.args.length===1)return Vn(e,Bo([pd(t.symbol),t.args[0]]));throw e.frame[t.symbol]?Uy(t.symbol):Qa[t.symbol]&&Qa[t.symbol].isFunction?Nl(t.symbol):Ry(t.symbol)}let n=t.args.map(c=>Vn(e,c)),a=wv(r,n);if(!a){let c=gD(r);throw c>=0&&c!==n.length?Il(t.symbol,c,n.length):gy(t.symbol,_i(n))}return hd(a[2],n,a[1])}case"functionExponent":{let r=$g[t.symbol];return t.args.length===2&&!r?Vn(e,Bo([pd(t.symbol),gd([t.args[0],t.args[1]])])):Vn(e,gd([eg(t.symbol,[t.args[0]]),t.args[1]]))}case"identifier":{if(e.frame[t.symbol])return Vn(e,e.frame[t.symbol]);throw e.policy.canDefine(t.symbol)?By([t.symbol]):Qa[t.symbol]&&Qa[t.symbol].isFunction?Nl(t.symbol):fb(t.symbol)}default:return Ud(t)}}function pc(e){switch(e.type){case"constant":return e.value;case"matrix":return e.elements.map(t=>t.map(r=>pc(r)));case"intrinsic":return Up[e.symbol].apply(void 0,e.args.map(pc));default:return Ud(e)}}function Ev(e){let t={},{expressions:r,order:n}=e,a=vv();return n.forEach(c=>{let l=r[c];if(l.type==="matrix")try{a.frame[l.variable]=Kg(l.matrix)}catch(p){}}),n.forEach(c=>{let l=r[c],p={};try{if(l.type==="latex"){if(l.latex){let g=zg(l.latex);g.type!=="constant"&&(p.answer=pc(Vn(a,g)))}}else if(l.type==="matrix")pc(Vn(a,Kg(l.matrix)));else return l}catch(g){g instanceof z?p.error=g.getError():p.error=Ci(g).getError()}t[l.id]=p}),t}function In(e){return Vf(e)}function Sa(e){this.setState(e)}Sa.prototype.setState=function(e){this.state=e};Sa.prototype.getState=function(){return this.state};Sa.prototype.set=function(e,t){if(arguments.length===1){this.state=e;return}else if(typeof e=="string"){this.state=In(this.state),this.state[e]=t;return}var r=e.length-2,n=e[r+1],a;this.state=a=In(this.state);for(var c=0;c<=r;c++){var l=e[c];a=a[l]=In(a[l])}a[n]=t};Sa.prototype.deepMutate=function(e,t){if(arguments.length===1){t=e,this.state=ln(this.state),t(this.state);return}else if(typeof e=="string"){this.state=In(this.state),this.state[e]=ln(this.state[e]),t(this.state[e]);return}for(var r=e.length-2,n=e[r+1],a=this.state=In(this.state),c=0;c<=r;c++){var l=e[c];a=a[l]=In(a[l])}a=a[n]=ln(a[n]),t(a)};Sa.prototype.shallowMutate=function(e,t){if(arguments.length===1){t=e,this.state=In(this.state),t(this.state);return}else if(typeof e=="string"){this.state=In(this.state),this.state[e]=In(this.state[e]),t(this.state[e]);return}for(var r=e.length-1,n=this.state=In(this.state),a=0;a<=r;a++){var c=e[a];n=n[c]=In(n[c])}t(n)};Sa.areShallowEqual=function(e,t){};Sa.areDeepEqual=function(e,t){};var Cv=6,Tv="1",Sv=["A","B","C","D","E","F","G","H"],Ri=["remove-matrix-row","add-matrix-row","remove-matrix-col","add-matrix-col"],gc=class{constructor(t){this._nextObjectId=0;this.clearAll(),this.config=t}setOption(t,r){this.config[t]=r}generateObjectId(){return(this._nextObjectId++).toString()}updateNextObjectId(){let t=this.getState().order,r=/^[0-9]+$/;for(let n of t)if(r.test(n)){let a=parseInt(n,10);a>=this._nextObjectId&&(this._nextObjectId=a+1)}}generateMatrixVariable(){let t={},{expressions:r}=this.getState();for(let n in r){let a=r[n];a.type==="matrix"&&(t[a.variable]=!0)}for(let n of Sv)if(!t[n])return n;return""}isEnabled(t){return!!this.config[t]}getTextColor(){return this.config.textColor}getBackgroundColor(){return this.config.backgroundColor}getFontSize(){return this.config.fontSize||16}getLanguage(){return this.config.language}hasUnusedMatrixVariables(){let{expressions:t}=this.getState();return Ds(t,r=>r.type==="matrix").length<Sv.length}clearShouldDebounceUndoRedo(){this._shouldDebounceUndoRedo=!1}markShouldDebounceUndoRedo(){this._shouldDebounceUndoRedo=!0}getShouldDebounceUndoRedo(){return this._shouldDebounceUndoRedo}clearAll(){let t=this.store?this.store.getState().ui.containerSize:{width:0,height:0},r={version:Tv,expressions:{1:{id:"1",type:"latex",latex:"",displayAsFraction:!1}},order:["1"],ui:{focus:void 0,settingsMenuOpen:!1,containerSize:t}};this.store?this.store.set(r):this.store=new Sa(r),this.updateNextObjectId()}getPersistedState(){let{version:t,expressions:r,order:n}=this.getState();return{version:t,expressions:r,order:n}}getState(){return this.store.getState()}setState(t){this.store.set({version:t.version,expressions:t.expressions,order:t.order,ui:this.getState().ui}),this.updateNextObjectId()}setStateFromAPI(t){let r=t||{};var n=r.expressions||{},a=r.order||[];this.store.set({version:Tv,expressions:n,order:a,ui:this.getState().ui}),this.updateNextObjectId()}shouldShowClear(){if(this.getNumberOfExpressions()===1)return!1;let t=this.getIdOfFocus();if(!t)return!1;let r=this.getExpressionById(t);return r?!!(r.type==="matrix"||r.latex):!1}canClear(){if(this.getNumberOfExpressions()>1)return!0;let t=this.getExpressionOrder()[0],r=this.getExpressionById(t);return r.type!=="latex"?!0:r.latex!==""}deleteExpression(t){this.store.shallowMutate("expressions",n=>{delete n[t]});let r=Sf(this.getState().order,t);this.store.shallowMutate(n=>{n.order=r})}addBlankLatexExpressionAfterFocus(){let t=this.getIndexOfFocus(),r;t===-1?r=this.getState().order.length:r=t+1;let n=this.addNewLatexExpression(r,"");this.focusLatexExpression(n)}addNewLatexExpression(t,r){let n=this.generateObjectId();return this.store.shallowMutate("expressions",a=>{a[n]={id:n,type:"latex",latex:r,displayAsFraction:!1}}),this.store.shallowMutate("order",a=>{a.splice(t,0,n)}),n}clearFocusedExpression(){let t=this.getIdOfFocus();t&&(this.store.shallowMutate("expressions",r=>{r[t]={id:t,type:"latex",latex:"",displayAsFraction:!1}}),this.store.set(["ui","focus"],{type:"latex-expression",id:t}))}setExpressionLatex(t,r){this.store.shallowMutate(["expressions",t],n=>{n.type==="latex"&&(n.latex=r)})}addNewMatrixExpression(){let t=!1,r=this.getExpressionOrder(),n=r.length,a=this.generateMatrixVariable(),c=2,l=2,p,g,f=this.getIdOfFocus();f?(g=f,p=this.getIndexOfFocus()):(p=r.length-1,g=r[r.length-1]);let w=this.getExpressionById(g);if(w&&w.type==="latex"){let ce=w.latex.replace(/\\ /gi,""),Se=ce.match(/^([A-Z])=?$/);if(ce=="")n=p,t=!0;else if(Se){let ze=Se[1],Ge=this.getState().expressions,Re=!1;for(let Je in Ge)Ge[Je].type==="matrix"&&Ge[Je].variable===ze&&(Re=!0);Re||(a=ze,t=!0,n=p)}}let M=[];for(var G=0;G<c;G++){let ce=[];M.push(ce);for(var R=0;R<l;R++)ce.push("")}let se=this.generateObjectId();return this.store.shallowMutate("expressions",ce=>{g&&t&&delete ce[g],ce[se]={id:se,type:"matrix",variable:a,matrix:M}}),this.store.shallowMutate("order",ce=>{ce.splice(n,t?1:0,se)}),se}addMatrixRow(t){this.store.deepMutate(["expressions",t],r=>{if(r.type!=="matrix"||r.matrix.length===0)return;let n=[];for(let a=0;a<r.matrix[0].length;a++)n.push("");r.matrix.push(n)})}removeMatrixRow(t){this.store.deepMutate(["expressions",t],r=>{r.type==="matrix"&&r.matrix.pop()})}addMatrixCol(t){this.store.deepMutate(["expressions",t],r=>{if(r.type==="matrix")for(let n of r.matrix)n.push("")})}removeMatrixCol(t){this.store.deepMutate(["expressions",t],r=>{if(r.type==="matrix")for(let n of r.matrix)n.pop()})}setLatexAtFocus(t){let r=this.getState().ui.focus;if(r)switch(r.type){case"latex-expression":this.setExpressionLatex(r.id,t);break;case"matrix-cell":this.setMatrixCellLatex(r.id,r.row,r.col,t);break;case"matrix-resize-button":case"add-matrix-button":break;default:return r}}setDisplayAsFraction(t,r){this.store.deepMutate(["expressions",t],n=>{n.type==="latex"&&(n.displayAsFraction=r)})}setMatrixCellLatex(t,r,n,a){this.store.deepMutate(["expressions",t],c=>{c.type==="matrix"&&(c.matrix[r][n]=a)})}setMatrixVariable(t,r){this.store.shallowMutate(["expressions",t],n=>{n.type==="matrix"&&(n.variable=r)})}isResizeOpDisabled(t,r){let n=this.getExpressionById(t);if(n.type!=="matrix")return!0;let a=n.matrix.length,c=a===0?0:n.matrix[0].length;switch(r){case"remove-matrix-row":return a<=1;case"add-matrix-row":return a>=Cv;case"remove-matrix-col":return c<=1;case"add-matrix-col":return c>=Cv}}setContainerSize(t){this.store.set(["ui","containerSize"],t)}getContainerSize(){return this.getState().ui.containerSize}setFocus(t){this.store.set(["ui","focus"],t)}setFocusInPreparationForKeypadEvent(){let{order:t,expressions:r}=this.getState(),n=t.length-1,a=t[n],c=r[a];if(c.type==="latex"&&!c.latex)this.focusLatexExpression(a);else{let l=this.addNewLatexExpression(n+1,"");this.focusLatexExpression(l)}}setSettingsMenuOpen(t){this.store.set(["ui","settingsMenuOpen"],t.isOpen)}isSettingsMenuOpen(){return this.getState().ui.settingsMenuOpen}isExpressionFocused(t){let r=this.getState().ui.focus;return!r||r.type==="add-matrix-button"?!1:r.id===t}isLatexExpressionFocused(t){let r=this.getState().ui.focus;return!r||r.type!=="latex-expression"?!1:r.id===t}isResizeButtonFocused(t,r){let n=this.getState().ui.focus;return!n||n.type!=="matrix-resize-button"?!1:n.id===t&&n.op===r}isAddMatrixButtonFocused(){let t=this.getState().ui.focus;return t?t.type==="add-matrix-button":!1}isMatrixExpressionFocused(t){let r=this.getState().ui.focus;return!r||r.type!=="matrix-cell"?!1:r.id===t}isMatrixExpressionCellFocused(t,r,n){let a=this.getState().ui.focus;return!a||a.type!=="matrix-cell"?!1:a.id===t&&a.row===r&&a.col===n}focusMatrixExpressionCell(t,r,n){this.setFocus({type:"matrix-cell",id:t,row:r,col:n})}focusResizeButton(t,r){this.setFocus({type:"matrix-resize-button",id:t,op:r})}focusAddMatrixButton(){this.setFocus({type:"add-matrix-button"})}focusLatexExpression(t){this.setFocus({type:"latex-expression",id:t})}blurLatexExpression(t){this.isLatexExpressionFocused(t)&&this.setFocus(void 0)}blurMatrixExpressionCell(t,r,n){this.isMatrixExpressionCellFocused(t,r,n)&&this.setFocus(void 0)}blurResizeButton(t,r){this.isResizeButtonFocused(t,r)&&this.setFocus(void 0)}blurAddMatrixButton(){this.isAddMatrixButtonFocused()&&this.setFocus(void 0)}getIdOfFocus(){let t=this.getState().ui.focus;if(t&&t.type!=="add-matrix-button")return t.id}getIndexOfFocus(){let t=this.getState().ui.focus;if(!t||t.type==="add-matrix-button")return-1;let r=this.getState().order;for(var n=0;n<r.length;n++)if(r[n]===t.id)return n;return-1}isFinalExpressionFocused(){return this.getIndexOfFocus()===this.getState().order.length-1}moveFocusInDirection(t){let r=this.getState().ui.focus;if(!r)return;let n=this.getIndexOfFocus();if(n!==-1)switch(r.type){case"latex-expression":t==="Up"?this.moveFocusFromIndexToIndex(n,n-1):t==="Down"&&this.moveFocusFromIndexToIndex(n,n+1);break;case"matrix-cell":let{lastRow:a,lastCol:c}=this.getSizeOfMatrixExpression(r.id);t==="Up"?r.row>0?this.focusMatrixExpressionCell(r.id,r.row-1,r.col):this.moveFocusFromIndexToIndex(n,n-1):t==="Down"?r.row<a?this.focusMatrixExpressionCell(r.id,r.row+1,r.col):this.moveFocusFromIndexToIndex(n,n+1):t==="Left"?r.col>0?this.focusMatrixExpressionCell(r.id,r.row,r.col-1):r.row>0&&this.focusMatrixExpressionCell(r.id,r.row-1,c):t==="Right"&&(r.col<c?this.focusMatrixExpressionCell(r.id,r.row,r.col+1):r.row<a&&this.focusMatrixExpressionCell(r.id,r.row+1,0));break;case"matrix-resize-button":case"add-matrix-button":break;default:return r}}moveFocusFromIndexToIndex(t,r){let{order:n,expressions:a}=this.getState(),c=n[r],l=a[c];if(l)switch(l.type){case"latex":this.focusLatexExpression(c);break;case"matrix":if(t<r)this.focusMatrixExpressionCell(c,0,0);else{let{lastRow:g,lastCol:f}=this.getSizeOfMatrixExpression(c);this.focusMatrixExpressionCell(c,g,f)}break;default:return l}}attemptToMoveFocusWithBackspace(){let{ui:t,expressions:r,order:n}=this.getState(),a=t.focus;if(!a||a.type==="add-matrix-button")return!1;let c=this.getIndexOfFocus();if(c===-1)return!1;let l=r[a.id];if(!l)return;let p=n.length;switch(a.type){case"latex-expression":return l.type==="latex"?l.latex||p===1?!1:(c>0?this.moveFocusInDirection("Up"):this.moveFocusInDirection("Down"),this.deleteExpression(a.id),!0):!1;case"matrix-cell":if(l.type==="matrix"){if(l.matrix[a.row][a.col])return!1;if(a.col===0){if(a.row===0){if(p===1)return this.clearAll(),this.focusLastExpression(),!1;c===0?this.moveFocusFromIndexToIndex(0,1):this.moveFocusInDirection("Up"),this.deleteExpression(a.id)}else this.moveFocusInDirection("Left");return!0}else this.moveFocusInDirection("Left")}return!1;case"matrix-resize-button":return!1;default:return a}}firstEnabledResizeOp(t){for(let r of Ri)if(!this.isResizeOpDisabled(t.id,r))return r;return Ri[Ri.length-1]}lastEnabledResizeOp(t){for(let r of Ri.slice().reverse())if(!this.isResizeOpDisabled(t.id,r))return r;return Ri[0]}nextEnabledResizeOp(t,r){let n=!1;for(let a of Ri){if(n&&!this.isResizeOpDisabled(t.id,a))return a;a===r&&(n=!0)}}prevEnabledResizeOp(t,r){let n=!1;for(let a of Ri.slice().reverse()){if(n&&!this.isResizeOpDisabled(t.id,a))return a;a===r&&(n=!0)}}attemptToMoveFocusWithTab({shiftKey:t}){let r=this.getState().ui.focus;if(!r)return!1;let n=this.getIndexOfFocus(),a;if(n!==-1){let c=this.getState().order[n-1];a=c?this.getExpressionById(c):void 0}switch(r.type){case"latex-expression":return t&&a&&a.type==="matrix"?(this.focusResizeButton(a.id,this.lastEnabledResizeOp(a)),!0):!1;case"matrix-cell":if(t)return a&&a.type==="matrix"&&r.row===0&&r.col===0?(this.focusResizeButton(a.id,this.lastEnabledResizeOp(a)),!0):!1;{let{lastRow:c,lastCol:l}=this.getSizeOfMatrixExpression(r.id);return r.row===c&&r.col===l?(this.focusResizeButton(r.id,this.firstEnabledResizeOp(this.getExpressionById(r.id))),!0):!1}case"matrix-resize-button":if(t){let c=this.prevEnabledResizeOp(this.getExpressionById(r.id),r.op);if(c!==void 0)return this.focusResizeButton(r.id,c),!0;let{lastRow:l,lastCol:p}=this.getSizeOfMatrixExpression(r.id);return this.focusMatrixExpressionCell(r.id,l,p),!0}else{let c=this.nextEnabledResizeOp(this.getExpressionById(r.id),r.op);return c!==void 0?(this.focusResizeButton(r.id,c),!0):this.isFinalExpressionFocused()?(this.focusAddMatrixButton(),!0):n===-1?!1:(this.moveFocusFromIndexToIndex(n,n+1),!0)}case"add-matrix-button":{if(!t)return!1;let c=this.getState().order,l=c[c.length-1];if(!l)return!1;let p=this.getExpressionById(l);return p.type!=="matrix"?!1:(this.focusResizeButton(p.id,this.lastEnabledResizeOp(p)),!0)}}}getSizeOfMatrixExpression(t){let r=this.getExpressionById(t);return r?{lastRow:r.matrix.length-1,lastCol:r.matrix[0].length-1}:{lastRow:0,lastCol:0}}getEvaluations(){let t=this.getState();return this._lastEvaluationState===t?this._evaluations:(this._lastEvaluationState=t,this._evaluations=Ev(this._lastEvaluationState),this._evaluations)}getExpressionById(t){return this.getState().expressions[t]}getExpressionOrder(){return this.getState().order}focusFirstExpression(){let t=this.getExpressionOrder()[0];this.focusLatexExpression(t)}focusLastExpression(){let t=this.getExpressionOrder();this.focusLatexExpression(t[t.length-1])}getNumberOfExpressions(){return this.getState().order.length}updateTheComputedWorld(){var t=this.getIdOfFocus();t&&!this.getExpressionById(t)&&this.setFocus(void 0)}};function hD(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var mD="ID_",$d=function(){function e(){hD(this,e),this._callbacks={},this._isDispatching=!1,this._isHandled={},this._isPending={},this._lastID=1}return e.prototype.register=function(r){var n=mD+this._lastID++;return this._callbacks[n]=r,n},e.prototype.unregister=function(r){this._callbacks[r]||hc(!1,"Dispatcher.unregister(...): `%s` does not map to a registered callback.",r),delete this._callbacks[r]},e.prototype.waitFor=function(r){this._isDispatching||hc(!1,"Dispatcher.waitFor(...): Must be invoked while dispatching.");for(var n=0;n<r.length;n++){var a=r[n];if(this._isPending[a]){this._isHandled[a]||hc(!1,"Dispatcher.waitFor(...): Circular dependency detected while waiting for `%s`.",a);continue}this._callbacks[a]||hc(!1,"Dispatcher.waitFor(...): `%s` does not map to a registered callback.",a),this._invokeCallback(a)}},e.prototype.dispatch=function(r){this._isDispatching&&hc(!1,"Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch."),this._startDispatching(r);try{for(var n in this._callbacks)this._isPending[n]||this._invokeCallback(n)}finally{this._stopDispatching()}},e.prototype.isDispatching=function(){return this._isDispatching},e.prototype._invokeCallback=function(r){this._isPending[r]=!0,this._callbacks[r](this._pendingPayload),this._isHandled[r]=!0},e.prototype._startDispatching=function(r){for(var n in this._callbacks)this._isPending[n]=!1,this._isHandled[n]=!1;this._pendingPayload=r,this._isDispatching=!0},e.prototype._stopDispatching=function(){delete this._pendingPayload,this._isDispatching=!1},e}();function hc(e,t,r,n,a,c,l,p){if(t===void 0)throw new Error("invariant requires an error message argument");if(!e){var g;if(t===void 0)g=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var f=[r,n,a,c,l,p],w=0;g=new Error(t.replace(/%s/g,function(){return f[w++]})),g.name="Invariant Violation"}throw g.framesToPop=1,g}}var mc=class{constructor(t=100){this.clear(),this._sizeLimit=t}clear(){this._stack=[],this._stackPointer=-1}getState(){return this._stack[this._stackPointer]}serializeForBugsnag(){function t(r){try{return JSON.stringify(r,null,2)}catch(n){return"[[could not jsonify]]"}}return{currentState:t(this._stack[this._stackPointer]),undoState:t(this._stack[this._stackPointer-1]),redoState:t(this._stack[this._stackPointer+1])}}addState(t){this.canRedo()&&this._stack.splice(this._stackPointer+1),this._stack.push(t),this._stack.length>this._sizeLimit&&this._stack.shift(),this._stackPointer=this._stack.length-1}replaceState(t){this.canRedo()&&this._stack.splice(this._stackPointer+1),this.replaceInteriorState(t)}replaceInteriorState(t){this._stack.length===0?(this._stack.push(t),this._stackPointer=0):this._stack[this._stackPointer]=t}canUndo(){return this._stackPointer>0}canRedo(){return this._stackPointer<this._stack.length-1}undo(){this.canUndo()&&(this._stackPointer-=1)}redo(){this.canRedo()&&(this._stackPointer+=1)}};var fD={loga:(e,t)=>{rt.canAcceptText(e,t.capExpressionSize,"\\log_{}\\left(\\right)")&&(e.write("\\log_{}"),e.typedText("("),e.keystroke("Left"),e.keystroke("Down"))},nthroot:(e,t)=>{rt.canAcceptText(e,t.capExpressionSize,"\\sqrt[]{}")&&(e.write("\\sqrt[]{}"),e.keystroke("Left"),e.keystroke("Left"))},ddx:(e,t)=>{rt.canAcceptText(e,t.capExpressionSize,"\\frac{d}{dx}")&&e.write("\\frac{d}{dx}")},arcsin:(e,t)=>{rt.canAcceptText(e,t.capExpressionSize,"\\sin^{-1}\\left(\\right)")&&(e.write("sin^{-1}"),e.typedText("("))},arccos:(e,t)=>{rt.canAcceptText(e,t.capExpressionSize,"\\cos^{-1}\\left(\\right)")&&(e.write("cos^{-1}"),e.typedText("("))},arctan:(e,t)=>{rt.canAcceptText(e,t.capExpressionSize,"\\tan^{-1}\\left(\\right)")&&(e.write("tan^{-1}"),e.typedText("("))},arcsec:(e,t)=>{rt.canAcceptText(e,t.capExpressionSize,"\\sec^{-1}\\left(\\right)")&&(e.write("sec^{-1}"),e.typedText("("))},arccsc:(e,t)=>{rt.canAcceptText(e,t.capExpressionSize,"\\csc^{-1}\\left(\\right)")&&(e.write("csc^{-1}"),e.typedText("("))},arccot:(e,t)=>{rt.canAcceptText(e,t.capExpressionSize,"\\cot^{-1}\\left(\\right)")&&(e.write("cot^{-1}"),e.typedText("("))},"A^T":(e,t)=>{rt.canAcceptText(e,t.capExpressionSize,"^{T}")&&(e.typedText("^T"),e.keystroke("Right"))},"A^-1":(e,t)=>{rt.canAcceptText(e,t.capExpressionSize,"^{-1}")&&(e.typedText("^-1"),e.keystroke("Right"))},"A^2":(e,t)=>{rt.canAcceptText(e,t.capExpressionSize,"^{2}")&&(e.typedText("^2"),e.keystroke("Right"))},"a^2":(e,t)=>{rt.canAcceptText(e,t.capExpressionSize,"^{2}")&&(e.typedText("^2"),e.keystroke("Right"))},"a^3":(e,t)=>{rt.canAcceptText(e,t.capExpressionSize,"^{3}")&&(e.typedText("^3"),e.keystroke("Right"))},"a/b":(e,t)=>{rt.canAcceptText(e,t.capExpressionSize,"\\frac{}{}")&&(e.write("\\frac{}{}"),e.keystroke("Left"))},integral:(e,t)=>{rt.canAcceptText(e,t.capExpressionSize,"\\int_{}^{}")&&e.cmd("integral")}};function Dv(e,t,r){fD[t](e,r)}ho();function zd(e){return Yo(e)?(e.match(/^#([A-Fa-f0-9]{3})$/g)&&(e="#"+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),e.toLowerCase()):e}function Yo(e){return typeof e=="string"&&(e.match(/^#([A-Fa-f0-9]{3})$/g)||e.match(/^#([A-Fa-f0-9]{6})$/g))}function Wg(e){if(e=zd(e),!Yo(e))return e;let t="0123456789abcdef";return"#"+e.slice(1).split("").map(r=>t[15-t.indexOf(r)]).join("")}var jo={RED:"#c74440",BLUE:"#2d70b3",GREEN:"#388c46",PURPLE:"#6042a6",ORANGE:"#fa7e19",BLACK:"#000000",GRAY:"#aaaaaa",FOCUS_OUTLINE:"#6a93d2"},UF={RED:jo.RED,BLUE:jo.BLUE,GREEN:jo.GREEN,ORANGE:jo.ORANGE,PURPLE:jo.PURPLE,GRAY:jo.GRAY};dl();var Kd=class{constructor(t,r){this.cb=t;this.document=r;this.observedAriaLiveElements=new WeakMap;this.destroyed=!1;this.onAriaLabelFocus=t=>{let r=t.target;if(this.isElement(r)){let n=r.getAttribute("aria-label");n&&this.cb(n,"label")}};this.document.documentElement.addEventListener("focus",this.onAriaLabelFocus,!0),this.ariaLiveContentObserver=new MutationObserver(n=>this.handleAriaLiveContentMutations(n)),r.documentElement.querySelectorAll('[aria-live="assertive"]').forEach(n=>this.startObservingAriaLiveElement(n)),this.treeObserver=new MutationObserver(n=>this.handleDocumentTreeMutations(n)),this.treeObserver.observe(r.documentElement,{childList:!0,subtree:!0,attributeFilter:["aria-live"]})}destroy(){this.destroyed=!0,this.document.documentElement.removeEventListener("focus",this.onAriaLabelFocus,!0),this.ariaLiveContentObserver.disconnect()}isObservingElement(t){return!!this.observedAriaLiveElements.get(t)}handleAriaLiveContentMutations(t){var n;let r=new Map;for(let a of t){if(!this.observedAriaLiveElements.get(a.target))continue;let c=r.get(a.target);c||(c=[],r.set(a.target,c)),c.push(a)}for(let[a,c]of r){let l=a.cloneNode(!0),p=[l.textContent||""];for(let g=c.length-1;g>=0;g--){let f=c[g];switch(f.type){case"attributes":{f.attributeName!==null&&l.setAttribute(f.attributeName,f.oldValue||""),p.push(l.textContent||"");break}case"characterData":{f.oldValue!==null&&(l.textContent=f.oldValue),l.textContent&&l.textContent!==p[p.length-1]&&p.push(l.textContent);break}case"childList":{if(f.addedNodes.length>1||f.removedNodes.length>1)throw new Error(`Expected at most one removed node and one added node, but got ${f.removedNodes.length} removed nodes and ${f.addedNodes.length} added nodes`);f.addedNodes.length===1&&((n=l.firstChild)==null||n.remove()),f.removedNodes.length===1&&f.removedNodes.forEach(w=>l.appendChild(w.cloneNode(!0))),l.textContent&&l.textContent!==p[p.length-1]&&p.push(l.textContent);break}}}for(let g of p.reverse())this.cb(g,"alert")}}startObservingAriaLiveElement(t){this.destroyed||t.getAttribute("aria-live")==="assertive"&&(this.observedAriaLiveElements.get(t)||(this.observedAriaLiveElements.set(t,!0),t.textContent&&this.cb(t.textContent,"alert"),this.ariaLiveContentObserver.observe(t,{attributes:!0,characterData:!0,childList:!0,attributeOldValue:!0,characterDataOldValue:!0})))}stopObservingAriaLiveElement(t){this.observedAriaLiveElements.set(t,!1)}handleDocumentTreeMutations(t){for(let r of t)r.addedNodes.forEach(n=>{this.isElement(n)&&n.getAttribute("aria-live")==="assertive"&&this.startObservingAriaLiveElement(n)}),this.isElement(r.target)&&r.attributeName==="aria-live"&&(r.target.getAttribute("aria-live")==="assertive"?this.startObservingAriaLiveElement(r.target):this.stopObservingAriaLiveElement(r.target)),r.removedNodes.forEach(n=>{this.isElement(n)&&(this.stopObservingAriaLiveElement(n),n.querySelectorAll('[aria-live="assertive"]').forEach(a=>this.stopObservingAriaLiveElement(a)))})}isElement(t){var n;let r=(n=this.document.defaultView)==null?void 0:n.Element;return r?t instanceof r:!1}};var Xa,Wd=[],Mv="",bD;function xD(e){Wd.push(e)}function Av(e){if(e!==void 0&&xD(e),Xa&&Wd.length>0){let t=Wd.join(" ").replace(/ +(?= )/g,"");Xa.setAttribute("aria-relevant",Mv===t&&Lh?"all":"additions text"),Xa.textContent=t,Mv=t}Wd.length=0}function wD(){Xa=document.createElement("p"),Xa.setAttribute("aria-live","assertive"),Xa.setAttribute("aria-atomic","true"),Xa.classList.add("dcg-aria-alert"),document.body.appendChild(Xa),co().logAria&&(bD=new Kd((t,r)=>Gt.log(`[aria ${r}] ${t}`),document))}im(wD);var fc=class{constructor(t,r){this._queuedCallbacks=[];this.raw=(t,r)=>Vi(t,r);this.s=Js(this.getLanguage.bind(this));this.hasTranslation=t=>Ys(t,this.getLanguage());this.unpack=t=>vd(t,this.getLanguage());this.dispatch=t=>{yl("dispatch",{type:t.type}),this.dispatcher.dispatch(t);let r;for(;r=this._queuedCallbacks.shift();)r()};this.model=t,this.dispatcher=new $d,this.stateStack=new mc,this.stateStack.addState(this.getPersistedState()),this.settingsProxy=r,this.syncPublicSettings(),this.dispatcher.register(n=>{if(this.enqueueEvent("render"),n.type==="render")return;let a=!1;switch(n.type){case"clear-all":this.model.clearAll(),this.model.focusLastExpression();break;case"clear-focused-expression":this.model.clearFocusedExpression();break;case"undo":this.undo(),a=!0;break;case"redo":this.redo(),a=!0;break;case"set-state-from-api":n.opts.allowUndo||this.stateStack.clear(),this.model.setStateFromAPI(n.state);break;case"clear-from-api":n.opts.allowUndo||this.stateStack.clear(),this.model.clearAll();break;case"add-new-matrix":let c=this.model.addNewMatrixExpression();this.model.focusMatrixExpressionCell(c,0,0);break;case"focus-latex-expression":this.model.focusLatexExpression(n.id);break;case"focus-first-expression":this.model.focusFirstExpression();break;case"focus-last-expression":this.model.focusLastExpression();break;case"blur-latex-expression":this.model.blurLatexExpression(n.id);break;case"focus-matrix-expression-cell":this.model.focusMatrixExpressionCell(n.id,n.row,n.col);break;case"blur-matrix-expression-cell":this.model.blurMatrixExpressionCell(n.id,n.row,n.col);break;case"blur-resize-button":this.model.blurResizeButton(n.id,n.op);break;case"focus-resize-button":this.model.focusResizeButton(n.id,n.op);break;case"focus-add-matrix-button":this.model.focusAddMatrixButton();break;case"blur-add-matrix-button":this.model.blurAddMatrixButton();break;case"mq-updated-latex":t.setLatexAtFocus(n.latex);break;case"add-matrix-row":t.addMatrixRow(n.id),this.alertSizeOfMatrix(n.id);break;case"remove-matrix-row":t.removeMatrixRow(n.id),this.alertSizeOfMatrix(n.id);break;case"add-matrix-col":t.addMatrixCol(n.id),this.alertSizeOfMatrix(n.id);break;case"remove-matrix-col":t.removeMatrixCol(n.id),this.alertSizeOfMatrix(n.id);break;case"set-display-as-fraction":this.model.setDisplayAsFraction(n.id,n.value);break;case"keypad/press-key":this.applyPressedKey(n.key,n.evt);break;case"edit-bar/press-key":this.editBarPressedKey(n.key,n.evt);break;case"keypad/type-text":this.applyTypedText(n.text);break;case"keypad/custom-command":this.applyCustomCommand(n.command);break;case"tab-backward-from-control-bar":this.model.attemptToMoveFocusWithTab({shiftKey:!0})&&n.evt.preventDefault();break;case"update-inverted-colors":this.model.setOption("invertedColors",!!n.invertedColors);break;case"update-projector-mode":this.model.setOption("projectorMode",!!n.mode);break;case"update-cap-expression-size":this.model.setOption("capExpressionSize",!!n.mode);break;case"update-text-color":this.model.setOption("textColor",n.textColor);break;case"update-background-color":this.model.setOption("backgroundColor",n.backgroundColor);break;case"update-font-size":this.model.setOption("fontSize",n.fontSize);break;case"update-decimal-to-fraction":this.model.setOption("decimalToFraction",n.value);break;case"keypad/shift":case"keypad/123":case"keypad/abc":case"keypad/audio-trace":break;case"update-language":this.setLanguage(n.language);break;case"toggle-settings-menu":this.toggleSettingsMenu();break;case"enable-settings-menu":this.model.setOption("settingsMenu",!0);break;case"disable-settings-menu":this.model.setOption("settingsMenu",!1);break;case"close-settings-menu":this.closeSettingsMenu();break;case"ui/container-resized":this.model.setContainerSize(n.size);break;default:return n}this.model.updateTheComputedWorld(),a||(this.model.getShouldDebounceUndoRedo()?(this.commitUndoRedoDebounced(),this.model.clearShouldDebounceUndoRedo()):this.commitUndoRedoSynchronously()),this.runAfterDispatch(this.syncPublicSettings.bind(this))})}runAfterDispatch(t){this._queuedCallbacks.push(t)}enqueueEvent(t){this.runAfterDispatch(()=>{this.onEventEmitted&&this.onEventEmitted(t)})}getPersistedState(){return this.model.getPersistedState()}setStateFromAPI(t,r){this.dispatch({type:"set-state-from-api",state:t,opts:r})}clearFromAPI(t){this.dispatch({type:"clear-from-api",opts:t})}focusFirstExpression(){this.dispatch({type:"focus-first-expression"})}syncPublicSettings(){this.settingsProxy.setProperty("invertedColors",this.model.isEnabled("invertedColors")),this.settingsProxy.setProperty("projectorMode",this.model.isEnabled("projectorMode")),this.settingsProxy.setProperty("capExpressionSize",this.model.isEnabled("capExpressionSize")),this.settingsProxy.setProperty("invertedColors",this.getInvertedColors()),this.settingsProxy.setProperty("textColor",this.getTextColor()),this.settingsProxy.setProperty("backgroundColor",this.getBackgroundColor()),this.settingsProxy.setProperty("fontSize",this.getFontSize()),this.settingsProxy.setProperty("language",this.getLanguage())}ensureMathquillIsFocusedAndReturnFocusedMathquill(){let t=rt.getFocusedMathquill();return t||(this.model.setFocusInPreparationForKeypadEvent(),this.onEventEmitted&&this.onEventEmitted("render"),rt.getFocusedMathquill())}applyTypedText(t){let r=this.ensureMathquillIsFocusedAndReturnFocusedMathquill();r&&rt.canAcceptText(r,this.model.isEnabled("capExpressionSize"),t)&&(r.typedText(t),this.model.setLatexAtFocus(r.latex()))}applyCustomCommand(t){let r=this.ensureMathquillIsFocusedAndReturnFocusedMathquill();r&&(Dv(r,t,{capExpressionSize:this.model.isEnabled("capExpressionSize")}),this.model.setLatexAtFocus(r.latex()))}applyPressedKey(t,r){let n=this.ensureMathquillIsFocusedAndReturnFocusedMathquill();n&&(t==="Up"||t==="Down"||t==="Left"||t==="Right"?rt.applyArrowKeyAndReturnIfWasAtBounds(n,t,r)&&this.model.moveFocusInDirection(t):t==="Enter"?(r&&(r.preventDefault(),r.stopPropagation()),this.model.addBlankLatexExpressionAfterFocus()):t==="Backspace"?this.model.attemptToMoveFocusWithBackspace()||(n.keystroke(t,r),this.model.setLatexAtFocus(n.latex())):t==="Delete"?(n.keystroke(t,r),this.model.setLatexAtFocus(n.latex())):t==="Tab"||t==="Shift-Tab"?this.model.attemptToMoveFocusWithTab({shiftKey:t==="Shift-Tab"})?r&&(r.preventDefault(),r.stopPropagation()):(n.keystroke(t,r),this.model.setLatexAtFocus(n.latex())):(n.keystroke(t,r),this.model.setLatexAtFocus(n.latex())))}editBarPressedKey(t,r){t==="Tab"&&this.model.attemptToMoveFocusWithTab({shiftKey:!!(r!=null&&r.shiftKey)})&&r&&r.preventDefault()}commitUndoRedoDebounced(){let t=this.getPersistedState(),r=this.stateStack.getState();if(zn(r,t))return;let n=new Date().getTime();n-this._lastDebouncedTime<1e3?this.stateStack.replaceState(t):this.stateStack.addState(t),this._lastDebouncedTime=n,this.enqueueEvent("change")}commitUndoRedoSynchronously(){let t=this.getPersistedState(),r=this.stateStack.getState();zn(r,t)||(this._lastDebouncedTime=0,this.stateStack.addState(t),this.enqueueEvent("change"))}undo(){this.stateStack.canUndo()&&(this.stateStack.undo(),this.model.setState(this.stateStack.getState()),this.enqueueEvent("change"))}redo(){this.stateStack.canRedo()&&(this.stateStack.redo(),this.model.setState(this.stateStack.getState()),this.enqueueEvent("change"))}canUndo(){return this.stateStack.canUndo()}canRedo(){return this.stateStack.canRedo()}getInvertedColors(){return this.model.isEnabled("invertedColors")}getTextColor(){let t=zd(this.model.getTextColor()||"#000");return this.getInvertedColors()&&t!=="#000000"?Wg(t):t}hasBackgroundColor(){return this.getBackgroundColor()!=="#ffffff"}getBackgroundColor(){let t=zd(this.model.getBackgroundColor()||"#fff");return this.getInvertedColors()&&t!=="#ffffff"?Wg(t):t}getFontSize(){return this.model.getFontSize()}setLanguage(t){t!=="en"&&!xx(t)?Gt.warn(`Translation for '${t}' isn't currently available. Using '${this.getLanguage()}' instead.`):this.model.setOption("language",t)}getLanguage(){return this.model.getLanguage()}getSettingsMenu(){return this.model.isEnabled("settingsMenu")}closeSettingsMenu(){this.model.setSettingsMenuOpen({isOpen:!1})}toggleSettingsMenu(){this.model.setSettingsMenuOpen({isOpen:!this.isSettingsMenuOpen()})}isSettingsMenuOpen(){return this.model.isSettingsMenuOpen()}isProjectorMode(){return this.model.isEnabled("projectorMode")}getContainerSize(){return this.model.getContainerSize()}isNarrow(){return this.getContainerSize().width<570}isVeryNarrow(){return this.getContainerSize().width<420}isVeryVeryNarrow(){return this.getContainerSize().width<370}shouldShowClear(){return this.model.shouldShowClear()}shouldRender(){let{width:t,height:r}=this.getContainerSize();return t>0&&r>0}alertSizeOfMatrix(t){let r=this.model.getExpressionById(t);if(!r||r.type!=="matrix")return;let n=r.matrix.length,a=n===0?0:r.matrix[0].length;Av(this.s("matrix-calculator-narration-new-dimensions",{rows:n,cols:a}))}getMathquillConfig(){return{autoCommands:cl(),autoOperatorNames:ll()}}};var kD=0,ED="guid_"+Math.round(Math.random()*1e6)+"_"+new Date().getTime()+"_",Hg=class{constructor(){this.__observers={},this.__eventObservers={},this.__oldProperties={},this.__propertyComparators={},this.guid=ED+ ++kD}unobserveAll(){this.__observers={},this.__eventObservers={}}getProperty(t){return this[t]}getOldProperty(t){return this.__oldProperties[t]}setProperty(t,r){var n=this[t];this[t]=r;var a=this.__propertyComparators[t];if(a){if(a(n,r))return}else if(zn(n,r))return;this.__oldProperties[t]=n,this.notifyPropertyChange(t)}setProperties(t){for(var r in t)t.hasOwnProperty(r)&&this.setProperty(r,t[r])}setPropertyComparator(t,r){this.__propertyComparators[t]=r}notifyPropertyChange(t){this.__callObservers(this.__observers,t,this)}observe(t,r){this.__addObservers(this.__observers,t,r)}unobserve(t){this.__removeObservers(this.__observers,t)}observeAndSync(t,r){this.observe(t,r);for(var n=t.split(" "),a=0;a<n.length;a++){var c=n[a].split("."),l=c[0];this.hasOwnProperty(l)&&r(l,this)}}triggerEvent(t,r){this.__callObservers(this.__eventObservers,t,r)}observeEvent(t,r){this.__addObservers(this.__eventObservers,t,r)}unobserveEvent(t){this.__removeObservers(this.__eventObservers,t)}__callObservers(t,r,n){var a=t[r];if(a)for(var c=0;c<a.length;c++)a[c].callback(r,n)}__removeObservers(t,r){for(var n=r.split(" "),a=0;a<n.length;a++){var c=n[a].split("."),l=c[0],p=c[1];if(l&&p){var g=t[l],f=[];if(!g)continue;for(var w=0;w<g.length;w++){var M=g[w];M.namespace!==p&&f.push(M)}t[l]=f}else if(l)delete t[l];else if(p)for(l in t)t.hasOwnProperty(l)&&this.__removeObservers(t,l+"."+p)}}__addObservers(t,r,n){for(var a=r.split(" "),c=0;c<a.length;c++){var l=a[c].split("."),p=l[0];if(!p)throw"Must supply a property to observe";var g=l[1],f={namespace:g,callback:n},w=t[p];w?w.push(f):t[p]=[f]}}},Jo=Hg;dr();var CD=function(){{var e=0,t=1,r=2,n=!1,a=function(){c(document),n=!0},c=function(l){n||ee(l).bind("touchstart",function(p){var g=ee(p.target),f=e,w=null;if(!g[0].closest("[disablescroll]"))for(;f===e&&g.length&&g[0].tagName!==void 0;){var M=getComputedStyle(g[0]).overflow,G=getComputedStyle(g[0]).overflowY;if(M!=="hidden"&&M!=="visible"&&G!=="hidden"&&G!=="hidden"){var R=g.scrollTop();R!==0&&(f=r),g.scrollTop(R+1),g.scrollTop()!==R&&(f=t|f,g.scrollTop(R))}g=ee(g[0].parentElement)}if(f!==e){w=[];for(var se=p.originalEvent.touches,ce=0;ce<se.length;ce++){var Se={};for(var ze in se[ce])se[ce].hasOwnProperty(ze)&&(Se[ze]=se[ce][ze]);w.push(Se)}}ee(document).on("touchmove.scrollfix",function(Ge){if(w){var Re=w[0],Je=Ge.originalEvent.touches[0],Nt=Je.screenY-Re.screenY;(Nt>0&&!(f&r)||Nt<0&&!(f&t))&&(f=e),Nt&&(w=null)}f===e&&Ge.preventDefault()}),ee(document).on("touchend.scrollfix",function(){ee(document).off(".scrollfix")})})};return{limitScrollOnElement:c,limitScrollOnDocument:a}}}();var{limitScrollOnElement:Lv,limitScrollOnDocument:i_}=CD;function SD(e){Gh?setTimeout(e,25):requestAnimationFrame(e)}var Gv=1,Qo={},yc=!1;function Iv(){yc=!0,SD(DD)}var Vv={};function DD(){Vv.rafSPY&&Vv.rafSPY(),yc=!1;for(let e in Qo)Qo[e].detectAndEnqueueEvent(),yc=!0;if(yc){Iv();for(let e in Qo)Qo[e].dispatchQueuedEvent()}}var bc=class{constructor(t,r){this.elt=t;this.cb=r;this.destroyed=!1;this.lastOffscreen=!1;this.id=Gv.toString(),this.appliedScale={x:1,y:1},Gv++}stopWatching(){delete Qo[this.id]}startWatching(){this.checkForChanges(),Qo[this.id]=this,yc||Iv()}resetAppliedScalingAndGetBoundingClientRect(){var t=this.elt.getBoundingClientRect(),r={x:t.width/this.elt.offsetWidth,y:t.height/this.elt.offsetHeight};if(r.x===this.appliedScale.x&&r.y===this.appliedScale.y)return t;let n=this.elt.querySelector(".dcg-dom-change-wrapper");return n&&(this.appliedScale=r,da(n,{transform:"scale("+1/this.appliedScale.x+","+1/this.appliedScale.y+")",width:100*this.appliedScale.x+"%",height:100*this.appliedScale.y+"%",transformOrigin:"0 0"})),t}detectAndEnqueueEvent(){if(this.destroyed)return;let t=!0;if(!(document.body&&document.body.contains(this.elt)))this.lastSize&&(this.lastSize=void 0,this.queuedEvent={type:"removed",target:this.elt,isOffscreen:!0});else{let n=this.resetAppliedScalingAndGetBoundingClientRect();t=n.top>window.innerHeight||n.bottom<0||n.left>window.innerWidth||n.right<0,this.lastSize?(n.width!==this.lastSize.width||n.height!==this.lastSize.height||window.devicePixelRatio!==this.lastSize.pixelRatio)&&(this.lastSize.width=n.width,this.lastSize.height=n.height,this.lastSize.pixelRatio=window.devicePixelRatio,this.queuedEvent={type:"resized",target:this.elt,size:be({},this.lastSize),isOffscreen:t}):(this.lastSize={width:n.width,height:n.height,pixelRatio:window.devicePixelRatio},this.queuedEvent={type:"added",target:this.elt,size:be({},this.lastSize),isOffscreen:t})}t!==this.lastOffscreen&&(this.lastOffscreen=t,this.queuedEvent||(this.queuedEvent={type:"offscreen-noop",target:this.elt,isOffscreen:t}))}dispatchQueuedEvent(){let t=this.queuedEvent;t&&(this.queuedEvent=void 0,this.cb(t))}checkForChanges(){this.detectAndEnqueueEvent(),this.dispatchQueuedEvent()}destroy(){this.stopWatching();for(var t in this)this.hasOwnProperty(t)&&delete this[t];this.destroyed=!0}};var xc=class{constructor(t){if(this.rootElt=t,this.eventModel=new Jo,!t)throw new Error("must pass an HTMLElement to the API")}setupDomChangeDetector(t){this.autoSize=t,Lv(this.rootElt),this.domChangeDetector=new bc(this.rootElt,r=>{switch(r.type){case"added":this.view=this.onCreateView(),this.onResizeView(r.size);break;case"removed":this.onDestroyView(),this.view=void 0;break;case"resized":this.onResizeView(r.size);break}}),this.autoSize!==!1?this.domChangeDetector.startWatching():this.domChangeDetector.checkForChanges()}detach(){Gt.warn(".detach() is deprecated. It should no longer be necessary")}destroy(){this.view&&this.onDestroyView(),this.domChangeDetector.destroy();function t(c){Gt.warn("You've destroyed this API instance. You can no longer call ."+c+"()")}for(var r={},n=this;n;)Object.getOwnPropertyNames(n).forEach(l=>r[l]=!0),n=Object.getPrototypeOf(n);for(var a in r)typeof this[a]=="function"?this[a]=t.bind(this,a):this.hasOwnProperty(a)&&delete this[a];this.destroy=function(){}}resize(){this.domChangeDetector.checkForChanges()}updateView(){this.view&&document.body&&document.body.contains(this.rootElt)&&this.view.update()}triggerEvent(t,r){this.eventModel.triggerEvent(t,r)}observeEvent(t,r){this.eventModel.observeEvent(t,r)}unobserveEvent(t){this.eventModel.unobserveEvent(t)}};function jg(e){return e==="es-ES"?(Gt.warn("{language: 'es-ES'} has been deprecated. Proceeding with {language: 'es'}"),"es"):e}var jd=he(me());function MD(e){var t={language:"en",autosize:!0,invertedColors:!1,projectorMode:!1,capExpressionSize:!1,textColor:"#000",backgroundColor:"#fff",fontSize:16,settingsMenu:!0,decimalToFraction:!0};e||(e={});for(let r in e)if(t.hasOwnProperty(r)){let n=r;if(n==="textColor"||n==="backgroundColor"){let a=e[n];if(!a)continue;Yo(a)?t[n]=a:Gt.warn(`Invalid ${n}. Color must be a 3- or 6-character hex color (e.g. #000 or #001111)`)}else if(n==="fontSize"){let a=e[n];if(a===void 0)continue;typeof a!="number"?Gt.warn(`Invalid ${n}. fontSize must be a number`):t[n]=a}else if(n==="language"){let a=e[n];if(a===void 0)continue;typeof a!="string"?Gt.warn(`Invalid ${n}. language must be a string`):t[n]=jg(a)}else t[n]=!!e[n]}return t}function Nv(e){return{allowUndo:!!(e&&e.allowUndo)}}var Hd=class extends xc{constructor(r,n){typeof _Desmos!="undefined"&&typeof desmosLocaleData!="undefined"&&_Desmos.supportedLanguages===void 0&&(_Desmos.supportedLanguages=["en"].concat(Object.keys(desmosLocaleData)));super(r);this.rootElt=r;let a=MD(n);this.settings=new Jo,this.model=new gc(a),this.controller=new fc(this.model,this.settings),this.controller.onEventEmitted=c=>{c==="render"&&this.updateView()},this.setupDomChangeDetector(a.autosize)}updateSettings(r){if(r)for(let n in r)switch(n){case"language":let a=r[n];if(a===void 0)continue;this.controller.dispatch({type:"update-language",language:jg(a)});break;case"settingsMenu":r.settingsMenu?this.controller.dispatch({type:"enable-settings-menu"}):this.controller.dispatch({type:"disable-settings-menu"});break;case"invertedColors":let c=r[n];if(c===void 0)continue;this.controller.dispatch({type:"update-inverted-colors",invertedColors:c});break;case"projectorMode":{let w=r[n];if(w===void 0)continue;this.controller.dispatch({type:"update-projector-mode",mode:w});break}case"capExpressionSize":let l=r[n];if(l===void 0)return;this.controller.dispatch({type:"update-cap-expression-size",mode:l});break;case"decimalToFraction":this.controller.dispatch({type:"update-decimal-to-fraction",value:!!r[n]});break;case"textColor":let p=r[n];if(p===void 0)continue;if(!Yo(p)){Gt.warn("invalid textColor. Text color must be a 3- or 6-character hex color (e.g. #000 or #001111)");continue}this.controller.dispatch({type:"update-text-color",textColor:p});break;case"backgroundColor":let g=r[n];if(g===void 0)continue;if(!Yo(g)){Gt.warn("invalid backgroundColor. Background color must be a 3- or 6-character hex color (e.g. #000 or #001111)");continue}this.controller.dispatch({type:"update-background-color",backgroundColor:g});break;case"fontSize":let f=r[n];if(f===void 0)continue;if(typeof f!="number"){Gt.warn(`Invalid ${n}. fontSize must be a number`);continue}this.controller.dispatch({type:"update-font-size",fontSize:f});break}}onCreateView(){return jd.mountToNode(dd,this.rootElt,{controller:()=>this.controller})}onDestroyView(){jd.unmountFromNode(this.rootElt)}onResizeView(r){this.controller.dispatch({type:"ui/container-resized",size:r})}getState(){return ln(this.controller.getPersistedState())}setState(r,n){let a;typeof r=="string"?a=JSON.parse(r):a=ln(r||{}),this.controller.setStateFromAPI(a,Nv(n))}setBlank(r){this.controller.clearFromAPI(Nv(r))}focusFirstExpression(){this.controller.focusFirstExpression()}};function Yg(...e){return new Hd(...e)}Yg.prototype=Hd.prototype;ho();dr();var bn=he(me());var Fv=he(Ov()),_v=he(me());ho();function Rv(e,t={}){id(document.body),/testing/.test(document.location.search)||cf(Fv.default);let r=document.getElementById("main-container");if(!r)throw'Expected to find an element with id="main-container"';let n=_v.mountToNode(e,r,t);return document.querySelector(".dcg-loading-div-container").style.display="none",Sh(),n}var gr=he(me());var O=he(me());dr();var Jd=he(me());var Yd=class extends Jd.Class{template(){return Jd.createElement("span",{onMount:this.bindFn(this.addSVGLogo)})}addSVGLogo(t){t.innerHTML=`
  
    `}};var fn=he(me()),Qd=he(Jv());var Xg=/\{\$([a-zA-Z0-9\-]+([a-zA-Z0-9\-]+_)*[a-zA-Z0-9\-]+)\}/;function Qv(e,t){let r=0,n=0,a={},c={},l=p(e);if(!/^<0>/.test(l)||!/<\/0>$/.test(l))throw new Error("Expected template string to start and end with <0> and </0>, but found "+JSON.stringify(l));return l.slice(3,-4).trim();function p(f){if(t.isConst(f))return FD(t.getConstValue(f));if(t.isNamedBinding(f)){let w=g(a,t.getBindingName(f)),M=`{$${w}}`;if(!Xg.test(M))throw new Error(`Invalid <Localize> variable: ${M}.`);return t.addBinding&&t.addBinding(w,f),a[w]=!0,M}else if(f!==e&&t.isView(f)){let w=g(c,t.getViewName(f));if(!/[a-zA-Z0-9\-_]/.test(w))throw new Error(`Invalid <Localize> subview identifier: ${w}.`);return t.addView&&t.addView(w,f),c[w]=!0,`<${w}/>`}else if(t.isBinding(f)){let w=g(a,`v${r++}`),M=`{$${w}}`;return t.addBinding&&t.addBinding(w,f),a[w]=!0,M}else{let w=`${n++}`;t.addElement&&t.addElement(w,f);let M=[];return t.forEachChild(f,G=>{M.push(p(G))}),c[w]=!0,M.length>0?`<${w}>${M.join("")}</${w}>`:`<${w}/>`}}function g(f,w){let M=0,G=w;for(;f[G];)G=`${w}-${++M}`;return G}}var OD=!0;function FD(e){return OD?e:e.replace(/\{|\}/g,t=>`{"${t}"}`).replace(/(^|[\s\n]+)(\[|\]|\.)/g,(t,r,n)=>`${r}{"${n}"}`)}function _D(e){return e.__DCGViewLocalizeBindingName}function RD(e){return typeof e=="function"&&e.__DCGViewLocalizeViewName}var Pr=class extends fn.Class{init(){this.viewMap={},this.elementMap={},this.bindingMap={},this.i18n=this.props.i18n(),this.templateString=this.serializeToTemplateString(fn.createElement("div",null,this.children))}template(){return fn.createElement(fn.Components.If,{predicate:()=>this.shouldShow()},()=>fn.createElement(fn.Components.Switch,{key:()=>Zg(this.translatedString())},t=>this.renderDeserializedTemplateNode(this.parseAndValidate(t))))}shouldShow(){let t=this.props.options&&this.props.options();return t&&t.hideUntranslatedView&&this.i18n.hasTranslation?this.i18n.hasTranslation(this.props.key()):!0}translatedString(){let t={};for(let r in this.bindingMap)t[r]=Vi(`{$${r}}`);return this.i18n.s(this.props.key(),t)}static variable(t,r){let n=()=>r();return n.__DCGViewLocalizeBindingName=t,n}static subview(t,r){let n=()=>r();return n.__DCGViewLocalizeViewName=t,n}parseAndValidate(t){let r=(0,Qd.parse)(t),n={},a={};c(r);for(let l in this.elementMap)if(!a[l])return(0,Qd.parse)(Zg(this.templateString));for(let l in this.bindingMap)if(!n[l])return(0,Qd.parse)(Zg(this.templateString));return r;function c(l){if(Array.isArray(l)){for(let p of l)c(p);return}l.name==="token"?n[l.attrs.id]=!0:l.type!=="text"&&(a[l.name]=!0,c(l.children))}}renderDeserializedTemplateNode(t){if(Array.isArray(t))return t.map(r=>this.renderDeserializedTemplateNode(r));if(t.type==="text")return fn.const(t.content||"");if(t.name==="token"){let r=this.bindingMap[t.attrs.id];return r||(()=>"")}else if(this.elementMap[t.name]){let r=this.elementMap[t.name],n=t.children.map(a=>this.renderDeserializedTemplateNode(a));return Zv(r.type,r.attrs,n)}else return this.viewMap[t.name]?this.viewMap[t.name]():Zv("span",{},[])}serializeToTemplateString(t){return Qv(t,{isView:RD,isConst:Xv,isBinding:r=>typeof r=="function",isNamedBinding:_D,getConstValue:r=>r(),getBindingName:r=>r.__DCGViewLocalizeBindingName,getViewName:r=>r.__DCGViewLocalizeViewName,addBinding:(r,n)=>{this.bindingMap[r]=n},addElement:(r,n)=>{this.elementMap[r]={type:n.tagName,attrs:n.attrs}},addView:(r,n)=>{if(this.viewMap[r])throw new Error(`Unexpected duplicate view ${r}.`);this.viewMap[r]=n},forEachChild:(r,n)=>{for(let a of r.children){if(!Xv(a)&&typeof a!="function"&&a._isDCGView)throw new Error("Bare DCGViews are not allowed inside <Localize>. Use Localize.subview().");n(a)}}})}};function Xv(e){return typeof e=="function"&&e.isDCGViewConst}function Zv(e,t,r){return fn.createElement(e,t,r)}function Zg(e){return`<0>${e}</0>`.replace(new RegExp(Xg.source,"g"),(r,n)=>`<token id="${n}"/>`)}var ek={"homepage-cta":"hc","promo-header":"ph","promo-bottom":"pb","demo-link":"dl","header-dropdown":"hd"},eh=Dl(ek),qD=hp(eh);if(eh.length!==qD.length)throw new Error(`Expected referrer locations to have a unique set of short codes, but found duplicates: ${eh.sort()}`);function tk(e,t){return`${e}?r=w.${ek[t]}`}var BD=[{href:"/calculator",icon:"dcg-icon-graphing",text:()=>Ie("frontpage-link-shared-graphing-calculator")},{href:"/scientific",icon:"dcg-icon-scientific",text:()=>Ie("frontpage-link-shared-scientific-calculator")},{href:"/fourfunction",icon:"dcg-icon-four-function",text:()=>Ie("frontpage-link-shared-four-function-calculator")},{href:"/practice",icon:"dcg-icon-test-mode",text:()=>Ie("frontpage-link-shared-test-practice")},{href:"/matrix",icon:"dcg-icon-matrix",text:()=>Ie("frontpage-link-shared-matrix-calculator")},{href:"/geometry",icon:"dcg-icon-geometry",text:()=>Ie("frontpage-link-shared-geometry-tool")}],UD=[{href:"https://teacher.desmos.com",text:()=>Ie("frontpage-link-main-for-teachers")},{href:"https://student.desmos.com",text:()=>Ie("frontpage-link-main-for-students")},{href:"/curriculum",text:()=>Ie("frontpage-link-shared-curriculum")}],$D=[{href:"/about",text:()=>Ie("frontpage-link-shared-about-us")},{href:"/careers",text:()=>Ie("frontpage-link-shared-careers")},{href:"https://help.desmos.com",text:()=>Ie("frontpage-link-shared-help-center")},{href:"/accessibility",text:()=>Ie("shared-calculator-label-accessibility")},{href:"/testing",text:()=>Ie("frontpage-link-shared-assessments")},{href:"/equity",text:()=>Ie("frontpage-link-shared-equity-principles")},{href:"/guiding-principles",text:()=>Ie("frontpage-link-shared-guiding-principles")},{href:"//store.desmos.com",text:()=>Ie("frontpage-link-shared-store")},{href:"https://blog.desmos.com",text:()=>Ie("frontpage-link-shared-blog")}],qi={MATH_TOOLS:{links:BD,title:()=>Ie("frontpage-link-header-math-tools")},CLASSROOM:{links:UD,title:()=>Ie("frontpage-link-header-classroom")},RESOURCES:{links:$D,title:()=>Ie("frontpage-link-header-resources")}};var rn=he(me());var yn=he(me());var $e=he(me());dr();var th=class{constructor(){this.handlers=[],ee(document).on("keydown.delegator",t=>this.handleEvent(t))}push(t){let r=Of("delegator_");return this.handlers.push({token:r,handler:t}),()=>this.handlers=Ds(this.handlers,n=>n.token!=r)}handleEvent(t){if(!t.isDefaultPrevented()&&this.handlers.length){let r=!1,n=()=>r=!0;for(let{handler:a}of this.handlers.slice().reverse())if(a(t,n),r)return}}},rk=new th;var{If:nk}=$e.Components,Er=class extends $e.Class{init(){this.i18n=this.props.i18n(),this.isMounted=!1}template(){return $e.createElement("div",{class:()=>({"dcg-shared-modal-container":!0,[this.props.class?this.props.class():""]:!!this.props.class}),didMount:this.bindFn(this.didMount),didUnmount:this.bindFn(this.didUnmount)},$e.createElement("div",{class:()=>({"dcg-shared-modal-cover":!0,"dcg-shared-has-close-button":this.showX(),"dcg-shared-modal-fullscreen":this.props.size()==="fullscreen","dcg-shared-modal-wide":this.props.size()==="wide","dcg-shared-modal-medium":this.props.size()==="medium","dcg-shared-modal-narrow":this.props.size()==="narrow"})},$e.createElement("div",{class:$e.const("dcg-shared-modal-background"),onTap:this.props.onClose}),$e.createElement("div",{class:$e.const("dcg-shared-modal-transition-container")},$e.createElement("div",{class:$e.const("dcg-shared-modal"),role:$e.const("dialog"),"aria-modal":$e.const("true"),"aria-label":()=>{let t="";return this.props.ariaLabel?t=this.props.ariaLabel():this.props.title&&(t=this.props.title()),t}},$e.createElement(nk,{predicate:()=>this.showX()},()=>$e.createElement("div",{class:$e.const("dcg-shared-close-cross-container")},$e.createElement(Xr,{tooltip:()=>this.i18n.s("shared-button-close-dialog")},$e.createElement("div",{role:$e.const("button"),tabindex:$e.const("0"),"aria-label":()=>this.i18n.s("shared-button-close-dialog"),class:$e.const("dcg-shared-close-cross"),onTap:this.props.onClose},$e.createElement("i",{class:$e.const("dcg-icon-remove"),"aria-hidden":$e.const("true")}))))),$e.createElement("div",{class:$e.const("dcg-shared-modal-contents-wrapper")},$e.createElement(nk,{predicate:()=>!!this.props.title&&!!this.props.title()},()=>$e.createElement("h1",{class:()=>({"dcg-shared-modal-title":!0,"dcg-shared-left-align-title":this.leftAlignTitle()})},()=>this.props.title())),$e.createElement("div",{class:$e.const("dcg-shared-modal-scrollable-content")},this.children))))))}showX(){return!!this.props.showX&&this.props.showX()}leftAlignTitle(){return!!this.props.leftAlignTitle&&this.props.leftAlignTitle()}didMount(){var p,g;if(this.isMounted)return;this.isMounted=!0;let t=this.findRootNode();function r(){let f=t.querySelector(".dcg-shared-close-cross");f&&f.focus()}function n(){let f=t.querySelector(".dcg-shared-modal-scrollable-content");f&&(f.tabIndex>=0||(f.tabIndex=0),f.focus())}let a=t.querySelector(".dcg-shared-modal-scrollable-content"),c=(g=(p=this.props).setFocus)==null?void 0:g.call(p);c==="close"?this.showX()?r():a&&n():c==="content"&&n();let l=Vb(t);this.unsub=rk.push((f,w)=>{qt(f)==Fl&&(this.onClose(),w());let M=f.altKey||f.shiftKey||f.metaKey||f.ctrlKey;this.props.onArrowKey&&qt(f)===Eb&&!M&&this.props.onArrowKey("Left"),this.props.onArrowKey&&qt(f)===Cb&&!M&&this.props.onArrowKey("Right"),l(f)})}onClose(){this.props.onClose&&this.props.onClose()}didUnmount(){this.isMounted&&(this.isMounted=!1,this.unsub())}};var Xd=class extends yn.Class{init(){this.controller=this.props.controller(),this.i18n=this.controller}template(){return yn.createElement(Er,{title:()=>this.i18n.s("shared-title-account-reactivated"),size:this.const("narrow"),showX:this.const(!0),onClose:()=>this.controller.dispatch({type:"close-modal"}),i18n:this.props.controller},yn.createElement("div",{class:yn.const("dcg-shared-recover-password-dialog dcg-shared-account-dialog")},yn.createElement("div",{class:yn.const("dcg-shared-account-paragraph")},()=>this.i18n.s("shared-message-account-reactivated")),yn.createElement("div",{class:yn.const("dcg-shared-modal-actions-container")},yn.createElement("button",{class:()=>({"dcg-btn-blue":!0}),onTap:()=>this.controller.dispatch({type:"close-modal"})},()=>this.i18n.s("shared-button-continue-to-desmos")))))}};var wt=he(me());var j=he(me());var _e=he(me());var tn=he(me());var{If:zD,For:KD}=tn.Components,lr=class extends tn.Class{init(){this.controller=this.props.controller(),this.i18n=this.controller}template(){return tn.createElement(zD,{predicate:()=>!!this.props.errors().length},()=>tn.createElement(KD,{each:this.props.errors},tn.createElement("span",null,t=>tn.createElement("div",{class:tn.const("dcg-shared-account-modal-errors"),role:tn.const("alert")},tn.createElement("span",null,()=>this.i18n.raw(t))))))}};var Zd=class extends _e.Class{init(){this.controller=this.props.controller(),this.i18n=this.controller,this.formErrors=[]}template(){return _e.createElement("div",{class:_e.const("dcg-shared-delete-account dcg-shared-account-settings-section")},_e.createElement("h1",{class:_e.const("dcg-shared-left-align-title")},()=>this.i18n.s("shared-title-delete-account")),_e.createElement("div",{class:_e.const("dcg-shared-account-paragraph")},_e.createElement(Pr,{key:this.const("shared-message-delete-account-notice"),i18n:this.props.controller},_e.const("When you delete your account,"),_e.const(" "),_e.createElement("b",null,_e.const("we will retain your data for 30 days.")),_e.const(" "),_e.const("You can reactivate your account at any time during those 30 days by logging back in."),_e.const(" "),_e.const("If there's something about Desmos we can improve, please"),_e.const(" "),_e.createElement("a",{href:_e.const("mailto:support@desmos.com"),class:_e.const("dcg-blue-link")},_e.const("let us know.")))),_e.createElement("div",{class:_e.const("dcg-shared-account-paragraph")},()=>this.i18n.s("shared-message-delete-account-will-send-email",{email:this.i18n.raw(this.controller.userController.getEmail())})),_e.createElement("form",{onSubmit:this.bindFn(this.onSubmit)},_e.createElement(lr,{controller:this.props.controller,errors:()=>this.formErrors}),_e.createElement("div",{class:_e.const("dcg-shared-modal-actions-container")},_e.createElement("div",{role:_e.const("link"),tabindex:_e.const(0),class:_e.const("dcg-gray-link"),onTap:()=>(this.controller.logEvent("shared-delete-account",{action:"cancel-delete-account"}),this.props.hideForm())},()=>this.i18n.s("shared-button-cancel")),_e.createElement("button",{class:()=>({"dcg-btn-red":!0,"dcg-disabled":this.disabled}),"aria-disabled":()=>this.disabled,tabindex:()=>this.disabled?"-1":"0",type:_e.const("submit")},()=>this.i18n.s("shared-button-send-delete-account-email")))))}onAccountDeleted(){return this.props.submitForm()}onAccountDeletionFailed(){if(this.formErrors=[this.controller.getSomethingWentWrongText()],!this.unmounted)return this.update()}doDeleteAccount(){this.disabled||(this.controller.logEvent("shared-delete-account",{action:"send-delete-account-email"}),this.controller.userController.initiateAccountDeletion({lang:this.controller.getLanguage()}).then(this.bindFn(this.onAccountDeleted),this.bindFn(this.onAccountDeletionFailed)))}didUnmount(){return this.unmounted=!0}onSubmit(t){t.preventDefault(),this.doDeleteAccount()}};var xe=he(me());var{If:rh}=xe.Components,Xo=0,ak=1,WD=2,ik=3,eu=class extends xe.Class{init(){this.controller=this.props.controller(),this.i18n=this.controller,this.formStatus=Xo,this.emailDisabled=null}template(){return xe.createElement("div",{class:xe.const("dcg-shared-email-field-container")},xe.createElement(rh,{predicate:()=>this.formStatus===Xo},()=>xe.createElement("div",{class:xe.const("dcg-shared-email-field")},xe.createElement("div",{class:xe.const("dcg-shared-profile-info-container")},xe.createElement("span",{class:xe.const("dcg-shared-profile-info-title"),role:xe.const("heading"),"aria-level":xe.const("1")},()=>this.i18n.s("shared-title-email-settings")),xe.createElement("div",{class:xe.const("dcg-shared-profile-info-content")},()=>this.i18n.raw(this.controller.userController.getEmail()),xe.createElement("div",{class:xe.const("dcg-shared-message-container")},xe.createElement("div",{role:xe.const("link"),tabindex:xe.const(0),class:xe.const("dcg-blue-link"),onTap:()=>this.setFormStatus(ak)},()=>this.i18n.s("shared-button-change-email-address"))))))),xe.createElement(rh,{predicate:()=>this.formStatus===ak},()=>xe.createElement("div",{class:xe.const("dcg-shared-change-email-container")},xe.createElement("div",{class:xe.const("dcg-shared-change-email-description")},()=>this.i18n.s("shared-message-email-settings-will-send-email",{emailAddress:this.i18n.raw(this.controller.userController.getEmail())})),xe.createElement(lr,{controller:this.props.controller,errors:()=>this.formErrors}),xe.createElement("div",{class:xe.const("dcg-shared-modal-actions-container")},xe.createElement("span",{role:xe.const("link"),tabindex:xe.const(0),class:xe.const("dcg-gray-link"),onTap:()=>this.setFormStatus(Xo)},()=>this.i18n.s("shared-button-cancel")),xe.createElement("button",{class:()=>({"dcg-btn-blue":!0,"dcg-disabled":this.emailDisabled}),"aria-disabled":()=>this.disabled,tabindex:()=>this.disabled?"-1":"0",type:xe.const("submit"),onTap:()=>this.emailDisabled||this.sendChangeEmail()},()=>this.i18n.s("shared-button-send-email"))))),xe.createElement(rh,{predicate:()=>this.formStatus===ik},()=>xe.createElement("div",{"aria-live":xe.const("assertive"),"aria-atomic":xe.const("true"),class:xe.const("dcg-shared-confirmation-message-container")},xe.createElement("div",{class:xe.const("dcg-shared-confirmation-message")},xe.createElement("i",{class:()=>({"dcg-icon-check":!0,"dcg-success-marker":!0}),"aria-hidden":xe.const("true")}),()=>this.i18n.s("shared-message-email-sent")),xe.createElement("div",null,()=>this.i18n.s("shared-message-check-email-for-link",{emailAddress:this.i18n.raw(this.controller.userController.getEmail())})))))}didUnmount(){this.unmounted=!0}setToast(t){this.toastMessage||(this.toastMessage=t,this.unmounted||this.update(),setTimeout(()=>{this.toastMessage=null,this.unmounted||this.update()},5e3),this.formStatus===WD&&setTimeout(()=>{this.setFormStatus(Xo),this.unmounted||this.update()},5200))}setFormStatus(t){this.formStatus=t,this.toastMessage=null,this.formErrors=[],this.update()}onEmailSent(){this.formStatus=ik,this.emailDisabled=null,this.unmounted||this.update(),setTimeout(()=>{this.formStatus=Xo,this.unmounted||this.update()},5e3),setTimeout(()=>{this.formStatus=Xo,this.unmounted||this.update()},5200)}onEmailSendingFailed(){this.formErrors=[this.controller.getSomethingWentWrongText()],this.emailDisabled=null,this.unmounted||this.update()}sendChangeEmail(){this.emailDisabled=!0,this.unmounted||this.update(),this.controller.userController.initiateEmailChange({lang:this.controller.getLanguage()}).then(this.bindFn(this.onEmailSent),this.bindFn(this.onEmailSendingFailed))}};var{If:sk,Input:ih,Switch:HD,SwitchUnion:jD}=j.Components,nh=0,ok=1,ah=2,tu=class extends j.Class{init(){this.controller=this.props.controller(),this.i18n=this.controller,this.deleteAccount=nh}template(){return j.createElement("div",{class:j.const("dcg-shared-profile-info dcg-shared-account-settings-section")},j.createElement(HD,{key:()=>this.deleteAccount},t=>{switch(t){case nh:return j.createElement("div",null,j.createElement("div",{class:j.const("dcg-shared-email-form-container")},j.createElement(oh,{controller:this.props.controller})),j.createElement(eu,{controller:this.props.controller}),j.createElement("div",{role:j.const("link"),tabindex:j.const(0),class:j.const("dcg-gray-link dcg-shared-delete-link"),onTap:()=>this.confirmDeletion()},()=>this.i18n.s("shared-button-delete-account-question")));case ok:return j.createElement(Zd,{hideForm:()=>this.setDeleteAccount(nh),submitForm:()=>this.setDeleteAccount(ah),controller:this.props.controller});case ah:return j.createElement("div",{"aria-live":j.const("assertive"),"aria-atomic":j.const("true"),class:j.const("dcg-shared-confirmation-message-container")},j.createElement("div",{class:j.const("dcg-shared-confirmation-message")},j.createElement("i",{class:()=>({"dcg-icon-check":!0,"dcg-success-marker":!0}),"aria-hidden":j.const("true")}),()=>this.i18n.s("shared-message-email-sent")),j.createElement("div",null,()=>this.i18n.s("shared-message-check-email-for-delete-link",{emailAddress:this.i18n.raw(this.controller.userController.getEmail())})))}}))}didUnmount(){this.unmounted=!0}setDeleteAccount(t){this.deleteAccount=t,t===ah&&setTimeout(()=>{this.controller.userController.logout().then(()=>this.controller.dispatch({type:"close-modal"}))},5e3),this.unmounted||this.update()}confirmDeletion(){this.controller.logEvent("shared-profile-info",{action:"delete-account"}),this.setDeleteAccount(ok),this.unmounted||this.update()}},oh=class extends j.Class{init(){this.controller=this.props.controller();let t=this.controller.userController.getNameDetail();t.source=="legacy"?this.state={state:"legacy",name:t.given,previousName:t.given}:t.source=="parsed"?this.state={state:"name-detail",confirm:!0,given:t.given,family:t.family||"",previousGiven:"",previousFamily:""}:this.state={state:"name-detail",confirm:!1,given:t.given,family:t.family||"",previousGiven:t.given,previousFamily:t.family||""}}template(){return jD("state",()=>this.state)({legacy:t=>j.createElement(sh,{state:t,controller:this.props.controller,onSaveName:this.bindFn(this.onSaveName),showSavedNotice:()=>this.showSavedNotice,updateState:r=>{this.state.state=="legacy"&&(this.state=be(be({},this.state),r),this.unmounted||this.update())}}),"name-detail":t=>j.createElement(ch,{state:t,controller:this.props.controller,showSavedNotice:()=>this.showSavedNotice,onSaveName:this.bindFn(this.onSaveName),updateState:r=>{this.state.state=="name-detail"&&(this.state=be(be({},this.state),r),this.unmounted||this.update())}})})}onSaveName(){switch(this.state.state){case"legacy":this.controller.userController.setNameLegacy({name:this.state.name,lang:this.controller.getLanguage()}).then(this.bindFn(this.onSaved));break;case"name-detail":this.controller.userController.setNameDetail({given:this.state.given,family:this.state.family,lang:this.controller.getLanguage()}).then(this.bindFn(this.onSaved));break}}maybeUpdate(){this.unmounted||this.update()}onSaved(){switch(this.state.state){case"legacy":this.state.previousName=this.state.name;break;case"name-detail":this.state.previousGiven=this.state.given,this.state.previousFamily=this.state.family,this.state.confirm=!1;break}this.showSavedNotice=!0,this.maybeUpdate(),setTimeout(()=>{this.showSavedNotice=!1,this.maybeUpdate()},3e3)}willUnmount(){this.unmounted=!0}didMount(){this.unmounted=!1}},sh=class extends j.Class{init(){this.controller=this.props.controller(),this.i18n=this.controller}template(){return j.createElement("div",{class:j.const("dcg-shared-name-field")},j.createElement("div",{class:j.const("dcg-shared-profile-info-container")},j.createElement("span",{class:j.const("dcg-shared-profile-info-title"),role:j.const("heading"),"aria-level":j.const("1")},()=>this.i18n.s("shared-label-name")),j.createElement(ih,{type:j.const("text"),name:j.const("name"),class:j.const("dcg-shared-input-blue-outline dcg-shared-profile-info-content"),didMount:this.bindFn(this.didMountName),onInput:this.bindFn(this.onNameInput),"aria-label":()=>this.i18n.s("shared-label-name"),value:()=>this.props.state().name,autocomplete:j.const("off")})),j.createElement("div",{class:j.const("dcg-shared-modal-actions-container")},j.createElement(ru,{showSavedNotice:this.props.showSavedNotice,i18n:this.props.controller}),j.createElement("div",{role:j.const("button"),"aria-disabled":this.bindFn(this.nameFieldDisabled),tabindex:()=>this.nameFieldDisabled()?"-1":"0",class:()=>({"dcg-btn-blue":!0,"dcg-disabled":this.nameFieldDisabled()}),onTap:this.bindFn(this.onSaveName)},()=>this.i18n.s("shared-button-save"))))}onNameInput(t){this.props.updateState({name:t})}didMountName(t){Cn||t.focus()}onSaveName(){this.nameFieldDisabled()||this.props.onSaveName()}nameFieldDisabled(){let t=this.props.state();return!t.name||t.name===t.previousName}},ch=class extends j.Class{init(){this.controller=this.props.controller(),this.i18n=this.controller}template(){return j.createElement("div",{class:j.const("dcg-shared-name-field")},j.createElement("div",{class:()=>({"dcg-shared-confirm-name":this.props.state().confirm})},j.createElement(sk,{predicate:()=>this.props.state().confirm},()=>j.createElement("span",null,()=>this.i18n.s("shared-message-please-review-name"))),j.createElement("div",{class:j.const("dcg-shared-profile-info-container")},j.createElement("div",{class:j.const("dcg-shared-name-input")},j.createElement("span",{class:j.const("dcg-shared-profile-info-title"),role:j.const("heading"),"aria-level":j.const("1")},()=>this.i18n.s("shared-label-given-name-or-nickname")),j.createElement(ih,{type:j.const("text"),name:j.const("given-name"),class:j.const("dcg-shared-input-blue-outline dcg-shared-profile-info-content"),didMount:this.bindFn(this.didMountName),onInput:t=>this.props.updateState({given:t}),"aria-label":()=>this.i18n.s("shared-label-given-name-or-nickname"),value:()=>this.props.state().given,autocomplete:j.const("off")})),j.createElement("div",{class:j.const("dcg-shared-name-input")},j.createElement("span",{class:j.const("dcg-shared-profile-info-title"),role:j.const("heading"),"aria-level":j.const("1")},()=>this.i18n.s("shared-label-family-name")),j.createElement(ih,{type:j.const("text"),name:j.const("family-name"),class:j.const("dcg-shared-input-blue-outline dcg-shared-profile-info-content"),onInput:t=>this.props.updateState({family:t}),"aria-label":()=>this.i18n.s("shared-label-family-name"),value:()=>this.props.state().family,autocomplete:j.const("off")}))),j.createElement("div",{class:j.const("dcg-shared-modal-actions-container")},j.createElement(ru,{i18n:this.props.controller,showSavedNotice:this.props.showSavedNotice}),j.createElement("div",{role:j.const("button"),"aria-disabled":()=>!this.canSubmit(),tabindex:()=>this.canSubmit()?"0":"-1",class:()=>({"dcg-btn-blue":!0,"dcg-disabled":!this.canSubmit()}),onTap:this.bindFn(this.onSaveName)},()=>this.props.state().confirm?this.i18n.s("shared-button-confirm-name"):this.i18n.s("shared-button-save")))))}didMountName(t){Cn||t.focus()}onSaveName(){this.canSubmit()&&this.props.onSaveName()}canSubmit(){let t=this.props.state();return t.given?t.confirm?!0:!(t.given===t.previousGiven&&t.family===t.previousFamily):!1}},ru=class extends j.Class{template(){return j.createElement(sk,{predicate:()=>this.props.showSavedNotice()},()=>j.createElement("span",{"aria-live":j.const("assertive"),"aria-atomic":j.const("true"),class:j.const("dcg-shared-confirmation-message")},j.createElement("i",{class:()=>({"dcg-icon-check":!0,"dcg-success-marker":!0}),"aria-hidden":j.const("true")}),()=>this.props.i18n().s("shared-message-information-saved")))}};var it=he(me());var{If:ck}=it.Components,YD=0,lh=1,lk=2,nu=class extends it.Class{init(){this.controller=this.props.controller(),this.i18n=this.controller,this.mode=lh,this.formErrors=[]}template(){return it.createElement("div",{class:it.const("dcg-shared-change-password dcg-shared-account-settings-section")},it.createElement(ck,{predicate:()=>this.mode===lh},()=>it.createElement("div",{class:it.const("dcg-shared-reset-by-email")},it.createElement("div",{class:it.const("dcg-shared-account-paragraph")},()=>this.i18n.s("shared-message-change-password-email-sent",{emailAddress:this.i18n.raw(this.controller.userController.getEmail())})),it.createElement(lr,{controller:this.props.controller,errors:()=>this.formErrors}),it.createElement("div",{class:it.const("dcg-shared-modal-actions-container")},it.createElement("div",{role:it.const("button"),"aria-disabled":()=>this.emailDisabled,tabindex:()=>this.emailDisabled?"-1":"0",class:()=>({"dcg-btn-blue":!0,"dcg-disabled":this.emailDisabled}),onTap:()=>this.sendResetPasswordEmail()},()=>this.i18n.s("shared-button-send-email"))))),it.createElement(ck,{predicate:()=>this.mode===lk},()=>it.createElement("div",{"aria-live":it.const("assertive"),"aria-atomic":it.const("true"),class:it.const("dcg-shared-confirmation-message-container")},it.createElement("div",{class:it.const("dcg-shared-confirmation-message")},it.createElement("i",{class:()=>({"dcg-icon-check":!0,"dcg-success-marker":!0}),"aria-hidden":it.const("true")}),()=>this.i18n.s("shared-message-email-sent")),it.createElement("div",null,()=>this.i18n.s("shared-message-check-email-for-password-link",{emailAddress:this.i18n.raw(this.controller.userController.getEmail())})))))}didUnmount(){this.unmounted=!0}onEmailSent(){this.mode=lk,this.unmounted||this.update(),setTimeout(()=>{this.mode=YD,this.unmounted||this.update()},5e3),setTimeout(()=>{this.mode=lh,this.unmounted||this.update()},5200)}onEmailSendingFailed(){this.formErrors=[this.controller.getSomethingWentWrongText()],this.unmounted||this.update()}sendResetPasswordEmail(){this.controller.userController.recoverPassword({email:this.controller.userController.getEmail(),lang:this.controller.getLanguage()}).then(this.bindFn(this.onEmailSent),this.bindFn(this.onEmailSendingFailed))}};dr();var{For:JD,Switch:QD}=wt.Components,au="profile-info",dh="change-password",iu=class extends wt.Class{init(){this.controller=this.props.controller(),this.i18n=this.controller,this.settingsView=this.props.initialTab&&this.props.initialTab()||au,this.breakPoint=660,this.measureWindow()}template(){return wt.createElement(Er,{title:()=>this.i18n.s("shared-title-account-settings"),size:this.const("wide"),showX:this.const(!0),leftAlignTitle:this.const(!0),onClose:()=>this.controller.dispatch({type:"close-modal"}),i18n:this.props.controller},wt.createElement("div",{class:wt.const("dcg-shared-account-settings-dialog dcg-shared-account-dialog")},wt.createElement(JD,{each:()=>this.getTabs(),key:t=>""+t.key},wt.createElement("div",{class:wt.const("dcg-shared-navigation-tabs"),role:wt.const("tablist")},t=>wt.createElement("div",{role:wt.const("tab"),tabindex:wt.const("0"),"aria-selected":()=>this.settingsView===t.key,class:()=>({"dcg-shared-tab-gray-underline":!0,[t.class]:!0,"dcg-selected":this.settingsView===t.key}),onTap:()=>this.updateSettingsView(t.key)},t.label))),wt.createElement("div",{class:wt.const("dcg-shared-content-container")},wt.createElement(QD,{key:()=>this.settingsView},t=>t===au?wt.createElement(tu,{controller:this.props.controller}):t===dh?wt.createElement(nu,{controller:this.props.controller}):this.props.extraTabs?wt.createElement("div",{class:wt.const("dcg-shared-profile-info dcg-shared-account-settings-section")},this.props.extraTabs().createView(t)):wt.createElement("span",null)))))}getTabs(){let t=[{key:au,label:this.bindFn(this.profileTitle),class:"profile-view-button"},{key:dh,label:this.bindFn(this.passwordTitle),class:"change-password-view-button"}];return this.props.extraTabs?[...t,...this.props.extraTabs().tabs.map(({key:r,narrowLabel:n,wideLabel:a,class:c})=>({key:r,label:()=>this.windowWidth>this.breakPoint?n():a(),class:`${c}-button`}))]:t}updateSettingsView(t){this.settingsView=t,this.unmounted||this.update()}profileTitle(){return this.windowWidth>this.breakPoint?this.i18n.s("shared-title-profile-information-wide"):this.i18n.s("shared-title-profile-information-narrow")}passwordTitle(){return this.windowWidth>this.breakPoint?this.i18n.s("shared-title-change-password-wide"):this.i18n.s("shared-title-change-password-narrow")}measureWindow(){return this.windowWidth=ee(window).width()}didMount(){ee(window).on("resize.account-dialog",bo(()=>{this.measureWindow(),this.unmounted||this.update()},200))}didUnmount(){ee(window).off("resize.account-dialog"),this.unmounted=!0}isProfileSelected(){return this.settingsView===au}isChangePasswordSelected(){return this.settingsView===dh}};var Be=he(me());var{Input:dk}=Be.Components,ou=class extends Be.Class{init(){this.controller=this.props.controller(),this.i18n=this.controller,this.formErrors=[]}template(){return Be.createElement(Er,{title:()=>this.i18n.s("shared-title-change-email-address"),size:this.const("narrow"),showX:this.const(!0),onClose:()=>this.controller.dispatch({type:"close-modal"}),i18n:this.props.controller},Be.createElement("div",{class:Be.const("dcg-shared-change-email dcg-shared-account-dialog")},Be.createElement("div",{class:Be.const("dcg-shared-account-paragraph")},()=>this.i18n.s("shared-message-set-new-email-address")),Be.createElement("form",{onSubmit:this.bindFn(this.onSubmit),method:Be.const("post"),class:Be.const("dcg-shared-email-form-container")},Be.createElement("label",null,Be.createElement("span",{class:Be.const("dcg-shared-input-title")},()=>this.i18n.s("shared-label-new-email-address")),Be.createElement(dk,{type:Be.const("email"),name:Be.const("newEmail"),class:Be.const("dcg-shared-input-blue-outline"),"aria-label":()=>this.i18n.s("shared-label-new-email-address"),required:Be.const("true"),didMount:t=>{Cn||t.focus()},value:()=>this.newEmail,onInput:t=>{this.newEmail=t,this.unmounted||this.update()}})),Be.createElement("label",{for:Be.const("password")},Be.createElement("span",null,()=>this.i18n.s("shared-label-password")),Be.createElement(dk,{type:Be.const("password"),class:Be.const("dcg-shared-input-blue-outline"),"aria-label":()=>this.i18n.s("shared-label-password"),required:Be.const("true"),value:()=>this.password,name:this.const("password"),onInput:t=>{if(this.password=t,!this.unmounted)return this.update()}})),Be.createElement(lr,{controller:this.props.controller,errors:()=>this.formErrors}),Be.createElement("div",{class:Be.const("dcg-shared-sign-in-options")},Be.createElement("button",{class:()=>({"dcg-btn-blue":!0,"dcg-disabled":!this.submitEnabled()}),"aria-disabled":()=>!this.submitEnabled(),tabindex:()=>this.submitEnabled()?"0":"-1",type:Be.const("submit")},()=>this.i18n.s("shared-button-change-email-and-password"))))))}submitEnabled(){return!!(this.password&&this.newEmail)}didUnmount(){this.unmounted=!0}async onSubmit(t){if(t.preventDefault(),this.submitEnabled())try{await this.controller.userController.setEmail({changeToken:this.getChangeToken(),password:this.password,newEmail:this.newEmail,lang:this.controller.getLanguage()}),this.controller.dispatch({type:"close-modal"}),history.replaceState(null,null,document.location.pathname)}catch(r){r.status===409?this.formErrors=["Sorry, someone has already registered with this email address."]:this.formErrors=[this.controller.getSomethingWentWrongText()],this.unmounted||this.update()}}getChangeToken(){return this.controller.userController.getEmailChangeToken()||""}};var Wt=he(me());var su=class extends Wt.Class{init(){this.controller=this.props.controller(),this.i18n=this.controller,this.openTime=Date.now(),this.formErrors=[],this.controller.logEvent("shared-consent-modal",{action:"show-consent-modal"})}template(){return Wt.createElement(Er,{title:()=>this.i18n.s("shared-title-consent"),size:this.const("narrow"),onClose:()=>this.controller.dispatch({type:"close-modal"}),i18n:this.props.controller},Wt.createElement("div",{class:Wt.const("dcg-shared-consent-modal-container dcg-shared-account-dialog")},Wt.createElement("div",{class:Wt.const("dcg-shared-consent-contents")},()=>this.i18n.s("shared-message-consent-information")),Wt.createElement("div",{class:Wt.const("dcg-shared-consent-contents")},()=>this.i18n.s("shared-message-consent-delete-information")),Wt.createElement("div",{class:Wt.const("dcg-shared-modal-actions-container")},Wt.createElement("span",{role:Wt.const("button"),tabindex:Wt.const("0"),class:Wt.const("dcg-gray-link"),onTap:t=>this.openAccountSettings(t.device)},()=>this.i18n.s("shared-button-go-to-account-settings")),Wt.createElement("div",{role:Wt.const("button"),tabindex:()=>this.isConsentingToCollection()?-1:0,"aria-disabled":()=>this.isConsentingToCollection(),class:()=>({"dcg-btn-blue":!0,"dcg-disabled":this.isConsentingToCollection()}),onTap:this.bindFn(this.consentToCollection)},()=>this.i18n.s("shared-button-accept")),Wt.createElement(lr,{controller:this.props.controller,errors:()=>this.formErrors}))))}willUpdate(){this.formErrors=[],this.controller.userController.didPrivacyConsentFail()&&(this.formErrors=[this.controller.getSomethingWentWrongText()])}isConsentingToCollection(){return this.controller.userController.isConsentingToPrivacy()}didPrivacyConsentFail(){return this.controller.userController.didPrivacyConsentFail()}openAccountSettings(t){this.controller.logEvent("shared-consent-modal",{action:"edit-account",ts:Date.now()-this.openTime}),this.controller.dispatch({type:"show-modal",modal:"account-settings",device:t})}consentToCollection(){this.controller.logEvent("shared-consent-modal",{action:"consent",ts:Date.now()-this.openTime}),this.controller.userController.setPrivacyConsent({lang:this.controller.getLanguage()}),this.controller.dispatch({type:"close-modal"})}};var W=he(me());var Vt=he(me());var Bi=class extends Vt.Class{template(){return Vt.createElement("div",{class:Vt.const("dcg-shared-cookie-notice")},Vt.createElement(Pr,{key:this.const("shared-message-cookie-notice"),i18n:this.props.i18n},Vt.createElement("b",null,Vt.const("Note:")),Vt.const(" "),Vt.const("Desmos uses cookies to enable persistence when you are signed"),Vt.const(" "),Vt.const("in. If you do not wish to use cookies, please use Desmos without"),Vt.const(" "),Vt.const("logging in."),Vt.const(" "),Vt.createElement("a",{class:Vt.const("dcg-shared-cookie-notice-learn-more dcg-gray-link"),href:Vt.const("/privacy"),target:Vt.const("_blank")},Vt.const("Learn More."))))}};var{If:wc,Input:uk,IfElse:XD}=W.Components,cu=class extends W.Class{init(){this.controller=this.props.controller(),this.i18n=this.controller,this.email="",this.password="",this.isSubmittingForm=!1,this.formErrors=[],this.controller.getModalStartingError()&&this.formErrors.push(this.controller.getModalStartingError())}template(){return W.createElement(Er,{title:()=>this.i18n.s("shared-title-login"),size:this.const("narrow"),showX:this.const(!0),onClose:()=>this.controller.dispatch({type:"close-modal"}),i18n:this.props.controller},W.createElement("div",{class:W.const("dcg-shared-login-dialog dcg-shared-account-dialog")},XD(()=>this.canChooseRole(),{true:()=>W.createElement("div",{class:W.const("dcg-shared-switch-account-message")},W.createElement(Pr,{key:this.const("shared-prompt-new-to-desmos-teacher-or-student"),i18n:this.props.controller},W.const("New to Desmos?"),W.const(" "),W.createElement("a",{role:W.const("link"),tabindex:W.const("0"),class:W.const("dcg-gray-link"),onTap:t=>this.controller.dispatch({type:"show-modal",modal:"signup",device:t.device})},W.const("Sign up!")))),false:()=>W.createElement("div",{class:W.const("dcg-shared-switch-account-message")},W.createElement(Pr,{key:this.const("shared-prompt-new-to-desmos-sign-up-here"),i18n:this.props.controller},W.const("New to Desmos?"),W.const(" "),W.createElement("a",{role:W.const("link"),tabindex:W.const("0"),class:W.const("dcg-gray-link"),onTap:t=>this.controller.dispatch({type:"show-modal",modal:"signup",device:t.device})},W.const("Sign up")),W.const(".")))}),W.createElement("div",{class:W.const("dcg-shared-account-content-container")},W.createElement(wc,{predicate:()=>window.googleAuthConnectionFailed},()=>W.createElement("div",{class:W.const("dcg-shared-google-auth-unavailable")},()=>this.i18n.s("shared-message-google-login-not-available"))),W.createElement(wc,{predicate:()=>!window.googleAuthConnectionFailed},()=>W.createElement("div",{class:W.const("dcg-btn-gray-outline dcg-shared-google-login"),role:W.const("button"),tabindex:W.const("0"),onTap:()=>this.googleLogin()},W.createElement("div",{class:W.const("dcg-shared-google-icon dcg-shared-external-login-logo")}),W.createElement("span",null,()=>this.i18n.s("shared-button-sign-in-with-google")))),W.createElement(wc,{predicate:()=>this.controller.allowSignInWithApple()},()=>W.createElement("div",{class:W.const("dcg-btn-gray-outline dcg-shared-apple-login"),role:W.const("button"),tabindex:W.const("0"),onTap:()=>this.appleLogin()},W.createElement("div",{class:W.const("dcg-shared-apple-icon dcg-shared-external-login-logo")}),W.createElement("span",null,()=>this.i18n.s("shared-button-sign-in-with-apple"))))),W.createElement("div",{class:W.const("dcg-shared-bg-line")},W.createElement("span",null,()=>this.i18n.s("shared-message-or-login-with-desmos"))),W.createElement(lr,{controller:this.props.controller,errors:()=>this.formErrors}),W.createElement("form",{class:W.const("dcg-shared-action-submit"),onSubmit:this.bindFn(this.onSubmit)},W.createElement("div",{class:W.const("dcg-shared-email-form-container")},W.createElement("label",null,W.createElement("span",{class:W.const("dcg-shared-input-title")},()=>this.i18n.s("shared-label-email")),W.createElement(uk,{type:W.const("email"),name:W.const("email"),class:W.const("dcg-shared-input-blue-outline"),"aria-label":()=>this.i18n.s("shared-label-email"),required:W.const("required"),didMount:t=>{Cn||t.focus()},value:()=>this.email,onInput:t=>{this.email=t,this.unmounted||this.update()}})),W.createElement("div",{class:W.const("dcg-shared-password-container")},W.createElement("label",{for:W.const("password")},W.createElement("span",null,()=>this.i18n.s("shared-label-password")),W.createElement(uk,{type:W.const("password"),class:W.const("dcg-shared-input-blue-outline"),"aria-label":()=>this.i18n.s("shared-label-password"),required:W.const("true"),value:()=>this.password,name:this.const("password"),onInput:t=>{if(this.password=t,!this.unmounted)return this.update()}}),W.createElement("span",{class:W.const("dcg-shared-password-recovery-link")},W.createElement("a",{role:W.const("link"),tabindex:W.const(0),class:W.const("dcg-shared-action-password"),onTap:t=>this.controller.dispatch({type:"show-modal",modal:"recover-password",device:t.device})},()=>this.i18n.s("shared-prompt-forgot-your-password"))))),W.createElement("div",{class:W.const("dcg-shared-sign-in-options")},W.createElement(wc,{predicate:()=>this.isSubmittingForm},()=>W.createElement("div",{class:W.const("dcg-shared-progress-indicator dcg-shared-create-account-progress")},W.createElement("div",{class:W.const("dcg-shared-spinner")}))),W.createElement(wc,{predicate:()=>!this.isSubmittingForm},()=>W.createElement("div",{class:W.const("dcg-shared-submit-container")},W.createElement("button",{type:W.const("submit"),class:()=>({"dcg-btn-blue":!0,"dcg-disabled":!this.submitEnabled()}),"aria-disabled":()=>!this.submitEnabled(),tabindex:()=>this.submitEnabled()?"0":"-1"},()=>this.i18n.s("shared-button-login-capitalized"))))),W.createElement(Bi,{i18n:this.const(this.i18n)})))))}canChooseRole(){return!this.controller.getLimitedSignupRole()}didUnmount(){this.unmounted=!0}onSubmit(t){t.preventDefault(),this.submitForm()}googleLogin(){this.controller.dispatch({type:"close-modal"}),this.controller.userController.googleLogin({fromUI:"login"})}appleLogin(){this.controller.dispatch({type:"close-modal"}),this.controller.userController.appleLogin({fromUI:"login"})}submitEnabled(){return!!(this.email&&this.password)}async submitForm(){if(this.submitEnabled()){this.isSubmittingForm=!0,this.formErrors=[];try{let t=await this.controller.userController.checkPendingDeletion({email:this.email,lang:this.controller.getLanguage()});this._pendingDeletion=t.pendingDeletion}catch(t){this._pendingDeletion=!1}if(!this.unmounted){this.unmounted||this.update();try{if(await this.controller.userController.desmosLogin({email:this.email,password:this.password,lang:this.controller.getLanguage()}),this.unmounted)return;this._pendingDeletion?this.controller.dispatch({type:"show-modal",modal:"account-reenabled",device:"mouse"}):this.controller.dispatch({type:"close-modal"})}catch(t){this.formErrors=this.controller.parseJSONErrors(t)}this.unmounted||(this.isSubmittingForm=!1,this.controller.dispatch({type:"render"}))}}}};var Te=he(me());var{If:lu,Input:ZD}=Te.Components,du=class extends Te.Class{init(){this.controller=this.props.controller(),this.i18n=this.controller,this.email=this.controller.userController.getEmail(),this.formErrors=[],this.isSubmittingForm=!1,this.didSendRecoveryEmail=!1}template(){return Te.createElement(Er,{title:()=>this.i18n.s("shared-title-recover-password"),size:this.const("narrow"),showX:this.const(!0),onClose:()=>this.controller.dispatch({type:"close-modal"}),i18n:this.props.controller},Te.createElement("div",{class:Te.const("dcg-shared-recover-password-dialog dcg-shared-account-dialog")},Te.createElement(lr,{controller:this.props.controller,errors:()=>this.formErrors}),Te.createElement(lu,{predicate:()=>this.didSendRecoveryEmail},()=>Te.createElement("div",{role:Te.const("alert"),class:Te.const("dcg-shared-account-paragraph")},()=>this.i18n.s("shared-message-check-email-for-password-recovery-link"),Te.const(" "),Te.createElement("a",{href:Te.const("#"),class:Te.const("dcg-blue-link"),onTap:t=>(this.didSendRecoveryEmail=!1,this.controller.dispatch({type:"show-modal",modal:"recover-password",device:t.device}))},()=>this.i18n.s("shared-button-try-again")))),Te.createElement(lu,{predicate:()=>!this.didSendRecoveryEmail},()=>Te.createElement("form",{class:Te.const("dcg-shared-email-form-container"),onSubmit:this.bindFn(this.onSubmit)},Te.createElement("div",{class:Te.const("dcg-shared-account-paragraph")},()=>this.i18n.s("shared-prompt-enter-email-for-password-recovery-link")),Te.createElement("label",null,Te.createElement("span",{class:Te.const("dcg-shared-input-title")},()=>this.i18n.s("shared-label-email")),Te.createElement(ZD,{type:Te.const("email"),name:Te.const("email"),class:Te.const("dcg-shared-input-blue-outline"),"aria-label":()=>this.i18n.s("shared-label-email"),required:Te.const("true"),didMount:t=>{Cn&&t.focus()},value:()=>this.email,onInput:t=>{this.email=t,this.unmounted||this.update()}})),Te.createElement("div",{class:Te.const("dcg-shared-sign-in-options")},Te.createElement(lu,{predicate:()=>this.isSubmittingForm},()=>Te.createElement("div",{class:Te.const("dcg-shared-progress-indicator dcg-shared-create-account-progress")},Te.createElement("div",{class:Te.const("dcg-shared-spinner")}))),Te.createElement(lu,{predicate:()=>!this.isSubmittingForm},()=>Te.createElement("button",{class:()=>({"dcg-shared-btn-blue":!0}),type:Te.const("submit")},()=>this.i18n.s("shared-button-recover-password"))))))))}didUnmount(){this.unmounted=!0}onSubmit(t){t.preventDefault(),this.submitForm()}async submitForm(){this.formErrors=[],this.isSubmittingForm=!0;try{await this.controller.userController.recoverPassword({email:this.email,lang:this.controller.getLanguage()}),this.didSendRecoveryEmail=!0}catch(t){this.formErrors=this.controller.parseJSONErrors(t)}finally{this.isSubmittingForm=!1,this.unmounted||this.update()}}};var F=he(me());dr();var{If:vc,Input:uu,Switch:e1}=F.Components,pu=0,uh=1,gu=class extends F.Class{template(){return F.createElement("span",{class:F.const("dcg-shared-terms-notice")},F.createElement(Pr,{key:this.const("shared-message-privacy-notice"),i18n:this.props.i18n},F.const("I have read, understand, and accept the"),F.const(" "),F.createElement("a",{href:F.const("/terms"),target:F.const("_blank"),class:F.const("dcg-blue-link")},F.const("Terms of Service")),F.const(" "),F.const("and"),F.const(" "),F.createElement("a",{href:F.const("/privacy"),target:F.const("_blank"),class:F.const("dcg-blue-link")},F.const("Privacy Policy")),F.const(".")))}},hu=class extends F.Class{init(){this.controller=this.props.controller(),this.i18n=this.controller,this.selectedView=pu,this.givenName="",this.familyName="",this.email="",this.password="",this.consentChecked=!1,this.isSubmittingForm=!1,this.formErrors=[],this.breakPoint=660,this.measureWindow(),this.controller.getModalStartingError()&&this.formErrors.push(this.controller.getModalStartingError())}template(){return F.createElement(Er,{title:()=>this.i18n.s("shared-title-signup"),size:this.const("narrow"),showX:this.const(!0),onClose:()=>this.controller.dispatch({type:"close-modal"}),i18n:this.props.controller},F.createElement("div",{class:()=>({"dcg-shared-signup-dialog":!0,"dcg-shared-account-dialog":!0})},F.createElement("div",{class:F.const("dcg-shared-switch-account-message")},()=>this.i18n.s("shared-prompt-already-have-account"),this.const(this.i18n.raw(" ")),F.createElement("a",{role:F.const("link"),tabindex:F.const("0"),class:F.const("dcg-gray-link"),onTap:t=>this.controller.dispatch({type:"show-modal",modal:"login",device:t.device})},()=>this.i18n.s("shared-button-login")),F.const(".")),F.createElement("div",{class:F.const("dcg-shared-navigation-tabs"),role:F.const("tablist")},F.createElement("div",{role:F.const("tab"),tabindex:F.const("0"),"aria-selected":this.bindFn(this.isGoogleSelected),class:()=>({"dcg-shared-tab-gray-underline":!0,"dcg-shared-tab-always-underline":!0,"dcg-shared-profile-view-button":!0,"dcg-selected":this.isGoogleSelected()}),onTap:()=>this.updateView(pu)},this.bindFn(this.externalTitle)),F.createElement("div",{role:F.const("tab"),tabindex:F.const("0"),"aria-selected":this.bindFn(this.isDesmosSelected),class:()=>({"dcg-shared-tab-gray-underline":!0,"dcg-shared-tab-always-underline":!0,"dcg-shared-password-view-button":!0,"dcg-selected":this.isDesmosSelected()}),onTap:()=>this.updateView(uh)},this.bindFn(this.desmosTitle))),F.createElement("div",{class:F.const("dcg-shared-account-content-container")},F.createElement(e1,{key:()=>this.selectedView},t=>t===pu?F.createElement("div",{class:F.const("dcg-shared-notice-checkbox-google")},F.createElement(xa,{checked:()=>this.consentChecked,disabled:this.const(!1),onChange:()=>{if(this.consentChecked=!this.consentChecked,!this.unmounted)return this.update()}},this.bindFn(this.consentText)),F.createElement(xa,{checked:()=>this.privacyChecked,disabled:this.const(!1),onChange:()=>{if(this.privacyChecked=!this.privacyChecked,!this.unmounted)return this.update()}},F.createElement(gu,{i18n:this.const(this.i18n)})),F.createElement(vc,{predicate:()=>window.googleAuthConnectionFailed},()=>F.createElement("div",{class:F.const("dcg-shared-google-auth-unavailable")},()=>this.i18n.s("shared-message-google-login-not-available"))),F.createElement(vc,{predicate:()=>!window.googleAuthConnectionFailed},()=>F.createElement("div",{class:()=>({"dcg-btn-gray-outline":!0,"dcg-shared-google-login":!0,"dcg-disabled":this.hasNotConsented()}),role:F.const("button"),tabindex:()=>this.hasNotConsented()?"-1":"0","aria-disabled":this.bindFn(this.hasNotConsented),onTap:()=>this.googleLogin()},F.createElement("div",{class:F.const("dcg-shared-google-icon dcg-shared-external-login-logo")}),F.createElement("span",null,this.bindFn(this.getGoogleLoginText)))),F.createElement(vc,{predicate:()=>this.controller.allowSignInWithApple()},()=>F.createElement("div",{class:()=>({"dcg-btn-gray-outline":!0,"dcg-shared-apple-login":!0,"dcg-disabled":this.hasNotConsented()}),role:F.const("button"),tabindex:()=>this.hasNotConsented()?"-1":"0","aria-disabled":this.bindFn(this.hasNotConsented),onTap:()=>this.appleLogin()},F.createElement("div",{class:F.const("dcg-shared-apple-icon dcg-shared-external-login-logo")}),F.createElement("span",null,this.bindFn(this.getAppleLoginText))))):t===uh?F.createElement("div",null,F.createElement(lr,{controller:this.props.controller,errors:()=>this.formErrors}),F.createElement("form",{class:F.const("dcg-shared-action-submit"),onSubmit:this.bindFn(this.onSubmit),didMount:this.bindFn(this.didMountForm)},F.createElement("div",{class:F.const("dcg-shared-email-form-container")},F.createElement("label",null,F.createElement("span",{class:F.const("dcg-shared-input-title")},()=>this.i18n.s("shared-label-email")),F.createElement(uu,{type:F.const("email"),name:F.const("email"),class:F.const("dcg-shared-input-blue-outline"),required:F.const("true"),"aria-describedby":F.const("email-description"),didMount:r=>{Cn||r.focus()},value:()=>this.email,onInput:r=>{if(this.email=r,!this.unmounted)return this.update()}})),F.createElement("div",{class:F.const("dcg-shared-name-container")},F.createElement("div",{class:F.const("dcg-shared-name-input")},F.createElement("label",null,F.createElement("span",{class:F.const("dcg-shared-input-title")},()=>this.i18n.s("shared-label-given-name-or-nickname")),F.createElement(uu,{type:F.const("text"),name:F.const("given-name"),class:F.const("dcg-shared-input-blue-outline"),required:F.const("true"),"aria-describedby":F.const("given-name-description"),value:()=>this.givenName,onInput:r=>{if(this.givenName=r,!this.unmounted)return this.update()}}))),F.createElement("div",{class:F.const("dcg-shared-name-input")},F.createElement("label",null,F.createElement("span",{class:F.const("dcg-shared-input-title")},()=>this.i18n.s("shared-label-family-name")),F.createElement(uu,{type:F.const("text"),name:F.const("family-name"),class:F.const("dcg-shared-input-blue-outline"),"aria-describedby":F.const("family-name-description"),value:()=>this.familyName,onInput:r=>{if(this.familyName=r,!this.unmounted)return this.update()}})))),F.createElement("label",null,F.createElement("span",null,()=>this.i18n.s("shared-label-password")),F.createElement(uu,{type:F.const("password"),class:F.const("dcg-shared-input-blue-outline"),name:F.const("password"),required:F.const("true"),value:()=>this.password,onInput:r=>{if(this.password=r,!this.unmounted)return this.update()}})),F.createElement("div",{class:F.const("dcg-shared-notice-checkbox-email")},F.createElement(xa,{checked:()=>this.consentChecked,disabled:this.const(!1),onChange:()=>{if(this.consentChecked=!this.consentChecked,!this.unmounted)return this.update()}},this.bindFn(this.consentText))),F.createElement(xa,{checked:()=>this.privacyChecked,disabled:this.const(!1),onChange:()=>{if(this.privacyChecked=!this.privacyChecked,!this.unmounted)return this.update()}},F.createElement(gu,{i18n:this.const(this.i18n)})),F.createElement("div",{class:F.const("dcg-shared-sign-in-options")},F.createElement(vc,{predicate:()=>this.isSubmittingForm},()=>F.createElement("div",{class:F.const("dcg-shared-progress-indicator dcg-shared-create-account-progress")},F.createElement("div",{class:F.const("dcg-shared-spinner")}))),F.createElement(vc,{predicate:()=>!this.isSubmittingForm},()=>F.createElement("div",{class:F.const("dcg-shared-submit-container")},F.createElement("button",{type:F.const("submit"),class:()=>({"dcg-btn-blue":!0,"dcg-disabled":!this.submitEnabled()}),"aria-disabled":()=>!this.submitEnabled(),tabindex:()=>this.submitEnabled()?"0":"-1"},()=>this.i18n.s("shared-button-create-account")))))))):F.createElement("span",null)),F.createElement(Bi,{i18n:this.const(this.i18n)}))))}canSwitchRoles(){return!this.controller.getLimitedSignupRole()}didMountForm(t){this.form=t}submitEnabled(){var a,c,l;if(!this.consentChecked||!this.privacyChecked||!this.form)return!1;let t=(a=this.form.querySelector('[name="password"]'))==null?void 0:a.value,r=(c=this.form.querySelector('[name="email"]'))==null?void 0:c.value,n=(l=this.form.querySelector('[name="given-name"]'))==null?void 0:l.value;return!!(t&&r&&n)}onSubmit(t){t.preventDefault(),this.submitEnabled()&&this.submitForm()}googleLogin(){this.controller.dispatch({type:"close-modal"}),this.controller.userController.googleLogin({fromUI:"create"})}appleLogin(){this.controller.dispatch({type:"close-modal"}),this.controller.userController.appleLogin({fromUI:"create"})}getGoogleLoginText(){return this.consentChecked&&this.privacyChecked?this.i18n.s("shared-prompt-sign-up-with-google"):this.i18n.s("shared-prompt-please-consent-to-sign-up-with-google")}getAppleLoginText(){return this.consentChecked&&this.privacyChecked?this.i18n.s("shared-prompt-sign-up-with-apple"):this.i18n.s("shared-prompt-please-consent-to-sign-up-with-apple")}async submitForm(){this.formErrors=[],this.isSubmittingForm=!0,this.unmounted||this.update();try{if(await this.controller.userController.createAccount({userProvidedName:{given:this.givenName,family:this.familyName.length?this.familyName:void 0},email:this.email,password:this.password,teacher:!1,lang:this.controller.getLanguage()}),!this.unmounted)return this.controller.dispatch({type:"close-modal"})}catch(t){this.formErrors=this.controller.parseJSONErrors(t)}finally{this.isSubmittingForm=!1,this.unmounted||this.update()}}updateView(t){this.selectedView=t,this.unmounted||this.update()}externalTitle(){return this.controller.allowSignInWithApple()?this.windowWidth>this.breakPoint?this.i18n.s("shared-button-external-account-wide"):this.i18n.s("shared-button-external-account-narrow"):this.windowWidth>this.breakPoint?this.i18n.s("shared-button-google-account-wide"):this.i18n.s("shared-button-google-account-narrow")}desmosTitle(){return this.windowWidth>this.breakPoint?this.i18n.s("shared-button-email-address-wide"):this.i18n.s("shared-button-email-address-narrow")}measureWindow(){return this.windowWidth=ee(window).width()}didMount(){ee(window).on("resize.create-account",bo(()=>{this.measureWindow(),this.update()},200))}didUnmount(){ee(window).off("resize.create-account"),this.unmounted=!0}consentText(){return this.i18n.s("shared-message-consent-text")}isGoogleSelected(){return this.selectedView===pu}isDesmosSelected(){return this.selectedView===uh}hasNotConsented(){return!this.consentChecked||!this.privacyChecked}};var{SwitchUnion:t1}=rn.Components,mu=class extends rn.Class{template(){return t1(()=>this.props.controller().getModal(),{login:()=>rn.createElement(cu,{controller:this.props.controller}),signup:()=>rn.createElement(hu,{controller:this.props.controller}),"account-reenabled":()=>rn.createElement(Xd,{controller:this.props.controller}),"recover-password":()=>rn.createElement(du,{controller:this.props.controller}),"account-settings":()=>rn.createElement(iu,{controller:this.props.controller}),"change-email":()=>rn.createElement(ou,{controller:this.props.controller}),consent:()=>rn.createElement(su,{controller:this.props.controller}),none:()=>rn.createElement("span",null)})}};dr();var Or=he(me());var It=he(me());var{For:r1,If:n1}=It.Components,fu=class extends It.Class{init(){this.i18n=this.props.i18n()}template(){return It.createElement("div",{class:()=>({"dcg-language-picker":!0,"dcg-two-columns":this.getLanguages().length>7})},It.createElement("div",{class:It.const("dcg-language-header"),role:It.const("heading"),"aria-level":It.const("2")},()=>this.i18n.s("shared-title-language-menu")),It.createElement(r1,{each:()=>this.getLanguages()},It.createElement("ul",{class:It.const("dcg-unstyled-list dcg-languages-list"),role:It.const("menu")},t=>It.createElement("li",{class:()=>({"dcg-listitem":!0,"dcg-language-option":!0,"dcg-selected":this.isLanguageSelected(t)}),lang:this.const(this.getLangCode(t)),role:It.const("menuitem"),tabindex:It.const("0"),"aria-current":()=>this.isLanguageSelected(t),onTap:()=>this.updateLang(t)},()=>this.i18n.raw(this.getLanguageDisplayName(t))))),It.createElement(n1,{predicate:()=>this.shouldShowFooterLink()},()=>It.createElement("a",{class:It.const("dcg-language-footer-link dcg-blue-link"),href:()=>this.getFooterLinkURL()},()=>this.getFooterLinkText())))}shouldShowFooterLink(){return!!(this.props.footerLink&&this.props.footerLink())}getFooterLinkURL(){let t=this.props.footerLink&&this.props.footerLink();if(t)return t.url}getFooterLinkText(){let t=this.props.footerLink&&this.props.footerLink();return t?t.text:this.i18n.raw("")}getCurrentLang(){return this.props.currentLang()}getLanguages(){return Object.keys(this.props.getAllLangs())}getLanguageDisplayName(t){return this.props.getAllLangs()[t].display_name}updateLang(t){let r=this.props.getAllLangs()[t].code;return this.props.onLangChosen(r)}getLangCode(t){return this.props.getAllLangs()[t].code}isLanguageSelected(t){return this.getLangCode(t)===this.getCurrentLang()}};var ea=he(me());var Zo=class extends ea.Class{template(){return ea.createElement("div",{class:ea.const("dcg-icon-button-container")},ea.createElement(Xr,{tooltip:this.props.label,gravity:this.props.tooltipGravity},ea.createElement("i",{role:ea.const("button"),tabindex:ea.const("0"),"aria-label":this.props.label,class:this.props.iconClass,onTap:this.props.onTap,"aria-expanded":()=>{var t,r;return(r=(t=this.props).isExpanded)==null?void 0:r.call(t)}})))}};var{If:pk}=Or.Components,a1={en:{code:"en",display_name:"English"},de:{code:"de",display_name:"Deutsch"},es:{code:"es",display_name:"Espa\xF1ol (LATAM)"},et:{code:"et",display_name:"Eesti"},fr:{code:"fr",display_name:"Fran\xE7ais"},id:{code:"id",display_name:"Bahasa Indonesia"},it:{code:"it",display_name:"Italiano"},ja:{code:"ja",display_name:"\u65E5\u672C\u8A9E"},ko:{code:"ko",display_name:"\uD55C\uAD6D\uC5B4"},nl:{code:"nl",display_name:"Nederlands"},pl:{code:"pl",display_name:"Polski"},"pt-BR":{code:"pt-BR",display_name:"Portugu\xEAs (Brasil)"},ru:{code:"ru",display_name:"\u0420\u0443\u0441\u0441\u043A\u0438\u0439"},"sv-SE":{code:"sv-SE",display_name:"Svenska"},th:{code:"th",display_name:"\u0E20\u0E32\u0E29\u0E32\u0E44\u0E17\u0E22"},tr:{code:"tr",display_name:"T\xFCrk\xE7e"},vi:{code:"vi",display_name:"Ti\u1EBFng Vi\u1EC7t"},"zh-CN":{code:"zh-CN",display_name:"\u7B80\u4F53\u4E2D\u6587"},"zh-TW":{code:"zh-TW",display_name:"\u7E41\u9AD4\u4E2D\u6587"}},yu=class extends Or.Class{init(){this.controller=this.props.controller(),this.namespace="language-picker-container",this.isOpen=!1}template(){return Or.createElement(pk,{predicate:this.bindFn(this.isDisplayed)},()=>Or.createElement("div",{role:Or.const("group"),class:Or.const("dcg-language-picker-container"),didMount:this.bindFn(this.didMountContainer),willUnmount:this.bindFn(this.willUnmountContainer),"aria-label":()=>Ie("shared-calculator-button-language")},Or.createElement(Zo,{label:()=>Ie("shared-calculator-button-language"),iconClass:this.const(""),tooltipGravity:this.const("s"),onTap:this.bindFn(this.toggleOpen),isExpanded:()=>this.isOpen}),Or.createElement(pk,{predicate:()=>this.isOpen},()=>Or.createElement("div",{class:Or.const("dcg-language-picker-dropdown")},Or.createElement(fu,{i18n:this.props.controller,getAllLangs:this.const(a1),onLangChosen:this.bindFn(this.onLangChosen),currentLang:()=>this.controller.getLanguage()})))))}isDisplayed(){return this.controller.getShowLanguagePicker()}didMountContainer(t){ee(document.body).on(`dcg-tapstart.${this.namespace} dcg-tap.${this.namespace}`,({target:r})=>{this.isOpen&&!ee.contains(t,r)&&this.toggleOpen()})}willUnmountContainer(){ee(document.body).off(this.namespace)}toggleOpen(){this.isOpen=!this.isOpen,this.update()}onLangChosen(t){Ed(t).then(()=>{this.isOpen=!1,this.controller.dispatch({type:"set-language",language:t})})}};var Ui=he(me());var{If:i1}=Ui.Components,bu=class extends Ui.Class{template(){return Ui.createElement(i1,{predicate:this.props.isDisplayed},()=>Ui.createElement(Zo,{label:()=>Ie("shared-calculator-button-print"),iconClass:this.const("dcg-icon-print"),tooltipGravity:this.const("s"),onTap:()=>window.print()}))}};var Nn=he(me());var xu=class extends Nn.Class{template(){return Nn.createElement(Pr,{i18n:this.props.controller,key:this.const("frontpage-heading-main-using-desmos-classroom-link")},Nn.const("Desmos Classroom is a free teaching and learning platform,"),Nn.const(" "),Nn.createElement("a",{href:Nn.const("https://blog.desmos.com/articles/desmos-amplify-join-forces/"),class:Nn.const("dcg-blue-link")},Nn.const("now part of Amplify.")))}};var{If:kc,Each:ph}=O.Components,o1=0,es=class extends O.Class{init(){this.open=!1,this.id=o1++}getAriaLabel(){var t,r;return(r=(t=this.props).ariaLabel)==null?void 0:r.call(t)}template(){return O.createElement("div",{class:()=>({"dcg-header-link":!0,"dcg-math-tools":this.props.mathToolsMenu}),didMount:this.bindFn(this.didMountRoot),willUnmount:this.bindFn(this.willUnmountRoot),"aria-label":this.bindFn(this.getAriaLabel),"aria-labelledby":this.props.ariaLabel?this.const(void 0):this.const(this.getUniqueName())},O.createElement("span",{class:O.const("dcg-header-link-title-container"),role:O.const("button"),tabindex:O.const("0"),id:this.const(this.getUniqueName()),"aria-expanded":()=>this.open,onTap:()=>this.toggleOpen()},this.props.title,O.createElement("i",{class:O.const(""),"aria-hidden":O.const("true")})),O.createElement("div",{class:O.const("dcg-header-link-dropdown"),style:()=>({display:this.open?void 0:"none"})},this.children))}getUniqueName(){return`header-link-${this.id}`}didMountRoot(t){ee(document.body).on(`dcg-tapstart.${this.getUniqueName()} dcg-tap.${this.getUniqueName()}`,r=>{if(this.open){let n=r.target;ee.contains(t,n)||this.toggleOpen()}})}willUnmountRoot(){ee(document.body).off(`.${this.getUniqueName()}`)}toggleOpen(){this.open=!this.open,this.update()}},wu=class extends O.Class{init(){this.controller=this.props.controller()}template(){return O.createElement("header",{class:()=>({"":!0,"dcg-scrolled":this.isScrolled}),didMount:this.bindFn(this.didMountRoot),didUnmount:this.bindFn(this.didUnmountRoot)},O.createElement(kc,{predicate:()=>this.controller.isMaintenanceMode()},()=>O.createElement("div",{class:O.const("dcg-notice-wrapper"),role:O.const("heading"),"aria-level":O.const("1")},O.createElement("div",{class:O.const("dcg-maintenance-notice")},O.createElement("i",{class:O.const("dcg-icon-error"),"aria-hidden":O.const("true")}),()=>this.controller.s("frontpage-heading-header-maintenance-mode")))),O.createElement(kc,{predicate:()=>this.controller.shouldShowTopBanner()},()=>O.createElement("div",{role:O.const("banner"),class:O.const("dcg-top-banner")},()=>this.controller.s("frontpage-text-header-terms-update"),O.createElement("a",{class:O.const("dcg-primary-link"),target:O.const("_blank"),href:O.const("https://blog.desmos.com/articles/desmos-studio-terms-update/")},()=>this.controller.s("frontpage-text-header-terms-update-link")))),O.createElement("div",{class:O.const("")},O.createElement("div",{class:O.const("dcg-header-left-content")},O.createElement("a",{class:O.const("dcg-home-link"),href:O.const("/")},O.createElement(Yd,null))),O.createElement("nav",{class:O.const("dcg-header-center-content")},O.createElement(es,{title:qi.MATH_TOOLS.title,mathToolsMenu:()=>!0},O.createElement("ul",{class:O.const("dcg-unstyled-list")},ph(()=>qi.MATH_TOOLS.links,{item:({href:t,icon:r,text:n})=>O.createElement("li",null,O.createElement("a",{href:this.const(t),class:O.const("dcg-dropdown-link")},O.createElement("div",{class:O.const("dcg-math-tool-icon-container")},O.createElement("i",{class:this.const(r),"aria-hidden":O.const("true")})),O.createElement("span",{class:O.const("dcg-dropdown-text")},n))),key:({href:t})=>t}),O.createElement("li",null,O.createElement("a",{href:O.const("/3d"),class:O.const("dcg-dropdown-link")},O.createElement("div",{class:O.const("dcg-math-tool-icon-container")},O.createElement("i",{class:O.const("dcg-icon-3d"),"aria-hidden":O.const("true")})),O.createElement("span",{class:O.const("dcg-dropdown-text")},()=>this.controller.s("frontpage-link-shared-3d-calculator")))),O.createElement("li",{class:O.const("dcg-app-links")},O.createElement(Pr,{i18n:this.const(this.controller),key:this.const("frontpage-text-header-app-links")},O.const("Download our apps in the"),O.const(" "),O.createElement("a",{class:O.const("dcg-primary-link"),href:O.const("https://play.google.com/store/apps/developer?id=Desmos+Inc")},O.const("Google Play Store")),O.const(" "),O.const("and"),O.const(" "),O.createElement("a",{class:O.const("dcg-primary-link"),href:O.const("https://apps.apple.com/us/developer/desmos/id653517543")},O.const("iOS App Store")),O.const("."))))),O.createElement(es,{title:qi.CLASSROOM.title},O.createElement("ul",{class:O.const("dcg-unstyled-list")},ph(()=>qi.CLASSROOM.links,{item:({href:t,text:r})=>O.createElement("li",null,O.createElement("a",{href:this.const(tk(t,"header-dropdown")),class:O.const("dcg-dropdown-link")},r)),key:({href:t})=>t})),O.createElement("div",{class:O.const("dcg-classroom-about-link-dropdown-container")},O.createElement(xu,{controller:this.props.controller}))),O.createElement(es,{title:qi.RESOURCES.title},O.createElement("ul",{class:O.const("dcg-unstyled-list")},ph(()=>qi.RESOURCES.links,{item:({href:t,text:r})=>O.createElement("li",null,O.createElement("a",{href:this.const(t),class:O.const("dcg-dropdown-link")},r)),key:({href:t})=>t})))),O.createElement("div",{class:O.const("dcg-header-right-content")},O.createElement(kc,{predicate:()=>!this.hideAccounts()},()=>O.createElement("div",null,O.createElement(kc,{predicate:()=>!this.controller.userController.isLoggedIn()},()=>O.createElement("div",{class:O.const("dcg-account-container")},O.createElement("div",{role:O.const("link"),tabindex:O.const("0"),class:O.const("dcg-log-in"),onTap:t=>{this.controller.dispatch({type:"show-modal",modal:"login",device:t.device})}},()=>this.controller.s("frontpage-link-shared-log-in")))),O.createElement(kc,{predicate:()=>this.controller.userController.isLoggedIn()},()=>O.createElement("div",{class:O.const("dcg-account-dropdown-container")},O.createElement(es,{title:()=>this.controller.userController.getFirstName(),ariaLabel:()=>this.controller.s("frontpage-button-account-menu")},O.createElement("ul",{class:O.const("dcg-unstyled-list")},O.createElement("li",{class:O.const("dcg-user-name")},()=>this.controller.userController.getFullName()),O.createElement("li",{class:O.const("dcg-email")},()=>this.controller.userController.getEmail()),O.createElement("li",null,O.createElement("div",{onTap:t=>{this.controller.dispatch({type:"show-modal",modal:"account-settings",device:t.device})},role:O.const("link"),tabindex:O.const(0),class:O.const("dcg-dropdown-link")},()=>this.controller.s("frontpage-link-shared-account-settings"))),O.createElement("div",{class:O.const("dcg-line-divider")}),O.createElement("li",null,O.createElement("div",{onTap:()=>this.controller.userController.logout(),role:O.const("link"),tabindex:O.const(0),class:O.const("dcg-dropdown-link")},()=>this.controller.s("frontpage-link-shared-log-out"))))))))),O.createElement(yu,{controller:this.props.controller}),O.createElement(bu,{isDisplayed:this.bindFn(this.shouldShowPrintIcon)}))),O.createElement(mu,{controller:this.props.controller}))}didMountRoot(){ee(document).on("",()=>{let t=ee(document).scrollTop()||0,n=this.controller.shouldShowTopBanner()?t>=30:t>0;n!==this.isScrolled&&(this.isScrolled=n,this.update())})}hideAccounts(){return this.controller.isMaintenanceMode()?!0:this.props.hideAccounts&&this.props.hideAccounts()}didUnmountRoot(){ee(document).off("")}shouldShowPrintIcon(){var t,r;return!!((r=(t=this.props).showPrintIcon)!=null&&r.call(t))}};var vu=class extends gr.Class{template(){return gr.createElement("div",{id:gr.const("navigation"),role:gr.const("navigation")},gr.createElement(wu,{controller:this.props.controller,showPrintIcon:this.props.showPrintIcon}),gr.createElement("div",{class:gr.const("")},gr.createElement("a",{href:gr.const("/terms")},()=>Ie("basic-calculator-link-terms-of-service")),gr.const("|"),gr.createElement("a",{href:gr.const("/privacy")},()=>Ie("basic-calculator-link-privacy-policy")),gr.const("|"),gr.createElement("a",{href:this.props.helpLink},()=>Ie("basic-calculator-link-help"))))}};ho();dr();function gk(e){let t={};return ee.extend(!0,t,e),ee.param(t)}var ku="";function gh(){return ku}var hk=[];function mk(e){hk.push(e)}function s1(e){if(e.status===401)for(let t of hk)t()}async function c1(e){if(e&&e.routeDeprecated)throw e.js&&new Function(e.js)(),e}function l1(){throw{status:0,responseJSON:{errors:[{message:"Connection failed. Check your internet connection?"}]}}}async function hh(e){let t=await e.catch(l1);if(s1(t),!t.ok){let n;try{n=await t.json()}catch(a){}throw{status:t.status,responseJSON:n}}let r=await t.json();return await c1(r),r}async function ta(e,t){let r={method:"POST",credentials:"include",headers:{Accept:"application/json, text/javascript, */*; q=0.01"}};return t!==void 0&&(r.body=gk(t),r.headers["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"),await hh(fetch(ku+e,r))}async function fk(e,t){let r={method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json, text/javascript, */*; q=0.01"},body:JSON.stringify(t||null)};return await hh(fetch(ku+e,r))}async function Ec(e,t){t===void 0&&(t={}),t=be(be({},t),kd);let r={method:"GET",credentials:"include",headers:{Accept:"application/json, text/javascript, */*; q=0.01"}},n=/\?/.test(e)?"&":"?";return await hh(fetch(`${ku}${e}${n}${new URLSearchParams(t)}`,r))}function mh(){return ta("/account/logout_xhr")}function yk(e){let t=function(){return ta("/account/login_xhr",e)};return mh().then(t,t).then(()=>$i({lang:e.lang}))}function $i(e){return Ec("/account/user_info",e)}async function bk(){let e=await Ec("/account/user_info?no401");if(e.loggedIn===!1)throw e;return e}function xk(e){return ta("/account/check_account_status",e)}function wk(e){return ta("/account/register_xhr",e).then(()=>$i({lang:e.lang}))}function vk(e){e===void 0&&(e={});let t="?source="+(e.fromUI||"");return e.teacher&&(t+="&teacher=true"),gh()+"/drive_api/calculator/login"+t}function kk(e){e===void 0&&(e={});let t="?source="+(e.fromUI||"");return e.teacher&&(t+="&teacher=true"),gh()+"/apple_api/calculator/login"+t}function Ek(e){return ta("/account/change_name",e).then(()=>$i({lang:e.lang}))}function Ck(e){return ta("/account/change_name_detail",{lang:e.lang,userProvidedName:{given:e.given,family:e.family}}).then(()=>$i({lang:e.lang}))}function Tk(e){return ta("/account/recover_xhr",e)}function Sk(e){return Ec("/account/initiate_delete_account",e)}function Dk(e){return Ec("/account/initiate_email_change",e)}function Mk(e){return ta("/account/set_email",e).then(()=>$i({lang:e.lang}))}function Ak(e){return fk("/account/update_feature_flags",e).then(()=>$i({lang:e.lang}))}function Lk(e){return ta("/account/set_privacy_consent",e).then(()=>$i({lang:e.lang}))}function Ik(e,t){e.closed?t.askServerIfLoggedIn():setTimeout(()=>{Ik(e,t)},1e3)}function Vk(e){var t=window.open(e.url,"login_window","width=650,height=530,resizable,scrollbars");t?Ik(t,e.userController):alert(e.blockedMessage)}function Nk(e,t){window.userController=e,e.observeEvent("googleLogin",function(r,n){Vk({url:vk(n),userController:e,blockedMessage:t("account-shell-text-login-window-blocked-google")})}),e.observeEvent("appleLogin",function(r,n){Vk({url:kk(n),userController:e,blockedMessage:t("account-shell-text-login-window-blocked-apple")})})}xl();var Eu=class extends Jo{constructor(){super();this.loggedIn=!1;this.logoutFailed=!1;this.loggingOut=!1;this.consentingToPrivacy=!1;this.privacyConsentFailed=!1;this.userId="";this.name="";this.email="";this.teacher=!1;this.featureFlags=[];this.verificationStatus="";this.subscriptions=[];this.privacyConsent=null;mk(()=>this.logout())}desmosLogin(r){return yk(r).then(this.completeLogin.bind(this))}googleLogin(r){this.triggerEvent("googleLogin",r)}appleLogin(r){this.triggerEvent("appleLogin",r)}askServerIfLoggedIn(){return bk().then(this.completeLogin.bind(this),this.logout.bind(this))}driveCallback(){return this.askServerIfLoggedIn()}createAccount(r){let n=ar(be({},r),{name:r.userProvidedName.given});return n.teacher===!1&&delete n.teacher,wk(n).then(this.completeLogin.bind(this))}checkPendingDeletion(r){return xk(r)}isTeacher(){return!!this.teacher}setNameLegacy(r){return Ek(r).then(n=>{this.name=n.name||"",this.triggerEvent("userUpdated",void 0),this.triggerEvent("triggerRender",void 0)})}setNameDetail(r){return Ck(r).then(n=>{this.name=n.name||"",this.nameDetail=n.nameDetail,this.triggerEvent("userUpdated",void 0),this.triggerEvent("triggerRender",void 0)})}recoverPassword(r){return Tk(r)}completeLogin(r){this.loggedIn=!0,this.userId=r.userId||"",this.name=r.name||"",this.nameDetail=r.nameDetail,this.email=r.email||"",this.featureFlags=r.featureFlags||[],this.subscriptions=r.subscriptions||[],this.verificationStatus=r.verificationStatus||"",this.privacyConsent=r.privacyConsent,this.teacher=!!r.isTeacher,this.triggerEvent("loginChanged",void 0),this.triggerEvent("userUpdated",void 0),this.triggerEvent("triggerRender",void 0)}async logout(){this.loggingOut=!0,this.triggerEvent("logout",void 0),this.triggerEvent("triggerRender",void 0);try{await mh(),this.completeLogout()}catch(r){this._onLogoutFailure()}finally{this.loggingOut=!1,this.triggerEvent("triggerRender",void 0)}}completeLogout(){this.loggedIn=!1,this.logoutFailed=!1,this.userId="",this.email="",this.name="",this.subscriptions=[],this.featureFlags=[],this.verificationStatus="",this.privacyConsent=null,this.teacher=!1,this.triggerEvent("loginChanged",void 0),this.triggerEvent("userUpdated",void 0),this.triggerEvent("triggerRender",void 0)}_onLogoutFailure(){this.logoutFailed=!0,this.triggerEvent("triggerRender",void 0),setTimeout(()=>{this.logoutFailed=!1,this.triggerEvent("triggerRender",void 0)},2e3)}initiateAccountDeletion(r){return Sk(r)}getEmailChangeToken(){return uf(location.search,"changeToken")}initiateEmailChange(r){return Dk(r)}setEmail(r){return Mk(r).then(()=>{this.email=r.newEmail||"",this.verificationStatus="VERIFYING",this.triggerEvent("userUpdated",void 0),this.triggerEvent("triggerRender",void 0)})}async setPrivacyConsent(r){this.consentingToPrivacy=!0,this.triggerEvent("triggerRender",void 0);try{let n=await Lk(r);this.completePrivacyConsent(n)}catch(n){this.onPrivacyConsentFailure()}finally{this.consentingToPrivacy=!1,this.triggerEvent("triggerRender",void 0)}}completePrivacyConsent(r){this.privacyConsent=r.privacyConsent,this.triggerEvent("userUpdated",void 0),this.triggerEvent("triggerRender",void 0)}onPrivacyConsentFailure(){this.privacyConsentFailed=!0,this.triggerEvent("triggerRender",void 0),setTimeout(()=>{this.privacyConsentFailed=!1,this.triggerEvent("triggerRender",void 0)},2e3)}updateFeatureFlags(r){return Ak(r).then(n=>{this.featureFlags=n.featureFlags,this.triggerEvent("userUpdated",void 0)})}getFeatureFlags(){return this.featureFlags}hasFeatureFlag(r){return this.featureFlags.some(n=>n===r)}didPrivacyConsentFail(){return!!this.privacyConsentFailed}isConsentingToPrivacy(){return!!this.consentingToPrivacy}isLoggedIn(){return!!this.loggedIn}isLoggingOut(){return!!this.loggingOut}didLogoutFail(){return!!this.logoutFailed}getEmail(){return this.email}getFirstName(){return p1(this.name)}getFullName(){return this.name}getNameDetail(){return this.nameDetail||{given:this.name,source:"legacy"}}getUserId(){return this.userId}getSubscriptions(){return this.subscriptions}getVerificationStatus(){return this.verificationStatus}hasConsentedToCollection(){return!!this.privacyConsent}getUserAsJSON(){if(this.isLoggedIn())return{email:this.email,name:this.name,verificationStatus:this.verificationStatus,subscriptions:this.subscriptions,privacyConsent:this.privacyConsent}}};function p1(e){if(!e)return"";if(e.match(/[\d@_&\.\']/))return e;var t=e.split(" ");return t[0].length>=3?t[0]:e}xl();function g1(e){var r;let t=(r=e==null?void 0:e.responseJSON)==null?void 0:r.errors;return Array.isArray(t)?t:[{message:"Unexpected server error. Try again, or e-mail calculator@desmos.com."}]}function Pk(e){return g1(e).map(t=>t.message)}var h1=50,Cu=class{constructor(t,r){this.throttledFlushBatchedLogs=bo(async()=>{if(this.requestInFlight||this.batchedLogs.length==0)return;let t=this.batchedLogs.splice(0,h1);this.requestInFlight=!0;try{await fetch(this.apiUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({events:t})})}catch(r){}this.requestInFlight=!1,this.throttledFlushBatchedLogs()},1e3,{leading:!1});this.batchedLogs=[],this.requestInFlight=!1,this.getSessionData=r,this.apiUrl=t}log(t){this.batchedLogs.push(be(be({},this.getSessionData()),t)),this.throttledFlushBatchedLogs()}};var Ok,m1={page_load_id:window.pageLoadId||Hl(),source:"browser",app:"knox",user_agent:navigator.userAgent};var f1=new Cu("/data-events",()=>m1);function y1(e){f1.log(be({url:document.location.href},e))}function yh(e,t,r){y1({event_type:e,payload:JSON.stringify(ar(be({},t),{userId:Ok}))}),r&&b1(r)}function b1(e){var t;(t=window._paq)==null||t.push(["trackEvent",e.category,e.action,e.name,e.value])}var fh;function Fk(e){let t=document.location.href,r=navigator.userLanguage||navigator.language,n=document.referrer,{_paq:a}=window,c=ar(be({browserLang:r,referrer:n},e),{isFirstPageLoad:fh===void 0});Ok=e.userId,fh!==t&&(fh=t,yh("page-load",c),a==null||a.push(["setReferrerUrl",n]),a==null||a.push(["setDocumentTitle",window.document.title]),a==null||a.push(["trackPageView"]))}var Cc=class{constructor(t){this._queuedCallbacks=[];this.s=Js(()=>this.language);this.dispatch=t=>{yl("dispatch::frontpage-controller",{type:t.type}),this.dispatcher.dispatch(t);let r;for(;r=this._queuedCallbacks.shift();)r()};this.modal="none",this.dispatcher=new $d,this.language=Xs(),this.maintenance=!1,this.setupUserController(),this.showLanguagePicker=t.showLanguagePicker,this.limitSignupRole=t.limitSignupRole,this.showNotice=t.showNotice,t.allowAllLanguages||dg(),this.dispatcher.register(r=>{if(this.enqueueEvent("render"),r.type!=="render")switch(r.type){case"close-modal":this.modal="none",this.modalDevice=void 0;break;case"show-modal":this.modal=r.modal,this.modalDevice=r.device,this.modalLocation=r.location;break;case"set-language":this.language=r.language,this.updateUrlForLang(this.language),this.enqueueEvent("changeLang");break;default:return r}})}raw(t,r){return Vi(t,r)}hasTranslation(t){return Ys(t,this.language)}runAfterDispatch(t){this._queuedCallbacks.push(t)}logEvent(t,r){yh(t,r)}enqueueEvent(t){this.runAfterDispatch(()=>{this.onEventEmitted&&this.onEventEmitted(t)})}getShowLanguagePicker(){return this.showLanguagePicker}getShowNotice(){return!this.maintenance&&this.showNotice}getLimitedSignupRole(){return this.limitSignupRole}setupUserController(){this.userController=new Eu;let t;try{let r=document.body.getAttribute("data-user-info");r&&(t=JSON.parse(r))}catch(r){}t&&t.user&&this.userController.completeLogin(t.user),t&&(this.maintenance=!!t.maintenance),Fk({userId:this.userController.getUserId(),desmosLang:this.getLanguage()}),this.userController.observeEvent("triggerRender",()=>{this.dispatch({type:"render"})}),Nk(this.userController,this.s.bind(this))}updateUrlForLang(t){if(!(window.history&&history.replaceState))return;let{origin:r,pathname:n,search:a,hash:c}=location,l=bl(a,"lang",t),p=`${r}${n}${l}${c}`;history.replaceState(null,"",p)}getLanguage(){return this.language}getModal(){return this.modal}getModalLocation(){return this.modalLocation}wasModalOpenedWithKeyboard(){return this.modalDevice==="keyboard"}getModalStartingError(){return""}getSomethingWentWrongText(){return this.s("frontpage-error-something-went-wrong-try-again-later")}allowSignInWithApple(){return!0}parseJSONErrors(t){return Pk(t)}isMaintenanceMode(){return this.maintenance}getDispatcher(){return this.dispatcher}shouldShowTopBanner(){return!1}};var{If:x1}=bn.Components;function w1(e){var t=cm(),r=Yg(e,t);window.Calc=r,r.focusFirstExpression();var n=r.controller;df(function(c){var l=n.stateStack;l&&l.serializeForBugsnag&&(c.metaData.states=l.serializeForBugsnag())}),n.dispatch({type:"update-language",language:ts}),ee(document.documentElement).on("keydown",function(c){c.target.closest(".dcg-calc-matrix-main-wrapper")||r.view&&r.view.handleRootKeydown(c)});var a=function(){var c=n.getInvertedColors();document.body.classList.toggle("dcg-inverted-colors",c);var l=n.getBackgroundColor();da(document.body,{background:l}),da(e,{borderColor:l})};return r.settings.observeAndSync("invertedColors",a),r.settings.observeAndSync("backgroundColor",a),n}var ts=Xs();function _k(e){ts=e,Rv(xh)}var bh=new Cc({showLanguagePicker:!0,allowAllLanguages:!0,limitSignupRole:"student",showNotice:!1}),xh=class extends bn.Class{init(){bh.onEventEmitted=t=>{t==="changeLang"&&this.calcController&&(ts=bh.getLanguage(),this.calcController.dispatch({type:"update-language",language:ts})),this.update()}}template(){return bn.createElement("div",null,bn.createElement(x1,{predicate:()=>window.platform==="www"},()=>bn.createElement(vu,{controller:this.const(bh),helpLink:this.const("https://help.desmos.com/hc/en-us/articles/4404851938445-Matrix-Calculator"),showPrintIcon:this.const(!1)})),bn.createElement("div",{id:bn.const("main"),class:bn.const("dcg-matrix-container"),didMount:this.bindFn(this.onCalcContainerMounted)}))}onCalcContainerMounted(t){this.calcController=w1(t)}};Ed(ts).then(function(){return _k(ts)},function(){return _k("en")});window.Desmos.MathQuill=Na;})();